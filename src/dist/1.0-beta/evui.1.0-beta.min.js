EVUI={};$evui={};EVUI.Modules={};EVUI.Modules.Binding={};EVUI.Modules.Binding.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),DomTree:Object.freeze({version:"1.0",required:!0}),Diff:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0}),Dom:Object.freeze({version:"1.0",required:!0}),Observers:Object.freeze({version:"1.0",required:!0}),Http:Object.freeze({version:"1.0",required:!1})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Binding.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumerable:!0})}();Object.freeze(EVUI.Modules.Binding.Dependencies);EVUI.Modules.Binding.Constants={};EVUI.Modules.Binding.Constants.Attr_HtmlContentKey="evui-binder-html-key";EVUI.Modules.Binding.Constants.Attr_HtmlContentUrl="evui-binder-html-src";EVUI.Modules.Binding.Constants.Attr_BoundObj="evui-binder-source";EVUI.Modules.Binding.Constants.Attr_Mode="evui-binder-mode";EVUI.Modules.Binding.Constants.Attr_BindingTemplateName="evui-binder-template-name";EVUI.Modules.Binding.Constants.Event_OnBind="evui.binder.bind";EVUI.Modules.Binding.Constants.Event_OnSetHtmlContent="evui.binder.get.htmlContent";EVUI.Modules.Binding.Constants.Event_OnSetBindings="evui.binder.get.bindings";EVUI.Modules.Binding.Constants.Event_OnBindHtmlContent="evui.binder.bind.htmlContent";EVUI.Modules.Binding.Constants.Event_OnBindChildren="evui.binder.bind.children";EVUI.Modules.Binding.Constants.Event_OnBoundChildren="evui.binder.bound.children";EVUI.Modules.Binding.Constants.Event_OnBound="evui.binder.bound";EVUI.Modules.Binding.Constants.Fn_BindingCallback=function(){};EVUI.Modules.Binding.Constants.Fn_SearchBindings=function(){};EVUI.Modules.Binding.Constants.Fn_SearchHtmlContent=function(){};EVUI.Modules.Binding.Constants.Fn_SearchBindingTemplates=function(){};EVUI.Modules.Binding.Constants.Fn_BindingEventHandler=function(){};Object.freeze(EVUI.Modules.Binding.Constants);EVUI.Modules.Binding.BindingController=function(n){var tt,si;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Binding.Dependencies);var r=this,ci=0,li=/[+^?.*$(){}|\[\]\\]/g,tu=0,iu=0,ru=0,uu=0,fu=0,ut={},ft=25,eu="@eventui&"+EVUI.Modules.Core.Utils.makeGuid()+"&",e=EVUI.Modules.Core.Utils.getHashCode(EVUI.Modules.Core.Utils.makeGuid()).toString(36).replace(".",""),wt=e.length,bt=new EVUI.Modules.EventStream.BubblingEventManager,o={numBatches:0,batchIds:[],finalBatchTimeoutId:-1},kt=[],h=[],v=[],c=[],k={},t=n;this.getHtmlContent=function(n,t){var r=typeof n,u,i;if(r!=="string"&&r!=="function")throw Error("String or function expected.");var e=h.length,o=h.slice(),f=[];for(u=0;u<e;u++)if(i=o[u],r==="string"){if(i.item.key===n)return i.item}else if(n(i.item)===!0){if(t===!0)return i.item;f.push(i.item)}return r==="function"&&t!==!0?f:null};this.addHtmlContent=function(n,t,i){var r=le(n,t,i);return r.item};this.removeHtmlContent=function(n){return typeof n=="object"&&(n=n.key),ae(n)};this.bind=function(n,t,i){if(n==null)throw Error("String or Object expected.");typeof t=="function"&&typeof i!="function"&&(i=t,t=null);typeof i!="function"&&(i=function(){});var r=it(n);if(r==null)throw Error("Failed to resolve binding.");t==null&&(t=n);gt(r,t,null,i)};this.bindAsync=function(n,t){return new Promise(function(i){r.bind(n,t,function(n){i(n)})})};this.addBindingTemplate=function(n){var i,t,n;if(n==null||typeof n!="object")throw Error("Object expected.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.templateName)===!0)throw Error("BindingTemplate name must be a non-whitespace string.");if(i=nt(n.templateName),i!=null)throw Error('A BindingTemplate with the name "'+n.templateName+'" already exists.');return t=new yo,t.templateName=n.templateName,n=b(n,null,t),v.push(n),n};this.removeBindingTemplate=function(n){var t,i;return n==null?!1:(typeof n=="object"&&(n=n.templateName),t=nt(n),t!=null&&(i=v.indexOf(t),i!==-1))?(v.splice(x,1),!0):!1};this.getBindingTemplate=function(n,t){var r=typeof n,u,i;if(r!=="string"&&r!=="function")throw Error("String or function expected.");var e=v.length,o=v.slice(),f=[];for(u=0;u<e;u++)if(i=o[u],r==="string"){if(i.templateName===n)return i}else if(n(i)===!0){if(t===!0)return i;f.push(i)}return r==="function"&&t!==!0?f:null};this.addEventListener=function(n,t,i){return bt.addEventListener(n,t,i)};this.removeEventListener=function(n,t){return bt.removeEventListener(n,t)};this.onBind=null;this.onSetHtmlContent=null;this.onSetBindings=null;this.onBindHtmlContent=null;this.onBindChildren=null;this.onChildrenBound=null;this.onBound=null;var ou=function(){(t==null||typeof t!="object")&&(t=new EVUI.Modules.Binding.BindingControllerServices);(t.diffController==null||typeof t.diffController!="object")&&(t.diffController=EVUI.Modules.Diff.Comparer);(t.domTreeConverter==null||typeof t.domTreeConverter!="object")&&(t.domTreeConverter=EVUI.Modules.DomTree.Converter);(t.httpManager==null||typeof t.httpManager!="object")&&Object.defineProperty(t,"httpManager",{get:function(){return EVUI.Modules.Http.Http},configurable:!1,enumerable:!0})},y=function(n){var i,r,t;if(n.disposing===!0)return!1;for(n.disposing=!0,n.completionState=EVUI.Modules.Binding.BindingCompletionState.Disposed,i=n.currentState.childBindingHandles.length,r=0;i>0;)t=n.currentState.childBindingHandles[r],(t.disposing===!0||y(t)===!0)&&(i--,t.disposing===!0&&r++);return n.progressState===EVUI.Modules.Binding.BindingProgressStateFlags.Idle?(dt(n),!0):!1},dt=function(n){var u,t,i,r;if(n.disposing!==!1){for(n.oldState=null,n.pendingState=null,u=n.currentState.boundContent!=null?n.currentState.boundContent.length:0,t=0;t<u;t++)i=n.currentState.boundContent[t],i.isConnected===!0&&i.remove();n.currentState.parentBindingHandle!=null&&(r=n.currentState.parentBindingHandle.currentState.childBindingHandles.indexOf(n),r!==-1&&n.currentState.parentBindingHandle.currentState.childBindingHandles.splice(r,1),EVUI.Modules.Core.Utils.isArray(n.currentState.parentBindingHandle.currentState.source)===!1&&n.currentState.element.remove());ai(n);n.dispatchHandles=[];n.newStateBound=!1;n.oldStateBound=!1;n.progressState=EVUI.Modules.Binding.BindingProgressStateFlags.Idle;n.templateName=null;n.currentState=new a;n.disposing=!1}},ai=function(n){for(var i=n.dispatchHandles.length,t=0;t<i;t++)n.dispatchHandles[t].dispose()},gt=function(n,t,i,r){var v=typeof t,w=typeof r,f=new EVUI.Modules.Binding.BindArgs,e=n.currentState,s=n.currentState,a,u,o,p;if(v==="function")typeof r!="function"&&(r=t);else if(v==="object"&&t!=null)if(EVUI.Modules.Core.Utils.instanceOf(t,EVUI.Modules.Binding.BindArgs)===!1){var h=t.source!=null?t.source:t.bindingSource,y=t.element!=null?t.element:t.bindingTarget,l=t.bindingContext;y===undefined&&h===undefined&&l===undefined?f.bindingSource=t:(h!==undefined&&(f.bindingSource=h),a=at(y),a!=null&&(f.bindingTarget=a),l!==undefined&&(f.bindingContext=l));f.bindingContext=t.bindingContext}else f=EVUI.Modules.Core.Utils.shallowExtend(f,t);n.pendingState!=null&&n.pendingState.elementSet===!0&&(e=n.pendingState);n.pendingState!=null&&n.pendingState.sourceSet===!0&&(s=n.pendingState);f.bindingTarget==null&&(e===n.currentState&&e.element==null&&e.elementSet===!1?n.oldState!=null&&n.oldState.elementSet===!0&&(f.bindingTarget=n.oldState.element):f.bindingTarget=e.element);f.bindingSource==null&&(s===n.currentState&&e.source==null&&e.sourceSet===!1?n.oldState!=null&&n.oldState.sourceSet===!0&&(f.bindingSource=n.oldState.source):f.bindingSource=s.source);w!=="function"&&(r=function(){});u=new br;u.bindingArgs=f;u.bindingHandle=n;u.parentSession=i;u.sessionMode=tt.Bind;i!=null?(i.childSessions.push(u),i.bindingHandle.oldStateBound===!1&&(u.maintainCurrentState=!0),i.context!=null&&(i.bindingHandle.binding.options.shareContextMode===EVUI.Modules.Binding.ShareContextMode.Clone?u.context=typeof i.context=="object"?EVUI.Modules.Core.Utils.shallowExtend(u.context,i.context):i.context:i.bindingHandle.binding.options.shareContextMode===EVUI.Modules.Binding.ShareContextMode.ShareReference&&(u.context=i.context))):u.context=u.bindingArgs.bindingContext;o=new kr;o.session=u;o.callback=r;o.id=ci++;u.callbacks.push(o);bi(u);p=c.push(u);ni(u,null,p-1)},vi=function(n,t,i,r){var u,f,e;typeof t=="function"&&r==null&&(r=t,t=null);typeof r!="function"&&(r=function(){});u=new br;u.bindingArgs=new EVUI.Modules.Binding.BindArgs;u.bindingArgs.bindingSource=n.pendingState!=null&&n.pendingState.sourceSet===!0?n.pendingState.source:n.currentState.source;u.bindingArgs.bindingTarget=n.pendingState!=null&&n.pendingState.elementSet===!0?n.pendingState.element:n.currentState.element;t!=null&&typeof t=="object"&&(t.bindingSource===undefined&&t.bindingContext===undefined?u.bindingArgs.bindingSource=t:(t.bindingSource!==undefined&&(u.bindingArgs.bindingSource=t.bindingSource),t.bindingContext!==undefined&&(u.bindingArgs.bindingContext=t.bindingContext)));u.bindingHandle=n;u.parentSession=i;u.sessionMode=tt.Update;u.bindingHandle.canceledDuringReBind===!0&&(u.sessionMode=tt.Bind);i!=null?(i.childSessions.push(u),i.bindingHandle.oldStateBound===!1&&(u.maintainCurrentState=!0),i.context!=null&&(i.bindingHandle.binding.options.shareContextMode===EVUI.Modules.Binding.ShareContextMode.Clone?u.context=typeof i.context=="object"?EVUI.Modules.Core.Utils.shallowExtend(u.context,i.context):i.context:i.bindingHandle.binding.options.shareContextMode===EVUI.Modules.Binding.ShareContextMode.ShareReference&&(u.context=i.context))):u.context=u.bindingArgs.bindingContext;f=new kr;f.session=u;f.callback=r;f.id=ci++;u.callbacks.push(f);bi(u);e=c.push(u);ni(u,null,e-1)},ni=function(n,t,i,r){var s=null,h,e,u,f,l;return s=t==null?c:t.childSessionQueue,h=s.length,e=function(n){var t,i;if(delete o[n.id],o.numBatches--,t=n.getNextChildBatch(),t==null||t.sessions.length===0){for(i=n;i.parentBatch!=null;)if(i=i.parentBatch,t=i.getNextChildBatch(),t!=null&&t.numSessions>0)break;if((t==null||t.numSessions===0)&&(t=yi()),t==null||t.numSessions===0)return}o[t.id]=t;o.numBatches++;t.execute(e)},h>ft&&(t!=null||o.numBatches===0)?(u=null,t==null?(s.splice(0,ft),u=yi()):u=t.getNextChildBatch(),o[u.id]=u,o.numBatches++,o.finalBatchTimeoutId!==-1&&clearTimeout(o.finalBatchTimeoutId),u.execute(e)):o.numBatches>0?n.parentSession!=null?(f=o[n.parentSession.batchId],f!=null)?(typeof i=="number"&&r!==!0&&c.splice(i,1),n.batchId===-1&&r!==!0)?(l=f.childSessionQueue.push(n),o.finalBatchTimeoutId===-1&&(o.finalBatchTimeoutId=setTimeout(function(){o.finalBatchTimeoutId=-1;e(f)})),ni(n,f,l-1,!0)):void 0:void 0:ti(n):ti(n)},yi=function(){var n=new pt;return n.sessions=c.splice(0,ft),n.numSessions=n.sessions.length,n},su=function(n){for(var i,r,u=[],f=n.batchId<0?c:o[n.batchId].sessions,e=f.length,t=0;t<e;t++)i=f[t],i.sessionId!==n.sessionId&&(r=hu(n,i),r!=null&&u.push(r));return u},hu=function(n,t){var i=null,r=yt.None;return(t.bindingHandle.id===n.bindingHandle.id&&(r|=yt.SameBinding),n.bindingArgs.bindingTarget!=null&&n.bindingArgs.bindingTarget===t.bindingArgs.bindingTarget&&pi(n,t)===!1&&pi(t,n)===!1&&(r|=yt.SameElement),r>0)?(i=new eo,i.session=t,i.flags=r,i):null},pi=function(n,t){if(n.parentSession!=null){if(n.parentSession.isArray===!1||n.parentSession.bindingHandle.oldStateBound===!1||n.parentSession.bindingHandle.oldState.childBindingHandles.length===0)return!1;if(n.parentSession.bindingHandle.oldState.childBindingHandles[0].id===t.bindingHandle.id)return!0}else if(n.isArray===!0){if(n.bindingHandle.oldStateBound===!1||n.bindingHandle.oldState.childBindingHandles.length===0)return!1;if(n.bindingHandle.oldState.childBindingHandles[0].id===t.bindingHandle.id)return!0}return!1},cu=function(n){var t,i;if(n.maintainCurrentState===!0){n.isArray=EVUI.Modules.Core.Utils.isArray(n.bindingHandle.currentState.source);n.maintainCurrentState=!1;return}t=new a;n.bindingHandle.pendingState!=null?(i=n.bindingHandle.pendingState,i.normalizedPath!=null&&(t.normalizedPath=i.normalizedPath),i.parentBindingHandle!=null&&(t.parentBindingHandle=i.parentBindingHandle),i.parentBindingKey!=null&&(t.parentBindingKey=i.parentBindingKey),i.parentBindingPath!=null&&(t.parentBindingPath=i.parentBindingPath)):n.bindingHandle.currentState!=null&&n.bindingHandle.newStateBound===!0&&(EVUI.Modules.Core.Utils.shallowExtend(t,n.bindingHandle.currentState,["stateId","boundContent","boundProperties","childBindingHandles","sourceSet","htmlContentSet","elementSet","sourceObserver","element"]),n.bindingHandle.currentState.boundContent!=null&&(t.boundContent=n.bindingHandle.currentState.boundContent.slice()),n.bindingHandle.currentState.boundProperties!=null&&(t.boundProperties=n.bindingHandle.currentState.boundProperties.slice()));t.element=n.bindingArgs.bindingTarget;t.source=n.bindingArgs.bindingSource;t.htmlContent=n.bindingHandle.pendingState!=null&&n.bindingHandle.pendingState.htmlContentSet===!0?n.bindingHandle.pendingState.htmlContent:n.bindingHandle.currentState.htmlContentSet===!0?n.bindingHandle.currentState.htmlContent:n.bindingHandle.oldState!=null&&n.bindingHandle.oldState.htmlContentSet===!0?n.bindingHandle.oldState.htmlContent:n.bindingHandle.currentState.htmlContent;n.rollbackState=n.bindingHandle.oldState;n.rollbackPendingState=n.bindingHandle.pendingState;n.rollbackStateBound=n.bindingHandle.oldStateBound;n.bindingHandle.oldState=n.bindingHandle.currentState;n.bindingHandle.currentState=t;n.bindingHandle.pendingState=null;n.bindingHandle.oldStateBound=n.bindingHandle.newStateBound;n.bindingHandle.newStateBound=!1;n.isArray=EVUI.Modules.Core.Utils.isArray(t.source);n.parentSession!=null&&(n.bindingHandle.currentState.parentBindingHandle=n.parentSession.bindingHandle);n.bindingHandle.completionState=EVUI.Modules.Binding.BindingCompletionState.Executing},wi=function(n){var u,f,r,t,i,e;if(EVUI.Modules.Core.Utils.hasFlag(n.bindingHandle.progressState,EVUI.Modules.Binding.BindingProgressStateFlags.Injected)!==!0&&(n.bindingHandle.oldState!=null&&(n.bindingHandle.currentState=n.bindingHandle.oldState,n.bindingHandle.newStateBound=n.bindingHandle.oldStateBound),n.rollbackState!=null&&(n.bindingHandle.oldState=n.rollbackState,n.bindingHandle.oldStateBound=!0),n.bindingHandle.pendingState=n.rollbackPendingState,EVUI.Modules.Core.Utils.hasFlag(n.bindingHandle.progressState,EVUI.Modules.Binding.BindingProgressStateFlags.GotHtmlContent)===!0&&n.shouldReBind===!0&&(n.bindingHandle.canceledDuringReBind=!0),EVUI.Modules.Core.Utils.hasFlag(n.bindingHandle.progressState,EVUI.Modules.Binding.BindingProgressStateFlags.GotBoundProperties)===!0))for(u=n.bindingHandle.dispatchHandles.length,f=n.rollbackDispatchHandles.length,r=0;r<f;r++)for(t=n.rollbackDispatchHandles[r],k[t.hashKey]=t,i=0;i<u;i++)if(e=n.bindingHandle.dispatchHandles[i],e.hashKey===t.hashKey){n.bindingHandle.dispatchHandles[i]=t;break}},ti=function(n){var r,u,f,i,t;for(n.bindingHandle.progressState=EVUI.Modules.Binding.BindingProgressStateFlags.Queued,n.bindingHandle.completionState=EVUI.Modules.Binding.BindingCompletionState.Queued,n.bindingArgs.bindingTarget=at(n.bindingArgs.bindingTarget),typeof n.bindingArgs.bindingTarget=="string"&&(r=null,r=n.bindingHandle.binding.parentBinding!=null&&n.bindingHandle.options.scopedCSSSelectors!==!1?new EVUI.Modules.Dom.DomHelper(n.bindingArgs.bindingTarget,n.bindingHandle.binding.parentBinding.boundContentFragment):new EVUI.Modules.Dom.DomHelper(n.bindingArgs.bindingTarget),n.bindingArgs.bindingTarget=r.elements[0]),u=su(n),f=u.length,i=0;i<f;i++)t=u[i],t.session.cancel===!1&&(n.callbacks=t.session.callbacks.concat(n.callbacks),t.session.cancel=!0,t.session.callbacks=[]);n.eventStream.execute()},bi=function(n){n.eventStream=new EVUI.Modules.EventStream.EventStream;n.eventStream.eventState=n.context;n.eventStream.bubblingEvents=bt;n.eventStream.context=n.bindingHandle.binding;n.eventStream.processInjectedEventArgs=function(t){var i=new EVUI.Modules.Binding.BinderEventArgs(n);return i.cancel=t.cancel,i.context=t.state,i.key=t.key,i.pause=t.pause,i.resume=t.resume,i.stopPropagation=t.stopPropagation,i};n.eventStream.processReturnedEventArgs=function(t){n.eventStream.eventState=t.context};n.eventStream.onCancel=function(){n.bindingHandle.completionState=EVUI.Modules.Binding.BindingCompletionState.Canceled;wi(n);ii(n);n.eventStream.seek("finishBinding")};n.eventStream.onError=function(){n.bindingHandle.completionState=EVUI.Modules.Binding.BindingCompletionState.Failed;wi(n);ii(n);n.eventStream.seek("finishBinding")};lu(n);au(n);yu(n);wu(n);ku(n);gu(n);tf(n);rf(n);ff(n)},lu=function(n){n.bindingHandle.currentState.parentBindingHandle!=null&&n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents===!0?n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnBind,"bindBegin",function(t){ki(n,t)}):(n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnBind,"bindBegin",function(t){ki(n,t)}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBind,"onBind",function(t){if(u(n,t)!==!1&&typeof n.bindingHandle.binding.onBind=="function"){t.reBinding=n.bindingHandle.newStateBound;t.reBinding===!0&&(t.originalContent=n.bindingHandle.currentState!=null&&n.bindingHandle.currentState.boundContent!=null?n.bindingHandle.currentState.boundContent.slice():null,t.originalSource=n.bindingHandle.currentState!=null?n.bindingHandle.currentState.source:null);return n.bindingHandle.binding.onBind(t)}}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBind,"onBind",function(t){if(u(n,t)!==!1&&typeof r.onBind=="function"){t.reBinding=n.bindingHandle.newStateBound;t.reBinding===!0&&(t.originalContent=n.bindingHandle.currentState!=null&&n.bindingHandle.currentState.boundContent!=null?n.bindingHandle.currentState.boundContent.slice():null,t.originalSource=n.bindingHandle.currentState!=null?n.bindingHandle.currentState.source:null);return r.onBind(t)}}))},ki=function(n,t){if(n.cancel===!0||n.bindingHandle.disposing===!0)return t.cancel();if(cu(n),u(n,t)==!1)return t.resolve();if(n.bindingHandle.currentState.source==null){var i="Parent object path: "+(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.bindingHandle.currentState.parentBindingPath)===!0?"root.":"root."+n.bindingHandle.currentState.parentBindingPath+".");return y(n.bindingHandle),t.reject("Cannot bind a null reference. "+i)}t.resolve()},au=function(n){(n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnSetHtmlContent,"getHtmlContent",function(t){vu(n,t)}),n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&(n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnSetHtmlContent,"onSetHtmlContent",function(t){if(u(n,t)!==!1&&typeof n.bindingHandle.binding.onSetHtmlContent=="function")return n.bindingHandle.binding.onSetHtmlContent(t)}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnSetHtmlContent,"onSetHtmlContent",function(t){if(u(n,t)!==!1&&typeof r.onSetHtmlContent=="function")return r.onSetHtmlContent(t)}))},vu=function(n,t){if(u(n,t)==!1)return t.resolve();ur(n,function(i){EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)===!1&&(n.bindingHandle.currentState.htmlContent=i);t.resolve()})},yu=function(n){(n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnSetBindings,"getBindings",function(t){pu(n,t)}),n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&(n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnSetBindings,"onSetBindings",function(t){if(u(n,t)!==!1&&typeof n.bindingHandle.binding.onSetBindings=="function")return n.bindingHandle.binding.onSetBindings(t)}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnSetHtmlContent,"onSetBindings",function(t){if(u(n,t)!==!1&&typeof r.onSetBindings=="function")return r.onSetBindings(t)}))},pu=function(n,t){if(u(n,t)==!1)return t.resolve();if(n.bindingHandle.progressState|=EVUI.Modules.Binding.BindingProgressStateFlags.GotHtmlContent,n.bindingHandle.oldStateBound===!0&&(n.shouldReBind=gf(n),n.shouldReBind===!1))return n.bindingHandle.currentState.sourceObserver=n.bindingHandle.oldState.source===n.bindingHandle.currentState.source&&n.bindingHandle.oldStateBound===!1?d(n):n.bindingHandle.oldState.source===n.bindingHandle.currentState.source?n.bindingHandle.oldState.sourceObserver:d(n),n.bindingHandle.oldState.boundProperties!=null&&(n.bindingHandle.currentState.boundProperties=n.bindingHandle.oldState.boundProperties.map(function(n){var t=new EVUI.Modules.Binding.BoundProperty(n.path);return t.value=n.value,t}),n.originalBoundProps=n.bindingHandle.oldState.boundProperties),t.resolve();df(n,function(i){i==null?t.reject("Failed to get boundProperties due to a failure to get valid htmlContent."):(n.originalBoundProps=i,n.bindingHandle.currentState.boundProperties=i.map(function(n){var t=new EVUI.Modules.Binding.BoundProperty(n.path);return t.value=n.value,t}),t.resolve())})},wu=function(n){(n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnBindHtmlContent,"bindHtmlContent",function(t){bu(n,t)}),n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&(n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBindHtmlContent,"onBindHtmlContent",function(t){if(u(n,t)!==!1&&typeof n.bindingHandle.binding.onBindHtmlContent=="function")return n.bindingHandle.binding.onBindHtmlContent(t)}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBindHtmlContent,"onBindHtmlContent",function(t){if(u(n,t)!==!1&&typeof r.onBindHtmlContent=="function")return r.onBindHtmlContent(t)}))},bu=function(n,i){var f,r,e,o;if(u(n,i)==!1)return i.resolve();n.bindingHandle.progressState|=EVUI.Modules.Binding.BindingProgressStateFlags.GotBoundProperties;f=ht(n);n.bindingHandle.currentState.boundProperties=ne(n,f);f===!1?n.bindingHandle.oldStateBound===!0&&n.shouldReBind===!1?(n.bindingHandle.currentState.mergedHtmlContent=n.bindingHandle.oldState.mergedHtmlContent,n.bindingHandle.currentState.boundContentTree=n.bindingHandle.oldState.boundContentTree):(r=n.bindingHandle.htmlContent,r==null&&(r=n.bindingHandle.currentState.htmlContent),e=pe(r),o=de(n,n.bindingHandle.currentState.htmlContent,n.bindingHandle.currentState.boundProperties,e),n.bindingHandle.currentState.mergedHtmlContent=o,n.bindingHandle.currentState.boundContentTree=kf(n,o,e)):n.bindingHandle.oldStateBound===!0&&n.shouldReBind===!1?(n.bindingHandle.currentState.mergedHtmlContent=n.bindingHandle.oldState.htmlContent,n.bindingHandle.currentState.boundContentTree=n.bindingHandle.oldState.boundContentTree):(n.bindingHandle.currentState.mergedHtmlContent=n.bindingHandle.currentState.htmlContent,n.bindingHandle.currentState.boundContentTree=t.domTreeConverter.toDomTreeElement(document.createDocumentFragment()));i.resolve()},ku=function(n){(n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnBindChildren,"bindChildren",function(t){du(n,t)}),(n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&n.bindingHandle.options.recursive===!0)&&(n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBindChildren,"onBindChildren",function(t){if(u(n,t)!==!1&&typeof n.bindingHandle.binding.onBindChildren=="function")return n.bindingHandle.binding.onBindChildren(t)}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBindChildren,"onBindChildren",function(t){if(u(n,t)!==!1&&typeof r.onBindChildren=="function")return r.onBindChildren(t)}))},du=function(n,t){var i,r;if(u(n,t)==!1||(n.bindingHandle.progressState|=EVUI.Modules.Binding.BindingProgressStateFlags.BoundHtmlContent,n.bindingHandle.options.recursive!==!0))return t.resolve();i=ht(n);n.bindingHandle.oldStateBound===!0&&i===!1?re(n):i===!0?n.bindingHandle.oldStateBound===!1?n.bindingHandle.currentState.childBindingHandles=ie(n):ue(n):(r=ei(n),n.bindingHandle.currentState.childBindingHandles=fe(n,r));t.resolve()},gu=function(n){n.eventStream.addJob("evui.binder.process.children","processChildren",function(t){nf(n,t)})},nf=function(n,t){var f,e,o,r,s,h,i;if(u(n,t)==!1||(n.bindingHandle.progressState|=EVUI.Modules.Binding.BindingProgressStateFlags.GotChildren|EVUI.Modules.Binding.BindingProgressStateFlags.BindingChildren,f=ee(n),e=f.length,n.bindingHandle.currentState.childBindingHandles=f,e===0))return t.resolve();if(n.sessionMode===tt.Update){if(o=se(n),r=o.length,r===0)return t.resolve();for(s=[],h=function(n){var i=s.push(n);if(i===r)return t.resolve()},i=0;i<r;i++)vi(o[i],null,n,function(n){h(n)})}else{var s=[],h=function(n){var i=s.push(n);if(i===e)return t.resolve()},c=n.bindingHandle.currentState.childBindingHandles.length;for(i=0;i<c;i++)gt(n.bindingHandle.currentState.childBindingHandles[i],null,n,function(n){h(n)})}},tf=function(n){(n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBindChildren,"onChildrenBound",function(t){if((n.bindingHandle.progressState|=EVUI.Modules.Binding.BindingProgressStateFlags.BoundChildren,u(n,t)!==!1)&&n.bindingHandle.currentState.childBindingHandles.length!==0&&(n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&n.bindingHandle.options.recursive===!0&&typeof n.bindingHandle.binding.onChildrenBound=="function")return n.bindingHandle.binding.onChildrenBound(t)}),(n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&n.bindingHandle.options.recursive===!0)&&n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBindChildren,"onChildrenBound",function(t){if(u(n,t)!==!1&&n.bindingHandle.currentState.childBindingHandles.length!==0&&typeof r.onChildrenBound=="function")return r.onChildrenBound(t)})},rf=function(n){(n.eventStream.addJob(EVUI.Modules.Binding.Constants.Event_OnBound,"inject",function(t){uf(n,t)}),n.bindingHandle.currentState.parentBindingHandle==null||n.bindingHandle.currentState.parentBindingHandle.options.suppressChildEvents!==!0)&&(n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBound,"onBound",function(t){if(n.cancel===!0||n.bindingHandle.disposing===!0)return t.cancel();if(typeof n.bindingHandle.binding.onBound=="function")return n.bindingHandle.binding.onBound(t)}),n.eventStream.addEvent(EVUI.Modules.Binding.Constants.Event_OnBound,"onBound",function(t){if(n.cancel===!0||n.bindingHandle.disposing===!0)return t.cancel();if(typeof r.onBound=="function")return r.onBound(t)}))},uf=function(n,t){if(u(n,t)==!1)return t.resolve();sf(n);ir(n.bindingHandle.currentState.boundContentTree);n.bindingHandle.progressState|=EVUI.Modules.Binding.BindingProgressStateFlags.Injected;n.bindingHandle.newStateBound=!0;t.resolve()},ff=function(n){n.eventStream.addJob("finishBinding","finishBinding",function(t){ef(n,t)})},ef=function(n,t){var u=[],o=function(n){var t=function(){var t=n.session.batchId===-1?c.indexOf(n.session):-1;return t!==-1&&c.splice(t,1),n.session.bindingHandle.progressState=EVUI.Modules.Binding.BindingProgressStateFlags.Idle,n.session.bindingHandle.completionState===EVUI.Modules.Binding.BindingCompletionState.Executing&&(n.session.bindingHandle.completionState=EVUI.Modules.Binding.BindingCompletionState.Success),n.session.bindingHandle.disposing===!0&&dt(n.session.bindingHandle),n.callback(n.session.bindingHandle.binding)};u.push(t)},e,i,f,r;for(n.callbacks.sort(function(n,t){return n.id-t.id}),e=n.callbacks.length,i=0;i<e;i++)o(n.callbacks[i]);if(u.length===0)return f=n.batchId===-1?c.indexOf(n):-1,f!==-1&&c.splice(f,1),n.bindingHandle.progressState=EVUI.Modules.Binding.BindingProgressStateFlags.Idle,n.bindingHandle.completionState===EVUI.Modules.Binding.BindingCompletionState.Executing&&(n.bindingHandle.completionState=EVUI.Modules.Binding.BindingCompletionState.Success),n.bindingHandle.disposing===!0&&dt(n.bindingHandle),di(n),t.resolve();r=new EVUI.Modules.Core.AsyncSequenceExecutionArgs;r.forceCompletion=!0;r.functions=u;EVUI.Modules.Core.AsyncSequenceExecutor.execute(r,function(){di(n);t.resolve()})},u=function(n,t){var i=n.eventStream.isWorking();if(n.cancel===!0||n.bindingHandle.disposing===!0)return n.bindingHandle.disposing===!0&&(n.cancel=!0),i===!0&&(t!=null?t.cancel():n.eventStream.cancel()),!1;if(n.bindingHandle.currentState.parentBindingHandle!=null&&ce(n)&&i===!0)throw Error("Child Binding's source was a circular reference to one of its parent Binding's sources.");return!0},ii=function(n){for(var t,r=n.childSessions,i=0;i<r;i++)t=n.childSessions[i],t.cancel=!0,t.childSessions.length>0&&ii(t)},di=function(n){n.cancel!==!0&&(n.bindingHandle.oldState=null,n.bindingHandle.pendingState=null,n.bindingHandle.currentState.boundContentFragment=null)},sf=function(n){var u=n.bindingHandle.binding.insertionMode,r=n.bindingHandle.binding.bindingMode,t;if(r===EVUI.Modules.Binding.BindingMode.Merge)n.bindingHandle.oldStateBound===!0?n.shouldReBind===!0?(gi(n),EVUI.Modules.Core.Utils.isOrphanedNode(n.bindingHandle.oldState.element)===!1&&(n.bindingHandle.currentState.element=n.bindingHandle.oldState.element)):(n.bindingHandle.currentState.boundContent=n.bindingHandle.currentState.childBindingHandles.length===0?n.bindingHandle.oldState.boundContent.slice():n.isArray===!0?et(n):n.bindingHandle.oldState.boundContent.slice(),EVUI.Modules.Core.Utils.isOrphanedNode(n.bindingHandle.oldState.element)===!1&&(n.bindingHandle.currentState.element=n.bindingHandle.oldState.element)):n.isArray===!0?n.bindingHandle.currentState.boundContent=et(n):(n.bindingHandle.currentState.boundContentFragment==null&&(n.bindingHandle.currentState.boundContentFragment=s(n.bindingHandle.currentState.boundContentTree)),t=tr(n.bindingHandle.currentState.boundContentFragment),n.bindingHandle.currentState.element==null?st(n,n.bindingHandle.currentState.boundContentFragment):i(n,u,n.bindingHandle.currentState.element,n.bindingHandle.currentState.boundContentFragment),n.bindingHandle.currentState.boundContent=t);else if(r===EVUI.Modules.Binding.BindingMode.Overwrite)n.isArray===!0?n.bindingHandle.currentState.boundContent=et(n):n.bindingHandle.oldStateBound===!0&&n.bindingHandle.currentState.childBindingHandles.length>0?gi(n):(n.bindingHandle.currentState.boundContentFragment==null&&(n.bindingHandle.currentState.boundContentFragment=n.bindingHandle.currentState.boundContentTree.toNode()),t=tr(n.bindingHandle.currentState.boundContentFragment),n.bindingHandle.currentState.element==null?st(n,n.bindingHandle.currentState.boundContentFragment):i(n,u,n.bindingHandle.currentState.element,n.bindingHandle.currentState.boundContentFragment),n.bindingHandle.currentState.boundContent=t);else throw Error('Unrecognized bindingMode: "'+r+'".');cf(n)},i=function(n,t,i,r){var f=r.childNodes.length>0?r.lastChild:r,u;n.lastInsertedNode=f;switch(t){case EVUI.Modules.Binding.BindingInsertionMode.Append:case EVUI.Modules.Binding.BindingInsertionMode.Default:i.append(r);break;case EVUI.Modules.Binding.BindingInsertionMode.Prepend:i.prepend(r);break;case EVUI.Modules.Binding.BindingInsertionMode.Fragment:i.append(r);return;case EVUI.Modules.Binding.BindingInsertionMode.InsertAfter:i.after(r);break;case EVUI.Modules.Binding.BindingInsertionMode.InsertBefore:i.before(r);break;case EVUI.Modules.Binding.BindingInsertionMode.ReplaceChildren:i.innerHTML=null;i.append(r);break;case EVUI.Modules.Binding.BindingInsertionMode.Shadow:u=sparentNode.shadowRoot;u==null&&(u=sparentNode.attachShadow({mode:"open"}));u.append(r);break;default:throw Error('Invalid insertionMode: "'+t+'"');}},gi=function(n){var u,h,f,c,o,l,s,e,i,r;if(n.isArray===!1){if(u=null,n.bindingHandle.currentState.boundContentFragment!=null)for(h=n.bindingHandle.currentState.boundContentFragment.childNodes.length,u=[],i=0;i<h;i++)u.push(t.domTreeConverter.toDomTreeElement(n.bindingHandle.currentState.boundContentFragment.childNodes[i],{includeNodeReferences:!0}));else u=n.bindingHandle.currentState.boundContentTree.content.slice();if(f=[],n.bindingHandle.oldState!=null&&n.bindingHandle.oldState.boundContent!=null&&n.bindingHandle.oldState.source===n.bindingHandle.currentState.source){for(c=n.bindingHandle.oldState.boundContent.length,i=0;i<c;i++)(o=n.bindingHandle.oldState.boundContent[i],EVUI.Modules.Core.Utils.isOrphanedNode(o)!==!0)&&f.push(t.domTreeConverter.toDomTreeElement(o,{includeNodeReferences:!0}));n.bindingHandle.oldState.childBindingHandles.length>0&&hf(n,f,u)}for(l=u.length,EVUI.Modules.DomTree.DomTreeElement[EVUI.Modules.Core.Constants.Symbol_ObjectProperties]==null&&(EVUI.Modules.Core.Utils.cacheProperties(new EVUI.Modules.DomTree.DomTreeElement),EVUI.Modules.Core.Utils.cacheProperties(new EVUI.Modules.DomTree.DomTreeElementAttribute)),s=t.diffController.compare(f,u,{compareValuesOnly:!0}),lf(n,s),e=[],i=0;i<l;i++)r=s.rootComparison.childComparisons[i],r.a!=null&&r.a.node!=null&&r.a.node.isConnected===!0?e.push(r.a.node):r.b!=null&&r.b.node!=null&&(r.b.node.isConnected===!0||r.a==null)&&e.push(r.b.node);n.bindingHandle.currentState.boundContent=e}else n.bindingHandle.currentState.boundContent=et(n)},hf=function(n,t,i){var h=new EVUI.Modules.DomTree.DomTreeElement,c,l,f,u,e,tt,o,v,it,rt,r,y,p;h.content=t;c=new EVUI.Modules.DomTree.DomTreeElement;c.content=i;var w=[],b=[],k={},s=[],l=n.bindingHandle.oldState.childBindingHandles.length;for(u=0;u<l;u++)f=n.bindingHandle.oldState.childBindingHandles[u],w.push(f.currentState.parentBindingPath),(f.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.InsertAfter||f.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.InsertBefore)&&f.oldState!=null&&(k[f.currentState.parentBindingPath]=!0,s.push(f));for(l=n.bindingHandle.currentState.childBindingHandles.length,u=0;u<l;u++)f=n.bindingHandle.currentState.childBindingHandles[u],b.push(f.currentState.parentBindingPath);var d=nr(n,h,w),a=nr(n,c,b),g=s.length,ut=d.length,nt=a.length;for(u=0;u<ut;u++)if(e=d[u],tt=k[e.path],tt===!0){for(o=null,r=0;r<g;r++)if(v=s[r],v.oldState.parentBindingPath===e.path){o=v;s.splice(r,1);g--;break}if(o==null||o.oldState.boundContent==null)continue;for(it=o.oldState.boundContent.length,r=0;r<it;r++)rt=o.oldState.boundContent[r],h.search(function(n){var i,t,r;if(EVUI.Modules.Core.Utils.isArray(n.content)===!0)for(i=n.content,t=0;t<i;t++)if(r=n.content[t],r.node===rt)return n.content.splice(t,1),!0},!0)}else for(r=0;r<nt;r++)if(y=a[r],y.path===e.path){found=!0;p=y.tree.clone();e.tree.content=p.content;e.tree.shadow=p.shadow;a.splice(r,1);nt--;break}},nr=function(n,t,i){var r=[],u=t.search(function(n){var f,t,u;if(n.attrs!=null)for(f=n.attrs.length,t=0;t<f;t++)if(u=n.attrs[t],u.key===EVUI.Modules.Binding.Constants.Attr_BoundObj)return i.indexOf(u.val)!==-1?(r.push({path:u.val,tree:n}),!0):!1});return r},et=function(n){for(var t,r,o,a,u,s,h=[],c=!1,f=null,e=null,l=n.bindingHandle.currentState.childBindingHandles.length,i=0;i<l;i++){if(t=n.bindingHandle.currentState.childBindingHandles[i],r=t.currentState.element==null||t.currentState.element.isConnected===!1||t.currentState.element===n.bindingHandle.currentState.element,i===0&&r===!0?(t.currentState.element=n.bindingHandle.currentState.element,r=!1):c===!0&&f!=null?f.currentState.element=e:r===!1&&i>0&&(o=n.bindingHandle.currentState.childBindingHandles[i-1],t.currentState.element!==o.currentState.boundContent[o.currentState.boundContent.length-1]&&(r=!0)),t.currentState.boundContent!=null){for(a=t.currentState.boundContent.length,u=0;u<a;u++)s=t.currentState.boundContent[u],h.push(s);e=s}i===l-1&&r===!0&&(t.element=e);c=r;f=t}return h},tr=function(n){var i=[],r,t;if(n==null)return i;for(r=n.childNodes.length,t=0;t<r;t++)i.push(n.childNodes[t]);return i},po=function(n){var e,u,h,o,s,c,l,t,i,r,f;if(n.bindingHandle.oldStateBound!==!1&&(e=n.bindingHandle.oldState.childBindingHandles.slice(),u=e.length,n.observedDifferences!=null))if(EVUI.Modules.Core.Utils.isArray(n.observedDifferences)===!0){if(u===0)return;for(h=n.observedDifferences.length,t=0;t<h;t++)if(i=n.observedDifferences[t],i.type===EVUI.Modules.Observers.ObservedObjectChangeType.Removed)for(r=0;r<u;r++)if((f=e[r],f.currentState.source===i.originalValue)&&f.currentState.parentBindingKey===i.name){e.splice(r,1);u--;y(f);break}}else{if(o=n.observedDifferences.rootComparison.differences.length,u===0){for(s=!1,t=0;t<o;t++)if(i=n.observedDifferences.rootComparison.differences[t],EVUI.Modules.Core.Utils.hasFlag(i.flags,EVUI.Modules.Diff.DiffFlags.AOnly)===!1&&EVUI.Modules.Core.Utils.hasFlag(i.flags,EVUI.Modules.Diff.DiffFlags.BOnly)===!1){s=!0;break}if(s===!1)for(c=n.bindingHandle.oldState.boundContent.length,t=0;t<c;t++)l=n.bindingHandle.oldState.boundContent[t],l.remove();return}for(t=0;t<o;t++)if((i=n.observedDifferences.rootComparison.differences[t],i.a!=null||i.b==null||typeof i.b=="object")&&EVUI.Modules.Core.Utils.hasFlag(i.flags,EVUI.Modules.Diff.DiffFlags.AOnly)!==!0)for(r=0;r<u;r++)if(f=e[r],f.currentState.source===i.b){e.splice(r,1);u--;y(f);break}}},cf=function(n){var r,i,f,c,e,t,o;if(n.bindingHandle.oldState!=null){if(n.bindingHandle.oldStateBound===!1){if(n.bindingHandle.oldState.source!==n.bindingHandle.currentState.source&&n.bindingHandle.oldState.boundContent!=null)for(r=n.bindingHandle.oldState.boundContent.length,t=0;t<r;t++)n.bindingHandle.oldState.boundContent[t].remove();return}var s=n.bindingHandle.oldState.childBindingHandles.slice(),h=w(n,n.bindingHandle.currentState.childBindingHandles),u=n.bindingHandle.oldState.childBindingHandles.length;for(t=0;t<u;t++)if(i=s[t],f=h[i.currentState.normalizedPath],f==null){y(i);continue}if(n.bindingHandle.currentState.source!==n.bindingHandle.oldState.source&&(c=n.observedDifferences.rootComparison.differences.length,u===0)){for(e=n.bindingHandle.oldState.boundContent.length,t=0;t<e;t++)o=n.bindingHandle.oldState.boundContent[t],o.remove();return}}},lf=function(n,t){for(var s=t.rootComparison.differences.length,r=0;r<s;r++){var i=t.rootComparison.differences[r],u=g(i.a),f=g(i.b),e=u===!1?EVUI.Modules.Core.Utils.isArray(i.a):!1,o=f===!1?EVUI.Modules.Core.Utils.isArray(i.b):!1;(u!==!1||f!==!1||e!==!1||o!==!1)&&(u===!0||f===!0?ot(n,t,i):(e===!0||o===!0)&&ri(n,t,i,0))}},d=function(n){if(n.bindingHandle.currentState.parentBindingHandle!=null&&n.bindingHandle.currentState.parentBindingHandle.currentState.sourceObserver!=null){var t=n.bindingHandle.currentState.parentBindingHandle.currentState.sourceObserver.getChildObserver(n.bindingHandle.currentState.parentBindingKey,!0);if(t!=null)return t}return new EVUI.Modules.Observers.ObjectObserver(n.bindingHandle.currentState.source)},ri=function(n,t,i){for(var r,f=i.differences.length,u=0;u<f;u++)(r=i.differences[u],r.diffType===EVUI.Modules.Diff.DiffType.String||r.parentComparison==null||r.parentComparison.propName==="content")&&ot(n,t,r)},ot=function(n,t,r){var it=r.differences.length,b=null,e=null,p=null,nt=null,k=r.a,d=r.b,h=k==null?null:typeof k,c=d==null?null:typeof d,u,tt,v,y,a,w,l,o,f;if(h==="string"&&c==="string")u=fi(n,r),n.bindingHandle.binding.bindingMode===EVUI.Modules.Binding.BindingMode.Overwrite?parent.a.node.replaceWith(s(u.b)):u.a.node.textContent=u.b.content;else if(h==="string"||c==="string"){var u=fi(n,r),o=u.a.node,f=u.b.node;h==="string"?c==="object"?(f==null&&(f=s(u.b)),g(d)===!0?o.replaceWith(f):f.replaceWith(o)):c==null&&o.remove():c==="string"&&(h==="object"?(f==null&&(f=s(u.b)),g(k)===!0?f.replaceWith(o):o.replaceWith(f)):h==null&&f!=null&&f.remove())}else if((h==="object"||c==="object")&&h!==c)if(u=fi(n,r),u==null)for(u=r.parentComparison,tt=Math.max(u.a.length,u.b.length),v=0;v<tt;v++)y=u.a[v],a=u.b[v],y!=null&&a!=null?(s(a),y.node.replaceWith(a.node)):a==null?y.node.remove():y==null&&(s(a),st(n,a.node));else o=u.a.node,f=s(u.b),h==="object"?r.a.node.remove():c==="object"&&(o.lastChild==null?o.replaceWith(f):i(n,EVUI.Modules.Binding.BindingInsertionMode.InsertAfter,o.lastChild,s(r.b)));else if(h==="object"&&c==="object"){for(w=0;w<it;w++)if(l=r.differences[w],l.propName==="tagName"?b=l:l.propName==="content"?e=l:l.propName==="attrs"?p=l:l.propName==="shadow"&&(nt=l),b!=null&&e!=null&&p!=null&&nt!=null)break;b!=null||n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingMode.Overwrite?(o=r.a.node,f=s(r.b),o.replaceWith(f),n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingMode.Overwrite&&e!=null&&n.bindingHandle.currentState.childBindingHandles.length>0&&(e.differences.length===0||e.diffType===EVUI.Modules.Diff.DiffType.String?ot(n,t,e,0):ri(n,t,e,0))):(e!=null&&(e.differences.length===0||e.diffType===EVUI.Modules.Diff.DiffType.String?ot(n,t,e,0):ri(n,t,e,0)),p!=null&&af(n,t,p,r.a.node))}},af=function(n,t,i,r){for(var f=vf(i),c=vr(i.parentComparison.a.node),l=vr(s(i.parentComparison.b)),a=f.keys.length,e=0;e<a;e++){var u=f.keys[e],o=f.dictionary[u],h=yf(n,u,o.currentValue,o.newValue,c,l);(c.attributes[u]=h,l!=null&&h.value!==o.currentValue)&&r.setAttribute(u,h.value)}},vf=function(n){for(var t,i,r={},u=[],e=n.differences.length,f=0;f<e;f++)t=n.differences[f],t.a!=null&&(i=r[t.a.key],i==null&&(i={},r[t.a.key]=i,u.push(t.a.key)),i.currentValue=t.a.val),t.b!=null&&(i=r[t.b.key],i==null&&(i={},r[t.b.key]=i,u.push(t.b.key)),i.newValue=t.b.val);return{dictionary:r,keys:u}},yf=function(n,t,i,r,u,f){var ot=i,y=u!=null?u.getAttributeMetadata(t):null,k=f!=null?f.getAttributeMetadata(t):null,it,c,d,s,o;if(y==null||k==null||i===r||(i=i!=null?i.replace(/\s+/g," ").trim():"",r=r!=null?r.replace(/\s+/g," ").trim():"",i===r))return y;if(it=i===y.value,it===!0)return k;c=new gr;c.name=t;var g=wf(i,y.value,r),nt=bf(y,k),ft=g.keys.length,et=EVUI.Modules.Core.Utils.toDictionary(y.values,function(n){return n.value}),w=EVUI.Modules.Core.Utils.toDictionary(k.values,function(n){return n.value}),rt="",ut="",b={};for(d=0;d<ft;d++)if(s=g.keys[d],b[s]!==!0){b[s]=!0;var tt=g.dictionary[s],l=EVUI.Modules.Core.Utils.hasFlag(tt.flags,p.InCurrent),a=EVUI.Modules.Core.Utils.hasFlag(tt.flags,p.InOld),v=EVUI.Modules.Core.Utils.hasFlag(tt.flags,p.InNew),h=null,e=null;if(l===!0&&a===!0&&v===!0)h=s,e=w[s];else if(l===!0&&a===!0&&v===!1)if(o=nt[s],o!=null)c.containsBoundValues=!0,h=o.value,e=w[o.value],b[o.value]=!0;else continue;else if(l===!0&&a===!1&&v===!0)h=s,e=w[s];else if(l===!0&&a===!1&&v===!1)o=nt[s],o!=null?(c.containsBoundValues=!0,h=o.value,e=w[o.value],b[o.value]=!0):(h=s,e=et[s],e==null&&(e=new hi,e.tokenizedString=h,e.value=h,e.wasBound=!1));else if(l===!1&&a===!0&&v===!0)continue;else if(l===!1&&a===!0&v===!1)continue;else if(l===!1&&a===!1&&v===!0)o=nt[s],o!=null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(o.value)===!1&&(c.containsBoundValues=!0,h=o.value,e=w[o.value],b[o.value]=!0);else continue;h!=null&&(rt+=h+" ");e!=null&&(ut+=e.tokenizedString+" ",e=pf(e),c.values.push(e))}return c.tokenizedValue=ut.trim(),c.value=rt.trim(),c},pf=function(n){var t=new hi,f,i,u,r;for(t.tokenizedString=n.tokenizedString,t.value=n.value,t.wasBound=n.wasBound,f=n.boundValues.length,i=0;i<f;i++)u=n.boundValues[i],r=new nu,r.boundContent=u.boundContent,r.boundPath=u.boundPath,t.boundValues.push(r);return t},wf=function(n,t,i){for(var l,a,u,r,s=n.split(/\s+/),h=t.split(/\s+/),c=i.split(/\s+/),e={},o=[],v=s.length,f=0;f<v;f++)u=s[f],r=e[u],r==null&&(r=new ui,o.push(u),e[u]=r),r.flags|=p.InCurrent;for(l=h.length,f=0;f<l;f++)u=h[f],r=e[u],r==null&&(r=new ui,o.push(u),e[u]=r),r.flags|=p.InOld;for(a=c.length,f=0;f<a;f++)u=c[f],r=e[u],r==null&&(r=new ui,o.push(u),e[u]=r),r.flags|=p.InNew;return{dictionary:e,keys:o}},bf=function(n,t){var f={},h,i,r,u,e;if(n.containsBoundValues===!1||t.containsBoundValues===!1)return f;var o=EVUI.Modules.Core.Utils.toDictionary(n.values,function(n){if(n.wasBound!==!1)return n.tokenizedString}),s=EVUI.Modules.Core.Utils.toDictionary(t.values,function(n){if(n.wasBound!==!1)return n.tokenizedString}),c=n.values.length;for(i=0;i<c;i++)(r=n.values[i],r.wasBound!==!1)&&(u=o[r.tokenizedString],u!=null)&&f[u.value]==null&&(e=s[r.tokenizedString],f[u.value]=e);for(h=t.values.length,i=0;i<h;i++)(r=t.values[i],r.wasBound!==!1)&&(u=s[r.tokenizedString],u!=null)&&f[u.value]==null&&(e=o[r.tokenizedString],f[u.value]=e);return f},ui=function(){this.flags=p.None},p={None:0,InCurrent:1,InOld:2,InNew:4},wo=function(n,t){var r=n.bindingHandle.currentState.element,e;if(r!=null&&r.isConnected===!1&&n.bindingHandle.oldState!=null&&(r=n.bindingHandle.oldState.element),(r==null||r.isConnected===!1)&&n.parentSession!=null)if(e=n.parentSession.bindingHandle.currentState.childBindingHandles.length,e>0)if(r!=null)i(n,n.parentSession.bindingHandle.binding.insertionMode,n.parentSession.bindingHandle.currentState.element,r),i(n,n.bindingHandle.binding.insertionMode,r,t);else{for(var u=null,o=n.parentSession.isArray?parseInt(n.bindingHandle.currentState.parentBindingKey)-1:e-1,f=null;u==null&&o>=0;)f=n.parentSession.bindingHandle.currentState.childBindingHandles[o],u=f.currentState.boundContent==null?null:f.currentState.boundContent[f.currentState.boundContent.length-1],o--;u!=null?(u.after(t),(n.bindingHandle.currentState.element==null||n.bindingHandle.currentState.element.isConnected===!1)&&(n.bindingHandle.currentState.element=u)):(n.bindingHandle.currentState.element=n.parentSession.bindingHandle.currentState.element,i(n,n.bindingHandle.binding.insertionMode,n.bindingHandle.currentState.element,t))}else r!=null?i(n,n.parentSession.bindingHandle.binding.insertionMode,n.parentSession.bindingHandle.currentState.element,r):n.bindingHandle.currentState.element=n.parentSession.bindingHandle.currentState.element,i(n,n.bindingHandle.binding.insertionMode,r,t);else{if(n.lastInsertedNode!=null&&t.contains(n.lastInsertedNode))return;n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.InsertAfter||n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.InsertBefore?i(n,n.bindingHandle.binding.insertionMode,n.lastInsertedNode==null?n.bindingHandle.currentState.element:n.lastInsertedNode,t):n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.ReplaceChildren||n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.Shadow?n.lastInsertedNode!=null?i(n,n.bindingHandle.binding.insertionMode,r,t):n.bindingHandle.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.Shadow?i(n,EVUI.Modules.Binding.BindingInsertionMode.Append,r.shadowRoot,t):i(n,EVUI.Modules.Binding.BindingInsertionMode.Append,r,t):i(n,n.bindingHandle.binding.insertionMode,r,t)}},st=function(n,t){var l=n.bindingHandle.currentState.element,o,c,r,u;if(l==null)if(n.bindingHandle.currentState.parentBindingHandle!=null)if(r=n.bindingHandle.currentState.parentBindingHandle,o=r.currentState.childBindingHandles.length,o>0){for(var f=null,h=EVUI.Modules.Core.Utils.isArray(r.currentState.source)===!0?parseInt(n.bindingHandle.currentState.parentBindingKey)-1:o-1,e=null;f==null&&h>=0;)e=r.currentState.childBindingHandles[h],f=e.currentState.boundContent==null?null:e.currentState.boundContent[e.currentState.boundContent.length-1],h--;if(f!=null)f.after(t),(n.bindingHandle.currentState.element==null||n.bindingHandle.currentState.element.isConnected===!1)&&(n.bindingHandle.currentState.element=f);else{if(c=r.currentState.element,c==null)if(n.parentSession!=null)n.parentSession.bindingHandle.currentState.boundContentFragment==null&&(n.parentSession.bindingHandle.currentState.boundContentFragment=s(n.parentSession.bindingHandle.currentState.boundContentTree)),st(n.parentSession,n.parentSession.bindingHandle.currentState.boundContentFragment);else throw Error("Unresolvable parent element target in binding "+n.bindingHandle.id+".");else n.bindingHandle.currentState.element=c.isConnected===!1&&r.oldStateBound===!0&&r.oldState.element!=null&&r.oldState.element.isConnected===!0?r.oldState.element:r.currentState.element;n.bindingHandle.currentState.element!=null&&i(n,n.bindingHandle.binding.insertionMode,n.bindingHandle.currentState.element,t)}}else n.lastInsertedNode!=null?(n.bindingHandle.currentState.element=n.lastInsertedNode,i(n,n.bindingHandle.binding.insertionMode,n.bindingHandle.currentState.element,t)):(u=r.currentState.boundContent.length,u>0?(n.bindingHandle.currentState.element=r.currentState.boundContent[u-1],i(n,EVUI.Modules.Binding.BindingInsertionMode.InsertAfter,n.bindingHandle.currentState.element,t)):(n.bindingHandle.currentState.element=r.currentState.element,i(n,r.binding.insertionMode,n.bindingHandle.currentState.element,t)));else n.lastInsertedNode!=null?(n.bindingHandle.currentState.element=n.lastInsertedNode,i(n,n.bindingHandle.binding.insertionMode,n.bindingHandle.currentState.element,t)):(r=n.bindingHandle.currentState.parentBindingHandle,r!=null?(u=n.bindingHandle.currentState.boundContent.length,u>0?(n.bindingHandle.currentState.element=r.currentState.boundContent[u-1],i(n,EVUI.Modules.Binding.BindingInsertionMode.InsertAfter,n.bindingHandle.currentState.element,t)):(n.bindingHandle.currentState.element=r.currentState.element,i(n,r.binding.insertionMode,n.bindingHandle.currentState.element,t))):i(n,n.bindingHandle.binding.insertionMode,n.bindingHandle.currentState.element,t));else i(n,n.bindingHandle.binding.insertionMode,n.bindingHandle.currentState.element,t)},g=function(n){return n!=null&&typeof n.type=="number"&&typeof n.tagName=="string"?!0:!1},fi=function(n,t){if(g(t.a)===!0||g(t.b)===!0){var i=t.parentComparison;return i.parentComparison==null?null:i.parentComparison}return t.parentComparison},s=function(n){var t=n.toNode();return rr(n),t},kf=function(n,i){var u=t.domTreeConverter.htmlToDomTree(i),o,f,r;for(u==null&&(u=t.domTreeConverter.toDomTreeElement(document.createTextNode(""))),n.boundPropertyDictionary={},o=n.bindingHandle.currentState.boundProperties.length,f=0;f<o;f++)r=n.bindingHandle.currentState.boundProperties[f],n.boundPropertyDictionary[r.path]=typeof r.value=="function"?{value:"$evui.dispatch(event, '"+yr(n,r)+"'"}:{value:r.value};return u.search(function(t){var i=we(n,t);i!=null&&(t[e]=i)}),u},ir=function(n){var i,t;if(n!=null&&(n.node=undefined,n.content!=null&&typeof n.content!="string"))for(i=n.content.length,t=0;t<i;t++)ir(n.content[t])},rr=function(n){var i,r,u,t;if(n!=null&&(i=n.node,i!=null)&&(r=n[e],r!=null)&&(i[e]=r,n.content!=null&&typeof n.content!="string"))for(u=n.content.length,t=0;t<u;t++)rr(n.content[t])},ur=function(n,t){if(typeof t!="function"&&(t=function(){}),typeof n.bindingHandle.currentState.htmlContent=="object"&&n.bindingHandle.currentState.htmlContent!=null)return EVUI.Modules.Core.Utils.isElement(n.bindingHandle.currentState.htmlContent)===!0?t(n.bindingHandle.currentState.htmlContent.outerHTML):te(n,n.bindingHandle.currentState.htmlContent,function(n){t(n)});if(typeof n.bindingHandle.currentState.htmlContent=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.bindingHandle.currentState.htmlContent)===!1){var i=lt(n.bindingHandle.currentState.htmlContent);return i!=null?(n.bindingHandle.htmlContent=i,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i.content)===!0&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i.url)===!1?cr(n,i,function(n){return t(n)}):t(n.bindingHandle.htmlContent.content)):t(n.bindingHandle.currentState.htmlContent)}return t(null)},df=function(n,t){if(n.bindingHandle.currentState.htmlContentSet===!0)ur(n,function(i){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)===!0)return t(null);n.bindingHandle.currentState.htmlContent=i;var r=fr(n);n.bindingHandle.currentState.sourceObserver==null&&(n.bindingHandle.currentState.sourceObserver=n.bindingHandle.oldStateBound===!0&&n.bindingHandle.currentState.source===n.bindingHandle.oldState.source&&n.bindingHandle.oldState.sourceObserver!=null?n.bindingHandle.oldState.sourceObserver:d(n));t(er(n,r))});else{if(n.bindingHandle.currentState.htmlContent!=null&&typeof n.bindingHandle.currentState.htmlContent=="object"&&(n.bindingHandle.currentState.htmlContent=n.bindingHandle.currentState.htmlContent.content),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.bindingHandle.currentState.htmlContent)===!0)return t(null);n.bindingHandle.currentState.sourceObserver==null&&(n.bindingHandle.currentState.sourceObserver=n.bindingHandle.oldStateBound===!0&&n.bindingHandle.currentState.source===n.bindingHandle.oldState.source&&n.bindingHandle.oldState.sourceObserver!=null?n.bindingHandle.oldState.sourceObserver:d(n));var i=null;return n.parentSession!=null&&n.parentSession.isArray===!0&&n.parentSession.bindingHandle.currentState.boundProperties!=null&&n.parentSession.bindingHandle.currentState.htmlContent===n.bindingHandle.currentState.htmlContent?t(n.parentSession.bindingHandle.currentState.boundProperties.map(function(n){return new EVUI.Modules.Binding.BoundProperty(n.path)})):(i=fr(n),t(er(n,i)))}},bo=function(n,t){var f,i,u,e,r,o;if(t=t.slice(),f=n.length,i=t.length,f!==i)return!0;for(u=0;u<f;u++)for(e=n[u],r=0;r<i;r++)if(o=t[r],o.path===e.path&&o.value===e.value){i--;t.splice(r,1);break}return i>0?!0:!1},gf=function(n){var r,u,i,f;if(n.bindingHandle.oldState.source===n.bindingHandle.currentState.source){if(n.bindingHandle.currentState.sourceObserver==null&&(n.bindingHandle.currentState.sourceObserver=n.bindingHandle.oldStateBound===!0&&n.bindingHandle.oldState.sourceObserver!=null?n.bindingHandle.oldState.sourceObserver:d(n)),n.bindingHandle.oldState.childBindingHandles.length>0?n.oldStateDictionary=n.bindingHandle.currentState.sourceObserver.getObservedProperties():n.parentSession!=null&&n.parentSession.oldStateDictionary!=null&&(n.oldStateDictionary=n.parentSession.oldStateDictionary.getChild(n.bindingHandle.currentState.parentBindingKey)),n.observedDifferences=n.observedDifferences!=null?n.observedDifferences:n.bindingHandle.currentState.sourceObserver.getChanges(!0),n.bindingHandle.canceledDuringReBind===!0)return n.bindingHandle.canceledDuringReBind=!1,!0;if(n.oldStateDictionary!=null&&n.parentSession!=null&&n.oldStateDictionary.haveChildrenChanged()===!0||n.bindingHandle.oldState.htmlContent!==n.bindingHandle.currentState.htmlContent)return!0;if(r=n.observedDifferences.length,r===0)return!1;for(u=!1,i=0;i<r;i++)if(f=n.observedDifferences[i],f.hostObject===n.bindingHandle.currentState.source){u=!0;break}if(u===!1)return!1}else return(n.bindingHandle.currentState.sourceObserver==null&&(n.bindingHandle.currentState.sourceObserver=d(n),n.bindingHandle.oldState.childBindingHandles.length>0?n.oldStateDictionary=n.bindingHandle.currentState.sourceObserver.getObservedProperties():n.parentSession!=null&&n.parentSession.oldStateDictionary!=null&&(n.oldStateDictionary=n.parentSession.oldStateDictionary.getChild(n.bindingHandle.currentState.parentBindingKey))),n.observedDifferences=n.observedDifferences!=null?n.observedDifferences:t.diffController.compare(n.bindingHandle.currentState.source,n.bindingHandle.oldState.source),n.bindingHandle.canceledDuringReBind===!0)?(n.bindingHandle.canceledDuringReBind=!1,!0):!0;return n.bindingHandle.canceledDuringReBind=!1,!0},ht=function(n){return n.bindingHandle.options.enumerateArrays===!0&&n.isArray===!0?!0:!1},ne=function(n){for(var u,t,f,e=n.originalBoundProps,a=e.length,o={},s=n.bindingHandle.binding.getBoundProperties(),v=s.length,h=[],c={},i=0;i<a;i++)u=e[i],o[u.path]=u;for(i=0;i<v;i++)if(t=s[i],t!=null&&!EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.path)){var l=o[t.path],r=c[t.path],y=r==null;r==null&&(r=new EVUI.Modules.Binding.BoundProperty(t.path));r.value=t.value;l!=null&&t.value===l.value&&n.isArray===!1&&(f=n.isArray===!0?null:EVUI.Modules.Core.Utils.getValue(t.path,n.bindingHandle.currentState.source),t.value!==f&&(r.value=f));y===!0&&(c[t.path]=r,h.push(r))}return h},fr=function(n){var t=[];return n.bindingHandle.htmlContent!=null&&n.bindingHandle.htmlContent.content===n.bindingHandle.currentState.htmlContent?n.bindingHandle.htmlContent.needsRecalcuation===!1&&n.bindingHandle.htmlContent.tokenMappings!=null?t=n.bindingHandle.htmlContent.tokenMappings:(t=oi(n.bindingHandle.htmlContent.content),n.bindingHandle.htmlContent.needsRecalcuation=!1,n.bindingHandle.htmlContent.tokenMappings=t):t=oi(n.bindingHandle.currentState.htmlContent),t},er=function(n,t){for(var i,u,f=[],e=ht(n),o=t.length,r=0;r<o;r++){if(i=t[r],u=new EVUI.Modules.Binding.BoundProperty(i.path),e===!1||n.bindingHandle.currentState.parentBinding!=null&&i.value!==undefined)try{u.value=EVUI.Modules.Core.Utils.getValue(i.path,n.bindingHandle.currentState.source)}catch(s){EVUI.Modules.Core.Utils.log(s)}f.push(u)}return f},te=function(n,t,i){var e,r,o,u,f;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.content)===!1)return n.bindingHandle.htmlContent=lt(t.key),i(t.content);if(e=!1,r=null,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.key)===!1)r=lt(t.key);else if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.url)===!1)for(o=h.length,u=0;u<o;u++)if(f=h[u],f.url===t.url&&f.ignoreUrl===!1){r=f;break}return(r==null&&(r=new pr,r.key=t.key,r.url=t.url,e=!0),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.content)===!1)?i(r.content):EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.url)===!1?(e===!0&&n.bindingHandle.options.addMissingHtmlContent!==!1&&(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.key)===!0&&(r.key=EVUI.Modules.Core.Utils.makeGuid()),h.push(r),n.bindingHandle.htmlContent=r),cr(n,r,function(n){i(n)})):i(null)},ei=function(n){var o=[],u,h,i,f,r,t,e;if(n.bindingHandle.currentState.boundContentFragment!=null)for(u=new EVUI.Modules.Dom.DomHelper("["+EVUI.Modules.Binding.Constants.Attr_BoundObj+"]",n.bindingHandle.currentState.boundContentFragment),h=u.elements.length,i=0;i<h;i++)(f=u.elements[i],r=f.getAttribute(EVUI.Modules.Binding.Constants.Attr_BoundObj),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)!==!0)&&(t=new so,t.element=f,t.path=r,t.source=EVUI.Modules.Core.Utils.getValue(r,n.bindingHandle.currentState.source),o.push(t));else if(n.bindingHandle.currentState.boundContentTree!=null&&n.bindingHandle.currentState.mergedHtmlContent.indexOf(EVUI.Modules.Binding.Constants.Attr_BoundObj)!==-1&&(e=n.bindingHandle.currentState.boundContentTree.search(function(n){var i,t,r;if(n.attrs==null)return!1;for(i=n.attrs.length,t=0;t<i;t++)if(r=n.attrs[t],r.key===EVUI.Modules.Binding.Constants.Attr_BoundObj)return!0},!0),e!=null&&e.length>0&&(n.bindingHandle.currentState.boundContentFragment=s(n.bindingHandle.currentState.boundContentTree),n.bindingHandle.currentState.boundContentFragment!=null)))return ei(n);return o},ie=function(n){var u,e,i,t;if(n.parentSession!=null&&n.parentSession.isArray===!0&&n.bindingHandle.currentState.element==null)return[];for(u=[],e=n.bindingHandle.currentState.source.length,i=0;i<e;i++){var o=i.toString(),r=new EVUI.Modules.Binding.BindArgs,f=n.bindingHandle.binding.insertionMode;(f===EVUI.Modules.Binding.BindingInsertionMode.Default&&(f=i===0?EVUI.Modules.Binding.BindingInsertionMode.Default:EVUI.Modules.Binding.BindingInsertionMode.InsertAfter),r.bindingSource=n.bindingHandle.currentState.source[i],r.templateName=n.bindingHandle.templateName,r.htmlContent=n.bindingHandle.htmlContent!=null?n.bindingHandle.htmlContent.key:n.bindingHandle.currentState.htmlContent,r.bindingMode=n.bindingHandle.binding.bindingMode,r.insertionMode=f,t=it(r,n.bindingHandle),t!=null)&&(t.currentState.parentBindingHandle=n.bindingHandle,t.currentState.parentBindingPath=o,t.currentState.parentBindingKey=o,t.currentState.boundProperties=n.bindingHandle.currentState.boundProperties.map(function(n){var t=new EVUI.Modules.Binding.BoundProperty(n.path);return t.value=n.value,t}),u.push(t))}return u},re=function(n){var e=ei(n),o=e.length,t,i;if(o!==0){var s=w(n,n.bindingHandle.oldState.childBindingHandles),h=w(n,n.bindingHandle.oldState.childBindingHandles),r=n.bindingHandle.oldState.childBindingHandles.length,c=n.bindingHandle.oldState.childBindingHandles.slice(),u={},l=sr(n,n.bindingHandle.oldState.childBindingHandles);for(i=0;i<r;i++)u[i]=i;for(t={},t.pathDic=s,t.unfoundPathDic=h,t.numChildren=r,t.childBindings=c,t.numOldChildren=r,t.remainingIndexes=u,t.indexKeys=Object.keys(u),t.numKeys=t.indexKeys.length,t.makeNewKeys=!1,t.hashDic=l,i=0;i<o;i++){var f=e[i],a=f.path,v=f.source,y=f.element;or(n,t,a,v,y)}ct(n,n.bindingHandle.oldState.childBindingHandles);ct(n,n.bindingHandle.currentState.childBindingHandles)}},ue=function(n){for(var t,f,e,o=w(n,n.bindingHandle.oldState.childBindingHandles),s=w(n,n.bindingHandle.oldState.childBindingHandles),h=n.bindingHandle.currentState.source.length,r=n.bindingHandle.oldState.childBindingHandles.length,c=n.bindingHandle.oldState.childBindingHandles.slice(),u={},l=sr(n,n.bindingHandle.oldState.childBindingHandles),i=0;i<r;i++)u[i]=i;for(t={},t.pathDic=o,t.unfoundPathDic=s,t.numChildren=r,t.childBindings=c,t.numOldChildren=r,t.remainingIndexes=u,t.indexKeys=Object.keys(u),t.numKeys=t.indexKeys.length,t.makeNewKeys=!1,t.hashDic=l,i=0;i<h;i++)f=i.toString(),e=n.bindingHandle.currentState.source[i],or(n,t,f,e);ct(n,n.bindingHandle.oldState.childBindingHandles);ct(n,n.bindingHandle.currentState.childBindingHandles)},or=function(n,t,i,r,u){var y=!1,s=l(t.pathDic,vt(i)),o=s!=null?s.getNextUnprocessedBinding():null,p,c,h,w,f,b,v;if(o!=null&&(o.processed=!0),o==null||o.binding.currentState.source!==r&&n.bindingHandle.currentState.source===n.bindingHandle.oldState.source){if(r!=null&&(p=r[e],p!=null&&(s=t.hashDic[p],s!=null)))for(c=0;c<s.numBindings;c++)if((h=s.bindings[c],h.processed!==!0)&&h.binding.currentState.source===r){h.processed=!0;o=h.binding;y=!0;break}}else if(o==null||o.binding.currentState.source!==r&&n.bindingHandle.currentState.source!==n.bindingHandle.oldState.source){if(r!=null&&(p=r[e],p!=null&&(s=t.hashDic[p],s!=null)))for(c=0;c<s.numBindings;c++)if((h=s.bindings[c],h.processed!==!0)&&h.binding.currentState.source===r){h.processed=!0;o=h.binding;y=!0;break}}else o!=null&&o.binding.currentState.source===r&&(y=!0);y===!0&&o!=null&&o.index!==undefined&&(o=o.binding);y===!0&&(o.pendingState==null&&(o.pendingState=new a),o.pendingState.parentBindingPath=i,o.pendingState.parentBindingKey=i,o.pendingState.parentBindingHandle=o.currentState.parentBindingHandle,o.pendingState.normalizedPath=o.pendingState.getNormalizedPath(),o.pendingState.htmlContent=n.bindingHandle.htmlContent!=null&&n.bindingHandle.htmlContent.content===o.currentState.htmlContent?n.bindingHandle.htmlContent.key:o.currentState.htmlContent,o.pendingState.htmlContentSet=!0,o.pendingState.source=r,o.pendingState.sourceSet=!0,u!=null&&(o.pendingState.element=u,o.pendingState.elementSet=!0),n.bindingHandle.currentState.childBindingHandles.push(o));y===!1&&(w=new EVUI.Modules.Binding.BindArgs,w.bindingSource=r,w.bindingTarget=u,w.templateName=n.bindingHandle.templateName,f=it(w,n.bindingHandle),f!=null&&(f.currentState.parentBindingKey=i,f.currentState.parentBindingPath=i,f.currentState.parentBindingHandle=n.bindingHandle,f.currentState.normalizedPath=f.currentState.getNormalizedPath(),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f.currentState.htmlContent)===!0&&(f.currentState.htmlContent=n.bindingHandle.htmlContent!=null&&n.bindingHandle.htmlContent.content===n.bindingHandle.currentState.htmlContent?n.bindingHandle.htmlContent.key:n.bindingHandle.currentState.htmlContent,f.currentState.htmlContentSet=!0),f.pendingState==null&&(f.pendingState=new a),f.pendingState.parentBindingPath=i,f.pendingState.parentBindingKey=i,f.pendingState.parentBindingHandle=f.currentState.parentBindingHandle,f.pendingState.normalizedPath=f.pendingState.getNormalizedPath(),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f.currentState.htmlContent)===!0&&(f.pendingState.htmlContent=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f.currentState.htmlContent)===!0&&n.bindingHandle.htmlContent!=null&&n.bindingHandle.htmlContent.content===f.currentState.htmlContent?n.bindingHandle.htmlContent.key:f.currentState.htmlContent,f.pendingState.htmlContentSet=!0),f.pendingState.source=r,f.pendingState.sourceSet=!0,(u==null||f.binding.insertionMode===EVUI.Modules.Binding.BindingInsertionMode.Default)&&(f.binding.insertionMode=f.currentState.parentBindingHandle!=null&&f.currentState.parentBindingHandle.binding.insertionMode!==EVUI.Modules.Binding.BindingInsertionMode.Default?f.currentState.parentBindingHandle.binding.insertionMode:EVUI.Modules.Binding.BindingInsertionMode.Default),b=l(t.unfoundPathDic,vt(i)),b!=null&&(v=b.getNextUnprocessedBinding(),v!=null&&(v.processed=!0,f.currentState.boundContent=v.binding.currentState.boundContent.slice(),f.currentState.source=v.binding.currentState.source,f.currentState.childBindingHandles=v.binding.currentState.childBindingHandles.slice(),f.newStateBound=v.binding.newStateBound,ai(v.binding))),n.bindingHandle.currentState.childBindingHandles.push(f)))},fe=function(n,t){for(var r,u,i,f,o=[],s=t.length,h=ht(n),e=0;e<s;e++)(r=t[e],u=new EVUI.Modules.Binding.BindArgs,u.bindingSource=r.source,u.bindingTarget=r.element,i=it(u,n.bindingHandle),i!=null)&&(i.currentState.parentBindingHandle=n.bindingHandle,i.currentState.parentBindingPath=r.path,f=EVUI.Modules.Core.Utils.getValuePathSegments(r.path),i.currentState.parentBindingKey=f.length===0?r.path:f[f.length-1],h===!0&&(i.currentState.boundProperties=n.bindingHandle.currentState.boundProperties.map(function(n){var t=new EVUI.Modules.Binding.BoundProperty(n.path);return t.value=n.value,t})),o.push(i));return o},ee=function(n){for(var i,u,f=[],e=n.bindingHandle.binding.getChildBindings(),c=e.length,o=n.bindingHandle.currentState.childBindingHandles,l=o.length,s={},t=0;t<l;t++)i=o[t],s[i.id]=i;for(t=0;t<c;t++){var h=e[t],r=null,i=s[h.id];i!=null&&(r=i);r==null&&(u=it(h,n.bindingHandle),u!=null&&(r=u));r!=null&&f.push(r)}return f},oe=function(n){var u=n.bindingHandle.binding.onBindHtmlContent,f=r.onBindHtmlContent,t=typeof u,i=typeof f;return t!=="function"&&i!=="function"?!1:n.parentSession!=null&&n.parentSession.bindingHandle.options.suppressChildEvents===!0?!1:t==="function"||i==="function"},se=function(n){var et=n.shouldReBind,w,nt,b,tt,h,t,v,k,p,i,s,ut,e,r,c,ft,u;if(et===!1&&n.bindingHandle.currentState.childBindingHandles.length===0)return[];if(n.bindingHandle.oldState==null)return n.bindingHandle.currentState.childBindingHandles;var l=he(n),d=Object.keys(l.modifiedPaths),g=d.length;if(g===0)return[];for(w=[],u=0;u<g;u++)for(t=l.modifiedPaths[d[u]],nt=t.length,i=0;i<nt;i++)w.push(t[i]);for(b=[],w.sort(function(n,t){return n.index-t.index}),tt=w.length,h=[],u=0;u<tt;u++)if(t=w[u],t.applied!==!0)if(t.bindingStructureChangeType===f.Added){h.push(t.binding);t.applied=!0;continue}else if(t.bindingStructureChangeType===f.Moved){var o=l.modifiedPaths[t.binding.oldState.normalizedPath][0],ot=o.binding.currentState.element,st=o.binding.currentState.boundContent[0];for(o.bindingStructureChangeType===f.Removed&&(o.binding.currentState.element=document.createElement("div"),o.applied=!0,b.push(o)),v=document.createElement("div"),st.after(v),k=document.createDocumentFragment(),p=t.binding.currentState.boundContent.length,i=0;i<p;i++)s=t.binding.currentState.boundContent[i],i===0&&s.before(v),k.append(s);v.replaceWith(k);t.binding.currentState.element=ot;t.applied=!0;h.push(t.binding)}else if(t.bindingStructureChangeType===f.Removed){b.push(t);t.applied=!0;continue}else if(t.bindingStructureChangeType===f.Shifted){t.contentsModified===!0&&h.push(t.binding);t.applied=!0;continue}else if(t.bindingStructureChangeType===f.Swapped){var ht=t.moveSwapTarget.currentState,o=l.modifiedPaths[ht.normalizedPath][0],v=document.createElement("div"),it=document.createElement("div"),k=document.createDocumentFragment(),rt=document.createDocumentFragment();if(t.binding.currentState.boundContent!=null)for(p=t.binding.currentState.boundContent.length,i=0;i<p;i++)s=t.binding.currentState.boundContent[i],i===0&&s.before(v),k.append(s);if(o!=null&&o.binding.currentState.boundContent!=null)for(p=t.moveSwapTarget.currentState.boundContent.length,i=0;i<p;i++)s=o.binding.currentState.boundContent[i],i===0&&s.before(it),rt.append(s);v.replaceWith(rt);it.replaceWith(k);o!=null&&(o.applied=!0,h.push(o.binding));h.push(t.binding);t.applied=!0;continue}else t.contentsModified===!0&&h.push(t.binding),t.applied=!0;for(ut=l.unchangedBindings.length,u=0;u<ut;u++)e=l.unchangedBindings[u],r=new a,r.boundContent=e.currentState.boundContent,r.boundProperties=e.currentState.boundProperties,r.boundContentFragment=e.currentState.boundContentFragment,r.boundTemplateContentClone=e.currentState.boundTemplateContentClone,r.boundContentTree=e.currentState.boundContentTree,r.childBindingHandles=e.currentState.childBindingHandles,c=e.pendingState,r.element=c.element,r.normalizedPath=c.normalizedPath,r.htmlContent=c.htmlContent,r.mergedHtmlContent=e.currentState.mergedHtmlContent,r.parentBindingHandle=c.parentBindingHandle,r.parentBindingKey=c.parentBindingKey,r.parentBindingPath=c.parentBindingPath,r.source=c.source,r.sourceObserver=e.currentState.sourceObserver,e.oldState=n.bindingHandle.currentState,e.currentState=r,e.pendingState=null,e.oldStateBound=n.bindingHandle.oldStateBound,e.newStateBound=!0;for(ft=b.length,u=0;u<ft;u++)y(b[u].binding);return h},l=function(n,t){for(var i=n[t],r;i==null;){if(r=t.lastIndexOf("."),r!==-1)t=t.substring(0,r);else break;i=n[t]}return i},w=function(n,t){for(var e,i,r,o,f={},s=t.length,u=0;u<s;u++)e=t[u],i=e.currentState,i.normalizedPath==null&&(i.normalizedPath=i.getNormalizedPath()),r=f[i.normalizedPath],r==null&&(r=new rt(i.normalizedPath),f[i.normalizedPath]=r),o=r.addBinding(e,u),o.stateToCheck=i;return f},sr=function(n,t){for(var i,r,u,s,o={},h=t.length,f=0;f<h;f++)i=t[f],r=i.currentState.source!=null?i.currentState.source[e]:null,r==null&&(r=Math.random(),i.currentState.source!=null&&(i.currentState.source[e]=r)),u=o[r],u==null&&(u=new rt(r),o[r]=u),s=u.addBinding(i,f),s.stateToCheck=i.currentState;return o},ct=function(n,t){for(var r,u=t.length,i=0;i<u;i++)r=t[i],r.currentState.source!=null&&delete r.currentState.source[e]},he=function(n){var y=new co,h,tt,ht,v,it,s,e,i,rt,ut,c,k,ft,ct,o,d,p,et,g,r,nt;y.isArray=n.isArray;var u=y.modifiedPaths,a=w(n,n.bindingHandle.currentState.childBindingHandles),b=w(n,n.bindingHandle.oldState.childBindingHandles),ot=oe(n)===!0?n.bindingHandle.currentState.sourceObserver.getChanges():[],st=EVUI.Modules.Core.Utils.isArray(n.observedDifferences)===!0?n.observedDifferences.concat(ot):ot,lt=st.length;for(o=0;o<lt;o++)if(h=st[o],h.type===EVUI.Modules.Observers.ObservedObjectChangeType.Added||h.type===EVUI.Modules.Observers.ObservedObjectChangeType.Changed||h.type===EVUI.Modules.Observers.ObservedObjectChangeType.Removed){if(e=h.path,e==null)continue;if(i=l(a,e),h.type===EVUI.Modules.Observers.ObservedObjectChangeType.Added){if(i==null)continue;u[i.normalizedPath]==null&&(u[i.normalizedPath]=i.makeChangeArray(f.Added))}else if(h.type===EVUI.Modules.Observers.ObservedObjectChangeType.Changed||h.type===EVUI.Modules.Observers.ObservedObjectChangeType.Removed){if(tt=!1,i==null&&(tt=!0,i=l(b,e)),i!=null&&tt===!0&&u[i.normalizedPath]==null){u[i.normalizedPath]=i.makeChangeArray(f.Removed);continue}if(i==null)continue;if(c=u[i.normalizedPath],c!=null){for(ht=c.length,r=0;r<ht;r++)v=c[r],v.contentsModified===!1&&v.bindingStructureChangeType!==f.Shifted&&v.bindingStructureChangeType!==f.Removed&&v.bindingStructureChangeType!==f.Swapped&&(v.contentsModified=!0);continue}u[i.normalizedPath]=i.makeChangeArray(function(t){return hr(n,t,a,b),t.bindingStructureChangeType})}}if(n.bindingHandle.oldState!=null&&n.bindingHandle.currentState.source!=n.bindingHandle.oldState.source)for(n.observedDifferences==null&&(n.observedDifferences=t.diffController.compare(n.bindingHandle.currentState.source,n.bindingHandle.oldState.source)),it=n.observedDifferences.rootComparison.differences,k=it.length,o=0;o<k;o++)if((s=it[o],e=s.getPath(),e!=null)&&(i=l(a,e),i!=null||(i=l(b,e),i!=null)))if(rt=s.a==null?"object":typeof s.a,ut=s.b==null?"object":typeof s.b,s.a!=null&&s.b!=null&&rt==="object"&&ut==="object"){if(c=u[e],c!=null){for(k=c.length,r=0;r<k;r++)c[r].contentsModified=!0;continue}u[e]=i.makeChangeArray(function(t){return hr(n,t,a,b),t.bindingStructureChangeType})}else if(ut==="object"&&s.a==null&&s.b!=null){if(i==null)continue;u[e]==null&&(u[e]=i.makeChangeArray(f.Removed))}else if(rt==="object"&&s.a!=null&&s.b==null){if(i==null)continue;u[e]==null&&(u[e]=i.makeChangeArray(f.Added))}for(ft=Object.keys(a),ct=ft.length,o=0;o<ct;o++)if(d=ft[o],p=u[d],p===undefined)for(et=l(a,d),r=0;r<et.numBindings;r++)y.unchangedBindings.push(et.bindings[r].binding);else for(g=p.length,r=0;r<g;r++)nt=p[r],nt.contentsModified===!1&&nt.bindingStructureChangeType===f.Shifted&&(y.unchangedBindings.push(nt.binding),p.splice(r,1),r--,g--,g===0&&delete u[d]);return y},hr=function(n,t,i,r){var e=t.binding.pendingState!=null?t.binding.pendingState:t.binding.oldState,o,u,h,s;if(e==null||e.parentBindingKey===t.binding.currentState.parentBindingKey){t.contentsModified=!0;return}if(e.parentBindingKey!==t.binding.currentState.parentBindingKey){if(e.source!==t.binding.currentState.source){t.contentsModified=!0;return}if(o=l(i,e.normalizedPath),o==null&&(o=l(r,e.normalizedPath)),o!=null){if(u=o.getNextUnprocessedBinding(),u==null){t.contentsModified===!1&&(s=n.oldStateDictionary.getChild(t.binding.currentState.parentBindingKey),t.contentsModified=s.haveChildrenChanged());return}u.processed=!0;t.moveSwapTarget=u.binding;h=u.binding.pendingState!=null?u.binding.pendingState:u.binding.oldState;h==null&&(h=u.stateToCheck);u.stateToCheck.parentBindingKey===e.parentBindingKey&&t.binding.currentState.parentBindingKey===h.parentBindingKey?t.bindingStructureChangeType=f.Swapped:(t.bindingStructureChangeType=n.isArray===!1?f.Moved:f.Shifted,t.contentsModified===!1&&(s=n.oldStateDictionary.getChild(t.binding.currentState.parentBindingKey),t.contentsModified=s.haveChildrenChanged()));return}}t.contentsModified=!0},ko=function(n){return n.parentSession!=null&&n.parentSession.isArray===!1&&n.bindingHandle.currentState.element!=null?n.parentSession.bindingHandle.currentState.boundContentFragment.contains(n.bindingHandle.currentState.element):!0},ce=function(n){for(var t=n.bindingHandle.currentState.parentBindingHandle,i=[];t!=null;){if(i.indexOf(t.currentState.source)!==-1)return!0;i.push(t.currentState.source);t=t.currentState.parentBindingHandle}return i.indexOf(n.bindingHandle.currentState.source)!==-1?!0:!1},cr=function(n,i,r){var u,f;if(i.failed===!0)return r(null);i.pending===!1?(u=function(n){for(i.pending=!1,i.failed===!1&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1?i.content=n:i.failed=!0,r(n);i.pendingCallbacks.length>0;){var t=i.pendingCallbacks.shift();t(n)}},EVUI.Modules.Core.Utils.require("Http",EVUI.Modules.Binding.Dependencies.Http.version),f=null,n.bindingHandle.binding.contentLoadSettings!=null?(f=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,n.bindingHandle.binding.contentLoadSettings.httpRequestArgs),f.url=i.url,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f.method)===!0&&(f.method="GET")):(f=new EVUI.Modules.Http.HttpRequestArgs,f.url=i.url,f.method="GET"),i.pending=!0,t.httpManager.executeRequest(f,function(n){var t,r;if(i.pending=!1,n==null)return i.failed=!0,u(null);if(n.success===!0){if(t=n.response,t==null)return u(null);if(typeof t=="string"&&n.xmlHttpRequest.responseType!=="json")return u(t);if(n.xmlHttpRequest.responseType==="json"){try{t=JSON.parse(t)}catch(f){t=null;EVUI.Modules.Core.Utils.log(f)}return typeof t=="string"?u(t):u(null)}if(EVUI.Modules.Core.Utils.instanceOf(t,Blob)===!0)i.pending=!0,EVUI.Modules.Core.Utils.blobToTextAsync(t).then(function(n){i.pending=!1;u(n)}).catch(function(n){i.pending=!1;EVUI.Modules.Core.Utils.log(n);u(null)});else if(EVUI.Modules.Core.Utils.instanceOf(t,ArrayBuffer)===!0){r=null;try{r=(new TextDecoder).decode(t)}catch(f){EVUI.Modules.Core.Utils.log(f)}u(r)}else return EVUI.Modules.Core.Utils.instanceOf(t,Node)===!0?EVUI.Modules.Core.Utils.isElement(t)===!0?u(t.outerHTML):EVUI.Modules.Core.Utils.instanceOf(t,Document)===!0?u(t.body.innerHtml):u(t.textContent):u(null)}else return n.error!=null&&n.error.exception!=null&&EVUI.Modules.Core.Utils.log(n.error.exception),u(null)})):i.pendingCallbacks.push(r)},le=function(n,t,i){var r={},f,u;if(n!=null&&typeof n=="object"?r=n:(r.key=n,r.content=t,r.url=i),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.key)===!0)throw Error("BindingHtmlContent must have a non-whitespace string key.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.content)===!0&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.url)===!0)throw Error("BindingHtmlContent must have either content or a url.");if(f=lt(r.key),f!=null)throw Error('BindingHtmlContent entry with the key "'+r.key+'" already exists.');else return u=new pr,u.key=r.key,u.content=r.content,u.url=r.url,u.item=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Binding.BindingHtmlContent(u),r,["key","content","url"]),h.push(u),u},ae=function(n){for(var i,r=h.length,t=0;t<r;t++)if(i=h[t],i.item.key===n)return h.splice(t,1),!0;return!1},lt=function(n){for(var i,r=h.length,t=0;t<r;t++)if(i=h[t],i.item.key===n)return i;return null},nt=function(n){var r,t,i;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return null;for(r=v.length,t=0;t<r;t++)if(i=v[t],i.templateName===n)return i;return null},b=function(n,t,i){var f=t!=null&&n.options==null&&t.options.shareOptions!==!1,e=t!=null&&n.contentLoadSettings==null&&t.options.shareContentLoadSettings!==!1,r=null,u=["id","source","context","bindProgressState","bindingSource","bindingTarget","bindingPath","element","getBoundProperties","boundContentFragment","parentBinding","parentBindingKey","getChildBindings","bind","bindAsync","dispose","getBoundContent","removeChildBinding","changeBoundPropertyValue"];return i==null?r=new EVUI.Modules.Binding.BindingTemplate:(r=new EVUI.Modules.Binding.BindingTemplate(i),u.push("templateName")),r=EVUI.Modules.Core.Utils.shallowExtend(r,n,u),r.options=f===!0?t.options:EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Binding.BindOptions,r.options),e===!0?r.contentLoadSettings=t.binding.contentLoadSettings:(r.contentLoadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Binding.BindingContentLoadSettings,r.contentLoadSettings),r.contentLoadSettings.httpRequestArgs!=null&&(r.contentLoadSettings.httpRequestArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,r.contentLoadSettings.httpRequestArgs),r.contentLoadSettings.httpRequestArgs.headers!=null&&(r.contentLoadSettings.httpRequestArgs.headers=r.contentLoadSettings.httpRequestArgs.headers.map(function(n){return new EVUI.Modules.Http.HttpRequestHeader(n.key,n.value)})))),r},ve=function(n){var f,o;if(EVUI.Modules.Core.Utils.isElement(n)===!1)return null;var r=ye(n),t={},s=r.sourcePath,u=r.mode,e=r.key,h=r.templateName,c=r.src;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)===!1&&(t.bindingPath=s),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u)===!1){var u=u.toLowerCase(),i=EVUI.Modules.Binding.BindingInsertionMode,l=[i.Append,i.Fragment,i.InsertAfter,i.InsertBefore,i.Prepend,i.ReplaceChildren,i.Shadow],a=l.length;for(f=0;f<a;f++)if(o=l[f],u.indexOf(o)!==-1){t.insertionMode=o;break}u.indexOf(EVUI.Modules.Binding.BindingMode.Merge)!==-1?t.bindingMode=EVUI.Modules.Binding.BindingMode.Merge:u.indexOf(EVUI.Modules.Binding.BindingMode.Overwrite)!==-1&&(t.bindingMode=EVUI.Modules.Binding.BindingMode.Overwrite)}return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(e)===!1&&(t.htmlContent=e),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(h)===!1&&(t.templateName=h),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(c)===!1&&(typeof t.htmlContent=="string"?(t.htmlContent={},t.htmlContent.key=e):t.htmlContent={},t.htmlContent.url=c),t},ye=function(n){if(n==null)return null;var i=EVUI.Modules.Core.Utils.getElementAttributes(n),t=new oo;return t.key=i.getValue(EVUI.Modules.Binding.Constants.Attr_HtmlContentKey),t.mode=i.getValue(EVUI.Modules.Binding.Constants.Attr_Mode),t.templateName=i.getValue(EVUI.Modules.Binding.Constants.Attr_BindingTemplateName),t.sourcePath=i.getValue(EVUI.Modules.Binding.Constants.Attr_BoundObj),t.src=i.getValue(EVUI.Modules.Binding.Constants.Attr_HtmlContentUrl),t},pe=function(n){var u,t,i,r;if(typeof n=="object")return(n.needsRecalcuation===!0||n.contentMetata==null)&&(n.contentMetata=lr(n.content)),n.contentMetata;for(u=kt.length,t=0;t<u;t++)if(i=kt[t],i.html===n)return i;return r=lr(n),kt.push(r),r},lr=function(n){var i=new vo,r;return i.html=n,r=t.domTreeConverter.htmlToDomTree(n),r.search(function(n){var s,t,f,o,h,r,u;if(n.attrs!=null)for(s=n.attrs.length,t=0;t<s;t++)if(f=n.attrs[t],f.val.indexOf("{{")!==-1)for(o=oi(f.val),h=o.length,r=0;r<h;r++)u=o[r],i.attributePaths[u.path]==null&&(i.attributePaths[u.path]=e+u.path+e)}),i},we=function(n,t){var p,s,w,h,r,i,c,u,f,o,d,l;if(typeof t.content=="string"&&(p=ar(t.content),t.content=p.content),s=new dr,t.attrs==null)return s;for(w=t.attrs.length,h=0;h<w;h++){r=t.attrs[h];i=new gr;i.name=r.key;var b=r.val.split(/\s+/),nt=r.key.toLowerCase(),g=b.length,e="",k="";for(c=0;c<g;c++){for(u=new hi,i.values.push(u),f=ar(b[c]),e+=" "+f.content,u.value=f.content,o=f.content,d=f.paths.length,l=0;l<d;l++){i.containsBoundValues=!0;u.wasBound=!0;var a=f.paths[l],v=n.boundPropertyDictionary[a],y=new nu;y.boundContent=v==null?"":v.value;y.boundPath=a;o=o.replace(v.value,"{{"+a+"}}");u.boundValues.push(y)}u.tokenizedString=o;k+=" "+o}e=e.trim();r.val=e;i.value=e;i.tokenizedValue=k.trim();s.attributes[r.key]=i}return s},ar=function(n){var u,i,f,t,r,o;if(typeof n!="string"||n.length===0)return{paths:[],content:n};for(u=[],i=n.indexOf(e);i!==-1;){if(f=n.indexOf(e,i+1),f===-1)break;t=n.substring(i,f+wt);r=ut[t];r==null&&(r=new RegExp(t.replace(li,function(n){return"\\"+n}),"g"),ut[t]=r);n=n.replace(r,"");o=t.substring(wt,t.length-wt);o.length>0&&u.push(o);i=n.indexOf(e)}return{paths:u,content:n}},vr=function(n){return n[e]},it=function(n,t){var e,u,o,h,c;if(n==null)return null;var f=new fo(be()),i=null,s=!1,l=typeof n;if(l==="string")if(u=nt(n),u!=null)i=b(u,t),s=!0;else return null;return l!=="object"&&i==null?null:(EVUI.Modules.Core.Utils.instanceOf(n,EVUI.Modules.Binding.Binding)===!0&&(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.templateName)===!1?(u=nt(n.templateName),u!=null?(u=EVUI.Modules.Core.Utils.shallowExtend({},u),u=EVUI.Modules.Core.Utils.shallowExtend(u,n),i=b(u,t)):i=r.addBindingTemplate(n),s=!0):i=b(n,t)),o=null,EVUI.Modules.Core.Utils.isElement(n.element)?o=n.element:EVUI.Modules.Core.Utils.isElement(n.bindingTarget)&&(o=n.bindingTarget),e=ve(o,t),e!=null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(e.templateName)===!1&&(n.templateName=e.templateName),s===!1&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.templateName)===!1&&(u=nt(n.templateName),u==null?i=r.addBindingTemplate(n):(u=EVUI.Modules.Core.Utils.shallowExtend({},u),u=EVUI.Modules.Core.Utils.shallowExtend(u,n),i=b(u,t),s=!0)),e!=null&&(i!=null?i=EVUI.Modules.Core.Utils.shallowExtend(i,e,function(n,t){if(t[n]==null)return!0}):n=EVUI.Modules.Core.Utils.shallowExtend(n,e)),i==null&&(i=b(n,t)),s===!1&&t!=null&&(u=nt(t.templateName),u!=null?(u=EVUI.Modules.Core.Utils.shallowExtend({},u),i=b(u,t)):t.htmlContent!=null&&i.htmlContent==null&&(i.htmlContent=t.htmlContent.item),t.options.recursiveEvents===!0&&(i.onBind=t.binding.onBind,i.onBindChildren=t.binding.onBindChildren,i.onBindHtmlContent=t.binding.onBindHtmlContent,i.onBound=t.binding.onBound,i.onChildrenBound=t.binding.onChildrenBound,i.onSetBindings=t.binding.onSetBindings,i.onSetHtmlContent=t.binding.onSetHtmlContent)),f.id=tu++,f.currentState=new a,f.binding=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Binding.Binding(f),i,["templateName"]),f.progressState=EVUI.Modules.Binding.BindingProgressStateFlags.Idle,f.templateName=i.templateName,f.htmlContent=typeof i.htmlContent=="object"?i.htmlContent:null,o=n.bindingTarget==null?n.element:n.bindingTarget,h=n.bindingSource==null?n.source:n.bindingSource,o!=null&&f.currentState.element==null&&(f.currentState.element=at(o)),h!=null&&f.binding.source==null&&typeof h=="object"?f.binding.source=h:e!=null&&e.bindingPath!=null&&(c=null,c=t!=null?EVUI.Modules.Core.Utils.getValue(e.bindingPath,t.currentState.source):EVUI.Modules.Core.Utils.getValue(e.bindingPath,window),c!=null&&(f.binding.source=c)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i.htmlContent)===!1&&(f.currentState.htmlContent=i.htmlContent),f)},be=function(){var n=new wr;return n.controller=r,n.triggerDispose=y,n.triggerBind=gt,n.validateElement=ke,n.getValidElement=at,n.triggerUpdate=vi,n.toDomNode=s,n},ke=function(n){return n==null?!0:typeof n=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1?!0:n instanceof DocumentFragment?!0:EVUI.Modules.Core.Utils.isElement(n)===!0?!0:!1},at=function(n,t){if(n instanceof DocumentFragment||t!==!0&&typeof n=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1||EVUI.Modules.Core.Utils.isElement(n)===!0)return n;var i=EVUI.Modules.Core.Utils.getValidElement(n);return i!=null?i:n instanceof EVUI.Modules.Dom.DomHelper?n.elements[0]:null},oi=function(n){var t,i,f;if(typeof n!="string")return[];for(var r=[],e=n.length,u=0;u<e;){if(t=n.indexOf("{{",u),t==-1)break;if(i=n.indexOf("}}",t),i==-1)break;(u=i,f=n.substring(t+2,i),r.indexOf(f)===-1)&&r.push(f)}return r.map(function(n){var t=new uo;return t.path=n,t})},de=function(n,t,i,r){var o,c,s,u,f,h,e;if(i==null||i.length===0)return t;if(typeof t!="string")return null;for(o=t,c=i.length,s=0;s<c;s++)if(u=i[s],u.value!==undefined){f=null;f=typeof u.value=="function"?ge(n,u):u.value;f==null&&(f="");h=r.attributePaths[u.path];h!=null&&(f+=h);try{e=ut[u.path];e==null&&(e=new RegExp("{{"+u.path.replace(li,function(n){return"\\"+n})+"}}","g"),ut[u.path]=e);o=o.replace(e,f)}catch(l){EVUI.Modules.Core.Utils.log(l)}}return o},vt=function(n){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return n;var n=n.replace(/\.|\[|\]\.|\]/g,".");return EVUI.Modules.Core.Utils.stringEndsWith(".",n)===!0&&(n=n.substring(0,n.length-1)),n},yr=function(n,t){return EVUI.Modules.Core.Utils.getHashCode(eu+n.bindingHandle.id+":"+t.path).toString(36)},ge=function(n,t){var i;if(typeof t.value!="function")return null;var f=t.value,u=yr(n,t),e="$evui.dispatch(event, '"+u+"')",r=k[u];if(r!=null){if(r.handler===f)return e;n.rollbackDispatchHandles.push(r);r.dispose()}return i=new si,i.handler=f,i.id=uu,i.binding=n.bindingHandle,i.path=t.path,i.hashKey=u,i.invocationHandle=function(n){var t=no(i,n),e;if(t==null&&(t=new ho,t.currentTarget=n.currentTarget,t.eventName=n.type,i.invocationSites.push(t)),i.binding.options.eventContextMode===EVUI.Modules.Binding.BoundEventContextMode.ParentObject){var u=vt(i.path),f=u.lastIndexOf("."),r=null;return f===-1?r=i.binding.currentState.source:(e=u.substring(0,f),r=EVUI.Modules.Core.Utils.getValue(e,i.binding.currentState.source)),r==null&&(r=window),i.handler.call(r,n,i.binding.binding)}if(i.binding.options.eventContextMode===EVUI.Modules.Binding.BoundEventContextMode.Element)return i.handler.call(n.currentTarget,n,i.binding.binding);throw Error("Invalid eventContextMode: "+i.binding.options.eventContextMode);},k[i.hashKey]=i,n.bindingHandle.dispatchHandles.push(i),e},no=function(n,t){for(var i,u=n.invocationSites.length,r=0;r<u;r++)if(i=n.invocationSites[r],i.eventName===t.type&&i.currentTarget===t.currentTarget)return i;return null},to=function(n,t){var i=k[t],r;if(i==null){r="Dispatch function for event "+n.type+" element "+io(n.currentTarget)+" could not be found.";EVUI.Modules.Core.Utils.log(r);return}return i.invocationHandle(n,i.binding)};Object.defineProperty($evui,"dispatch",{get:function(){return to},enumerable:!1});var io=function(n){var t=n.tagName.toLowerCase();EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.id)===!1&&(t+="#"+n.id);EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.className)===!1&&(t+="."+n.className.trim().replace(/\s/g,"."));t},ro=function(){EVUI.Modules.Core.Utils.cacheProperties(new a)},uo=function(){this.path=null},pr=function(){this.item=null;this.key=null;this.url=null;this.content=null;this.needsRecalcuation=!0;this.tokenMappings=null;this.pending=!1;this.loaded=!1;this.failed=!1;this.ignoreUrl=!1;this.pendingCallbacks=[];this.contentMetata=null},fo=function(n){if(n instanceof wr==!1)throw Error("Invalid parameters.");this.wrapper=n;this.id=null;this.progressState=EVUI.Modules.Binding.BindingProgressStateFlags.Idle;this.templateName=null;this.options=null;this.binding=null;this.currentState=null;this.oldState=null;this.pendingState=null;this.disposing=!1;this.newStateBound=!1;this.oldStateBound=!1;this.dispatchHandles=[];this.canceledDuringReBind=!1;this.htmlContent=null;this.completionState=EVUI.Modules.Binding.BindingCompletionState.None},a=function(){this.stateId=iu++;this.htmlContent=null;this.parentBindingHandle=null;this.element=null;this.parentBindingKey=null;this.parentBindingPath=null;this.childBindingHandles=[];this.source=null;this.sourceHashCode=null;this.sourceObserver=null;this.boundProperties=null;this.mergedHtmlContent=null;this.boundContentFragment=null;this.boundContentTree=null;this.boundContent=null;this.elementSet=!1;this.sourceSet=!1;this.htmlContentSet=!1;this.boundTemplateContentClone=null;this.normalizedPath=null};a.prototype.getNormalizedPath=function(){return vt(this.parentBindingPath)};var wr=function(){this.controller=null;this.triggerBind=null;this.triggerDispose=null;this.triggerUpdate=null;this.validateElement=null;this.toDomNode=null},br=function(){this.sessionId=ru++;this.bindingHandle=null;this.bindingArgs=null;this.eventStream=null;this.callbacks=[];this.cancel=!1;this.originalBoundProps=[];this.childSessions=[];this.context={};this.maintainCurrentState=!1;this.observedDifferences=null;this.oldStateDictionary=null;this.shouldReBind=!0;this.parentSession=null;this.lastInsertedNode=null;this.isArray=!1;this.batchId=-1;this.sessionMode=tt.None;this.rollbackState=null;this.rollbackPendingState=null;this.rollbackDispatchHandles=[];this.boundPropertyDictionary={}},eo=function(){this.session=null;this.flags=yt.None},yt={None:0,SameBinding:1,SameElement:2,SameSource:4},kr=function(){this.id=-1;this.callback=null;this.session=null},oo=function(){this.templateName=null;this.key=null;this.sourcePath=null;this.src=null;this.mode=null},so=function(){this.element=null;this.source=null;this.path=null},pt=function(){this.id=fu++;this.sessions=[];this.numSessions=0;this.childSessionQueue=[];this.childBatches=[];this.parentBatch=null;this.executing=!1};pt.prototype.getNextChildBatch=function(){if(this.childSessionQueue.length===0)return null;var n=new pt;return n.sessions=this.childSessionQueue.splice(0,ft),n.numSessions=n.sessions.length,n.parentBatch=this,this.childBatches.push(n),n};pt.prototype.execute=function(n){var r=this,u=this.sessions.length,f,e,t,i;if(u===0)return n(r);for(this.executing=!0,f=0,e=function(){f++;u===f&&(r.executing=!1,n(r))},t=0;t<u;t++)i=this.sessions[t],i.batchId=this.id,i.eventStream.onComplete=function(){e()},ti(i)};tt={None:0,Bind:1,Update:2};si=function(){this.hashKey=null;this.path=null;this.binding=null;this.handler=null;this.invocationSites=[];this.invocationHandle=function(){}};si.prototype.dispose=function(){for(var u=this.invocationSites.length,t=0;t<u;t++){var n=this.invocationSites[t],i="on"+n.eventName,r=n.currentTarget[i];r!=null&&r.toString().indexOf(this.hashKey)!==-1&&(n.currentTarget[i]=null,n.currentTarget.removeAttribute(i))}this.invocationSites=[];k[this.hashKey]===this&&delete k[this.hashKey]};var ho=function(){this.eventName=null;this.currentTarget=null},f={None:0,Added:1,Removed:2,Swapped:3,Shifted:4,Moved:5},co=function(){this.isArray=!1;this.modifiedPaths={};this.unchangedBindings=[]},lo=function(){this.index=-1;this.binding=null;this.contentsModified=!1;this.bindingStructureChangeType=f.None;this.moveSwapTarget=null;this.applied=!1},rt=function(n){this.normalizedPath=n;this.bindings=[];this.numBindings=0};rt.prototype.addBinding=function(n,t){var i=new ao(n);return i.index=t,this.numBindings=this.bindings.push(i),i};rt.prototype.getNextUnprocessedBinding=function(){for(var t,n=0;n<this.numBindings;n++)if(t=this.bindings[n],t.processed===!1)return t;return null};rt.prototype.makeChangeArray=function(n){for(var r,t,u=[],i=0;i<this.numBindings;i++)r=this.bindings[i],t=new lo,t.binding=r.binding,t.index=r.index,t.bindingStructureChangeType=typeof n=="function"?n(t):n,u.push(t);return u};var ao=function(n){this.binding=n;this.index=-1;this.processed=!1;this.stateToCheck=null},vo=function(){this.html=null;this.attributePaths={}},dr=function(){this.attributes={}};dr.prototype.getAttributeMetadata=function(n){return this.attributes[n]};var gr=function(){this.name=null;this.containsBoundValues=!1;this.value=null;this.tokenizedValue=null;this.values=[]},hi=function(){this.value=null;this.wasBound=!1;this.tokenizedString=null;this.boundValues=[]},nu=function(){this.boundContent=null;this.boundPath=null},yo=function(){this.templateName=null};ro();ou()};EVUI.Modules.Binding.BindingHtmlContent=function(n){if(n==null||typeof n.key!="string")throw Error("Invalid constructor arguments.");var t=n;this.key=null;Object.defineProperty(this,"key",{get:function(){return t.key},configurable:!1,enumerable:!0});this.url=null;Object.defineProperty(this,"url",{get:function(){return t.url},configurable:!1,enumerable:!0});this.content=null;Object.defineProperty(this,"content",{get:function(){return t.content},set:function(n){if(typeof n!="string"&&n!=null)throw Error("content must be a string.");t.content!==n&&(t.needsRecalcuation=!0,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1&&t.loaded===!0&&(t.ignoreUrl=!0),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)==!0&&(t.ignoreUrl=!1,t.loaded=!1),t.content=n)},configurable:!1,enumerable:!0})};EVUI.Modules.Binding.Binding=function(n){if(n==null||n.wrapper==null)throw Error("Invalid constructor arguments");var t=n,i=this;this.id=null;Object.defineProperty(this,"id",{get:function(){return t.id},configurable:!1,enumerable:!0});this.templateName=null;Object.defineProperty(this,"templateName",{get:function(){return t.templateName},configurable:!1,enumerable:!0});this.element=null;Object.defineProperty(this,"element",{get:function(){return t.pendingState!=null&&t.pendingState.elementSet===!0?t.pendingState.element:t.currentState.element},set:function(n){if(n!==t.currentState.element){if(t.progressState!=EVUI.Modules.Binding.BindingProgressStateFlags.Idle)throw Error("Cannot change the element of a Binding that is queued or in progress.");if(t.wrapper.validateElement(n)===!1)throw Error("Failed to set element - must be null, a non-whitespace string, a DocumentFragment, or an Element.");t.newStateBound===!0||t.pendingState!=null?(t.pendingState==null&&(t.pendingState={}),t.pendingState.elementSet=!0,t.pendingState.element=n):(t.currentState.element=n,t.currentState.elementSet=!0)}},configurable:!1,enumerable:!0});this.bindingProgressState=EVUI.Modules.Binding.BindingProgressStateFlags.Idle;Object.defineProperty(this,"bindingProgressState",{get:function(){return t.progressState},configurable:!1,enumerable:!0});this.bindingCompletionState=EVUI.Modules.Binding.BindingCompletionState.None;Object.defineProperty(this,"bindingCompletionState",{get:function(){return t.completionState},configurable:!1,enumerable:!0});this.source=null;Object.defineProperty(this,"source",{get:function(){return t.pendingState!=null&&t.pendingState.sourceSet===!0?t.pendingState.source:t.currentState.source},set:function(n){if(n!=null&&typeof n!="object")throw Error("source must be an object.");if(n!==t.currentState.source){if(t.progressState!=EVUI.Modules.Binding.BindingProgressStateFlags.Idle)throw Error("Cannot change the source object reference of a Binding that is queued or in progress.");t.newStateBound===!0||t.pendingState!=null?(t.pendingState==null&&(t.pendingState={}),t.pendingState.source=n,t.pendingState.sourceSet=!0):(t.currentState.source=n,t.currentState.sourceSet=!0)}},configurable:!1,enumerable:!0});this.htmlContent=null;Object.defineProperty(this,"htmlContent",{get:function(){return t.pendingState!=null&&t.pendingState.htmlContentSet===!0?t.pendingState.htmlContent:t.currentState.htmlContent},set:function(n){if(n!==t.currentState.htmlContent){if(EVUI.Modules.Core.Utils.hasFlag(t.progressState,EVUI.Modules.Binding.BindingProgressStateFlags.GotHtmlContent))throw Error("Cannot change the htmlContent of a Binding that has already been Bound.");var i=null;if(t.newStateBound===!0||t.pendingState!=null?(t.pendingState==null&&(t.pendingState={}),i=t.pendingState):i=t.currentState,n!=null&&typeof n!="string")if(n instanceof EVUI.Modules.Binding.BindingHtmlContent)i.htmlContent=n,i.htmlContentSet=!0;else if(EVUI.Modules.Core.Utils.isElement(n)===!0)i.htmlContent=n,i.htmlContentSet=!0;else throw Error("template must be a string, Element, or BindingTemplateCaheItem.");else i.htmlContent=n,i.htmlContentSet=!0}}});this.options=null;Object.defineProperty(this,"options",{get:function(){return t.options},set:function(n){if(typeof n=="object")if(n==null)throw Error("options must be an object.");else t.options=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Binding.BindOptions,n);else throw Error("options must be an object.");}});this.contentLoadSettings=null;this.bindingMode=EVUI.Modules.Binding.BindingMode.Merge;this.insertionMode=EVUI.Modules.Binding.BindingInsertionMode.Default;this.getBoundProperties=function(){for(var i,r,f=t.currentState!=null&&t.currentState.boundProperties!=null?t.currentState.boundProperties.length:0,u=[],n=0;n<f;n++)i=t.currentState.boundProperties[n],r=new EVUI.Modules.Binding.BoundProperty(i.path),r.value=i.value,u.push(r);return u};this.changeBoundPropertyValue=function(n,i){var f,r,u;if(typeof n!="string")throw Error("String expected.");for(f=t.currentState!=null&&t.currentState.boundProperties!=null?t.currentState.boundProperties.length:0,r=0;r<f;r++)if(u=t.currentState.boundProperties[r],u.path===n)return u.value=i,!0;return!1};this.boundContentFragment=null;Object.defineProperty(this,"boundContentFragment",{get:function(){return t.currentState.boundTemplateFragment!=null?t.currentState.boundTemplateFragment:(t.currentState.boundContentTree!=null&&t.newStateBound===!1&&(t.currentState.boundTemplateFragment=t.wrapper.toDomNode(t.currentState.boundContentTree)),t.currentState.boundTemplateFragment)},configurable:!1,enumerable:!0});this.parentBinding=null;Object.defineProperty(this,"parentBinding",{get:function(){return t.currentState.parentBindingHandle!=null?t.currentState.parentBindingHandle.binding:null},configurable:!1,enumerable:!0});this.parentBindingKey=null;Object.defineProperty(this,"parentBindingKey",{get:function(){return t.currentState.parentBindingKey},configurable:!1,enumerable:!0});this.getChildBindings=function(){for(var i=[],r=t.currentState!=null&&t.currentState.childBindingHandles!=null?t.currentState.childBindingHandles.length:0,n=0;n<r;n++)i.push(t.currentState.childBindingHandles[n].binding);return i};this.removeChildBinding=function(n){var r,u,i,f;if(n==null)return!1;for(r=!1,u=t.currentState!=null&&t.currentState.childBindingHandles!=null?t.currentState.childBindingHandles.length:0,i=0;i<u;i++)if(f=t.currentState.childBindingHandles[i].binding,n.id===binding.id&&f===n){r=!0;break}return r===!1?!1:(n.dispose(),!0)};this.getBoundContent=function(){for(var i=[],r=t.currentState.boundContent.length,n=0;n<r;n++)i.push(t.currentState.boundContent[n]);return i};this.bind=function(n,i){typeof n=="function"&&i==null&&(i=n);(n==null||typeof n=="function")&&(n=new EVUI.Modules.Binding.BindArgs,n.bindingTarget=this.element,n.bindingSource=this.source);t.wrapper.triggerBind(t,n,null,i)};this.bindAsync=function(n){return new Promise(function(t){i.bind(n,function(){t(i)})})};this.update=function(n,i){t.wrapper.triggerUpdate(t,n,null,i)};this.updateAsync=function(n){return new Promise(function(t){i.update(n,function(){t(i)})})};this.applyBindingTemplate=function(n){if(t.progressState!==EVUI.Modules.Binding.BindingProgressStateFlags.Idle)throw Error("Cannot set the BindingTemplate of a Binding in progress.");var i=null;if(typeof n=="string"){if(i=EVUI.Modules.Binding.Binder.getBindingTemplate(n),i==null)return!1}else if(n!=null&&typeof n=="object")i=n;else throw Error("String or object expected.");return EVUI.Modules.Core.Utils.shallowExtend(this,i,["templateName"]),t.templateName=n,!0};this.dispose=function(){return t.wrapper.triggerDispose(t)};this.onBind=null;this.onSetHtmlContent=null;this.onSetBindings=null;this.onBindHtmlContent=null;this.onBindChildren=null;this.onChildrenBound=null;this.onBound=null};EVUI.Modules.Binding.Binding.prototype.search=function(n,t,i){var e,r,u;if(typeof n!="function")throw Error("Function expected.");typeof t!="boolean"&&(t=!1);typeof i!="boolean"&&(i=!1);var f=[],o=this.getChildBindings(),s=o.length;for(e=0;e<s;e++){if(r=o[e],n(r)===!0){if(i===!0)return r;f.push(r)}if(t===!0&&(u=r.search(n,t,i),u!=null)){if(i===!0)return u;u.length>0&&(f=f.concat(u))}}return i===!0?null:f};EVUI.Modules.Binding.Binding.prototype.getRootBinding=function(){for(var n=this.parentBinding,t;n!=null;){if(t=n.parentBinding,t==null)return n;n=t}return n};EVUI.Modules.Binding.BoundProperty=function(n){this.path=n;this.value=null};EVUI.Modules.Binding.BindingTemplate=function(n){var t=n;this.templateName=null;t!=null&&Object.defineProperty(this,"templateName",{get:function(){return t.templateName},enumerable:!0,configurable:!1});this.htmlContent=null;this.options=null;this.contentLoadSettings=null;this.bindingMode=EVUI.Modules.Binding.BindingMode.Merge;this.insertionMode=EVUI.Modules.Binding.BindingInsertionMode.Default;this.onBind=null;this.onSetHtmlContent=null;this.onSetBindings=null;this.onBindHtmlContent=null;this.onBindChildren=null;this.onChildrenBound=null;this.onBound=null};EVUI.Modules.Binding.BindArgs=function(){this.bindingTarget=null;this.bindingSource=null;this.templateName=null;this.bindingContext=null};EVUI.Modules.Binding.UpdateArgs=function(){this.bindingSource=null;this.bindingContext=null};EVUI.Modules.Binding.BindingContentLoadSettings=function(){this.httpRequestArgs=null};EVUI.Modules.Binding.BindOptions=function(){this.recursive=!0;this.recursiveEvents=!0;this.suppressChildEvents=!1;this.shareOptions=!0;this.shareContentLoadSettings=!0;this.scopedCSSSelectors=!0;this.addMissingHtmlContent=!0;this.enumerateArrays=!0;this.shareContextMode=EVUI.Modules.Binding.ShareContextMode.ShareReference;this.eventContextMode=EVUI.Modules.Binding.BoundEventContextMode.Element};EVUI.Modules.Binding.BinderEventArgs=function(n){var t=n;this.binding=t.bindingHandle.binding;this.reBinding=t.bindingHandle.oldStateBound;this.originalContent=t.bindingHandle.oldState!=null&&t.bindingHandle.oldState.boundContent!=null?t.bindingHandle.oldState.boundContent.slice():null;this.originalSource=t.bindingHandle.oldState!=null?t.bindingHandle.oldState.source:null;this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.context={}};EVUI.Modules.Binding.BindingMode={Merge:"merge",Overwrite:"overwrite"};Object.freeze(EVUI.Modules.Binding.BindingMode);EVUI.Modules.Binding.BindingInsertionMode={Default:"default",Append:"append",Prepend:"prepend",InsertBefore:"before",InsertAfter:"after",Shadow:"shadow",Fragment:"fragment",ReplaceChildren:"replace"};Object.freeze(EVUI.Modules.Binding.BindingInsertionMode);EVUI.Modules.Binding.ShareContextMode={NewContext:"cxt-new",ShareReference:"cxt-ref",Clone:"cxt-clone"};Object.freeze(EVUI.Modules.Binding.ShareContextMode);EVUI.Modules.Binding.BindingProgressStateFlags={Idle:0,Queued:1,GotElement:2,GotHtmlContent:4,GotBoundProperties:8,BoundHtmlContent:16,GotChildren:32,BindingChildren:64,BoundChildren:128,Injected:256};Object.freeze(EVUI.Modules.Binding.BindingProgressStateFlags);EVUI.Modules.Binding.BoundEventContextMode={Element:"element",ParentObject:"parent"};Object.freeze(EVUI.Modules.Binding.BoundEventContextMode);EVUI.Modules.Binding.BindingCompletionState={None:"none",Queued:"queued",Executing:"executing",Success:"success",Canceled:"canceled",Failed:"failed",Disposed:"disposed"};Object.freeze(EVUI.Modules.Binding.BindingCompletionState);EVUI.Modules.Binding.BindingControllerServices=function(){this.httpManager=null;this.domTreeConverter=null;this.diffController=null};EVUI.Modules.Binding.Binder=null,function(){var n=null,t=EVUI.Modules.Binding.BindingController;Object.defineProperty(EVUI.Modules.Binding,"Binder",{get:function(){return n==null&&(n=new t),n},configurable:!1,enumerable:!0})}();Object.freeze(EVUI.Modules.Binding);delete $evui.binder;$evui.binder=null;Object.defineProperty($evui,"binder",{get:function(){return EVUI.Modules.Binding.Binder},enumerable:!0});$evui.bind=function(n,t,i){return EVUI.Modules.Binding.Binder.bind(n,t,i)};$evui.bindAsync=function(n,t){return EVUI.Modules.Binding.Binder.bindAsync(n,t)};$evui.addBindingTemplate=function(n){return EVUI.Modules.Binding.Binder.addBindingTemplate(n)};$evui.addBindingHtmlContent=function(n,t,i){return EVUI.Modules.Binding.Binder.addHtmlContent(n,t,i)};$evui.removeBindingTemplate=function(n){return EVUI.Modules.Binding.Binder.removeBindingTemplate(n)};$evui.removeBindingHtmlContent=function(n){return EVUI.Modules.Binding.Binder.removeHtmlContent(n)};EVUI.Modules.Core={};EVUI.Modules.Core.Settings={};$evui.settings=EVUI.Modules.Core.Settings;Object.defineProperty($evui,"settings",{get:function(){return EVUI.Modules.Core.Settings},enumerable:!0});$evui.getSetting=function(n,t){return EVUI.Modules.Core.Utils.getSetting(n,t)};$evui.isTrue=function(n){return EVUI.Modules.Core.Utils.isTrue(n)};$evui.isSettingTrue=function(n,t){return EVUI.Modules.Core.Utils.isSettingTrue(n,t)};EVUI.Modules.Core.Settings.loggingEnabled=!0;EVUI.Modules.Core.Settings.alternateLoggingFunction=function(){};EVUI.Modules.Core.Settings.debug=!0;EVUI.Modules.Core.Settings.traceEvents=!1;EVUI.Modules.Core.Settings.traceIFrames=!1;EVUI.Modules.Core.Settings.autoAddIncomingIFrames=!0;EVUI.Modules.Core.Settings.stepsBetweenWaits=250;EVUI.Modules.Core.Settings.defaultMinimumZIndex=100;EVUI.Modules.Core.Settings.normalizeStringCase=!1;EVUI.Modules.Core.Settings.localizeStringComparison=!1;EVUI.Modules.Core.Constants={};EVUI.Modules.Core.Constants.Fn_Init=function(){};EVUI.Modules.Core.Constants.Fn_InitAsync=function(){};EVUI.Modules.Core.Constants.Fn_ExecutorCallback=function(){};EVUI.Modules.Core.Constants.Fn_ExtendPropertyFilter=function(){};EVUI.Modules.Core.Constants.Symbol_ObjectProperties="evui-property-list",function(){typeof Symbol!="undefined"&&(EVUI.Modules.Core.Constants.Symbol_ObjectProperties=Symbol("evui-property-list"))}();EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers="evui-proto-list",function(){typeof Symbol!="undefined"&&(EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers=Symbol("evui-proto-list"))}();Object.freeze(EVUI.Modules.Core.Constants);EVUI.Modules.Core.AsyncSequenceExecutionArgs=function(){this.functions=null;this.parameter=null;this.forceCompletion=!1};EVUI.Modules.Core.AsyncSequenceExecutor=function(){var t=function(){},i=function(){this.functions=null;this.parameter=null;this.index=0;this.callback=null;this.forceCompletion=!1;this.errors=null},n=function(t){var f=r(t),i;if(f==null)return t.callback(t.errors);try{i=f(t.parameter);EVUI.Modules.Core.Utils.isPromise(i)===!0?i.then(function(){n(t)}).catch(function(i){t.forceCompletion===!0?(EVUI.Modules.Core.Utils.log(i),t.errors.push(i),n(t)):t.callback(i)}):n(t)}catch(u){t.forceCompletion===!0?(EVUI.Modules.Core.Utils.log(u),t.errors.push(u),n(t)):t.callback(u)}},r=function(n){var t=n.functions[n.index];return n.index++,t};return t.prototype.execute=function(t,r){var e=typeof t,f,u;if(typeof t==null||e!=="object")throw Error("Object expected.");if(EVUI.Modules.Core.Utils.isArray(t)===!0)f=t,t=new EVUI.Modules.Core.AsyncSequenceExecutionArgs,t.functions=f;else if(EVUI.Modules.Core.Utils.isArray(t.functions)===!1)throw Error("Cannot execute without an array of functions.");typeof r!="function"&&(r=function(){});u=new i;u.functions=t.functions.filter(function(n){return typeof n=="function"});u.index=0;u.callback=r;u.parameter=t.parameter;u.forceCompletion=t.forceCompletion===!0?!0:!1;u.errors=[];n(u)},t.prototype.executeAsync=function(){return new Promise(function(n,i){t.execute(fns,parameter,function(t){if(t instanceof Error||EVUI.Modules.Core.Utils.isArray(t)===!0&&t.length>0)return i(t);n()})})},new t}();$evui.executeSequence=function(n,t){return EVUI.Modules.Core.AsyncSequenceExecutor.execute(n,t)};$evui.executeSequenceAsync=function(n,t){return EVUI.Modules.Core.AsyncSequenceExecutor.executeAsync(n,t)};EVUI.Modules.Core.Initializers=EVUI.Modules.Core==null?[]:EVUI.Modules.Core.Initializers;EVUI.Modules.Core.Initializers==null&&(EVUI.Modules.Core.Initializers=[]),function(){var t=!1,r=null,i=!1,n=!1;typeof window!="undefined"?(document.addEventListener("DOMContentLoaded",function(){n=!0}),window.addEventListener("load",function(){n=!0})):n=!0;EVUI.Modules.Core.Initialize=function(u){return EVUI.Modules.Core.Initializers.push(u),new Promise(function(u,f){var o=typeof window!="undefined",s=function(n){return(i=!1,n==null||EVUI.Modules.Core.Utils.isArray(n)===!0&&n.length===0)?u():f(n)},e=function(){o===!0&&(document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e));n=!0;setTimeout(function(){var f,n,u;t===!1?(t=!0,f=EVUI.Modules.Core.Initializers.splice(0,EVUI.Modules.Core.Initializers.length),n=new EVUI.Modules.Core.AsyncSequenceExecutionArgs,n.functions=f,n.parameter=$evui.settings,EVUI.Modules.Core.AsyncSequenceExecutor.execute(n,function(n){return i=!0,r=n,t=!1,s(n)})):(u=function(){setTimeout(function(){if(i===!0)return s(r);u()})},u())},10)};n===!0?e():o===!0?(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e)):e()})}}();$evui.init=function(n){return EVUI.Modules.Core.Initialize(n)};EVUI.Modules.Core.CaseInsensitiveObject=function(n){var i,u,t,r;if(n!=null&&typeof n=="object"&&!(n instanceof Node))for(i=EVUI.Modules.Core.Utils.getProperties(n),u=i.length,t=0;t<u;t++)r=i[t],this.setValue(r,n[r])};EVUI.Modules.Core.CaseInsensitiveObject.prototype.getValue=function(n){var r,f,t,i,u;if(typeof n!="string"&&typeof n!="number")return undefined;if(this[n]!==undefined)return this[n];for(typeof n=="string"&&(n=n.toLowerCase()),r=Object.keys(this),f=r.length,t=0;t<f;t++)if(i=r[t],u=typeof i=="string"?i.toLowerCase():u,u===n)return this[i];return undefined};EVUI.Modules.Core.CaseInsensitiveObject.prototype.setValue=function(n,t){var e,u,o,r,i,f;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0&&typeof n!="number")return!1;if(e=typeof i=="string"?n.toLowerCase():n,typeof n=="string")for(u=Object.keys(source),o=u.length,r=0;r<o;r++)if(i=u[r],f=typeof i=="string"?i.toLowerCase():f,f===e)try{delete i}catch(s){this[popName]=undefined}return this[n]=t,!0};EVUI.Modules.Core.DeepExtender=function(){var t=null,n=[],i=!1,r=!1;this.deepExtend=function(e,o,s){var c,a,h,v,l,y;if(typeof o!="object")throw Error("Object expected.");if(s!=null)if(typeof s=="function")i=!0;else if(EVUI.Modules.Core.Utils.isArray(s)===!0){for(r=!0,c={},a=s.length,h=0;h<a;h++)v=s[h],c[v]=!0;s=c}return l=new f(o,e),l.paths.push(""),n.push(l),t=e,y=u(e,o,s),n=[],i=!1,r=!1,t=null,y};var u=function(o,s,h,c){var b,nt,p,a,l,tt,v,d,w,g;if(s==null||typeof s!="object"||o==null||typeof o!="object")return o;for(b=EVUI.Modules.Core.Utils.getProperties(s),nt=b.length,p=0;p<nt;p++)if(a=b[p],l=undefined,i===!0){if(h(a,s,o)===!0)continue}else if(r===!0){if(h[a]===!0)continue}else if(l=s[a],tt=typeof l,l!=null&&tt==="object"){var k=c==null?a:c+"."+a,y=o[a],it=typeof y=="object"&&y===l;if(l instanceof Node==!0){o[a]=l;continue}if(v=e(l),v!=null){if(v.sameReference===!1)if(it===!0){for(v.clone=y,d=v.paths.length,w=0;w<d;w++)EVUI.Modules.Core.Utils.setValue(v.paths[w],t,l);v.paths.splice(0,d);v.sameReference=!0}else v.paths.push(k);o[a]=v.clone}else(typeof y!="object"||y==null)&&(y=EVUI.Modules.Core.Utils.isArray(l)?[]:{}),g=new f(l,y),g.paths.push(k),n.push(g),o[a]=u(y,l,h,k)}else l!==undefined&&(o[a]=l);return o},e=function(t){for(var r,u=n.length,i=0;i<u;i++)if(r=n[i],r.source===t)return r;return null},f=function(n,t){this.source=n;this.clone=t;this.paths=[];this.sameReference=!1}};EVUI.Modules.Core.ObjectPropertyWrapper=function(){this.wrap=function(t,i,r,u){var o,f,e;if(t==null)throw Error("Cannot wrap a property from a null or undefined source object.");if(i==null)throw Error("Cannot make a property wrapper on a null or undefined target object.");if(r==null)return!1;for(EVUI.Modules.Core.Utils.isArray(r)===!1&&(r=[r]),o=r.length,u==null&&(u=new EVUI.Modules.Core.ObjectPropertyMappingSettings),f=0;f<o;f++)e=r[f],e.settings==null&&(e.settings=u),n(t,i,e)};var n=function(n,t,i){var r,u,h,f;if(i!=null){if(typeof i.sourcePath!="string")if(typeof i.sourcePath=="number")i.sourcePath=i.sourcePath.toString();else if(i.sourcePath!=null)return;if(typeof i.targetPath!="string")if(typeof i.targetPath=="number")i.targetPath=i.targetPath.toString();else if(i.targetPath!=null)return;var e=n,o=i.sourcePath==null?[]:EVUI.Modules.Core.Utils.getValuePathSegments(i.sourcePath),s=o.length,c=s-1<=0?null:o.slice(0,s-1).join(".");if(e=EVUI.Modules.Core.Utils.getValue(c,n),e!=null){r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Core.ObjectPropertyMappingSettings,i.settings);r.autoDetect===!0&&(r=new EVUI.Modules.Core.ObjectPropertyMappingSettings,u=Object.getOwnPropertyDescriptor(e,o[s-1]),(typeof u.get=="function"||u.value!==undefined)&&(r.get=!0),(typeof u.set=="function"||u.writable===!0)&&(r.set=!0),u.configurable===!0&&(r.configurable=!0),u.enumerable===!1&&(r.enumerable=!1));h=i.targetPath;f={};r.get===!0&&(f.get=function(){return EVUI.Modules.Core.Utils.getValue(h,t)});r.set===!0&&(f.set=function(n){EVUI.Modules.Core.Utils.setValue(h,t,n)});f.configurable=r.configurable;f.enumberable=r.enumerable;try{Object.defineProperty(e,o[s-1],f)}catch(l){EVUI.Modules.Core.Utils.debugReturn("ObjectPropertyWrapper","mapProperty",l.stack)}}}}};EVUI.Modules.Core.ObjectPropertyMapping=function(){this.sourcePath=null;this.targetPath=null;this.settings=null};EVUI.Modules.Core.ObjectPropertyMappingSettings=function(){this.autoDetect=!1;this.get=!0;this.set=!0;this.configurable=!1;this.enumerable=!0};EVUI.Modules.Core.Utils={};$evui.cio=function(n){return new EVUI.Modules.Core.CaseInsensitiveObject(n)};EVUI.Modules.Core.Utils.deepExtend=function(n,t,i){return(new EVUI.Modules.Core.DeepExtender).deepExtend(n,t,i)};$evui.deepExtend=function(n,t,i){return EVUI.Modules.Core.Utils.deepExtend(n,t,i)};EVUI.Modules.Core.Utils.getElementAttributes=function(n){var i,u,t,r;if(n==null||(EVUI.Modules.Core.Utils.isjQuery(n)===!0&&(n=n[0]),EVUI.Modules.Core.Utils.isDomHelper(n)===!0&&(n=n.elements[0]),EVUI.Modules.Core.Utils.isElement(n)===!1))return null;for(i=new EVUI.Modules.Core.CaseInsensitiveObject,u=n.attributes.length,t=0;t<u;t++)r=n.attributes[t],i[r.name]=r.value;return i};$evui.getAttrs=function(n){return EVUI.Modules.Core.Utils.getElementAttributes(n)};EVUI.Modules.Core.Utils.wrapProperties=function(n,t,i,r){return(new EVUI.Modules.Core.ObjectPropertyWrapper).wrap(n,t,i,r)};$evui.wrap=function(n,t,i,r){return new EVUI.Modules.Core.Utils.wrapProperties(n,t,i,r)};EVUI.Modules.Core.Utils.getValue=function(n,t){var i,u;if(t==null)throw Error("Cannot get a value from a null or undefined source.");if(i=typeof n,i!=="string"){if(i==="number"||i==="symbol")return t[n];if(n==null)return t;throw Error("Cannot get value, path must be a string.");}var f=EVUI.Modules.Core.Utils.getValuePathSegments(n),e=f.length,r=t;for(u=0;u<e;u++)if(r=r[f[u]],r==null)return null;return r};$evui.get=function(n,t){return EVUI.Modules.Core.Utils.getValue(n,t)};EVUI.Modules.Core.Utils.getValuePathSegments=function(n){var r=typeof n,t,i;if(r!=="string")throw Error("Cannot get path segments from a non-string.");return t=n.split(/\.|\[|\]\.|\]/g),i=t.length,t[i-1]===""&&(t=t.slice(0,t.length-1)),t};$evui.getPathSegments=function(n){return EVUI.Modules.Core.Utils.getValuePathSegments(n)};EVUI.Modules.Core.Utils.setValue=function(n,t,i,r){var u,o,f;if(typeof n!="string"){if(EVUI.Modules.Core.Utils.isArray(t)===!0&&typeof n=="number")return t[n]=i,!0;if(n==null)return t=i,!0;throw Error("Cannot set value, path must be a string.");}if(t==null)throw Error("Cannot set value of a null or undefined target.");var s=EVUI.Modules.Core.Utils.getValuePathSegments(n),h=s.length,e=t;for(u=0;u<h;u++){if(u===h-1)return e[s[h-1]]=i,!0;if(o=s[u],f=e[o],f==null)if(r===!0)f={},e[o]=f;else throw Error('Failed to set property at path "'+n+'", "'+o+'"  was null or undefined.');e=f}return!1};$evui.set=function(n,t,i,r){return EVUI.Modules.Core.Utils.setValue(n,t,i,r)};EVUI.Modules.Core.Utils.getSetting=function(n,t){return n==null||typeof n!="string"&&typeof n!="number"&&typeof n!="symbol"?null:t!=null&&typeof t=="object"?t[n]:$evui.settings==null?EVUI.Modules.Core.Settings[n]:$evui.settings[n]};EVUI.Modules.Core.Utils.isTrue=function(n){return n==null?!1:(typeof n=="string"&&(n=n.toLowerCase()),n==="true"||n===1||n==="1"||n===!0)?!0:!1};EVUI.Modules.Core.Utils.isSettingTrue=function(n,t){return EVUI.Modules.Core.Utils.isTrue(EVUI.Modules.Core.Utils.getSetting(n,t))};EVUI.Modules.Core.Utils.isArray=function(n){if(n==null)return!1;var t=typeof n;return t==="string"||t==="function"?!1:Array.isArray(n)===!0?!0:typeof n.length=="number"?!0:!1};$evui.isArray=function(n){return EVUI.Modules.Core.Utils.isArray(n)};EVUI.Modules.Core.Utils.makeGuid=function(){return"xxxxxxxx-xxxx-4xxx-8xxx-xxxxxxxxxxxx".replace(/x/g,function(){var n=Math.random()*16;return n=Math.floor(n),n.toString(16)})};$evui.guid=function(){return EVUI.Modules.Core.Utils.makeGuid()};EVUI.Modules.Core.Utils.emptyGuid=function(){return"00000000-0000-0000-0000-000000000000"};$evui.emptyGuid=function(){return EVUI.Modules.Core.Utils.emptyGuid()};EVUI.Modules.Core.Utils.isPromise=function(n){return n==null?!1:typeof Promise!="undefined"&&n instanceof Promise?!0:typeof n.then=="function"&&typeof n.catch=="function"?!0:!1};$evui.isPromise=function(n){return EVUI.Modules.Core.Utils.isPromise(n)};EVUI.Modules.Core.Utils.stringNormalize=function(n,t,i){return typeof n!="string"?null:(typeof t!="boolean"&&(t=EVUI.Modules.Core.Utils.getSetting("normalizeStringCase")),typeof t!="boolean"&&(t=!0),typeof i!="boolean"&&(i=EVUI.Modules.Core.Utils.getSetting("localizeStringComparison")),typeof i!="boolean"&&(i=!1),n=n.trim(),t===!0?i===!0?n.toLocaleLowerCase():n.toLowerCase():i===!0?n.toLocaleLowerCase():n)};$evui.strNormalize=function(n,t,i){return EVUI.Modules.Core.Utils.stringNormalize(n,t,i)};EVUI.Modules.Core.Utils.stringCompare=function(n,t,i,r){if(typeof n!="string"&&typeof t!="string")return null;typeof i!="boolean"&&(i=EVUI.Modules.Core.Utils.getSetting("normalizeStringCase"));typeof i!="boolean"&&(i=!0);typeof r!="boolean"&&(r=EVUI.Modules.Core.Utils.getSetting("localizeStringComparison"));typeof r!="boolean"&&(r=!1);n=EVUI.Modules.Core.Utils.stringNormalize(n,i,r);t=EVUI.Modules.Core.Utils.stringNormalize(t,i,r);var u=0;return r===!0?(u=n.trim().localeCompare(t.trim()),u<=-1&&(u=-1),(()=>1)&&(u=1)):(n<t&&(u=-1),t<n&&(u=1)),u};$evui.strCompare=function(n,t,i,r){return EVUI.Modules.Core.Utils.stringCompare(n,t,i,r)};EVUI.Modules.Core.Utils.stringIsNullOrWhitespace=function(n){if(n==null||typeof n!="string")return!0;return n.trim().length===0};$evui.strIsValid=function(n){return!EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)};EVUI.Modules.Core.Utils.stringStartsWith=function(n,t){return typeof t!="string"||typeof n!="string"?!1:t.indexOf(n)!==0?!1:!0};$evui.strStartsWith=function(n,t){return EVUI.Modules.Core.Utils.stringStartsWith(n,t)};EVUI.Modules.Core.Utils.stringEndsWith=function(n,t){var i,r,u;if(typeof t!="string"||typeof n!="string"||(i=n.length,r=t.length,i>r))return!1;try{return(u=t.substring(r-i),u===n)?!0:!1}catch(f){return!1}};$evui.strEndsWith=function(n,t){return EVUI.Modules.Core.Utils.stringEndsWith(n,t)};EVUI.Modules.Core.Utils.log=function(n){try{if(EVUI.Modules.Core.Utils.isSettingTrue("loggingEnabled"))console.log(n);else{var t=EVUI.Modules.Core.Utils.getSetting("alternateLoggingFunction");typeof t=="function"&&t(n)}}catch(i){}};$evui.log=function(n){return EVUI.Modules.Core.Utils.log(n)};EVUI.Modules.Core.Utils.hasFlag=function(n,t){if(typeof n!="number"||typeof t!="number")return!1;var i=n&t;return i===t};$evui.hasFlag=function(n,t){return EVUI.Modules.Core.Utils.hasFlag(n,t)};EVUI.Modules.Core.Utils.addFlag=function(n,t){return typeof n!="number"&&typeof t!="number"?n:n|t};$evui.addFlag=function(n,t){return EVUI.Modules.Core.Utils.addFlag(n,t)};EVUI.Modules.Core.Utils.removeFlag=function(n,t){return typeof n!="number"&&typeof t!="number"?n:n&~t};$evui.removeFlag=function(n,t){return EVUI.Modules.Core.Utils.removeFlag(n,t)};EVUI.Modules.Core.Utils.isjQuery=function(n){return n==null?!1:typeof jQuery=="undefined"?!1:n instanceof jQuery==!0?!0:!1};$evui.isjQuery=function(n){return EVUI.Modules.Core.Utils.isjQuery(n)};EVUI.Modules.Core.Utils.isElement=function(n){return n instanceof Element};$evui.isElement=function(n){return EVUI.Modules.Core.Utils.isElement(n)};EVUI.Modules.Core.Utils.debugReturn=function(n,t,i,r){if(EVUI.Modules.Core.Utils.isSettingTrue("debug")===!1)return r;var u="";return(typeof n=="string"&&(u=n),typeof t=="string"&&(u!==""?u+="."+t:u=t),typeof i=="string"&&(u!==""?u+=": "+i:u=i),u==="")?r:(EVUI.Modules.Core.Utils.log(u),r)};$evui.debugReturn=function(n,t,i,r){return EVUI.Modules.Core.Utils.debugReturn(n,t,i,r)};$evui.debug=function(n,t){return EVUI.Modules.Core.Utils.debugReturn(n,null,null,t)};EVUI.Modules.Core.Utils.containsElement=function(n,t){return(EVUI.Modules.Core.Utils.isjQuery(n)===!0&&(n=n[0]),EVUI.Modules.Core.Utils.isDomHelper(n)===!0&&(n=n.elements[0]),n instanceof Node==!1)?!1:n.parentElement==null?!1:(EVUI.Modules.Core.Utils.isjQuery(t)===!0&&(t=t[0]),EVUI.Modules.Core.Utils.isDomHelper(t)===!0&&(t=t.elements[0]),t instanceof Node==!1)?!1:t.contains(n)};$evui.containsElement=function(n,t){return EVUI.Modules.Core.Utils.containsElement(n,t)};EVUI.Modules.Core.Utils.isOrphanedNode=function(n){var t,i;if(n==null)return!0;if(n.isConnected===!0)return!1;for(t=n.parentNode;t!=null;)if(i=t.parentNode,i==null)break;else t=i;return t!=null&&(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE||t.nodeType===Node.DOCUMENT_NODE)?!1:!0};$evui.isOrphan=function(n){return EVUI.Modules.Core.Utils.isOrphanedNode(n)};EVUI.Modules.Core.Utils.shallowExtend=function(n,t,i){var c,o,l,f,r,u;if(n==null||typeof n!="object"||t==null||typeof t!="object")return n;var s=!1,e=null,h=!1;if(i!=null)if(typeof i=="function")h=!0;else if(EVUI.Modules.Core.Utils.isArray(i)===!0)for(s=!0,e={},c=i.length,f=0;f<c;f++)e[i[f]]=!0;for(o=EVUI.Modules.Core.Utils.getProperties(t),l=o.length,f=0;f<l;f++)if(r=o[f],h===!0){if(i(r,t,n)!==!1){if(u=t[r],u===undefined)continue;n[r]=u}}else if(s===!0){if(e[r]!==!0){if(u=t[r],u===undefined)continue;n[r]=u}}else{if(u=t[r],u===undefined)continue;n[r]=u}return n};$evui.extend=function(n,t,i){return EVUI.Modules.Core.Utils.shallowExtend(n,t,i)};EVUI.Modules.Core.Utils.makeOrExtendObject=function(n,t,i,r){return t==null?i==null?n:EVUI.Modules.Core.Utils.shallowExtend(n,i,r):i==null?t:t instanceof n.constructor?EVUI.Modules.Core.Utils.shallowExtend(t,i):EVUI.Modules.Core.Utils.shallowExtend(n,i)};EVUI.Modules.Core.Utils.combinePaths=function(n){var t,e,r,i,u,f;if(EVUI.Modules.Core.Utils.isArray(n)===!1)return n;for(t="",e=n.length,r=0;r<e;r++)if(i=n[r],typeof i=="string"){if(r===0){t=i;continue}u=t[t.length-1]==="/";f=i[0]==="/";u===!1&&f===!0?t+=i:u===!0&&f===!0?t+=i.substring(1):u===!1&&f===!1?t+=i[0]==="."?i:"/"+i:u===!0&&f===!1&&(i[0]==="."?t=t.substring(0,t.length-1)+i:t+=i)}return t};$evui.combinePaths=function(n){return EVUI.Modules.Core.Utils.combinePaths(n)};EVUI.Modules.Core.Utils.waitAsync=function(n){if(typeof n!=null&&typeof n!="number")throw new Error("Number expected.");return new Promise(function(t){setTimeout(function(){t()},n)})};$evui.waitAsync=function(n){return EVUI.Modules.Core.Utils.waitAsync(n)};EVUI.Modules.Core.Utils.getValidElement=function(n){return EVUI.Modules.Core.Utils.isElement(n)?n:EVUI.Modules.Core.Utils.isjQuery(n)===!0&&n.length>0&&EVUI.Modules.Core.Utils.isElement(n[0])===!0?n[0]:EVUI.Modules.Dom!=null&&n instanceof EVUI.Modules.Dom.DomHelper&&n.elements.length>0&&EVUI.Modules.Core.Utils.isElement(n.elements[0])===!0?n.elements[0]:null};EVUI.Modules.Core.Utils.isDomHelper=function(n){return EVUI.Modules.Dom!=null&&n instanceof EVUI.Modules.Dom.DomHelper};$evui.isDomHelper=function(n){return EVUI.Modules.Core.Utils.isDomHelper(n)};$evui.getValidElement=function(n){return EVUI.Modules.Core.Utils.getValidElement(n)};EVUI.Modules.Core.Utils.require=function(n,t,i){if(EVUI.Modules[n]==null)throw Error("Dependency missing: Module EVUI.Modules."+n+" is required."+(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)===!1?" "+i:""));if(EVUI.Modules.VersionCheck!=null&&t!==EVUI.Modules[n].version&&EVUI.Modules.VersionCheck.isNewer(t,EVUI.Modules[n].version)===!1)throw Error("Dependency missing: Module EVUI.Modules."+n+" must be at least version "+t+" or higher.");};EVUI.Modules.Core.Utils.requireAll=function(n){if(n==null)throw Error("Dependencies missing.");if(n.checked!==!0){for(var t in n)n[t].required===!0&&EVUI.Modules.Core.Utils.require(t,n[t].version);n.checked=!0}};EVUI.Modules.Core.Utils.isInShadowDom=function(n){if(EVUI.Modules.Core.Utils.isElement(n)===!1)return!1;if(n instanceof ShadowRoot)return!0;for(var t=n.parentNode;t!=null;){if(t instanceof ShadowRoot)return!0;t=t.parentNode}return!1};$evui.isShadow=function(n){return EVUI.Modules.Core.Utils.isInShadowDom(n)};EVUI.Modules.Core.Utils.instanceOf=function(n,t){return n==null||typeof t!="function"?!1:n instanceof t?!0:EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.name)===!0||t.name.toLowerCase()==="object"?!1:"[object "+t.name+"]"===Object.prototype.toString.call(n)?!0:!1};$evui.instanceOf=function(n,t){return EVUI.Modules.Core.Utils.instanceOf(n,t)};EVUI.Modules.Core.Utils.getHashCode=function(n){var c,t;if(typeof n!="string")throw Error("String expected.");var l=n.length,f=0,r=0,e=0,o=0,s=0,u=0,h=0,i=0,a=1;for(c=0;c<l;c++)i=n.charCodeAt(c),i===0?i=10.1667:i===1&&(i=26.567),f=i-c/a,r-=i,r<0&&(r*=-8.1373),i%5==0?(h-=f,h<0&&(h*=-112.69)):i%4==0?(u-=f,u<0&&(u=u*-918.07)):i%3==0?(s-=f,s<0&&(s*=-213.7)):i%2==0?(o-=f,o<0&&(o*=-8.1471)):(e-=f,e<0&&(e*=-10.912)),a=i;return t=(h-u-s-o-e-r)/(l/f),t<0&&(t*=-1),r!==0&&(t===r?t*=Math.sqrt(r):t/=r),e!==0&&t!==e&&(t*=e),o!==0&&t!==o&&(t/=o),s!==0&&t!==s&&(t*=s),u!==0&&t!==u&&(t/=u),h!==0&&t!==h&&(t*=h),i!==0&&t!==i&&(t/=i),t<1&&t!==0&&(t=1/t),t>Number.MAX_SAFE_INTEGER&&(t=Math.sqrt(t)),t};$evui.getHashCode=function(n){return EVUI.Modules.Core.Utils.getHashCode(n)};EVUI.Modules.Core.Utils.toDictionary=function(n,t){var r,e,i,u,f;if(EVUI.Modules.Core.Utils.isArray(n)===!1)throw Error("Array expected.");if(typeof t!="function")throw Error("Function expected.");for(r={},e=n.length,i=0;i<e;i++)(u=n[i],f=t(u,i),f!=null)&&(r[f]=u);return r};$evui.toDictionary=function(n,t){return EVUI.Modules.Core.Utils.toDictionary(n,t)};EVUI.Modules.Core.Utils.getProperties=function(n){var f,h,e,i,o,s,c,u,t,r;if(typeof n!="object"||n==null)return null;if(f=n.constructor==null?null:n.constructor[EVUI.Modules.Core.Constants.Symbol_ObjectProperties],f!=null)return f;if(n.constructor==Object||n.constructor!=null&&n.constructor[EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers]===!1)return Object.keys(n);if(EVUI.Modules.Core.Utils.isArray(n)===!0){for(h=n.length,e=[],i=0;i<h;i++)e.push(i);return e}if(EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers!=null){if(o=n.constructor==null?!1:n.constructor[EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers],o===!0){t=[];for(r in n)t.push(r);return t}if(o===!1)return Object.keys(n);if(s=Object.getPrototypeOf(n),c=Object.keys(s),c.length===0){if(u=Object.getPrototypeOf(s),u===Object.prototype||u==null||Object.getPrototypeOf(u)==null)return n.constructor!=null&&(n.constructor[EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers]=!1),Object.keys(n)}else n.constructor!=null&&(n.constructor[EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers]=!0)}t=[];for(r in n)t.push(r);return t};$evui.props=function(n){return EVUI.Modules.Core.Utils.getProperties(n)};EVUI.Modules.Core.Utils.cacheProperties=function(n,t){return EVUI.Modules.Core.Constants.Symbol_ObjectProperties==null?!1:n==null||typeof n!="object"?!1:Object.getPrototypeOf(n)==Object.prototype?!1:(EVUI.Modules.Core.Utils.isArray(t)===!1&&(t=EVUI.Modules.Core.Utils.getProperties(n)),n.constructor[EVUI.Modules.Core.Constants.Symbol_ObjectProperties]=t,!0)};$evui.cacheProps=function(n,t){return EVUI.Modules.Core.Utils.cacheProperties(n,t)};EVUI.Modules.Core.Utils.uncacheProperties=function(n){return EVUI.Modules.Core.Constants.Symbol_ObjectProperties==null||n==null||typeof n!="object"?!1:(delete n.constructor[EVUI.Modules.Core.Constants.Symbol_ObjectProperties],delete n.constructor[EVUI.Modules.Core.Constants.Symbol_HasPrototypeMembers],!0)};$evui.uncacheProps=function(n){return EVUI.Modules.Core.Utils.uncacheProperties(n)};Object.freeze(EVUI.Modules.Core);Object.freeze(EVUI.Modules.Core.Constants);Object.freeze(EVUI.Modules.Core.Utils);EVUI.Modules.Dialogs={};EVUI.Modules.Dialogs.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),Panes:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Dialogs.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Dialogs.Dependencies);EVUI.Modules.Dialogs.Constants={};EVUI.Modules.Dialogs.Constants.Fn_DialogSelector=function(){return!0};EVUI.Modules.Dialogs.Constants.Fn_LoadCallback=function(){};EVUI.Modules.Dialogs.Constants.Fn_DialogOperationCallback=function(){};EVUI.Modules.Dialogs.Constants.CSS_Position="evui-position";EVUI.Modules.Dialogs.Constants.CSS_ClippedX="evui-clipped-x";EVUI.Modules.Dialogs.Constants.CSS_ClippedY="evui-clipped-y";EVUI.Modules.Dialogs.Constants.CSS_ScrollX="evui-scroll-x";EVUI.Modules.Dialogs.Constants.CSS_ScrollY="evui-scroll-y";EVUI.Modules.Dialogs.Constants.CSS_Flipped="evui-flipped";EVUI.Modules.Dialogs.Constants.CSS_Moved="evui-moved";EVUI.Modules.Dialogs.Constants.CSS_Resized="evui-resized";EVUI.Modules.Dialogs.Constants.CSS_Transition_Show="evui-transition-show";EVUI.Modules.Dialogs.Constants.CSS_Transition_Hide="evui-transition-hide";EVUI.Modules.Dialogs.Constants.Attribute_ID="evui-dlg-id";EVUI.Modules.Dialogs.Constants.Attribute_Focus="evui-dlg-focus";EVUI.Modules.Dialogs.Constants.Attribute_Close="evui-dlg-close";EVUI.Modules.Dialogs.Constants.Attribute_SourceURL="evui-dlg-src";EVUI.Modules.Dialogs.Constants.Attribute_PlaceholderID="evui-dlg-placeholder-id";EVUI.Modules.Dialogs.Constants.Attribute_UnloadOnHide="evui-dlg-unload";EVUI.Modules.Dialogs.Constants.Attribute_Context="evui-dlg-cxt";EVUI.Modules.Dialogs.Constants.Attribute_Selector="evui-dlg-selector";EVUI.Modules.Dialogs.Constants.Attribute_Center="evui-dlg-center";EVUI.Modules.Dialogs.Constants.Attribute_Fullscreen="evui-dlg-fullscreen";EVUI.Modules.Dialogs.Constants.Attribute_Drag="evui-dlg-drag-handle";EVUI.Modules.Dialogs.Constants.Attribute_ResizeHandles="evui-dlg-resize-handles";EVUI.Modules.Dialogs.Constants.Attribute_ResizeHandleWidth="evui-dlg-resize-handle-width";EVUI.Modules.Dialogs.Constants.Attribute_Top="evui-dlg-top";EVUI.Modules.Dialogs.Constants.Attribute_Left="evui-dlg-left";EVUI.Modules.Dialogs.Constants.Attribute_Classes="evui-dlg-class";EVUI.Modules.Dialogs.Constants.Default_ObjectName="Dialog";EVUI.Modules.Dialogs.Constants.Default_ManagerName="DialogManager";EVUI.Modules.Dialogs.Constants.Default_CssPrefix="evui-dlg";EVUI.Modules.Dialogs.Constants.Default_EventNamePrefix="evui.dlg";EVUI.Modules.Dialogs.Constants.Default_AttributePrefix="evui-dlg";Object.freeze(EVUI.Modules.Dialogs.Constants);EVUI.Modules.Dialogs.DialogManager=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Dialogs.Dependencies);var r=this,i=null,t=null;this.addDialog=function(n){if(n==null)throw Error(t.objectName+" cannot be null.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.id)===!0)throw Error(t.objectName+"must have an id that is a non-whitespace string.");var r=t.getPaneEntry(n.id);if(r!=null)throw Error("A "+t.objectName+' with an id of "'+n.id+'" already exists.');return i.addPane(e(n)),r=t.getPaneEntry(n.id),r.wrapper};this.removeDialog=function(n){return i.removePane(n)};this.getDialog=function(n,i){var r=null;return typeof n=="function"?(r=t.getPaneEntry(function(){return!0},!0).map(function(n){return n.wrapper}).filter(n),i!==!0&&r!=null)?r[0]:r:(r=t.getPaneEntry(n,i),r==null)?null:EVUI.Modules.Core.Utils.isArray(r)===!1?r.wrapper:r.map(function(n){return n.wrapper})};this.showDialog=function(n,r,e){var s=f(n,!0),o=new EVUI.Modules.Panes.PaneShowArgs;o.showSettings=t.cloneShowSettings(s.pane.showSettings);o.loadArgs=new EVUI.Modules.Panes.PaneLoadArgs;o.loadArgs.loadSettings=t.cloneLoadSettings(s.pane.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogShowArgs(o),r,["type"]),r.showSettings=r.showSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogShowSettings(o.showSettings),r.showSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs!=null&&r.loadArgs.loadSettings!=null?(r.loadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadArgs(o.loadArgs),r.loadArgs,["type"]),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadSettings(o.loadArgs.loadSettings),r.loadArgs.loadSettings)):(r.loadArgs=new EVUI.Modules.Dialogs.DialogLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings,["type"]))):r=null;r==null&&(r=new EVUI.Modules.Dialogs.DialogShowArgs(o),r.showSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs=new EVUI.Modules.Dialogs.DialogLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.showPane(s.pane.id,o,e)};this.showDialogAsync=function(n,t){return new Promise(function(i){r.showDialog(n,t,function(n){i(n)})})};this.hideDialog=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneHideArgs;o.unloadArgs=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogHideArgs(o),r,["type"]),r.unloadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogUnloadArgs(o.unloadArgs,r.unloadArgs))):r=null;r==null&&(r=new EVUI.Modules.Dialogs.DialogHideArgs(o),r.unloadArgs=new EVUI.Modules.DialogUnloadArgs(o.unloadArgs));t.currentActionArgs=u(r);i.hidePane(s.pane.id,o,e)};this.hideDialogAsync=function(n,t){return new Promise(function(i){r.hideDialog(n,t,function(n){i(n)})})};this.hideAllDialogs=function(n,t){var i;typeof t!="function"&&(t=function(){});var u=this.getDialog(function(n){return n.isVisible}),r=u.length,f=0;if(r===0)return t(!0);for(i=0;i<r;i++)this.hideDialog(u[i],n,function(){return f++,f===r?t(!0):void 0})};this.hideAllDialogsAsync=function(n){return new Promise(function(t){r.hideAllDialogs(n,function(n){t(n)})})};this.loadDialog=function(n,r,e){var s=f(n,!1),o=new EVUI.Modules.Panes.PaneLoadArgs;o.loadSettings=t.cloneLoadSettings(s.pane.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadArgs(o),r,["type"]),r.loadSettings=r.loadSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadSettings(o.loadSettings),r.loadSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadSettings(o.loadSettings),s.wrapper.loadSettings)):r=null;r==null&&(r=new EVUI.Modules.Dialogs.DialogLoadArgs(o),r.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogLoadSettings(o.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.loadPane(s.pane.id,o,e)};this.loadDialogAsync=function(n,t){return new Promise(function(i){r.loadDialog(n,t,function(n){i(n)})})};this.unloadDialog=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r=r!=null&&typeof r=="object"?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dialogs.DialogUnloadArgs(o),r):null;r==null&&(r=new EVUI.Modules.Dialogs.DialogUnloadArgs(o));t.currentActionArgs=u(r);i.unloadPane(s.pane.id,o,e)};this.unloadDialogAsync=function(n,t){return new Promise(function(i){r.unloadDialog(n,t,function(n){i(n)})})};var o=function(n){var t=n.pane.dialog;return delete n.pane.dialog,c(t,n.pane,n.exists)},s=function(n,t){var r,i;return n.foreignArgs==null&&(n.foreignArgs=h(n)),r=null,t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Hide?r=n.foreignArgs.hideArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Load?r=n.foreignArgs.loadArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Show?r=n.foreignArgs.showArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Unload&&(r=n.foreignArgs.unloadArgs),i=new EVUI.Modules.Dialogs.DialogEventArgs(n,r),i.cancel=t.cancel,i.key=t.key,i.pause=t.pause,i.resume=t.resume,i.stopPropagation=t.stopPropagation,i.context=t.context,i},u=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.type===EVUI.Modules.Dialogs.DialogArgumentType.Hide?(t.hideArgs=n,t.unloadArgs=n.unloadArgs):n.type===EVUI.Modules.Dialogs.DialogArgumentType.Show?(t.showArgs=n,t.loadArgs=n.loadArgs):n.type===EVUI.Modules.Dialogs.DialogArgumentType.Load?t.loadArgs=n:n.type===EVUI.Modules.Dialogs.DialogArgumentType.Unload&&(t.unloadArgs=n),t},h=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.hideArgs!=null&&(t.hideArgs=new EVUI.Modules.Dialogs.DialogHideArgs(n.hideArgs),t.hideArgs.unloadArgs=new EVUI.Modules.Dialogs.DialogUnloadArgs(n.hideArgs.unloadArgs)),n.showArgs!=null&&(t.showArgs=new EVUI.Modules.Dialogs.DialogShowArgs(n.showArgs),t.showArgs.showSettings=new EVUI.Modules.Dialogs.DialogShowSettings(n.showArgs.showSettings),t.showArgs.loadArgs=new EVUI.Modules.Dialogs.DialogLoadArgs(n.showArgs.loadArgs),t.showArgs.loadArgs.loadSettings=new EVUI.Modules.Dialogs.DialogLoadSettings(n.showArgs.loadArgs.loadSettings)),n.loadArgs!=null&&(t.loadArgs=new EVUI.Modules.Dialogs.DialogLoadArgs(n.loadArgs),t.loadArgs.loadSettings=new EVUI.Modules.Dialogs.DialogLoadSettings(n.loadArgs.loadSettings)),n.unloadArgs!=null&&(t.unloadArgs=new EVUI.Modules.Dialogs.DialogUnloadArgs(n.unloadArgs)),t},c=function(n,i,r){var u=null,e,f;return r===!0?(e=t.getPaneEntry(n.id),u=e.wrapper):u=new EVUI.Modules.Dialogs.Dialog(i),f=EVUI.Modules.Core.Utils.shallowExtend({},n),delete f.id,r===!0&&n.element===i.element&&delete f.element,delete f.currentPosition,delete f.currentZIndex,delete f.isVisible,delete f.isInitialized,delete f.isLoaded,EVUI.Modules.Core.Utils.shallowExtend(u,f,["showSettings","loadSettings","autoCloseSettings","resizeMoveSettings"]),u.showSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Dialogs.DialogShowSettings(i.showSettings),u.showSettings,n.showSettings),u.loadSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Dialogs.DialogLoadSettings(i.loadSettings),u.loadSettings,n.loadSettings),u.autoCloseSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Dialogs.DialogAutoCloseSettings(i.autoCloseSettings),u.autoCloseSettings,n.autoCloseSettings),u.resizeMoveSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Dialogs.DialogResizeMoveSettings(i.resizeMoveSettings),u.resizeMoveSettings,n.resizeMoveSettings),u},f=function(n,i){var r;if(n==null||typeof n!="string"&&typeof n!="object")throw Error("Invalid input: "+t.objectName+" or string id expected.");return n instanceof Event?t.getPaneEntryAmbiguously(n,i):(r={},typeof n=="string"?r=e({id:n}):(r.id=n.id,r.dialog=n),t.getPaneEntryAmbiguously(r,i))},e=function(n){var i,r;return typeof n.id=="string"&&(i=t.getPaneEntry(n.id),i!=null&&i.pane!=null)?(r=EVUI.Modules.Core.Utils.shallowExtend({},i.pane),r.dialog=n,r):{id:n.id,autoCloseSettings:{closeMode:EVUI.Modules.Panes.PaneCloseMode.Explicit,autoCloseKeys:["Escape","Enter"]},showSettings:{center:!0},clipSettings:{clipMode:EVUI.Modules.Dialogs.DialogClipMode.Shift,clipBounds:document.documentElement},resizeMoveSettings:{canDragMove:!0,canResizeBottom:!0,canResizeLeft:!0,canResizeRight:!0,canResizeTop:!0,dragHanldeMargin:20},dialog:n}},l=function(n,t){EVUI.Modules.Core.Utils.shallowExtend(n,e({id:n.id}));n.showSettings==null&&(n.showSettings={});n.resizeMoveSettings==null&&(n.resizeMoveSettings={});var i=EVUI.Modules.Core.Utils.getElementAttributes(t.currentTarget),o=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_Center),s=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_Fullscreen),h=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_Drag),r=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_ResizeHandles),u=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_ResizeHandleWidth),c=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_Top),f=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_Left),l=i.getValue(EVUI.Modules.Dialogs.Constants.Attribute_Classes);return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)===!1&&(s=s.toLowerCase(),s==="false"?n.showSettings.fullscreen=!1:s==="true"&&(n.showSettings.fullscreen=!0)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(o)===!1&&(o=o.toLowerCase(),o==="false"?n.showSettings.center=!1:o==="true"&&(n.showSettings.center=!0)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f)===!1&&(n.showSettings.absolutePosition==null&&(n.showSettings.absolutePosition={}),f=parseFloat(f,f.toLowerCase().replace("px","")),isNaN(f)===!1&&(n.showSettings.absolutePosition.left=f)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(c)===!1&&(n.showSettings.absolutePosition==null&&(n.showSettings.absolutePosition={}),c=parseFloat(c,c.toLowerCase().replace("px","")),isNaN(f)===!1&&(n.showSettings.absolutePosition.top=c)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(l)===!1&&(n.showSettings.positionClass=l),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(h)===!1&&(h=h.toLowerCase(),h==="true"?n.resizeMoveSettings.canDragMove=!0:h==="false"&&(n.resizeMoveSettings.canDragMove=!1)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!1&&(r=r.toLowerCase(),n.resizeMoveSettings.canResizeLeft=!1,n.resizeMoveSettings.canResizeRight=!1,n.resizeMoveSettings.canResizeTop=!1,n.resizeMoveSettings.canResizeBottom=!1,r.indexOf("left")!==-1&&(n.resizeMoveSettings.canResizeLeft=!0),r.indexOf("right")!==-1&&(n.resizeMoveSettings.canResizeRight=!0),r.indexOf("top")!==-1&&(n.resizeMoveSettings.canResizeTop=!0),r.indexOf("bottom")!==-1&&(n.resizeMoveSettings.canResizeBottom=!0)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u)===!1&&(u=parseFloat(u,u.toLowerCase().replace("px","")),isNaN(u)===!1&&u>=0&&(n.resizeMoveSettings.resizeHadleWidth=u)),!0},a=function(n){v(n)},v=function(n){n.pane.addEventBinding(n.pane.element,"mousedown",function(){var i=n.pane.currentZIndex,r;i>=EVUI.Modules.Panes.Constants.GlobalZIndex||(EVUI.Modules.Panes.Constants.GlobalZIndex++,i=EVUI.Modules.Panes.Constants.GlobalZIndex,r="."+n.paneCSSName+"."+EVUI.Modules.Dialogs.Constants.CSS_Position,EVUI.Modules.Styles.Manager.ensureSheet(t.cssSheetName,{lock:!0}),EVUI.Modules.Styles.Manager.setRules(t.cssSheetName,r,{zIndex:i}))})};t=new EVUI.Modules.Panes.PaneManagerSettings;t.attributePrefix=EVUI.Modules.Dialogs.Constants.Default_AttributePrefix;t.cssPrefix=EVUI.Modules.Dialogs.Constants.Default_CssPrefix;t.cssSheetName=EVUI.Modules.Styles.Constants.DefaultStyleSheetName;t.eventNamePrefix=EVUI.Modules.Dialogs.Constants.Default_EventNamePrefix;t.managerName=EVUI.Modules.Dialogs.Constants.Default_ManagerName;t.objectName=EVUI.Modules.Dialogs.Constants.Default_ObjectName;t.makeOrExtendObject=o;t.buildEventArgs=s;t.interpretBrowserEvent=l;t.hookUpEventHandlers=a;t.manager=r;(n==null||typeof n!="object")&&(n=new EVUI.Modules.Dialogs.DialogControllerServices);(n.paneManager==null||typeof n.paneManager!="object")&&(n.paneManager=EVUI.Modules.Panes.Manager);t.httpManager=n.httpManager;t.stylesheetManager=n.stylesheetManager;t.htmlLoader=n.htmlLoader;i=new n.paneManager.createNewPaneManager(t);this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnloaded",targetPath:"onUnloaded"})};EVUI.Modules.Dialogs.Dialog=function(n){if(n==null)throw Error("Invalid input. Must wrap a Pane.");var t=n;this.id=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"id",targetPath:"id",settings:{set:!1}});this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.unloadOnHide=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadOnHide",targetPath:"unloadOnHide"});this.currentPosition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentPosition",targetPath:"currentPosition",settings:{set:!1}});this.currentZIndex=-1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentZIndex",targetPath:"currentZIndex",settings:{set:!1}});this.isVisible=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isVisible",targetPath:"isVisible",settings:{set:!1}});this.isLoaded=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isLoaded",targetPath:"isLoaded",settings:{set:!1}});this.isInitialized=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isInitialized",targetPath:"isInitialized",settings:{set:!1}});this.showSettings=null;this.loadSettings=null;this.autoCloseSettings=null;this.resizeMoveSettings=null;this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnloaded",targetPath:"onUnloaded"});this.getEventBindings=function(){return t.getEventBindings()};this.addEventBinding=function(n,i,r){return t.addEventBinding(n,i,r)}};EVUI.Modules.Dialogs.DialogShowSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowSettings:n;t.clipSettings==null&&(t.clipSettings=new EVUI.Modules.Panes.PaneClipSettings);t.absolutePosition==null&&(t.absolutePosition=new EVUI.Modules.Panes.PaneAbsolutePosition);this.fullscreen=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"fullscreen",targetPath:"fullscreen"});this.center=!0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"center",targetPath:"center"});this.top=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"top",targetPath:"absolutePosition.top"});this.left=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"left",targetPath:"absolutePosition.left"});this.positionClass=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"positionClass",targetPath:"positionClass"});this.showTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"showTransition",targetPath:"showTransition"});this.hideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"hideTransition",targetPath:"hideTransition"});this.clipBounds=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"clipBounds",targetPath:"clipSettings.clipBounds"});this.clipMode=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"clipMode",targetPath:"clipSettings.mode"});this.setExplicitDimensions=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"setExplicitDimensions",targetPath:"setExplicitDimensions"})};EVUI.Modules.Dialogs.DialogEventArgs=function(n,t){if(n==null||t==null)throw Error("Invalid arguments.");var i=n,r=t;this.dialog=null;Object.defineProperty(this,"dialog",{get:function(){return i.wrapper},configurable:!1,enumerable:!0});this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.calculatedPosition=null;Object.defineProperty(this,"calculatedPosition",{get:function(){return i.lastCalculatedPosition},configurable:!1,enumerable:!0});this.currentActionArgs=null;Object.defineProperty(this,"currentActionArgs",{get:function(){return r},configurable:!1,enumerable:!0});this.context={}};EVUI.Modules.Dialogs.DialogLoadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"type",targetPath:"type"}]);this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"context",targetPath:"context"}]);this.loadSettings=null;this.reload=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"reload",targetPath:"reload"}])};EVUI.Modules.Dialogs.DialogShowArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.showSettings=null;this.loadArgs=null;this.reInitialize=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"reInitialize",targetPath:"reInitialize"})};EVUI.Modules.Dialogs.DialogHideArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneHideArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.dialogHideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"dialogHideTransition",targetPath:"paneHideTransition"});this.unloadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadArgs",targetPath:"unloadArgs"})};EVUI.Modules.Dialogs.DialogUnloadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneUnloadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.remove=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"remove",targetPath:"remove"})};EVUI.Modules.Dialogs.DialogTransition=function(){this.css=null;this.keyframes=null;this.duration=0};EVUI.Modules.Dialogs.DialogLoadSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadSettings:n;this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.selector=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"selector",targetPath:"selector"});this.contextElement=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"contextElement",targetPath:"contextElement"});this.httpLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"httpLoadArgs",targetPath:"httpLoadArgs"});this.placeholderLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"placeholderLoadArgs",targetPath:"placeholderLoadArgs"})};EVUI.Modules.Dialogs.DialogAutoCloseSettings=function(n){var t=n==null||typeof n!="object"?EVUI.Modules.Panes.PaneAutoCloseSettings():n;this.autoCloseKeys=[];EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"autoCloseKeys",targetPath:"autoCloseKeys"});this.autoCloseFilter=function(){return!0};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"autoCloseFilter",targetPath:"autoCloseFilter"})};EVUI.Modules.Dialogs.DialogResizeMoveSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneResizeMoveSettings:n;this.canDragMove=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canDragMove",targetPath:"canDragMove"});this.canResizeTop=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeTop",targetPath:"canResizeTop"});this.canResizeBottom=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeBottom",targetPath:"canResizeBottom"});this.canResizeLeft=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeLeft",targetPath:"canResizeLeft"});this.canResizeRight=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeRight",targetPath:"canResizeRight"});this.dragHanldeMargin=15;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"dragHanldeMargin",targetPath:"dragHanldeMargin"});this.restoreDefaultOnHide=!0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"restoreDefaultOnHide",targetPath:"restoreDefaultOnHide"})};EVUI.Modules.Dialogs.DialogControllerServices=function(){this.httpManager=null;this.htmlLoader=null;this.stylesheetManager=null;this.panesManager=null};EVUI.Modules.Dialogs.DialogArgumentType={Show:"show",Hide:"hide",Load:"load",Unload:"unload",MoveResize:"moveResize"};Object.freeze(EVUI.Modules.Dialogs.DialogArgumentType);EVUI.Modules.Dialogs.DialogClipMode={Overflow:"overflow",Clip:"clip",Shift:"shift"};Object.freeze(EVUI.Modules.Dialogs.DialogClipMode);EVUI.Modules.Dialogs.Manager=null,function(){var n=null,t=EVUI.Modules.Dialogs.DialogManager;Object.defineProperty(EVUI.Modules.Dialogs,"Manager",{get:function(){return n==null&&(n=new t),n},enumerable:!0,configurable:!1})}();Object.freeze(EVUI.Modules.Dialogs);delete $evui.dialogs;$evui.dialogs=null;Object.defineProperty($evui,"dialogs",{get:function(){return EVUI.Modules.Dialogs.Manager},enumerable:!0});$evui.addDialog=function(n){return EVUI.Modules.Dialogs.Manager.addDialog(n)};$evui.showDialog=function(n,t,i){return EVUI.Modules.Dialogs.Manager.showDialog(n,t,i)};$evui.showDialogAsync=function(n,t){return EVUI.Modules.Dialogs.Manager.showDialogAsync(n,t)};$evui.hideDialog=function(n,t,i){return EVUI.Modules.Dialogs.Manager.hideDialog(n,t,i)};$evui.hideDialogAsync=function(n,t){return EVUI.Modules.Dialogs.Manager.hideDialogAsync(n,t)};EVUI.Modules.Diff={};EVUI.Modules.Diff.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Diff.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Diff.Dependencies);EVUI.Modules.Diff.Constants={};EVUI.Modules.Diff.Constants.Fn_ShouldComparePredicate=function(){return!0};Object.freeze(EVUI.Modules.Diff.Constants);EVUI.Modules.Diff.SymbolCache=null,function(){var n={};Object.defineProperty(EVUI.Modules.Diff,"SymbolCache",{get:function(){return n},enumerable:!0,configurable:!1})}();EVUI.Modules.Diff.DiffController=function(){var o=function(){this.objectParentage=[];this.counter=0;this.objectHashCodes=[];this.compareResult=new EVUI.Modules.Diff.CompareResult;this.mode=n.Diff;this.hashCache={};this.getValueHashCode=function(n){return u(this,n)}},s={Unknown:-1,Common:0,AOnly:1,BOnly:2},w=function(){this.key=null;this.flags=s.Unknown},h=function(){this.obj=null;this.hash=null},n={Diff:0,GetValueHash:1,StringDiff:2},c=EVUI.Modules.Core.Utils.getHashCode("##evui.null##"),l=EVUI.Modules.Core.Utils.getHashCode("##evui.undefined##"),a=EVUI.Modules.Core.Utils.getHashCode("##evui.true##"),v=EVUI.Modules.Core.Utils.getHashCode("##evui.false##");this.compare=function(r,u,f){var e=i(f,n.Diff);return e.compareResult.rootComparison=t(e,r,u,null,null),e.compareResult};this.getValueHashCode=function(t,f){var e=i(f,n.GetValueHash);return r(e,null,t,null,typeof t,null,!0)===!1?null:u(e,t)};this.compareStrings=function(r,u,f){var o;if(typeof r!="string"||typeof u!="string")throw Error("Invalid parameters: cannot compare non-string values.");o=new EVUI.Modules.Diff.CompareOptions;o.diffStrings=!0;o.stringCompareOptions=f;var s=i(o,n.StringDiff),h=t(s,r,u),e=new EVUI.Modules.Diff.StringCompareResult;return e.a=r,e.b=u,e.options=s.compareResult.options,e.stringDiffs=h.differences,e};var i=function(t,i){t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Diff.CompareOptions,t);t.exclusionFilters!=null&&EVUI.Modules.Core.Utils.isArray(t.exclusionFilters)===!0&&(t.exclusionFilters=t.exclusionFilters.slice());t.stringCompareOptions=t.stringCompareOptions==null?new EVUI.Modules.Diff.StringCompareOptions:EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Diff.StringCompareOptions,t.stringCompareOptions);var r=new o;return r.compareResult.options=t,i==null&&(i=n.Diff),r},r=function(n,t,i,r,u,f,e){var h,o,s;if(n.compareResult.options.excludeFunctions===!0&&(u==="function"||f==="function")||u==="object"&&i instanceof Node||f==="object"&&r instanceof Node)return!1;if(n.compareResult.options.exclusionFilters!=null)if(typeof n.compareResult.options.exclusionFilters=="function"){if(n.compareResult.options.exclusionFilters(i,t)===!1||e===!1&&n.compareResult.options.exclusionFilters(r,t)===!1)return!1}else if(EVUI.Modules.Core.Utils.isArray(n.compareResult.options.exclusionFilters)===!0)for(h=n.compareResult.options.exclusionFilters.length,o=0;o<h;o++)if(s=n.compareResult.options.exclusionFilters[o],typeof s=="function"&&(s(i,t)===!1||e===!1&&s(r,t)===!1))return!1;return!0},t=function(n,t,i,u,e){var s=typeof t,h=typeof i,o,c;return r(n,u,t,i,s,h,!1)===!1?null:(o=new EVUI.Modules.Diff.Comparison(n),o.id=n.counter++,o.a=t,o.b=i,o.parentComparison=e,o.propName=u,n.compareResult.allComparisons.push(o),s==="object"&&h==="object"?(o.diffType=EVUI.Modules.Diff.DiffType.Object,t!=null&&i!=null?(o=f(n,o),t.prototype!==i.prototype&&(o.flags|=EVUI.Modules.Diff.DiffFlags.Prototype)):((t!=null||i!=null)&&(o.flags|=t!=null?EVUI.Modules.Diff.DiffFlags.AOnly:EVUI.Modules.Diff.DiffFlags.BOnly,o.flags|=EVUI.Modules.Diff.DiffFlags.Reference),o=f(n,o))):(t!==i&&(o.flags|=EVUI.Modules.Diff.DiffFlags.Value),s==="string"&&h==="string"?(o.diffType=EVUI.Modules.Diff.DiffType.String,n.compareResult.options.diffStrings===!0&&(o.differences=y(t,i))):(o.diffType=EVUI.Modules.Diff.DiffType.Property,s!==h&&(o.flags|=EVUI.Modules.Diff.DiffFlags.Prototype))),c=n.compareResult.options.compareValuesOnly===!0?EVUI.Modules.Core.Utils.removeFlag(o.flags,EVUI.Modules.Diff.DiffFlags.Reference):o.flags,e!=null&&(e.childComparisons.push(o),c!==EVUI.Modules.Diff.DiffFlags.None&&(e.differences.push(o),e.flags|=EVUI.Modules.Diff.DiffFlags.Children)),c!==EVUI.Modules.Diff.DiffFlags.None?n.compareResult.allDifferences.push(o):n.compareResult.allInCommon.push(o),o)},y=function(n,t){var o,h,k,g,d,y,a,e,f,u;if(n===t)return[];for(var c=[],s=null,p=n.length,w=t.length,tt=p>=w?p:w,i=0,r=0,b="";i<tt||r<tt;)if(o=n[i],h=t[r],o!==h&&o!==undefined&&h!==undefined){if(s!=null&&(s.text=b,b="",c.push(s),s=null),k=!1,g=!1,o!==undefined&&h!==undefined){var l=i,v=r,nt=w;for(y=i;y<p;y++)if(a=i+(y-i),o=n[a],a<nt){for(e=r;e<nt;e++)if(t[e]===o){k=!0;nt=e;l=a;v=e;break}}else break;for(d=k===!0?l:p,y=r;y<w;y++)if(a=r+(y-r),h=t[a],a<d){for(e=i;e<d;e++)if(h===n[e]){g=!0;d=e;(a<=v||e<=l)&&(v=a,l=e);break}}else break}if(o=n[l],h=t[v],o!==h)if(k===!1&&g===!1)l=p,v=w;else{u=new EVUI.Modules.Diff.StringDifference;u.aIndex=i;u.text=n.substring(i,p);u.flags|=EVUI.Modules.Diff.DiffFlags.AOnly;c.push(u);f=new EVUI.Modules.Diff.StringDifference;f.bIndex=r;f.text=t.substring(r,w);f.flags|=EVUI.Modules.Diff.DiffFlags.BOnly;c.push(f);break}l!==i&&(u=new EVUI.Modules.Diff.StringDifference,u.aIndex=i,u.text=n.substring(i,l),u.flags|=EVUI.Modules.Diff.DiffFlags.AOnly,c.push(u),i=l);v!==r&&(f=new EVUI.Modules.Diff.StringDifference,f.bIndex=r,f.text=t.substring(r,v),f.flags|=EVUI.Modules.Diff.DiffFlags.BOnly,c.push(f),r=v)}else if(o===undefined&&h!==undefined){f=new EVUI.Modules.Diff.StringDifference;f.bIndex=r;f.text=t.substring(r,w);f.flags|=EVUI.Modules.Diff.DiffFlags.BOnly;c.push(f);break}else if(h===undefined&&o!==undefined){u=new EVUI.Modules.Diff.StringDifference;u.aIndex=i;u.text=n.substring(i,p);u.flags|=EVUI.Modules.Diff.DiffFlags.AOnly;c.push(u);break}else if(o===undefined&&h===undefined)break;else s==null&&(s=new EVUI.Modules.Diff.StringDifference,s.aIndex=i,s.bIndex=r),b+=o,i++,r++;return s!=null&&(s.text=b,c.push(s)),c},f=function(n,i){var h,a,c,p,u,r,e;if(i.a===i.b)return i;i.flags|=EVUI.Modules.Diff.DiffFlags.Reference;var l={},o=i.a==null,s=i.b==null;if(o===!1)for(h=EVUI.Modules.Core.Utils.getProperties(i.a),a=h.length,u=0;u<a;u++){var r=h[u],v=i.a[r],y=s===!1?i.b[r]:undefined,f=t(n,v,y,r,i);f!=null&&(s===!1&&(l[r]=f),f.flags|=EVUI.Modules.Diff.DiffFlags.AOnly)}if(s===!1)for(c=EVUI.Modules.Core.Utils.getProperties(i.b),p=c.length,u=0;u<p;u++){if(r=c[u],o===!1&&(e=l[r],e!=null)){e.flags=EVUI.Modules.Core.Utils.removeFlag(e.flags,EVUI.Modules.Diff.DiffFlags.AOnly);continue}var v=o===!1?i.a[r]:undefined,y=i.b[r],f=t(n,v,y,r,i);f!=null&&(f.flags|=EVUI.Modules.Diff.DiffFlags.BOnly)}return i},u=function(n,t){var f,e,i,r,u;if(t===null)return c;if(t===undefined)return l;f=typeof t;switch(f){case"string":return t.length<=36?(i=n.hashCache[t],i==null?(r=EVUI.Modules.Core.Utils.getHashCode(t),n.hashCache[t]=r,r):i):EVUI.Modules.Core.Utils.getHashCode(t);case"boolean":return t===!0?a:v;case"bigint":case"number":return e=t.toString()+"##evui."+f+"##",i=n.hashCache[e],i==null?(r=EVUI.Modules.Core.Utils.getHashCode(e),n.hashCache[e]=r,r):i;case"function":return n.options.excludeFunctions===!0?"":EVUI.Modules.Core.Utils.getHashCode(t.toString()+"##evui."+f+"##");case"symbol":return u=EVUI.Modules.Diff.SymbolCache[t],u==null&&(u=EVUI.Modules.Core.Utils.getHashCode(EVUI.Modules.Core.Utils.makeGuid()),EVUI.Modules.Diff.SymbolCache[t]=u),u;case"object":return p(n,t);default:return""}},p=function(n,t){var f=e(n,t),o,s,i,c,l,v;if(f==null)f=new h,f.obj=t,n.objectHashCodes.push(f);else if(f.hash!=null)return f.hash;n.objectParentage.push(t);var a="##evui.object##@",y=EVUI.Modules.Core.Utils.getProperties(t),p=y.length;for(o=0;o<p;o++)(s=y[o],i=t[s],r(n,s,i,null,typeof i,null,!0)!==!1)&&(a+="##evui.prop##"+s+':"',c=null,n.objectParentage.indexOf(i)!==-1?(l=e(n,i),c=l!=null&&l.hash!=null?l.hash:n.compareResult.options.compareValuesOnly===!0?EVUI.Modules.Core.Utils.getHashCode("##evui.circular##{}"):EVUI.Modules.Core.Utils.getHashCode("##evui.circular##"+Object.prototype.toString.call(i)+i.constructor.toString())):c=u(n,i),a+=c+'"');return v=EVUI.Modules.Core.Utils.getHashCode(a),f.hash=v,n.objectParentage.pop(),v},e=function(n,t){for(var r,u=n.objectHashCodes.length,i=0;i<u;i++)if(r=n.objectHashCodes[i],r.obj===t)return r;return null}};EVUI.Modules.Diff.CompareResult=function(){this.rootComparison=null;this.allDifferences=[];this.allComparisons=[];this.allInCommon=[];this.options=null};EVUI.Modules.Diff.CompareResult.prototype.getAllValueMatches=function(n){var f,o,u,t;if(typeof n!="number")throw Error("Number expected.");for(f=[],o=this.allComparisons.length,u=0;u<o;u++){var i=this.allComparisons[u],r=null,e=null;i.getAHashCode()===n?(r=i,e=i.a):i.getBHashCode()===n&&(r=i,e=i.b);r!=null&&(t=new EVUI.Modules.Diff.CompareMatch,t.comparison=r,t.matchingObject=e,t.name=r.propName,t.path=r.getPath(),t.source=n,f.push(t))}return f};EVUI.Modules.Diff.CompareResult.prototype.getAllReferenceMatches=function(n){var f,e,u,r,t,i;if(n==null||typeof n!="object")throw Error("Object expected.");for(f=[],e=this.allComparisons.length,u=0;u<e;u++)r=this.allComparisons[u],t=null,r.a===n?t=r:r.b===n&&(t=r),t!=null&&(i=new EVUI.Modules.Diff.CompareMatch,i.comparison=t,i.matchingObject=n,i.name=t.propName,i.path=t.getPath(),i.source=n,f.push(i));return f};EVUI.Modules.Diff.Comparison=function(n){var t=this,u=n,i=null,r=null;this.id=-1;this.propName=null;this.a=null;this.b=null;this.diffType=EVUI.Modules.Diff.DiffType.None;this.flags=EVUI.Modules.Diff.DiffFlags.None;this.parentComparison=null;this.childComparisons=[];this.differences=[];this.getAHashCode=function(){return i!=null?i:(i=u.getValueHashCode(t.a),t.a===t.b&&(r=i),i)};this.getBHashCode=function(){return r!=null?r:(r=u.getValueHashCode(t.b),t.a===t.b&&(i=r),r)}};EVUI.Modules.Diff.CompareMatch=function(){this.source=null;this.matchingObject=null;this.path=null;this.name=null;this.comparison=null};EVUI.Modules.Diff.Comparison.prototype.getPath=function(){if(this.propName==null)return null;for(var t=this.propName,n=this.parentComparison;n!=null&&n.propName!=null;)t=n.propName+"."+t,n=n.parentComparison;return t};EVUI.Modules.Diff.StringDifference=function(){this.aIndex=-1;this.bIndex=-1;this.text=null;this.flags=EVUI.Modules.Diff.DiffFlags.None};EVUI.Modules.Diff.StringCompareResult=function(){this.a=null;this.b=null;this.options=null;this.stringDiffs=[]};EVUI.Modules.Diff.MergeWinner={A:"a",B:"b"};Object.freeze(EVUI.Modules.Diff.MergeWinner);EVUI.Modules.Diff.DiffType={None:"none",String:"string",Object:"object",Property:"prop"};Object.freeze(EVUI.Modules.Diff.DiffType);EVUI.Modules.Diff.DiffFlags={None:0,Reference:1,Value:2,AOnly:4,BOnly:8,Children:16,Prototype:32};Object.freeze(EVUI.Modules.Diff.DiffFlags);EVUI.Modules.Diff.CompareOptions=function(){this.excludeFunctions=!0;this.compareValuesOnly=!1;this.exclusionFilters=null;this.diffStrings=!1;this.stringCompareOptions=null};EVUI.Modules.Diff.StringCompareOptions=function(){this.mode=EVUI.Modules.Diff.StringDiffMode.Character;this.whitespaceWordBreaks=!0;this.wordBreaks=[]};EVUI.Modules.Diff.StringDiffMode={Character:"character",Word:"word"};Object.freeze(EVUI.Modules.Diff.StringDiffMode);EVUI.Modules.Diff.Comparer=null,function(){var n=null;Object.defineProperty(EVUI.Modules.Diff,"Comparer",{get:function(){return n==null&&(n=new EVUI.Modules.Diff.DiffController),n},enumerable:!0,configurable:!1})}();$evui.diff=function(n,t,i){return EVUI.Modules.Diff.Comparer.compare(n,t,i)};$evui.strDiff=function(n,t){return EVUI.Modules.Diff.Comparer.compareStrings(n,t)};$evui.getValueHashCode=function(n,t){return EVUI.Modules.Diff.Comparer.getValueHashCode(n,t)};EVUI.Modules.Dom={};EVUI.Modules.Dom.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Dom.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Dom.Dependencies);EVUI.Modules.Dom.Constants={};EVUI.Modules.Dom.Constants.PreviousDisplayState="evuiDisplayState";EVUI.Modules.Dom.Constants.Fn_BrowserEventHandler=function(){};Object.freeze(EVUI.Modules.Dom.Constants);EVUI.Modules.Dom.ControlInfo=function(n,t){if(EVUI.Modules.Dom.Dependencies.checked!==!0){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Dom.Dependencies)}if(typeof n!="string")throw Error("ID must be a string.");var r=n,i=null,u=null;this.id=null;Object.defineProperty(this,"id",{get:function(){return r},configurable:!1,enumerable:!0});this.control=null;Object.defineProperty(this,"control",{get:function(){return i},configurable:!1,enumerable:!0});this.attributes=t==null?{}:t;this.getControl=function(n){return n!==!0&&i!=null?i:i=EVUI.Modules.Core.Utils.stringStartsWith("#",r)===!0?document.getElementById(r.substring(1)):document.getElementById(r)};this.getHelper=function(n){if(n!==!0&&u!=null)return u;var t=this.getControl(n);return t==null?null:u=new EVUI.Modules.Dom.DomHelper(t)}};EVUI.Modules.Dom.DomHelper=function(){var r=null,n=function(n,t){if(EVUI.Modules.Dom.Dependencies.checked!==!0){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Dom.Dependencies)}this.elements=Object.freeze(v(n,t))},h=function(){this.previousDisplayState=null;this.displayStateWasInlined=!1},s=function(n){r==null&&(r=EVUI.Modules.Core.Utils.getHashCode("@BTMDom:"+EVUI.Modules.Core.Utils.makeGuid()).toString(36));var t=n[r];return t==null&&(t=new h,n[r]=t),t},y=function(){},t=function(n,t){var u,i,r;if(n!=null)for(u=n.length,i=0;i<u;i++)(r=n[i],r!=null)&&t(r)};n.prototype.hide=function(){return t(this.elements,function(n){var f=n.nodeType,u;if(f===Node.ELEMENT_NODE){var r=s(n),t=null,i=!1;(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.style.display)==!1&&(t=n.style.display,i=!0),t!=="none")&&(t==null&&(u=getComputedStyle(n),t=u.display,i=!1),r.displayStateWasInlined=i,r.previousDisplayState=t,n.style.display="none")}}),this};n.prototype.show=function(){return t(this.elements,function(n){var i=n.nodeType,t;i===Node.ELEMENT_NODE&&(t=s(n),n.style.display=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.previousDisplayState)===!1?t.displayStateWasInlined===!1?null:t.previousDisplayState:"inline-block",t.previousDisplayState=null,t.displayStateWasInlined=!1)}),this};n.prototype.outerHeight=function(n){return this.elements==null?0:this.elements.length>0?c(this.elements[0],n):0};n.prototype.outerWidth=function(n){return this.elements==null?0:this.elements.length>0?l(this.elements[0],n):0};n.prototype.append=function(n){return u(this.elements,n,"append")};n.prototype.prepend=function(n){return u(this.elements,n,"prepend")};n.prototype.insertBefore=function(n){return u(this.elements,n,"before")};n.prototype.insertAfter=function(n){return u(this.elements,n,"after")};n.prototype.remove=function(){return t(this.elements,function(n){(n.nodeType===Node.TEXT_NODE||n.nodeType===Node.ELEMENT_NODE)&&n.remove()}),this};n.prototype.empty=function(){return t(this.elements,function(n){if(n.childNodes!=null)for(var t=n.childNodes[0];t!=null;)t.remove(),t=n.childNodes[0];n.textContent!==undefined&&(n.textContent=null)}),this};n.prototype.replace=function(n){var i=[];return t(this.elements,function(t){var r,u;if(t.nodeType===Node.ELEMENT_NODE||t.nodeType===Node.TEXT_NODE){var f=e(n),o=document.createDocumentFragment(),s=f.length;for(r=0;r<s;r++)u=f[r],o.append(u),i.push(u);t.replaceWith(o)}}),new EVUI.Modules.Dom.DomHelper(i)};n.prototype.offset=function(){var n=new EVUI.Modules.Dom.ElementBounds,t,r,i;return this.elements==null||this.elements.length===0?n:(t=this.elements[0],t===window)?(n.top=window.scrollY,n.left=window.scrollX,n.bottom=window.scrollY+this.outerHeight(),n.right=window.scrollX+this.outerWidth(),n):t instanceof DocumentFragment?n:(r=t.style.display,t.style.display="inline-block",i=t.getBoundingClientRect(),n.left=i.left+window.scrollX,n.top=i.top+window.scrollY,n.right=n.left+i.width,n.bottom=n.top+i.height,t.style.display=r,n)};n.prototype.attr=function(n,i){if(this.elements!=null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)!==!0)return i===undefined?this.elements.length===0?null:this.elements[0].getAttribute(n):(t(this.elements,function(t){t.nodeType===Node.ELEMENT_NODE&&(i===null?t.removeAttribute(n):t.setAttribute(n,i.toString()))}),this)};n.prototype.addClass=function(n){return f(this.elements,n,"add"),this};n.prototype.removeClass=function(n){return f(this.elements,n,"remove"),this};n.prototype.toggleClass=function(n,t){return f(this.elements,n,"toggle",t),this};n.prototype.hasClass=function(n,t){var r,e,i,u,f;if(typeof n!="string"||this.elements==null)return!1;for(r=!1,e=this.elements.length,i=0;i<e;i++)if(u=this.elements[i],u.nodeType===Node.ELEMENT_NODE){if(f=u.classList.contains(n),t===!0&&f===!1)return!1;if(f===!0&&(r=!0,t!==!0))break}return r};n.prototype.text=function(n){return t(this.elements,function(t){t.innerText!==undefined&&(t.innerText=n)}),this};n.prototype.on=function(n,i){if(n!=null&&typeof i=="function"&&this.elements!=null){typeof n=="string"&&(n=n.split(/\s+/));EVUI.Modules.Core.Utils.isArray(n)===!1&&(n=[n]);var r=n.length;r!=0&&t(this.elements,function(t){var u,f;if(t instanceof DocumentFragment!=!0)for(u=0;u<r;u++)(f=n[u],typeof f=="string")&&t.addEventListener(f,i)})}};n.prototype.off=function(n,i){if(n!=null&&typeof i=="function"&&this.elements!=null){typeof n=="string"&&(n=n.split(/\s+/));EVUI.Modules.Core.Utils.isArray(n)===!1&&(n=[n]);var r=n.length;r!=0&&t(this.elements,function(t){var u,f;if(!(t instanceof DocumentFragment))for(u=0;u<r;u++)(f=n[u],typeof f=="string")&&t.removeEventListener(f,i)})}};n.prototype.val=function(n){if(this.elements.length!==0)return typeof n!="undefined"?(this.elements[0].value=n,this):this.elements[0].value};var f=function(n,i,r,u){if(i!=null&&n!=null){typeof i=="string"&&(i=i.split(/\s+/));EVUI.Modules.Core.Utils.isArray(i)===!1&&(i=[i]);var f=i.length;f!=0&&t(n,function(n){var e,t;if(n.nodeType===Node.ELEMENT_NODE)for(e=0;e<f;e++)if(t=i[e],typeof t=="string")switch(r){case"add":n.classList.add(t);break;case"remove":n.classList.remove(t);break;case"toggle":typeof u=="boolean"?n.classList.toggle(t,u):n.classList.toggle(t)}})}},c=function(n,t){if(n===window)return document.documentElement.clientHeight;if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return 0;if(n.nodeType===Node.DOCUMENT_NODE)return Math.max(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight);var r=getComputedStyle(n),o=i(r.height),s=i(r.borderTop),h=i(r.borderBottom),u=s+h,c=i(r.marginTop),l=i(r.marginBottom),f=c+l,e=o+(u>0?u:0);return t===!0&&f>0&&(e+=f),e},l=function(n,t,r){if(n===window)return document.documentElement.clientWidth;if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return 0;if(n.nodeType===Node.DOCUMENT_NODE)return Math.max(document.documentElement.scrollWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth);var r=getComputedStyle(n),o=i(r.width),s=i(r.borderLeft),h=i(r.borderRight),u=s+h,c=i(r.marginLeft),l=i(r.marginRight),f=c+l,e=o+(u>0?u:0);return t===!0&&f>0&&(e+=f),e},i=function(n){var i=n.indexOf("px"),t;return(i>0&&(n=n.substring(0,i)),t=parseFloat(n),isNaN(t)===!0)?0:t},a=function(n){var e=document.createDocumentFragment(),r=document.createElement("div"),t,i;r.innerHTML=n;var u=e.appendChild(r),f=[],o=u.childNodes.length;for(t=0;t<o;t++)i=u.childNodes[t],i.remove(),f.push(i);return f},e=function(n){var t=null,u,f,e,i,r;if(EVUI.Modules.Core.Utils.isElement(n)===!0)t=[n];else if(n instanceof Document||n===window)t=[n];else if(n instanceof DocumentFragment)t=[n];else if(typeof n=="string")t=a(n);else if(EVUI.Modules.Core.Utils.isjQuery(n)===!0)u=n,t=[],u.each(function(n,i){t.push(i)});else if(n instanceof NodeList)for(t=[],f=n.length,i=0;i<f;i++)t.push(n[i]);else if(EVUI.Modules.Core.Utils.isArray(n)===!0)for(t=[],e=n.length,i=0;i<e;i++)r=n[i],(EVUI.Modules.Core.Utils.isElement(r)||r instanceof DocumentFragment||r instanceof Document||r===window)&&t.push(r);else EVUI.Modules.Core.Utils.isDomHelper(n)===!0&&(t=n.elements.slice());return t},u=function(n,i,r){var u=[];return t(n,function(n){var o,t,c,h;if(n!==window&&(!(n===document||n instanceof DocumentFragment)||r!=="before"&&r!=="after")){var s=e(i),f=document.createDocumentFragment(),l=s.length;for(o=0;o<l;o++)if(t=EVUI.Modules.Core.Utils.isOrphanedNode(s[o])===!1?s[o].cloneNode(!0):s[o],t instanceof DocumentFragment){for(c=t.childNodes.length,h=0;h<c;h++)u.push(t.childNodes[h]);f.appendChild(t)}else u.push(t),f.appendChild(t);switch(r){case"append":n.append(f);break;case"prepend":n.prepend(f);break;case"before":n.before(f);break;case"after":n.after(f)}}}),new EVUI.Modules.Dom.DomHelper(u)},o=function(n){for(var r,t="",u=n.split(","),e=u.length,f=0,i=0;i<e;i++)(r=u[i].trim(),r.length!==0)&&(f>0&&(t+=", "),t+=":scope "+r,f++);return t},v=function(n,t){var i,u,r;if(typeof n=="string"&&EVUI.Modules.Core.Utils.stringStartsWith("<",n.trim())===!1){try{if(i=null,t!=null)if(EVUI.Modules.Core.Utils.isElement(t)||t instanceof Document||t instanceof DocumentFragment)i=t.querySelectorAll(o(n));else if(EVUI.Modules.Core.Utils.isjQuery(t)===!0&&t.length>0)t=t[0],i=t.querySelectorAll(o(n));else if(EVUI.Modules.Core.Utils.isDomHelper(t)===!0&&t.elements.length>0)t=t.elements[0],i=t.querySelectorAll(o(n));else throw Error("Invalid context.");else i=document.querySelectorAll(n)}catch(f){}for(n=[],u=i.length,r=0;r<u;r++)n.push(i[r])}else n=e(n);if(n!=null)return n.filter(function(n){return EVUI.Modules.Core.Utils.isElement(n)||n===window||n===document||n instanceof DocumentFragment})};return n}();EVUI.Modules.Dom.ElementBounds=function(){this.top=0;this.left=0;this.bottom=0;this.right=0};EVUI.Modules.Dom.ElementBounds.prototype.toWindowRelativeBounds=function(){var t=window.pageXOffset,i=window.pageYOffset,n=new EVUI.Modules.Dom.ElementBounds;return n.top=this.top-i,n.bottom=this.bottom-i,n.left=this.left-t,n.right=this.right-t,n};$evui.control=function(n,t){return new EVUI.Modules.Dom.ControlInfo(n,t)};$evui.dom=function(n,t){return new EVUI.Modules.Dom.DomHelper(n,t)};EVUI.Modules.DomEvents={};EVUI.Modules.DomEvents.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.DomEvents.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.DomEvents.Dependencies);EVUI.Modules.DomEvents.Constants={};EVUI.Modules.DomEvents.Constants.Fn_EventHandler=function(){};EVUI.Modules.DomEvents.Constants.Prop_EvuiArgsName="evuiArgs";Object.freeze(EVUI.Modules.DomEvents.Constants);EVUI.Modules.DomEvents.AsyncDomEventManager=function(){var i=EVUI.Modules.Core.Utils.getHashCode(EVUI.Modules.Core.Utils.makeGuid()).toString(36).replace(".",""),r=EVUI.Modules.Core.Utils.getHashCode(EVUI.Modules.Core.Utils.makeGuid()).toString(36).replace(".",""),n=EVUI.Modules.Core.Utils.getHashCode(EVUI.Modules.Core.Utils.makeGuid()).toString(36).replace(".",""),y=EVUI.Modules.Core.Utils.makeGuid(),t;typeof Symbol!="undefined"&&(i=Symbol(i),r=Symbol(r),n=Symbol(n));var p=0,w=0,b=0,k=0,e={},d=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.DomEvents.Dependencies);var r=this,i=n,t=new o(r,i);this.addAsyncEventListener=function(n,i,r){if(h(n)===!1)throw Error("String expected.");if(typeof i!="function")throw Error("Function expected.");it(t,n,i,r)};this.removeAsyncEventListener=function(n,i,r){if(h(n)===!1)throw Error("String expected.");if(typeof i!="function")throw Error("Function expected.");return a(t,n,i,r)};this.dispatchAsyncEvent=function(n){if(EVUI.Modules.Core.Utils.instanceOf(n,Event)===!1)throw Error("Event object expected.");return new Promise(function(i){ht(t,n,function(){i()})})};this.addToAsyncEventSession=function(n){var r=l(n),u;r!=null&&(u=r.composedPath.indexOf(i),u!==-1)&&(r.composedPathHandles[u]=t)}},o=function(n,t){this.eventerId=w++;this.eventer=n;this.target=t;this.eventQueue=[];this.bubbler=new EVUI.Modules.EventStream.BubblingEventManager;this.registeredEvents={};this.executing=!1};o.prototype.getRegisteredEvent=function(n){return this.registeredEvents[n]};o.prototype.getNextQueuedEvent=function(n,t){for(var i,e,o=this.eventQueue.length,r=null,f=-1,s=typeof t=="string",u=0;u<o;u++)if((i=this.eventQueue[u],s!==!0||i.type===t)&&(r==null||i.eventId<r.eventId)){if(e=l(i.sessionId),e==null)continue;e.currentTarget===this.target&&(r=i,f=u)}return n===!0&&f>-1&&this.eventQueue.splice(f,1),r};t=function(){this.eventType=null;this.numHandlers=0;this.triggeringHandler=null;this.executing=!1;this.pendingRemovals={};this.boundHandlers=[]};t.prototype.getBoundHandler=function(n){for(var i,t=0;t<this.numHandlers;t++)if(i=this.boundHandlers[t],i.userHandler===n||i.targetBoundHandler===n)return i;return null};t.prototype.isPendingRemoval=function(n){return this.pendingRemovals[n.handlerId]!=null};var v=function(){this.handlerId=p++;this.userHandler=null;this.targetBoundHandler=null;this.eventStreamHandler=null;this.options=null},g=function(){this.eventId=b++;this.type=null;this.clonedEventArgs=null;this.sessionId=null},nt=function(){this.eventSequenceId=-1;this.sessionId=null;this.eventType=null;this.target=null;this.currentTarget=null;this.composedPathHandles=[];this.composedPath=[];this.eventStream=null;this.aborted=!1;this.callback=null},tt=function(){this.eventSequenceId=-1;this.sessionId=null},it=function(n,i,r,u){var e,f;u=rt(u);e=n.getRegisteredEvent(i);e==null&&(e=new t,e.eventType=i,n.registeredEvents[i]=e);e.triggeringHandler==null&&(e.triggeringHandler=ut(n,i,u));f=new v;f.userHandler=r;f.targetBoundHandler=r.bind(n.target);f.options=u;f.eventStreamHandler=function(t){if(e.isPendingRemoval(f)!==!0)return f.options.once===!0&&a(n,i,f.listener,f.options),f.targetBoundHandler(t)};e.numHandlers=e.boundHandlers.push(f);n.bubbler.addEventListener(i,f.eventStreamHandler,EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.EventStream.EventStreamEventListenerOptions,u))},s=function(n){return typeof n!="object"||n==null?!1:typeof n.addEventListener!="function"?!1:typeof n.removeEventListener!="function"?!1:typeof n.dispatchEvent!="function"?!1:!0},h=function(n){return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1},rt=function(n){return n==null||typeof n!="object"?new EVUI.Modules.DomEvents.EventOptions:EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.DomEvents.EventOptions,n)},ut=function(t,i,u){var f=function(f){var v,l,a,s,h,o;try{if(ft(t,i)===!0&&f.preventDefault(),v=f.composedPath(),l=EVUI.Modules.Core.Utils.shallowExtend({},f,function(n,t){if(typeof t[n]=="function")return!1}),l.composedPath=function(){return v.slice()},l.preventDefault=function(){f.preventDefault()},a=v.slice(),u.capture===!0&&a.reverse(),s=new g,s.clonedEventArgs=l,s.type=i,s.composedPath=a,h=f[r],h==null){var y=k++,p=ot(t,y),w=f[n];delete f[n];h=new tt;h.eventSequenceId=y;h.sessionId=p;o=new nt;o.eventSequenceId=y;o.currentTarget=f.currentTarget;o.eventType=s.type;o.target=f.target;o.sessionId=p;o.composedPath=a;o.callback=w;e[p]=o;f[r]=h;f.bubbles===!1?o.composedPathHandles.push(t):st(o)}s.sessionId=h.sessionId;c(t,s)}catch(b){EVUI.Modules.Core.Utils.log('DomEvents: Error triggering async handlers for event "'+f.type+'": '+b.stack)}};return t.target.addEventListener(i,f,u),f},ft=function(n,t){var i,f,r,u;if(h(t)===!1||(i=n.getRegisteredEvent(t),i==null))return!1;for(f=i.boundHandlers.length,r=0;r<f;r++)if((u=i.boundHandlers[r],i.isPendingRemoval(u)!==!0)&&u.options.autoPreventDefault===!0)return!0;return!1},c=function(n,t){var i=l(t.sessionId);i!=null&&(n.executing===!0||i.currentTarget!==t.clonedEventArgs.currentTarget?n.eventQueue.push(t):et(n,t,i))},et=function(n,t,i){var r=n.getRegisteredEvent(t.type),u;n.executing=!0;u=new EVUI.Modules.EventStream.EventStream;u.context=t.clonedEventArgs.currentTarget;u.bubblingEvents=n.bubbler;u.processInjectedEventArgs=function(n){var r=new EVUI.Modules.DomEvents.AsyncDomEventArgs;return EVUI.Modules.Core.Utils.shallowExtend(r,t.clonedEventArgs),r.eventSequenceId=i.eventSequenceId,r.cancel=n.cancel,r.pause=n.pause,r.resume=n.resume,r.state=n.state,r.stopImmediatePropagation=function(){return n.stopPropagation()},r.stopPropagation=function(){i.aborted=!0},r};u.processReturnedEventArgs=function(n){u.eventState=n.state};u.addEvent(t.type,function(){});u.onComplete=function(){var h,y,s,l,v,o,u,f;if(n.executing=!1,r!=null&&r.pendingRemovals!=null)for(h=EVUI.Modules.Core.Utils.getProperties(r.pendingRemovals),y=h.length,s=0;s<y;s++)l=h[s],v=r.pendingRemovals[l],v!=null&&a(n,r,v),delete r.pendingRemovals[l];if(r.numHandlers===0&&r.triggeringHandler==null&&delete n.registeredEvents[r.eventType],o=i.composedPathHandles.indexOf(n),u=null,o!==-1&&(o++,u=i.composedPathHandles[o]),u!=null){for(i.currentTarget=u.target,f=u.getNextQueuedEvent(!0,t.type);f==null;){if(o++,u=i.composedPathHandles[o],u==null)break;i.currentTarget=u.target;f=u.getNextQueuedEvent(!0,t.type)}f!=null&&c(u,f)}if(u==null&&(delete e[i.sessionId],typeof i.callback=="function"))try{i.callback()}catch(p){EVUI.Modules.Core.Utils.log("Error invoking dispatchedEvent's callback");EVUI.Modules.Core.Utils.log(p)}f=n.getNextQueuedEvent(!0);f!=null&&c(n,f)};u.execute()},ot=function(n,t){return EVUI.Modules.Core.Utils.getHashCode(y+":"+n.eventerId+"-"+t).toString(36).replace(".","")},l=function(n){return e[n]},st=function(n){var r,t,i;if(EVUI.Modules.Core.Utils.isArray(n.composedPath)!==!1)for(r=n.composedPath.length,t=0;t<r;t++)(i=u(n.composedPath[t]),i!=null)&&i.addToAsyncEventSession(n.sessionId)},u=function(n){if(typeof n!="object"||n==null)return null;var t=n[i];return t==null&&(t=new d(n),n[i]=t),t},a=function(n,i,r,u){var f=null,e=null,o;return(f=EVUI.Modules.Core.Utils.instanceOf(i,t)===!0?i:n.getRegisteredEvent(i),f==null)?!1:(e=EVUI.Modules.Core.Utils.instanceOf(r,v)===!0?r:f.getBoundHandler(r),e==null)?!1:n.bubbler.removeEventListener(f.eventType,e.eventStreamHandler)===!1?!1:f.executing===!0?(f.pendingRemovals[e.handlerId]=e,!0):(o=f.boundHandlers.indexOf(e),o!==-1)?(f.boundHandlers.splice(o,1),f.numHandlers--,f.numHandlers===0&&(n.target.removeEventListener(f.eventType,f.triggeringHandler,u),f.triggeringHandler=null,delete n.registeredEvents[f.eventType]),!0):!1},ht=function(t,i,r){i[n]=r;t.target.dispatchEvent(i)},f=function(){};return f.prototype.addAsyncEventListener=function(n,t,i,r){if(s(n)===!1)throw Error("EventTarget expected.");var f=u(n);return f.addAsyncEventListener(t,i,r)},f.prototype.removeAsyncEventListener=function(n,t,i,r){if(s(n)===!1)throw Error("EventTarget expected.");var f=u(n);return f.removeAsyncEventListener(t,i,r)},f.prototype.dispatchAsyncEvent=function(n,t){if(s(n)===!1)throw Error("EventTarget expected.");var i=u(n);return i.dispatchAsyncEvent(t)},EventTarget.prototype.addAsyncEventListener=function(n,t,i){return EVUI.Modules.DomEvents.AsyncDomEventManager.addAsyncEventListener(this,n,t,i)},EventTarget.prototype.removeAsyncEventListener=function(n,t,i){return EVUI.Modules.DomEvents.AsyncDomEventManager.removeAsyncEventListener(this,n,t,i)},EventTarget.prototype.dispatchAsyncEvent=function(n){return EVUI.Modules.DomEvents.AsyncDomEventManager.dispatchAsyncEvent(this,n)},new f}();EVUI.Modules.DomEvents.EventOptions=function(){this.once=!1;this.capture=!1;this.autoPreventDefault=!1};EVUI.Modules.DomEvents.AsyncDomEventArgs=function(){this.eventSequenceId=-1;this.cancel=function(){return!1};this.pause=function(){return!1};this.resume=function(){return!1};this.stopImmediatePropagation=function(){return!1};this.stopPropagation=function(){return!1};this.state=null};$evui.addAsyncEventListener=function(n,t,i,r){return EVUI.Modules.DomEvents.AsyncDomEventManager.addAsyncEventListener(n,t,i,r)};$evui.removeAsyncEventListener=function(n,t,i,r){return EVUI.Modules.DomEvents.AsyncDomEventManager.removeAsyncEventListener(n,t,i,r)};$evui.dispatchAsyncEvent=function(n,t){return EVUI.Modules.DomEvents.AsyncDomEventManager.dispatchAsyncEvent(n,t)};Object.freeze(EVUI.Modules.DomEvents);EVUI.Modules.DomTree={};EVUI.Modules.DomTree.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.DomTree.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.DomTree.Dependencies);EVUI.Modules.DomTree.Constants={};EVUI.Modules.DomTree.Constants.Fn_Selector=function(){};EVUI.Modules.DomTree.Constants.Fn_AttributeFilter=function(){};Object.freeze(EVUI.Modules.DomTree.Constants);EVUI.Modules.DomTree.DomTreeConverter=function(){var t,e;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.DomTree.Dependencies);var n=EVUI.Modules.DomTree.DomTreeElementType,it=["a","img","svg","link","script","audio","embed","object","source","video"],rt=["area","base","br","col","command","embed","hr","img","input","link","menuitem","meta","keygen","param","source","track","wbr"],h=/\&gt;|\&lt;/ig,ut=/\<!--|--\>|\<!\CDATA\[\[|\]\]\>/ig,ft=/\<script|\<\/\s*script\s*\>|\<textarea|\<\/\s*textarea\s*\>|\<style|\<\/\s*style\s*\>|\<pre|\<\/\s*pre\s*\>|\<code|\<\/\s*code\s*\>/ig,et=/\'|\"|\/\*|\*\/|\/\/"|`/g,ot=/\<\/|\/\>|<|\>/g,st=/\s|\>|\//,ht=/\<|\<\/\s*/,ct=/^on/i,lt=typeof String.prototype.matchAll!="undefined",c={},at=function(){this.source=null;this.options=new EVUI.Modules.DomTree.DomTreeElementOptions;this.outputToString=!1;this.parseOptions=null};this.toDomTreeElement=function(n,t){if(n==null)return null;var i=o(n,t);return vt(i)};this.fromDomTreeElement=function(n,t){if(n==null)return null;var i=o(n,t);return w(i,!1)};this.fromDomTreeElementToString=function(n,t){if(n==null)return null;var i=o(n,t);return w(i,!0)};this.htmlToDocumentFragment=function(n,t){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return null;var i=d(n);return i.toNode(null,k(t))};this.htmlToDomTree=function(n,t){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return null;var i=d(n);return i.toDomTree(null,k(t))};var o=function(n,t){var i=new at,u,e,r,f;if(i.source=n,i.options=t!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.DomTree.DomTreeElementOptions,t):new EVUI.Modules.DomTree.DomTreeElementOptions,EVUI.Modules.Core.Utils.isArray(i.options.omittedElements)===!1)i.options.omittedElements=[];else{for(u=[],e=i.options.omittedElements.length,r=0;r<e;r++)(f=i.options.omittedElements[r],typeof f=="string")&&u.push(f.toLowerCase());i.options.omittedElements=u}return i.parseOptions=l(i.options),i},l=function(n){var i=new e,r,t;if(i.elementOptions=n,EVUI.Modules.Core.Utils.isArray(n.omittedElements)===!0)for(r=n.omittedElements.length,t=0;t<r;t++)i.omittedElementsDic[n.omittedElements[t]]=!0;return i},vt=function(t){var r=!1,i;return(EVUI.Modules.Core.Utils.instanceOf(t.source,Document)===!0&&(r=!0,t.source=t.source.documentElement),i=a(t,t.source),i==null)?null:(r===!0&&(i.type=n.Document),i)},a=function(t,i,r,u){var e,o,f;return i==null?null:(e=dt(i.nodeType),e===n.Unknown)?null:(o=i.nodeName.toLowerCase(),t.parseOptions.isOmittedTag(o)===!0&&t.options.includeOmittedElementOuterTag===!1)?null:(f=new EVUI.Modules.DomTree.DomTreeElement,f.flags=v(i),f.type=e,f.attrs=gt(i),f.tagName=i.nodeName,f.content=y(t,i,e),f.shadowContent=i.shadowRoot!=null?y(t,i,e,!0):undefined,t.options.includeNodeReferences===!0&&(f.node=i),yt(t,i,f,r)==!0&&(f.flags|=EVUI.Modules.DomTree.DomTreeElementFlags.HasForiegnResource),(u===!0||r!=null&&EVUI.Modules.Core.Utils.hasFlag(r.flags,EVUI.Modules.DomTree.DomTreeElementFlags.IsInShadowDom))&&(f.flags|=EVUI.Modules.DomTree.DomTreeElementFlags.IsInShadowDom),f)},v=function(n){return n==null?EVUI.Modules.DomTree.DomTreeElementFlags.Unknown:n instanceof HTMLElement?EVUI.Modules.DomTree.DomTreeElementFlags.HTML:n instanceof CharacterData?v(n.parentElement):n instanceof Document?n.documentElement instanceof HTMLElement?EVUI.Modules.DomTree.DomTreeElementFlags.HTML:EVUI.Modules.DomTree.DomTreeElementFlags.XML:n instanceof DocumentFragment?n.ownerDocument.body instanceof HTMLElement?EVUI.Modules.DomTree.DomTreeElementFlags.HTML:EVUI.Modules.DomTree.DomTreeElementFlags.XML:EVUI.Modules.DomTree.DomTreeElementFlags.XML},yt=function(n,t,i,r){var u=pt(i.tagName),f,e;return u==null?!1:(n.options.absoluteUrls===!0&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f)===!1&&(f=wt(bt(i,u)),kt(i,u,f)),e=r==null?null:r.tagName.toLowerCase(),i.tagName==="link")?!0:i.tagName==="video"||i.tagName==="script"||i.tagName==="source"&&e==="video"?!0:!1},pt=function(n){return typeof n!="string"?null:(n=n.toLowerCase(),it.indexOf(n)===-1)?null:n==="link"||n==="a"?"href":"src"},wt=function(n){var t,i;return n==null?null:(t=document.createElement("a"),t.href=n,i=t.protocol+"//"+t.host+t.pathname,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.search)===!1&&(i+=EVUI.Modules.Core.Utils.stringStartsWith("?",t.search)===!1?"?"+t.search:t.search),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.hash)===!1&&(i+=EVUI.Modules.Core.Utils.stringStartsWith("#",t.hash)===!1?"#"+t.hash:t.hash),i)},bt=function(n,t){var u,i,r,f;if(n.attrs==null||typeof t!="string")return null;for(t=t.toLowerCase(),u=n.attrs.length,i=0;i<u;i++)if(r=n.attrs[i],f=r.key.toLowerCase(),f===t)return r.val;return null},kt=function(n,t,i){var f,r,u,e;if(n.attrs!=null&&typeof t=="string"&&i!=null)for(t=t.toLowerCase(),f=n.attrs.length,r=0;r<f;r++)if(u=n.attrs[r],e=u.key.toLowerCase(),e===t){u.val=i.toString();return}},dt=function(t){switch(t){case 1:return n.Element;case 3:return n.Text;case 4:return n.CDATA;case 8:return n.Comment;case 9:return n.Document;case 11:return n.DocumentFragment;default:return n.Unknown}},gt=function(n){var f=n.attributes!=null?n.attributes.length:0,r,t,u,i;if(f===0)return undefined;for(r=[],t=0;t<f;t++)u=n.attributes[t],i=new EVUI.Modules.DomTree.DomTreeElementAttribute,i.key=u.name,i.val=u.value,r.push(i);return r},y=function(t,i,r,u){var o,f,s,c,e,l,h;if(u===!0&&i.shadowRoot==null)return[];if(o=i.nodeName.toLowerCase(),o==="iframe")return[];if(t.parseOptions.isOmittedTag(o)===!0&&t.options.includeOmittedElementOuterTag===!0)return(f=i.children.length,f===0&&p(i,i.outerHTML)===!0)?null:[];if(r===n.Text||r===n.CDATA||r===n.Comment)return i.textContent==null?"":i.textContent;if(r===n.Document||r===n.DocumentFragment||r===n.Element){if(f=u===!0?i.shadowRoot.childNodes.length:i.childNodes.length,f===0)return r===n.Element?p(i,i.outerHTML)===!0?null:i.textContent!=null&&i.textContent.length>0?i.textContent:[]:[];for(s=[],c=u===!0?i.shadowRoot.childNodes:i.childNodes,e=0;e<f;e++)l=c[e],h=a(t,l,i,u),h!=null&&s.push(h);return s}throw new Error("Unknown node type: "+i.nodeType);},p=function(n){return rt.indexOf(n.nodeName.toLowerCase())!==-1?!0:!1},w=function(n,t){var u=i(n,n.source),r;return t===!0?(r=document.createElement("div"),r.appendChild(u),r.innerHTML):u},u=function(n,t){var r="<"+t.tagName+"",u=ni(n,t),i,f;return t.content==null?(i="/>",u!=null?r+" "+u+i:r+" "+i):(i="<\/"+t.tagName+">",f=ti(n,t.content),u!=null?r+" "+u+">"+f+i:r+">"+f+i)},ni=function(n,t){var f,e,u,i,r;if(t.attrs==null)return null;for(f=null,t.DataUrl!=null&&t.DataUrl.Data!=null&&(f=t.DataUrl.AttributeName.toLowerCase()),e="",u=t.attrs.length,i=0;i<u;i++)r=t.attrs[i],e+=r.key.toLowerCase()===f?r.key+'="'+t.DataUrl.Data+(i===u-1?'"':'" '):r.key+'="'+r.val+(i===u-1?'"':'" ');return e},ti=function(n,t){var i,f,r;if(typeof t=="string")return t;if(i="",EVUI.Modules.Core.Utils.isArray(t)==!1)return i;for(f=t.length,r=0;r<f;r++)i+=u(n,t[r]);return i},i=function(n,t,i){i==null&&(i=document.createDocumentFragment());var r=null;if(t.type===EVUI.Modules.DomTree.DomTreeElementType.CDATA)r=document.createCDATASection(t.content);else if(t.type===EVUI.Modules.DomTree.DomTreeElementType.Comment)r=document.createComment(b(t.content));else{if(t.type===EVUI.Modules.DomTree.DomTreeElementType.Document)return ii(n,t);if(t.type===EVUI.Modules.DomTree.DomTreeElementType.Element)r=ri(n,t,i);else if(t.type===EVUI.Modules.DomTree.DomTreeElementType.Text)r=document.createTextNode(b(t.content));else{if(t.type===EVUI.Modules.DomTree.DomTreeElementType.DocumentFragment)return ui(n,t);throw Error("Invalid element type.");}}return i.appendChild(r),i},b=function(n){return typeof n!="string"?n:h.test(n)===!0?n.replace(h,function(n){return n==="&gt;"?">":n==="&lt;"?"<":n}):n},ii=function(n,t){var h=EVUI.Modules.Core.Utils.hasFlag(t.flags,EVUI.Modules.DomTree.DomTreeElementFlags.XML),w,p,s,a,c,f,b,r;if(typeof t.content=="string"||t.content==null)return w=t.content==null?u(n,u):t.content,c=new DOMParser,c.parseFromString(w,h===!0?"text/xml":"text/html");if(EVUI.Modules.Core.Utils.isArray(t.content)===!0){var l=[],k=t.content.length,v=null,e=null,o=null,y=!1;for(r=0;r<k;r++)p=t.content[r],s=i(n,p),h===!1&&y===!1&&(a=p.tagName.toLowerCase(),a==="html"?(v=s,y=!0):a==="head"?e=s:a==="body"&&(o=s),o!=null&&e!=null&&(y=!0)),l.push(s);if(c=new DOMParser,f=c.parseFromString("",h===!0?"text/xml":"text/html"),h===!0)f.documentElement.childNodes.forEach(function(n){n.remove()}),f.documentElement.appendChild(l[0].childNodes[0]);else if(v!=null)f.documentElement.replaceWith(v.childNodes[0]);else if(e!=null||o!=null)e!=null&&f.head.replaceWith(e.childNodes[0]),o!=null&&f.body.replaceWith(o.childNodes[0]);else for(b=l.length,r=0;r<b;r++)f.append(l[r].childNodes);return f}return null},ri=function(n,t){var f=null,h,o,c,s,l,e,r;if(t.content==null)h=u(n,t),o=document.createElement("div"),o.innerHTML=h,f=o.childNodes[0],f.remove();else{if(f=document.createElement(t.tagName),t.attrs!=null)for(c=t.attrs.length,r=0;r<c;r++)s=t.attrs[r],f.setAttribute(s.key,s.val);if(typeof t.content=="string")f.textContent=t.content,f.textContent=t.content;else if(EVUI.Modules.Core.Utils.isArray(t.content)===!0)for(e=t.content.length,r=0;r<e;r++)i(n,t.content[r],f)}if(EVUI.Modules.Core.Utils.isArray(t.shadowContent)===!0)for(l=f.attachShadow({mode:"open"}),e=t.shadowContent.length,r=0;r<e;r++)i(n,t.shadowContent[r],l);return f},ui=function(n,t){var u=document.createDocumentFragment(),f,r;if(typeof t.content=="string")u.appendChild(t.content);else if(EVUI.Modules.Core.Utils.isArray(t.content)===!0)for(f=t.content.length,r=0;r<f;r++)i(n,t.content[r],u);return u},k=function(n){var t=EVUI.Modules.Core.Utils.shallowExtend({},n==null||typeof n!="object"?new EVUI.Modules.DomTree.DomTreeElementOptions:n);return l(t)},d=function(n){var t=new ai,i;return t.rawHtml=n,t.rawHtmlLength=n.length,t.literalTextSpans=fi(t),t.literalTextSpans=t.literalTextSpans.concat(ei(t)),t.literalTextSpans.sort(function(n,t){return n.start-t.start}),i=new r,i.htmlContent=t.rawHtml,i.index=0,i.length=t.rawHtml.length,i.blockType=EVUI.Modules.DomTree.DomTreeElementType.DocumentFragment,oi(t),t.currentTagClose=t.tagCloses[0],t.currentTagOpen=t.tagOpens[0],t.lastTextSpanIndex=0,si(t,i)},fi=function(n){var c=[],s,r,l,h,i;f(n,et,c);f(n,ut,c);c.sort(function(n,t){return n.index-t.index});var k=c.length,a=!1,v=!1,y=!1,p=!1,w=!1,b=!1,u=!0,o=[],e=0;for(s=0;s<k;s++)if(r=c[s],r[0]==="/*")u===!0&&(y=!0,e=r.index,u=!1);else if(r[0]==="*/")y===!0&&(i=new t,i.start=e,i.end=r.index+r[0].length,i.text=n.rawHtml.substr(i.start,i.end-i.start),o.push(i),y=!1,u=!0,e=0);else if(r[0]==="//"){if(u===!0)for(i=new t,i.start=r.index,l=n.rawHtml.indexOf("\n",r.index),l===-1&&n.rawHtml.indexOf("\r",r.index),i.end=l!==-1?l:n.rawHtml.length,i.text=n.rawHtml.substr(i.start,i.end-i.start),o.push(i);allMatches[s+1].index<i.end;)s++}else if(r[0]==='"'){if(h=r.index>1&&n.rawHtml[r.index-1]==="\\"&&n.rawHtml[r.index-2]!="\\",h===!0)continue;u===!0?(u=!1,a=!0,e=r.index):a===!0&&(i=new t,i.start=e,i.end=r.index+r[0].length,i.text=n.rawHtml.substr(i.start,i.end-i.start),o.push(i),a=!1,u=!0)}else if(r[0]==="'"){if(h=r.index>1&&n.rawHtml[r.index-1]==="\\"&&n.rawHtml[r.index-2]!="\\",h===!0)continue;u===!0?(u=!1,v=!0,e=r.index):v===!0&&(i=new t,i.start=e,i.end=r.index+r[0].length,i.text=n.rawHtml.substr(i.start,i.end-i.start),o.push(i),v=!1,u=!0)}else if(r[0]==="`"){if(h=r.index>1&&n.rawHtml[r.index-1]==="\\"&&n.rawHtml[r.index-2]!="\\",h===!0)continue;u===!0?(u=!1,p=!0,e=r.index):p===!0&&(i=new t,i.start=e,i.end=r.index+r[0].length,i.text=n.rawHtml.substr(i.start,i.end-i.start),o.push(i),p=!1,u=!0)}else r[0]==="<!--"?u===!0&&(u=!1,e=r.index+r[0].length,w=!0):r[0]==="-->"?u===!1&&w===!0&&(i=new t,i.start=e,i.end=r.index,i.text=n.rawHtml.substr(i.start,r.index),o.push(i),u=!0,w=!1):r[0].toLowerCase()==="<!cdata[["?u===!0&&(u=!1,e=r.index+r[0].length,b=!0):r[0]==="]\]>"&&u===!1&&b===!0&&(i=new t,i.start=e,i.end=r.index,i.text=n.rawHtml.substr(i.start,r.index),o.push(i),u=!0,b=!0);return o},ei=function(n){var k=f(n,ft),a=function(t,i){for(var r=n.rawHtml.indexOf(">",t);r!==-1&&r<i;){if(s(n,r)===!1)return r;r=n.rawHtml.indexof(">",r)}return-1},h=[],y=!1,p=!1,w=!1,b=!1,u=!0,d=k.length,e=0,v,r,c,l,i,o;for(n.lastTextSpanIndex=0,v=0;v<d;v++)(r=k[v],c=n.lastTextSpanIndex,s(n,r.index)!==!0)&&(l=r[0].toLowerCase(),l.indexOf("<script")!==-1?u===!0&&(y=!0,u=!1,e=r.index):r[0].match(/\<\/\s*script/i)!=null?y===!0&&(i=new t,o=a(e,r.index),i.start=o===-1?e:o+1,i.end=r.index,i.text=n.rawHtml.substr(i.start,i.end-i.start),h.push(i),n.lastTextSpanIndex=c,y=!1,u=!0):l.indexOf("<textarea")!==-1?u===!0&&(w=!0,u=!1,e=r.index):r[0].match(/\<\/\s*textarea/i)!=null?w===!0&&(i=new t,o=a(e,r.index),i.start=o===-1?e:o+1,i.end=r.index,i.text=n.rawHtml.substr(i.start,i.end-i.start),h.push(i),n.lastTextSpanIndex=c,w=!1,u=!0):l.indexOf("<style")!==-1?u===!0&&(p=!0,u=!1,e=r.index):r[0].match(/\<\/\s*style/i)!=null?p===!0&&(i=new t,o=a(e,r.index),i.start=o===-1?e:o+1,i.end=r.index,i.text=n.rawHtml.substr(i.start,i.end-i.start),h.push(i),n.lastTextSpanIndex=c,p=!1,u=!0):l.indexOf("<pre")!==-1?u===!0&&(b=!0,u=!1,e=r.index):r[0].match(/\<\/\s*pre/i)!=null&&b===!0&&(i=new t,o=a(e,r.index),i.start=o===-1?e:o+1,i.end=r.index,i.text=n.rawHtml.substr(i.start,i.end-i.start),h.push(i),n.lastTextSpanIndex=c,b=!1,u=!0));return h},s=function(n,t){for(var r,u=n.literalTextSpans.length,f=n.lastTextSpanIndex>=0?n.lastTextSpanIndex:0,i=f;i<u;i++){if(r=n.literalTextSpans[i],t>=r.start&&t<r.end)return n.lastTextSpanIndex=i,!0;if(r.start>t)return n.lastTextSpanIndex=i,!1}return!1},oi=function(n){var r=f(n,ot),u,i,t;for(n.lastTextSpanIndex=0,u=r.length,i=0;i<u;i++)(t=r[i],s(n,t.index)!==!0)&&((t[0]===">"||t[0]==="/>")&&n.tagCloses.push(t),(t[0]==="<"||t[0]==="<\/")&&n.tagOpens.push(t));return},f=function(n,t,i){var f,u,r;if(i==null&&(i=[]),typeof n=="string"&&(f={rawHtml:n},n=f),lt===!0)for(u=n.rawHtml.matchAll(t),r=u.next();r!=null&&r.done!==!0;)i.push(r.value),r=u.next();else for(r=t.exec(n.rawHtml);r!=null;)i.push(r),r=t.exec(n.rawHtml);return i},si=function(n,t){for(var b=n.index,w=t.index+t.length,h=null,o=null,l=null,v=[t],y=0,i=t,u,f,s,c,e,a,p;n.index<n.rawHtmlLength&&n.index<w;){if(u=hi(n),u==null)return(s=g(n,n.rawHtmlLength),s==null)?t:(t.content==null&&(t.content=[]),t.content.push(s),t);if(f=u[0],f==="<"||f==="<\/"){if(n.currentTagOpen=u,l==null||l.index<u.index-1||o===">")s=g(n,u.index),s!=null&&(i.content==null&&(i.content=[]),c=i.content.length,c>0&&i.content[c-1].tagName==="#text"?i.content[c-1].content+=s.content:i.content.push(s));else if(o==="<"||o==="<\/"){n.tagOpenIndex++;n.currentTagOpen=n.tagOpens[n.tagOpenIndex];continue}n.tagOpenIndex++;n.index=u.index;n.currentTagOpen=n.tagOpens[n.tagOpenIndex];h=u;o=f}else if(f===">"||f==="/>"){if(n.currentTagClose=u,o==="<")if(e=new r,ci(n,e,h.index,u.index+1)===!0)e.index=h.index,f==="/>"?(e.isSelfClosing=!0,i.content==null&&(i.content=[]),i.content.push(e)):e.blockType===EVUI.Modules.DomTree.DomTreeElementType.Comment?(i.content==null&&(i.content=[]),i.content.push(e)):e.blockType===EVUI.Modules.DomTree.DomTreeElementType.CDATA?(i.content==null&&(i.content=[]),i.content.push(e)):(y=v.push(i),i.content==null&&(i.content=[]),i.content.push(e),i=e);else{n.tagCloseIndex++;n.currentTagClose=n.tagCloses[n.tagCloseIndex];continue}else if(o==="<\/"&&f===">")a=n.rawHtml.substring(h.index+2,u.index+1),p=nt(n,a,a.length,!0),i.tagName===p&&(i.length=u.index+f.length-i.index,i=v.pop(),y--);else if(o===">"||o==="/>"){n.tagCloseIndex++;n.currentTagClose=n.tagCloses[n.tagCloseIndex];continue}n.tagCloseIndex++;n.index=u.index+f.length;n.currentTagClose=n.tagCloses[n.tagCloseIndex];h=u;o=f;l=u}}return t},hi=function(n){var i=n.currentTagClose==null?Number.MAX_VALUE:n.currentTagClose.index,r=n.currentTagOpen==null?Number.MAX_VALUE:n.currentTagOpen.index,t=Math.min(r,i);return t===Number.MAX_VALUE?null:t===i?n.currentTagClose:t===r?n.currentTagOpen:null},g=function(n,t){var u,i;return n.index===t?null:(u=n.rawHtml.substring(n.index,t),u!=="")?(i=new r,i.blockType=EVUI.Modules.DomTree.DomTreeElementType.Text,i.index=n.index,i.length=u.length,i.tagName="#text",i.content=u,i):null},ci=function(n,t,i,r){var u=n.rawHtml.substring(i,r),f=u.length;return(t.tagName=nt(n,u,f,!1),t.tagName==="")?!1:(t.tagName==="#comment"?(t.blockType=EVUI.Modules.DomTree.DomTreeElementType.Comment,t.content=u.substring(4,f-3)):t.tagName==="#cdata"?(t.blockType=EVUI.Modules.DomTree.DomTreeElementType.CDATA,t.content=u.substring(9,f-3)):(t.blockType=EVUI.Modules.DomTree.DomTreeElementType.Element,t.attributes=li(n,u.substring(t.tagName.length+1,f-1).trim())),!0)},nt=function(n,t,i,r){var e=r===!1?!0:!1,o,f,a,s;if(e===!0&&(e=/\'|\"|\s/.test(t)),e===!1&&(o=c[t],o!=null))return o;var h=0,u=0,l=t.match(ht);if(l!=null&&(u=l[0].length),t[u]==="!"){if(i>u+3&&t.substr(u+1,2)==="--")return"#comment";if(i>u+9&&t.substr(u+1,7).toLowerCase()==="![cdata[")return"#cdata"}if(i>4&&r===!0){if(t[i-4]==="-"&&t[i-3]==="-")return"#comment";if(t[i-4]==="]-"&&t[i-3]==="]")return"#cdata"}for(f=u;f<i;f++)if(a=t[f],st.test(a)===!1)h=f;else break;return s=t.substring(u,h+1).toUpperCase(),e===!1&&(c[t]=s),s},li=function(n,t){var o,v,y,i,l;if(t==="")return[];var r={rawHtml:t,attributes:[]},p=t,w=p.length,u=0,a=0,h=0,s=!0,f=!1,e=!1,c=!1;for(i=0;i<w;i++)if(o=p[i],o==="=")s===!0&&(a=i);else if(o==="'"){if(i>0&&t[i-1]==="\\")continue;if(e===!0||c===!0)continue;f===!1?(h=i,f=!0,s=!1):(tt(r,u,a,h,i),u=i+1,f=!1,s=!0)}else if(o==='"'){if(i>0&&t[i-1]==="\\")continue;if(f===!0||c===!0)continue;e===!1?(h=i,e=!0,s=!1):(tt(r,u,a,h,i),u=i+1,e=!1,s=!0)}else o==="("?(f===!0||e===!0)&&(c=!0):o===")"&&(f===!0||e===!0)&&(c=!1);if((r.attributes.length===0||u!=r.rawHtml.length)&&(v=t.substring(u,r.rawHtml.length).trim().split(/\s+/g),y=v.length,y>0))for(i=0;i<y;i++)l=new EVUI.Modules.DomTree.DomTreeElementAttribute,l.key=v[i],l.val="",r.attributes.push(l);return r.attributes},tt=function(n,t,i,r,u){var e=n.rawHtml.substring(t,i).trim(),o,s,h,c,f;if(e.length===0)return!1;if(/\s+/.test(e)===!0&&(o=e.split(/\s+/g),s=o.length,s>1)){for(h=0;h<s-1;h++)f=new EVUI.Modules.DomTree.DomTreeElementAttribute,f.key=o[h].toLowerCase(),f.val="",n.attributes.push(f);e=o[s-1]}return c=n.rawHtml.substring(r+1,u),f=new EVUI.Modules.DomTree.DomTreeElementAttribute,f.key=e.toLowerCase(),f.val=c,n.attributes.push(f),!0},ai=function(){this.rawHtml=null;this.rawHtmlLength=0;this.index=0;this.tagOpenIndex=0;this.tagCloseIndex=0;this.literalTextSpans=[];this.lastTextSpanIndex=0;this.tagOpens=[];this.tagCloses=[];this.currentTagOpen=null;this.currentTagClose=null},r=function(){this.index=-1;this.length=-1;this.blockType=EVUI.Modules.DomTree.DomTreeElementType.Unknown;this.tagName=null;this.attributes=[];this.content=[];this.htmlContent=null;this.isSelfClosing=!1};r.prototype.toNode=function(n,t){var r=null,o,s,h,u,f,i,e;if(this.blockType===EVUI.Modules.DomTree.DomTreeElementType.Text)r=document.createTextNode(this.content);else if(this.blockType===EVUI.Modules.DomTree.DomTreeElementType.DocumentFragment)for(r=document.createDocumentFragment(),f=this.content.length,i=0;i<f;i++)e=this.content[i],e.toNode(r);else if(this.blockType===EVUI.Modules.DomTree.DomTreeElementType.CDATA)r=document.createCDATASection(this.content);else if(this.blockType===EVUI.Modules.DomTree.DomTreeElementType.Comment)r=document.createComment(this.content);else{if(o=!1,s=!1,t.isOmittedTag(this.tagName)===!0)if(t.elementOptions.includeOmittedElementOuterTag===!0)s=!0,this.tagName==="script"&&(o=!0);else return null;for(r=document.createElement(this.tagName),h=this.attributes.length,i=0;i<h;i++)(u=this.attributes[i],t.isOmittedAttribute(u===!0))||(o!==!0||u.key.toLowerCase()!=="src")&&r.setAttribute(u.key,u.val);if(s===!1)for(f=this.content.length,i=0;i<f;i++)e=this.content[i],e.toNode(r,t)}return n!=null&&n.append(r),r};r.prototype.toDomTree=function(n,t){var i=new EVUI.Modules.DomTree.DomTreeElement,f,e,o,s,u,r;if(i.flags=EVUI.Modules.DomTree.DomTreeElementFlags.HTML,i.tagName=this.tagName,i.type=this.blockType,this.blockType===EVUI.Modules.DomTree.DomTreeElementType.Text||this.blockType===EVUI.Modules.DomTree.DomTreeElementType.Comment||this.blockType===EVUI.Modules.DomTree.DomTreeElementType.CDATA)i.content=this.content;else if(this.blockType===EVUI.Modules.DomTree.DomTreeElementType.DocumentFragment)for(i.content=[],u=this.content.length,r=0;r<u;r++)this.content[r].toDomTree(i,t);else if(this.blockType===EVUI.Modules.DomTree.DomTreeElementType.Element){if(f=!1,e=!1,t.isOmittedTag(this.tagName)===!0)if(t.elementOptions.includeOmittedElementOuterTag===!0)e=!0,this.tagName.toLowerCase()==="script"&&(f=!0);else return null;if(this.attributes!=null&&(o=this.attributes.length,o>0))if(f===!0)for(i.attrs=[],r=0;r<o;r++)(s=this.attributes[r],s.key!=="src")&&i.attrs.push(s);else i.attrs=this.attributes;if(this.isSelfClosing===!0)i.content=null;else if(i.content=[],e===!1)for(u=this.content.length,r=0;r<u;r++)this.content[r].toDomTree(i,t)}return n!=null&&n.content!=null&&n.content.push(i),i};t=function(){this.start=-1;this.end=-1;this.text=null};e=function(){this.elementOptions=null;this.omittedElementsDic={};this.omittedAttributesDic={}};e.prototype.isOmittedTag=function(n){return typeof n!="string"?!0:this.omittedAttributesDic[n.toLowerCase()]===!0?!0:!1};e.prototype.isOmittedAttribute=function(n){if(n==null||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.key)==!0)return!0;var t=!1,i=n.key.toLowerCase();if(this.omittedAttributesDic[i]===!0?t=!0:ct.test(n.key)===!0&&window[i]!==undefined&&(this.omittedAttributesDic[i]=!0,t=!0),t===!0){if(this.elementOptions.inlineEventHandlerFilter instanceof RegExp){if(this.elementOptions.inlineEventHandlerFilter.test(n.val)===!0)return!1}else if(typeof this.elementOptions.inlineEventHandlerFilter=="function"&&this.elementOptions.inlineEventHandlerFilter(n.key,n.val)===!0)return!1;return!0}return!1}};EVUI.Modules.DomTree.DomTreeElement=function(){this.flags=EVUI.Modules.DomTree.DomTreeElementFlags.None;this.tagName=undefined;this.type=EVUI.Modules.DomTree.DomTreeElementType.Unknown;this.attrs=undefined;this.content=undefined;this.shadowContent=undefined;this.node=undefined};EVUI.Modules.DomTree.DomTreeElement.prototype.toNode=function(n){if(this.node!=null)return this.node;this.node=this.type===EVUI.Modules.DomTree.DomTreeElementType.DocumentFragment||this.type===EVUI.Modules.DomTree.DomTreeElementType.Document?EVUI.Modules.DomTree.Converter.fromDomTreeElement(this,n):EVUI.Modules.DomTree.Converter.fromDomTreeElement(this,n).childNodes[0];var t=function(n,i){var f,r,u;if(typeof n.content!="string"&&n.content!=null)for(f=n.content.length,r=0;r<f;r++)u=n.content[r],u.node=i.childNodes[r],t(u,u.node)};return t(this,this.node),this.node};EVUI.Modules.DomTree.DomTreeElement.prototype.search=function(n,t){var r=[],e,h,u,o,i,s,f;if(typeof n!="function"||n(this)===!0&&(r.push(this),t===!0))return r;if(this.content!=null&&typeof this.content!="string")for(e=this.content.slice(),h=e.length,u=0;u<h;u++)if(o=e[u],i=o==null?null:o.search(n),i!=null){if(s=i.length,t===!0&&s>0)return i;for(f=0;f<s;f++)r.push(i[f])}return r};EVUI.Modules.DomTree.DomTreeElement.prototype.clone=function(n){var t=new EVUI.Modules.DomTree.DomTreeElement,e,f,r,u,i;if(this.attrs!=null)for(t.attrs=[],e=this.attrs.length,i=0;i<e;i++)f=this.attrs[i],r=new EVUI.Modules.DomTree.DomTreeElementAttribute,r.key=f.key,r.val=f.val,t.attrs.push(r);if(t.flags=this.flags,t.tagName=this.tagName,t.type=this.type,this.content==null)return t;if(typeof this.content=="string")t.content=this.content;else if(EVUI.Modules.Core.Utils.isArray(this.content)===!0&&(t.content=[],n===!0))for(u=this.content.length,i=0;i<u;i++)t.content.push(this.content[i].clone(!0));if(EVUI.Modules.Core.Utils.isArray(this.shadowContent)===!0&&(t.shadowContent=[],n===!0))for(u=this.shadowContent.length,i=0;i<u;i++)t.content.push(this.shadowContent[i].clone(!0));return t};EVUI.Modules.DomTree.DomTreeElementFlags={None:0,HTML:1,XML:2,HasForiegnResource:4,IsInShadowDom:8};Object.freeze(EVUI.Modules.DomTree.DomTreeElementFlags);EVUI.Modules.DomTree.DomTreeElementAttribute=function(){this.key=null;this.val=null};EVUI.Modules.DomTree.DomTreeElementType={Unknown:0,Element:1,Text:2,Comment:3,Document:4,DocumentFragment:5,CDATA:6};Object.freeze(EVUI.Modules.DomTree.DomTreeElementType);EVUI.Modules.DomTree.DomTreeElementOptions=function(){this.omittedElements=[];this.includeOmittedElementOuterTag=!1;this.absoluteUrls=!1;this.includeNodeReferences=!1;this.noInlineEventHandlers=!1;this.inlineEventHandlerFilter=null};EVUI.Modules.DomTree.Converter=null,function(){var n=null;Object.defineProperty(EVUI.Modules.DomTree,"Converter",{get:function(){return n==null&&(n=new EVUI.Modules.DomTree.DomTreeConverter),n},configurable:!1,enumerable:!0})}();delete $evui.dromTree;$evui.domTree=null,function(){Object.defineProperty($evui,"domTree",{get:function(){return EVUI.Modules.DomTree.Converter},enumerable:!0})}();$evui.toDomTreeElement=function(n,t){return EVUI.Modules.DomTree.Converter.toDomTreeElement(n,t)};$evui.fromDomTreeElement=function(n,t,i){return i===!0?EVUI.Modules.DomTree.Converter.fromDomTreeElementToString(n,t):EVUI.Modules.DomTree.Converter.fromDomTreeElement(n,t)};$evui.parseHtml=function(n,t){return EVUI.Modules.DomTree.Converter.htmlToDocumentFragment(n,t)};$evui.parseHtmlToDomTree=function(n,t){return EVUI.Modules.DomTree.Converter.htmlToDomTree(n,t)};Object.freeze(EVUI.Modules.DomTree);EVUI.Modules.Dropdowns={};EVUI.Modules.Dropdowns.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),Panes:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Dropdowns.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Dropdowns.Dependencies);EVUI.Modules.Dropdowns.Constants={};EVUI.Modules.Dropdowns.Constants.Fn_DropdownSelector=function(){return!0};EVUI.Modules.Dropdowns.Constants.Fn_LoadCallback=function(){};EVUI.Modules.Dropdowns.Constants.Fn_DropdownOperationCallback=function(){};EVUI.Modules.Dropdowns.Constants.CSS_Position="evui-position";EVUI.Modules.Dropdowns.Constants.CSS_ClippedX="evui-clipped-x";EVUI.Modules.Dropdowns.Constants.CSS_ClippedY="evui-clipped-y";EVUI.Modules.Dropdowns.Constants.CSS_ScrollX="evui-scroll-x";EVUI.Modules.Dropdowns.Constants.CSS_ScrollY="evui-scroll-y";EVUI.Modules.Dropdowns.Constants.CSS_Flipped="evui-flipped";EVUI.Modules.Dropdowns.Constants.CSS_Transition_Show="evui-transition-show";EVUI.Modules.Dropdowns.Constants.CSS_Transition_Hide="evui-transition-hide";EVUI.Modules.Dropdowns.Constants.Attribute_ID="evui-dd-id";EVUI.Modules.Dropdowns.Constants.Attribute_Focus="evui-dd-focus";EVUI.Modules.Dropdowns.Constants.Attribute_Close="evui-dd-close";EVUI.Modules.Dropdowns.Constants.Attribute_Drag="evui-dd-drag-handle";EVUI.Modules.Dropdowns.Constants.Attribute_SourceURL="evui-dd-src";EVUI.Modules.Dropdowns.Constants.Attribute_PlaceholderID="evui-dd-placeholder-id";EVUI.Modules.Dropdowns.Constants.Attribute_UnloadOnHide="evui-dd-unload";EVUI.Modules.Dropdowns.Constants.Attribute_Context="evui-dd-cxt";EVUI.Modules.Dropdowns.Constants.Attribute_Selector="evui-dd-selector";EVUI.Modules.Dropdowns.Constants.Attribute_Orientation="evui-dd-orientation";EVUI.Modules.Dropdowns.Constants.Attribute_Alignment="evui-dd-alignment";EVUI.Modules.Dropdowns.Constants.Attribute_DropMode="evui-dd-mode";EVUI.Modules.Dropdowns.Constants.Default_ObjectName="Dropdown";EVUI.Modules.Dropdowns.Constants.Default_ManagerName="DropdownManager";EVUI.Modules.Dropdowns.Constants.Default_CssPrefix="evui-dd";EVUI.Modules.Dropdowns.Constants.Default_EventNamePrefix="evui.dd";EVUI.Modules.Dropdowns.Constants.Default_AttributePrefix="evui-dd";Object.freeze(EVUI.Modules.Dropdowns.Constants);EVUI.Modules.Dropdowns.DropdownManager=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Dropdowns.Dependencies);var r=this,i=null,t=null;this.addDropdown=function(n){if(n==null)throw Error(t.objectName+" cannot be null.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.id)===!0)throw Error(t.objectName+"must have an id that is a non-whitespace string.");var r=t.getPaneEntry(n.id);if(r!=null)throw Error("A "+t.objectName+' with an id of "'+n.id+'" already exists.');return i.addPane(e(n)),r=t.getPaneEntry(n.id),r.wrapper};this.removeDropdown=function(n){return i.removePane(n)};this.getDropdown=function(n,i){var r=null;return typeof n=="function"?(r=t.getPaneEntry(function(){return!0},!0).map(function(n){return n.wrapper}).filter(n),i!==!0&&r!=null)?r[0]:r:(r=t.getPaneEntry(n,i),r==null)?null:EVUI.Modules.Core.Utils.isArray(r)===!1?r.wrapper:r.map(function(n){return n.wrapper})};this.showDropdown=function(n,r,e){var s=f(n,!0),o=new EVUI.Modules.Panes.PaneShowArgs;o.showSettings=t.cloneShowSettings(s.pane.showSettings);o.loadArgs=new EVUI.Modules.Panes.PaneLoadArgs;o.loadArgs.loadSettings=t.cloneLoadSettings(s.pane.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownShowArgs(o),r,["type"]),r.showSettings=r.showSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownShowSettings(o.showSettings),r.showSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs!=null&&r.loadArgs.loadSettings!=null?(r.loadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadArgs(o.loadArgs),r.loadArgs,["type"]),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadSettings(o.loadArgs.loadSettings),r.loadArgs.loadSettings)):(r.loadArgs=new EVUI.Modules.Dropdowns.DropdownLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings,["type"]))):r=null;r==null&&(r=new EVUI.Modules.Dropdowns.DropdownShowArgs(o),r.showSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs=new EVUI.Modules.Dropdowns.DropdownLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.showPane(s.pane.id,o,e)};this.showDropdownAsync=function(n,t){return new Promise(function(i){r.showDropdown(n,t,function(n){i(n)})})};this.hideDropdown=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneHideArgs;o.unloadArgs=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownHideArgs(o),r,["type"]),r.unloadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownUnloadArgs(o.unloadArgs,r.unloadArgs))):r=null;r==null&&(r=new EVUI.Modules.Dropdowns.DropdownHideArgs(o),r.unloadArgs=new EVUI.Modules.DropdownUnloadArgs(o.unloadArgs));t.currentActionArgs=u(r);i.hidePane(s.pane.id,o,e)};this.hideDropdownAsync=function(n,t){return new Promise(function(i){r.hideDropdown(n,t,function(n){i(n)})})};this.hideAllDropdowns=function(n,t){var i;typeof t!="function"&&(t=function(){});var u=this.getDropdown(function(n){return n.isVisible}),r=u.length,f=0;if(r===0)return t(!0);for(i=0;i<r;i++)this.hideDropdown(u[i],n,function(){return f++,f===r?t(!0):void 0})};this.hideAllDropdownsAsync=function(n){return new Promise(function(t){r.hideAllDropdowns(n,function(n){t(n)})})};this.loadDropdown=function(n,r,e){var s=f(n,!1),o=new EVUI.Modules.Panes.PaneLoadArgs;o.loadSettings=t.cloneLoadSettings(s.pane.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadArgs(o),r,["type"]),r.loadSettings=r.loadSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadSettings(o.loadSettings),r.loadSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadSettings(o.loadSettings),s.wrapper.loadSettings)):r=null;r==null&&(r=new EVUI.Modules.Dropdowns.DropdownLoadArgs(o),r.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownLoadSettings(o.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.loadPane(s.pane.id,o,e)};this.loadDropdownAsync=function(n,t){return new Promise(function(i){r.loadDropdown(n,t,function(n){i(n)})})};this.unloadDropdown=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r=r!=null&&typeof r=="object"?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Dropdowns.DropdownUnloadArgs(o),r):null;r==null&&(r=new EVUI.Modules.Dropdowns.DropdownUnloadArgs(o));t.currentActionArgs=u(r);i.unloadPane(s.pane.id,o,e)};this.unloadDropdownAsync=function(n,t){return new Promise(function(i){r.unloadDropdown(n,t,function(n){i(n)})})};var o=function(n){var t=n.pane.dropdown;return delete n.pane.dropdown,c(t,n.pane,n.exists)},s=function(n,t){var r,i;return n.foreignArgs==null&&(n.foreignArgs=h(n)),r=null,t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Hide?r=n.foreignArgs.hideArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Load?r=n.foreignArgs.loadArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Show?r=n.foreignArgs.showArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Unload&&(r=n.foreignArgs.unloadArgs),i=new EVUI.Modules.Dropdowns.DropdownEventArgs(n,r),i.cancel=t.cancel,i.key=t.key,i.pause=t.pause,i.resume=t.resume,i.stopPropagation=t.stopPropagation,i.context=t.context,i},u=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.type===EVUI.Modules.Dropdowns.DropdownArgumentType.Hide?(t.hideArgs=n,t.unloadArgs=n.unloadArgs):n.type===EVUI.Modules.Dropdowns.DropdownArgumentType.Show?(t.showArgs=n,t.loadArgs=n.loadArgs):n.type===EVUI.Modules.Dropdowns.DropdownArgumentType.Load?t.loadArgs=n:n.type===EVUI.Modules.Dropdowns.DropdownArgumentType.Unload&&(t.unloadArgs=n),t},h=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.hideArgs!=null&&(t.hideArgs=new EVUI.Modules.Dropdowns.DropdownHideArgs(n.hideArgs),t.hideArgs.unloadArgs=new EVUI.Modules.Dropdowns.DropdownUnloadArgs(n.hideArgs.unloadArgs)),n.showArgs!=null&&(t.showArgs=new EVUI.Modules.Dropdowns.DropdownShowArgs(n.showArgs),t.showArgs.showSettings=new EVUI.Modules.Dropdowns.DropdownShowSettings(n.showArgs.showSettings),t.showArgs.loadArgs=new EVUI.Modules.Dropdowns.DropdownLoadArgs(n.showArgs.loadArgs),t.showArgs.loadArgs.loadSettings=new EVUI.Modules.Dropdowns.DropdownLoadSettings(n.showArgs.loadArgs.loadSettings)),n.loadArgs!=null&&(t.loadArgs=new EVUI.Modules.Dropdowns.DropdownLoadArgs(n.loadArgs),t.loadArgs.loadSettings=new EVUI.Modules.Dropdowns.DropdownLoadSettings(n.loadArgs.loadSettings)),n.unloadArgs!=null&&(t.unloadArgs=new EVUI.Modules.Dropdowns.DropdownUnloadArgs(n.unloadArgs)),t},c=function(n,i,r){var f=null,e,u;return r===!0?(e=t.getPaneEntry(n.id),f=e.wrapper):f=new EVUI.Modules.Dropdowns.Dropdown(i),u=EVUI.Modules.Core.Utils.shallowExtend({},n),delete u.id,r===!0&&n.element===i.element&&delete u.element,delete u.currentPosition,delete u.currentZIndex,delete u.isVisible,delete u.isInitialized,delete u.isLoaded,EVUI.Modules.Core.Utils.shallowExtend(f,u,["showSettings","loadSettings"]),f.showSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Dropdowns.DropdownShowSettings(i.showSettings),f.showSettings,n.showSettings),f.loadSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Dropdowns.DropdownLoadSettings(i.loadSettings),f.loadSettings,n.loadSettings),f},f=function(n,i){var r;if(n==null||typeof n!="string"&&typeof n!="object")throw Error("Invalid input: "+t.objectName+" or string id expected.");return n instanceof Event?t.getPaneEntryAmbiguously(n,i):(r={},typeof n=="string"?r=e({id:n}):(r.id=n.id,r.dropdown=n),t.getPaneEntryAmbiguously(r,i))},l=function(n){return n==null?!0:n.triggerType===EVUI.Modules.Panes.PaneAutoCloseTriggerType.Click?a(n):n.triggerType===EVUI.Modules.Panes.PaneAutoCloseTriggerType.KeyDown?v(n):!0},a=function(n){var s,i,u,h,f,e;if(n.browserEvent.type==="contextmenu")return(s=t.getPaneEntry(n.target.id),s.currentPaneAction===EVUI.Modules.Panes.PaneAction.Show)?!1:(n.browserEvent.preventDefault(),!0);if(i=r.getDropdown(function(n){return n.isVisible},!0),i==null)return!0;var o=t.getPaneEntry(function(n){return n.currentPaneAction===EVUI.Modules.Panes.PaneAction.Show},!0),c=o==null?0:o.length,l=i.length;for(u=0;u<l;u++)for(h=i[u],f=0;f<c;f++)if(e=o[f],e.wrapper.showSettings!=null&&e.wrapper.showSettings.relativeElement!=null&&h.element.contains(e.wrapper.showSettings.relativeElement))return!1;return!0},v=function(n){var i=t.getPaneEntry(function(n){return n.pane.isVisible===!0},!0),u,f,r,e;if(i==null)return!0;for(u=n.target.currentZIndex,EVUI.Modules.Core.Utils.isArray(i)===!1&&(i=[i]),f=i.length,r=0;r<f;r++)if(e=i[r],e.pane.currentZIndex>u)return!1;return n.browserEvent.stopPropagation(),n.browserEvent.preventDefault(),!0},e=function(n){var i,r;return typeof n.id=="string"&&(i=t.getPaneEntry(n.id),i!=null&&i.pane!=null)?(r=EVUI.Modules.Core.Utils.shallowExtend({},i.pane),r.dropdown=n,r):{id:n.id,autoCloseSettings:{closeMode:EVUI.Modules.Panes.PaneCloseMode.Click,autoCloseKeys:["Escape"],autoCloseFilter:function(n){return l(n)}},showSettings:{relativePosition:{orientation:EVUI.Modules.Dropdowns.DropdownOrientation.Bottom+" "+EVUI.Modules.Dropdowns.DropdownOrientation.Right,alignment:EVUI.Modules.Dropdowns.DropdownAlignment.None},clipSettings:{mode:EVUI.Modules.Panes.PaneClipMode.Shift}},dropdown:n}},y=function(n,t){var i;EVUI.Modules.Core.Utils.shallowExtend(n,e({id:n.id}));i=EVUI.Modules.Core.Utils.getElementAttributes(t.currentTarget);n.showSettings==null&&(n.showSettings={});n.showSettings.relativePosition==null&&(n.showSettings.relativePosition={});var r=i.getValue(EVUI.Modules.Dropdowns.Constants.Attribute_Orientation),u=i.getValue(EVUI.Modules.Dropdowns.Constants.Attribute_Alignment),f=i.getValue(EVUI.Modules.Dropdowns.Constants.Attribute_DropMode);return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!1&&(n.showSettings.relativePosition.orientation=r),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u)===!1&&(n.showSettings.relativePosition.alignment=u),f===EVUI.Modules.Dropdowns.DropdownMode.Element?n.showSettings.relativePosition.relativeElement=t.currentTarget:f===EVUI.Modules.Dropdowns.DropdownMode.Point?(n.showSettings.relativePosition.x=t.clientX,n.showSettings.relativePosition.y=t.clientY):t.type==="contextmenu"?(n.showSettings.relativePosition.x=t.clientX,n.showSettings.relativePosition.y=t.clientY):n.showSettings.relativePosition.relativeElement=t.currentTarget,t.type==="contextmenu"&&t.preventDefault(),!0};t=new EVUI.Modules.Panes.PaneManagerSettings;t.attributePrefix=EVUI.Modules.Dropdowns.Constants.Default_AttributePrefix;t.cssPrefix=EVUI.Modules.Dropdowns.Constants.Default_CssPrefix;t.cssSheetName=EVUI.Modules.Styles.Constants.DefaultStyleSheetName;t.eventNamePrefix=EVUI.Modules.Dropdowns.Constants.Default_EventNamePrefix;t.managerName=EVUI.Modules.Dropdowns.Constants.Default_ManagerName;t.objectName=EVUI.Modules.Dropdowns.Constants.Default_ObjectName;t.makeOrExtendObject=o;t.buildEventArgs=s;t.interpretBrowserEvent=y;(n==null||typeof n!="object")&&(n=new EVUI.Modules.Dropdowns.DropdownControllerServices);(n.paneManager==null||typeof n.paneManager!="object")&&(n.paneManager=EVUI.Modules.Panes.Manager);t.httpManager=n.httpManager;t.stylesheetManager=n.stylesheetManager;t.htmlLoader=n.htmlLoader;i=new n.paneManager.createNewPaneManager(t);this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnloaded",targetPath:"onUnloaded"})};EVUI.Modules.Dropdowns.Dropdown=function(n){if(n==null)throw Error("Invalid input. Must wrap a Pane.");var t=n;this.id=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"id",targetPath:"id",settings:{set:!1}});this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.unloadOnHide=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadOnHide",targetPath:"unloadOnHide"});this.currentPosition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentPosition",targetPath:"currentPosition",settings:{set:!1}});this.currentZIndex=-1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentZIndex",targetPath:"currentZIndex",settings:{set:!1}});this.isVisible=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isVisible",targetPath:"isVisible",settings:{set:!1}});this.isLoaded=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isLoaded",targetPath:"isLoaded",settings:{set:!1}});this.isInitialized=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isInitialized",targetPath:"isInitialized",settings:{set:!1}});this.showSettings=null;this.loadSettings=null;this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnloaded",targetPath:"onUnloaded"});this.getEventBindings=function(){return t.getEventBindings()};this.addEventBinding=function(n,i,r){return t.addEventBinding(n,i,r)}};EVUI.Modules.Dropdowns.DropdownShowSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowSettings:n;t.relativePosition==null&&(t.relativePosition=new EVUI.Modules.Panes.PaneRelativePosition);t.clipSettings==null&&(t.clipSettings=new EVUI.Modules.Panes.PaneClipSettings);this.x=0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"x",targetPath:"relativePosition.x"});this.y=0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"y",targetPath:"relativePosition.y"});this.orientation=EVUI.Modules.Dropdowns.DropdownOrientation.Right+" "+EVUI.Modules.Dropdowns.DropdownOrientation.Bottom;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"orientation",targetPath:"relativePosition.orientation"});this.alignment=EVUI.Modules.Dropdowns.DropdownAlignment.None;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"alignment",targetPath:"relativePosition.alignment"});this.showTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"showTransition",targetPath:"showTransition"});this.hideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"hideTransition",targetPath:"hideTransition"});this.relativeElement=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"relativeElement",targetPath:"relativePosition.relativeElement"});this.clipBounds=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"clipBounds",targetPath:"clipSettings.clipBounds"});this.scrollXWhenClipped=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"scrollXWhenClipped",targetPath:"clipSettings.scrollXWhenClipped"});this.scrollYWhenClipped=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"scrollYWhenClipped",targetPath:"clipSettings.scrollYWhenClipped"});this.setExplicitDimensions=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"setExplicitDimensions",targetPath:"setExplicitDimensions"})};EVUI.Modules.Dropdowns.DropdownEventArgs=function(n,t){if(n==null||t==null)throw Error("Invalid arguments.");var i=n,r=t;this.dropdown=null;Object.defineProperty(this,"dropdown",{get:function(){return i.wrapper},configurable:!1,enumerable:!0});this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.calculatedPosition=null;Object.defineProperty(this,"calculatedPosition",{get:function(){return i.lastCalculatedPosition},configurable:!1,enumerable:!0});this.currentActionArgs=null;Object.defineProperty(this,"currentActionArgs",{get:function(){return r},configurable:!1,enumerable:!0});this.context={}};EVUI.Modules.Dropdowns.DropdownLoadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"type",targetPath:"type"}]);this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"context",targetPath:"context"}]);this.loadSettings=null;this.reload=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"reload",targetPath:"reload"}])};EVUI.Modules.Dropdowns.DropdownShowArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.showSettings=null;this.loadArgs=null;this.reInitialize=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"reInitialize",targetPath:"reInitialize"})};EVUI.Modules.Dropdowns.DropdownHideArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneHideArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.dropdownHideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"dropdownHideTransition",targetPath:"paneHideTransition"});this.unloadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadArgs",targetPath:"unloadArgs"})};EVUI.Modules.Dropdowns.DropdownUnloadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneUnloadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.remove=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"remove",targetPath:"remove"})};EVUI.Modules.Dropdowns.DropdownTransition=function(){this.css=null;this.keyframes=null;this.duration=0};EVUI.Modules.Dropdowns.DropdownLoadSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadSettings:n;this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.selector=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"selector",targetPath:"selector"});this.contextElement=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"contextElement",targetPath:"contextElement"});this.httpLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"httpLoadArgs",targetPath:"httpLoadArgs"});this.placeholderLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"placeholderLoadArgs",targetPath:"placeholderLoadArgs"})};EVUI.Modules.Dropdowns.DropdownMode={Point:"point",Element:"element"};Object.freeze(EVUI.Modules.Dropdowns.DropdownMode);EVUI.Modules.Dropdowns.DropdownAlignment={None:"none",Left:"left",Right:"right",XCenter:"xcenter",YCenter:"ycenter",Top:"top",Bottom:"bottom"};Object.freeze(EVUI.Modules.Dropdowns.DropdownAlignment);EVUI.Modules.Dropdowns.DropdownOrientation={Left:"left",Right:"right",Top:"top",Bottom:"bottom"};Object.freeze(EVUI.Modules.Dropdowns.DropdownOrientation);EVUI.Modules.Dropdowns.DropdownArgumentType={Show:"show",Hide:"hide",Load:"load",Unload:"unload",MoveResize:"moveResize"};Object.freeze(EVUI.Modules.Dropdowns.DropdownArgumentType);EVUI.Modules.Dropdowns.DropdownClipMode={Overflow:"overflow",Clip:"clip",Shift:"shift"};Object.freeze(EVUI.Modules.Dropdowns.DropdownClipMode);EVUI.Modules.Dropdowns.DropdownControllerServices=function(){this.httpManager=null;this.htmlLoader=null;this.stylesheetManager=null;this.panesManager=null};EVUI.Modules.Dropdowns.Manager=null,function(){var n=null,t=EVUI.Modules.Dropdowns.DropdownManager;Object.defineProperty(EVUI.Modules.Dropdowns,"Manager",{get:function(){return n==null&&(n=new t),n},enumerable:!0,configurable:!1})}();Object.freeze(EVUI.Modules.Dropdowns);delete $evui.dropdowns;$evui.dropdowns=null;Object.defineProperty($evui,"dropdowns",{get:function(){return EVUI.Modules.Dropdowns.Manager},enumerable:!0});$evui.addDropdown=function(n){return EVUI.Modules.Dropdowns.Manager.addDropdown(n)};$evui.showDropdown=function(n,t,i){return EVUI.Modules.Dropdowns.Manager.showDropdown(n,t,i)};$evui.showDropdownAsync=function(n,t){return EVUI.Modules.Dropdowns.Manager.showDropdownAsync(n,t)};$evui.hideDropdown=function(n,t,i){return EVUI.Modules.Dropdowns.Manager.hideDropdown(n,t,i)};$evui.hideDropdownAsync=function(n,t){return EVUI.Modules.Dropdowns.Manager.hideDropdownAsync(n,t)};EVUI.Modules.Enums={};EVUI.Modules.Enums.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Enums.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Enums.Dependencies);EVUI.Modules.Enums.EnumValueGetter=function(){var n,t,s,h;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Enums.Dependencies);n={};t={};this.getEnumValue=function(n,t,r){var s,h;if(n==null)return undefined;var u=null,f=null,e=null;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1)u=i(n),u.moduleEntry!=null&&(e=u.moduleEntry),u.enumEntry!=null&&(f=u.enumEntry);else if(typeof n=="object")e=o(n);else return undefined;return(f==null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!1&&(u=i(t),u.moduleEntry!=null&&(e=u.moduleEntry),u.enumEntry!=null&&(f=u.enumEntry)),f!=null&&u.enumValueKey==null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!1&&(s=t.toLowerCase(),u.enumEntry.values[s]!==undefined?u.enumValueKey=t:EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!1&&(s=r.toLowerCase(),u.enumEntry.values[s]!==undefined&&(u.enumValueKey=r))),e==null)?undefined:(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u.enumValueKey)===!1&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!0&&(r=u.enumValueKey),r===undefined)?f.enumObj:typeof r!="string"?undefined:(h=f.enumObj[r],h!==undefined)?h:f.values[r.toLowerCase()]};this.getModule=function(t){if(typeof t!="string")return undefined;var r=t.toLowerCase(),i=n[r];return(i==null||EVUI.Modules[i.name]!==i.module)&&(e(),i=n[r],i==null)?undefined:i.module};this.getConstant=function(n,t){var r,u;if(n==null)return undefined;if(r=null,typeof n=="object"){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)return undefined;r=o(n)}else EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1&&(u=i(n),u.moduleEntry!=null&&(r=u.moduleEntry,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u.enumValueKey)===!1&&(t=u.enumValueKey)));return r==null||t==null?undefined:r.constants.values[t.toLowerCase()]};var i=function(n){var u,v,r,f,s;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return null;var t=new h,a=EVUI.Modules.Core.Utils.getValuePathSegments(n),o=a.length;for(u=0;u<o;u++)if(v=a[u],r=v.toLowerCase(),r!=="evui"&&r!=="modules"){if(t.moduleEntry==null&&(f=l(r),f!=null)){t.moduleEntry=f;continue}if(t.moduleEntry!=null&&r==="constants"?t.enumEntry=f.constants:t.moduleEntry!=null&&r==="dependencies"&&(t.enumEntry=f.dependencies),t.enumEntry==null&&(s=c(r),s!=null)){t.enumEntry=s;t.moduleEntry=s.module;continue}if(t.enumEntry!=null&&t.moduleEntry!=null&&u<=o-1){t.enumValueKey=a[o-1].toLowerCase();break}}return t.enumEntry==null?t.moduleEntry!=null&&o===1?t:e()===!0?i(n):t:t},e=function(){for(var t,s=Object.keys(EVUI.Modules),l=s.length,u=!1,e=0;e<l;e++){var o=s[e],h=o.toLowerCase(),i=EVUI.Modules[o],c=n[h];c==null?(t=new f,t.module=i,t.name=o,r(t,i),n[h]=t,u=!0):c.module!==i&&(r(t,i),u=!0)}return u},o=function(t){var u=null,e=null,s,a,o,h,c;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.name)===!1)e=t.name,u=EVUI.Modules[e];else if(t.Constants===undefined||t.Dependencies===undefined)(t===EVUI.Modules.Core||t.Settings!==undefined&&t.Utils!==undefined&&typeof t.Utils.stringIsNullOrWhitespace=="function")&&(e="Core",u=t);else for(s=Object.keys(EVUI.Modules),a=s.length,o=0;o<a;o++)if(h=s[o],c=EVUI.Modules[h],c===t){u=c;e=h;break}if(u==null)return null;var v=e.toLowerCase(),i=n[v],l=!1;return i==null&&(i=new f,i.name=e,i.module=u,n[v]=i,l=!0),i.module!==u&&(l=!0),l===!0&&r(i,t),i},r=function(n,i){for(var e,r,o,s,h=Object.keys(n.module),c=h.length,f=0;f<c;f++)delete t[h[f]];var l=Object.keys(i),a={},c=l.length,v=null,y=null;for(f=0;f<c;f++)if((e=l[f],r=i[e],r!=null)&&typeof r=="object"&&r.constructor===Object.prototype.constructor&&Object.isFrozen(r)!==!1){if(e==="Constants"){v=r;continue}else if(e==="Dependencies"){y=r;continue}o=u(r,e,n);o!=null&&(s=e.toLowerCase(),a[s]=o,t[s]=o)}n.enumEntries=a;n.module=i;n.constants=u(v,"Constants",n);n.dependencies=u(y,"Dependencies",n)},u=function(n,t,i){var r,f,o,u,e,h;if(n==null)return null;for(r=new s,r.name=t,r.module=i,r.enumObj=n,f=Object.keys(n),o=f.length,u=0;u<o;u++)e=f[u],h=n[e],r.values[e.toLowerCase()]=h;return r},c=function(n){return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0?undefined:t[n]},l=function(t){return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0?undefined:n[t]},f=function(){this.name=null;this.module=null;this.constants=null;this.dependencies=null;this.enumEntries={}};f.prototype.getEnumEntry=function(n){return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0?undefined:this.enumEntries[n]};s=function(){this.module=null;this.name=null;this.enumObj=null;this.values={}};h=function(){this.enumValueKey=null;this.enumEntry=null;this.moduleEntry=null}};EVUI.Modules.Enums.ValueGetter=null,function(){var n=null;Object.defineProperty(EVUI.Modules.Enums,"ValueGetter",{get:function(){return n==null&&(n=new EVUI.Modules.Enums.EnumValueGetter),n},configurable:!1,enumerable:!0})}();$evui.enum=function(n,t,i){return EVUI.Modules.Enums.ValueGetter.getEnumValue(n,t,i)};$evui.const=function(n,t){return EVUI.Modules.Enums.ValueGetter.getConstant(n,t)};$evui.module=function(n){return EVUI.Modules.Enums.ValueGetter.getModule(n)};Object.freeze(EVUI.Modules.Enums);EVUI.Modules.Events={};EVUI.Modules.Events.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Events.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Events.Dependencies);EVUI.Modules.Events.Constants={};EVUI.Modules.Events.Constants.Fn_Handler=function(){};EVUI.Modules.Events.Constants.Fn_AskResultCallback=function(){};Object.freeze(EVUI.Modules.Events.Constants);EVUI.Modules.Events.EventManager=function(){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Events.Dependencies);var h=this,n=[],c=function(){this.eventListener=null;this.ordinal=null;this.mode=t.None},t={None:-1,FireUntilRemoved:0,FireOnce:1,Removed:2},i={None:-1,Trigger:0,Ask:1},l=function(){this.sessionID=EVUI.Modules.Core.Utils.makeGuid();this.triggerArgs=null;this.listeners=[];this.callback=null;this.mode=i.None;this.askResults=[];this.eventStream=null};this.on=function(n,i,u,f){return r(n,i,u,f,t.FireUntilRemoved)};this.once=function(n,i,u,f){return r(n,i,u,f,t.FireOnce)};this.off=function(t,i){for(var u,o,e,f=[],s=n.length,r=0;r<s;r++)u=n[r],(u.eventListener.handlerId===t||u.eventListener.eventName===t)&&(typeof i=="function"?u.eventListener.handler===i&&f.push(u):f.push(u));for(o=f.length,r=0;r<o;r++)e=n.indexOf(f[r]),e!==-1&&n.splice(e,1)};this.trigger=function(n,t,r){var s=u(n,t,r),o=f(s,i.Trigger);o!=null&&e(o)};this.ask=function(n,t,r,o){typeof o!="function"&&(o=function(){});var h=u(n,t,r),s=f(h,i.Ask,o);if(s==null)return o([]);e(s)};this.askAsync=function(n,t,i){return new Promise(function(r){h.ask(n,t,i,function(n){r(n)})})};this.getEventListeners=function(n){return s(n).map(function(n){return n.eventListener})};this.getEventListener=function(n){var t=w(n);return t==null?null:t.eventListener};var r=function(t,i,r,u,f){var e,s,a,h,l,o;if(t==null)return null;if(e=null,typeof t=="string"){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)throw Error("Event name must be a non-whitespace string.");if(typeof i!="function")throw Error("Event handler must be a function.");e=new EVUI.Modules.Events.EventListener(t,i,r,u)}else if(typeof t=="object"){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.eventName)===!0)throw Error("Event name must be a non-whitespace string.");if(typeof t.handler!="function")throw Error("Event handler must be a function.");e=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Events.EventListener(t.eventName,t.handler,t.priority,t.handlerName),t,["eventName","handler","priority","handlerName","handlerId"])}else throw Error("Invalid parameters. First parameter must be either a YOLO EventListener object or a non-whitespace string event name.");for(s=0,a=n.length,h=0;h<a;h++)l=n[h],l.eventListener.eventName===e.eventName&&l.ordinal>=s&&(s=l.ordinal+1);return o=new c,o.eventListener=e,o.mode=f,o.ordinal=s,n.push(o),e},u=function(n,t,i){var r=new EVUI.Modules.Events.EventTriggerArgs;if(typeof n=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1)r.eventName=n,r.data=t,r.triggerName=i;else if(typeof n=="object"){if(EVUI.Modules.Core.Utils.shallowExtend(r,n),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.eventName)===!0)throw Error("Event name must be a non-whitespace string.");}else throw Error("Invalid parameters. Parameter must be a YOLO EventTriggerArgs object or a non-whitespace string.");return r},f=function(n,t,i){var r,u;return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.eventName)===!0?null:(r=new l,r.triggerArgs=n,r.mode=t,r.callback=i,u=s(n.eventName),u==null||u.length===0)?null:(u=u.sort(function(n,t){return n.eventListener.priority===t.eventListener.priority?n.orindal-t.ordinal:t.eventListener.priority-n.eventListener.priority}),r.listeners=u,r.eventStream=v(r),r)},a=function(n,t){if(EVUI.Modules.Core.Utils.isSettingTrue("traceEvents")!==!1){var i=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.handlerName)?"unknown":t.handlerName,r=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.triggerName)?"unknown":n.triggerName,u='BTMTRACE: Event "'+n.eventName+'": ("'+r+'") => "'+i+'"';EVUI.Modules.Core.Utils.log(u)}},e=function(n){window.setTimeout(function(){n.eventStream.execute()})},v=function(n){var u=0,e=n.listeners.length,t=new EVUI.Modules.EventStream.EventStream,f,r;for(t.processInjectedEventArgs=function(t){var r=new EVUI.Modules.Events.EventManagerEventArgs(p(n,u),u+1);return r.data=n.triggerArgs.data,r.totalSteps=e,r.pause=t.pause,r.resume=t.resume,r.stopPropagation=t.stopPropagation,n.mode===i.Ask&&(r.resume=function(i){t.resume()===!0&&o(n,r.listener,i,!0)}),t.error==null&&u++,r},t.processReturnedEventArgs=function(t,r){t instanceof EVUI.Modules.Events.EventManagerEventArgs&&(n.triggerArgs.data=t.data);n.mode===i.Ask&&o(n,t.listener,r)},t.endExecutionOnEventHandlerCrash=!1,f=n.listeners.length,r=0;r<f;r++)y(t,n,r);return n.mode===i.Ask&&t.addStep({key:"complete",name:"onComplete",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(t){if(typeof n.callback=="function"){var i=new EVUI.Modules.Core.AsyncSequenceExecutionArgs;i.functions=n.callback;i.parameter=n.askResults;EVUI.Modules.Core.AsyncSequenceExecutor.execute(i,function(n){if(n!=null)throw n;t.resolve()})}}}),t},y=function(i,r,u){if(i!=null&&r!=null&&!(r.listeners.length<u)){var f=r.listeners[u];f.mode!==t.Removed&&(i.addStep({name:f.eventListener.eventName+"-("+r.sessionID+")-"+u,key:f.eventListener.eventName,type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof f.eventListener.handler=="function"&&f.mode!==t.Removed)return a(r.triggerArgs,n.listener),n.listener.handler(n)}}),f.mode===t.FireOnce&&i.addStep({name:"removeFireOnce"+f.eventListener.eventName+"-("+r.sessionID+")-"+u,key:"remove:"+f.eventListener.eventName+"-"+u,type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(i){f.mode=t.Removed;var r=n.indexOf(f);r!==-1&&n.splice(r,1);i.resolve()}}))}},p=function(n,t){var i=n.listeners[t];return i==null?null:i.eventListener},o=function(n,i,r,u){for(var s,e,c,h,o,l=n.listeners.length,f=0;f<l;f++)if(s=n.listeners[f],s.eventListener===i&&s.mode===t.Removed)return;for(e=null,c=n.askResults.length,f=0;f<c;f++)if(h=n.askResults[f],h.eventListner===i){e=h;break}e!=null?(u===!0||e.response===undefined)&&r!==undefined&&(e.response=r):(o=new EVUI.Modules.Events.AskResult,o.eventListner=i,o.response=r,n.askResults.push(o))},s=function(t){for(var r,u=[],f=n.length,i=0;i<f;i++)r=n[i],r.eventListener.eventName===t&&u.push(r);return u},w=function(t){for(var r,u=n.length,i=0;i<u;i++)if(r=n[i],r.eventListener.handlerId===t)return r}};EVUI.Modules.Events.EventListener=function(n,t,i,r){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw Error("event name must be a non-whitespace string.");if(typeof t!="function")throw Error("handler must be a function.");var u=EVUI.Modules.Core.Utils.makeGuid(),f=typeof i=="number"?i:0,s=n,e=t,o=typeof r=="string"?r:null;this.eventName=null;Object.defineProperty(this,"eventName",{get:function(){return s},enumerable:!0,configurable:!1});this.handler=null;Object.defineProperty(this,"handler",{get:function(){return e},set:function(n){if(n!=null&&typeof n!="function")throw Error("handler must be a function.");e=n},enumerable:!0,configurable:!1});this.priority=0;Object.defineProperty(this,"priority",{get:function(){return f},set:function(n){if(typeof n!="number")throw Error("priority must be a number.");f=n},enumerable:!0,configurable:!1});this.handlerId=u;Object.defineProperty(this,"handlerId",{get:function(){return u},enumerable:!0,configurable:!1});this.handlerName=null;Object.defineProperty(this,"handlerName",{get:function(){return o},set:function(n){if(typeof n!="string")throw Error("handlerName must be a string.");o=n},configurable:!1,enumerable:!0})};EVUI.Modules.Events.EventListenerAddRequest=function(){this.eventName=null;this.handler=null;this.priority=null;this.handlerName=null};EVUI.Modules.Events.EventManagerEventArgs=function(n,t){var i=n,r=t;this.listener=null;Object.defineProperty(this,"listener",{get:function(){return i},configurable:!1,enumerable:!0});this.data=null;this.currentStep=-1;Object.defineProperty(this,"currentStep",{get:function(){return r},configurable:!1,enumerable:!0});this.totalSteps=-1;this.pause=function(){};this.resume=function(){};this.stopPropagation=function(){}};EVUI.Modules.Events.EventTriggerArgs=function(){this.eventName=null;this.data=null;this.triggerName=null};EVUI.Modules.Events.AskResult=function(){this.eventListner=null;this.response=null};EVUI.Modules.Events.Manager=null,function(){var n=null,t=EVUI.Modules.Events.EventManager;Object.defineProperty(EVUI.Modules.Events,"Manager",{get:function(){return n==null&&(n=new t),n},configurable:!1,enumerable:!0})}();delete $evui.events;$evui.events=null;Object.defineProperty($evui,"events",{get:function(){return EVUI.Modules.Events.Manager},enumerable:!0});$evui.on=function(n,t,i,r){return EVUI.Modules.Events.Manager.on(n,t,i,r)};$evui.once=function(n,t,i,r){return EVUI.Modules.Events.Manager.once(n,t,i,r)};$evui.off=function(n,t){return EVUI.Modules.Events.Manager.off(n,t)};$evui.trigger=function(n,t,i){return EVUI.Modules.Events.Manager.trigger(n,t,i)};$evui.ask=function(n,t,i,r){return EVUI.Modules.Events.Manager.ask(n,t,i,r)};$evui.askAsync=function(n,t,i){return EVUI.Modules.Events.Manager.askAsync(n,t,i)};EVUI.Modules.EventStream={};EVUI.Modules.EventStream.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.EventStream.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.EventStream.Dependencies);EVUI.Modules.EventStream.Constants={};EVUI.Modules.EventStream.Constants.Fn_Job_Callback=function(){};EVUI.Modules.EventStream.Constants.Fn_Step_Handler=function(){};EVUI.Modules.EventStream.Constants.Fn_Job_Handler=function(){};EVUI.Modules.EventStream.Constants.Fn_Event_Handler=function(){};EVUI.Modules.EventStream.Constants.Fn_OnError=function(){};EVUI.Modules.EventStream.Constants.Fn_OnComplete=function(){};EVUI.Modules.EventStream.Constants.Fn_OnCancel=function(){};EVUI.Modules.EventStream.Constants.Fn_ProcessInjectedEventArgs=function(){};EVUI.Modules.EventStream.Constants.Fn_ProcessReturnedEventArgs=function(){};EVUI.Modules.EventStream.EventStream=function(n){var ut;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.EventStream.Dependencies);var t=this,r=[],i=EVUI.Modules.EventStream.EventStreamStatus.NotStarted,o=-1,b=!1,v=!1,y=null,k=-1,d=[],it=0,p=!1,g=null,w=null,ft=typeof Promise!="undefined",rt=!1,ct=!1,lt=ft===!0?Promise.resolve():null,u=null,f=null;this.canSeek=!0;this.endExecutionOnEventHandlerCrash=!1;this.timeout=-1;this.jobState={};this.eventState={};this.context=null;this.bubblingEvents=null;this.skipInterval=EVUI.Modules.Core.Utils.getSetting("stepsBetweenWaits");this.getStatus=function(){return i};this.getSteps=function(){return r.slice()};this.getCurrentStep=function(){return u};this.isWorking=function(){return!tt()};this.getStep=function(n,t){var i=wt(n,t);return i==null?null:i};this.clear=function(){return tt()===!1?EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Clear","Cannot clear chain mid-execution.",!1):(r=[],this.bubblingEvents=null,this.reset(),!0)};this.onError=function(){};this.onCancel=function(){};this.onComplete=function(){};this.execute=function(){return this.reset()===!1?EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Execute","Failed to reset EventStream, cannot begin execution.",!1):(i=EVUI.Modules.EventStream.EventStreamStatus.Working,s(function(){u=r[0];c(r,0)},0),!0)};this.executeAsync=function(){return new Promise(function(n,i){if(t.execute()===!1){p=!1;g=null;w=null;i(new EVUI.Modules.EventStream.EventStreamError("Failed to reset EventStream, cannot begin execution."));return}p=!0;g=n;w=i})};this.reset=function(){if(tt()===!1)return EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Reset","Cannot reset chain mid-execution.",!1);if(e(),i=EVUI.Modules.EventStream.EventStreamStatus.NotStarted,t.eventState=t.eventState===undefined?{}:t.eventState,t.jobState=t.jobState===undefined?{}:t.jobState,u=null,o=-1,v=!1,f=null,y=null,b=!1,_timeout=-1,d=[],it=0,p===!0){p=!1;var n=w;g=null;w=null;n(new EVUI.Modules.EventStream.EventStreamError("Stream was reset before Promise resolution."))}return!0};this.processInjectedEventArgs=function(n){return n};this.processReturnedEventArgs=function(){};this.cancel=function(){if(i===EVUI.Modules.EventStream.EventStreamStatus.Working)i=EVUI.Modules.EventStream.EventStreamStatus.Canceled;else{if(i===EVUI.Modules.EventStream.EventStreamStatus.Canceled||i===EVUI.Modules.EventStream.EventStreamStatus.Finished||i===EVUI.Modules.EventStream.EventStreamStatus.Error)return!1;var n=l(u,r,!0);st(n);h(n)}return!0};this.pause=function(){return i===EVUI.Modules.EventStream.EventStreamStatus.Working?(i=EVUI.Modules.EventStream.EventStreamStatus.Paused,o=r.indexOf(u),b===!0?v=!0:o++,e(),!0):EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Pause","Chain is not currently executing, nothing to pause.",!1)};this.resume=function(){if(i!==EVUI.Modules.EventStream.EventStreamStatus.Paused)return EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Resume","Chain is not paused, cannot resume.",!1);if(i=EVUI.Modules.EventStream.EventStreamStatus.Working,v===!0)v=!1,o=-1,s(function(){ot(y,u,r)});else if(rt===!1){var n=o;o=-1;s(function(){c(r,n)},0)}else ct=!0;return!0};this.seek=function(n){var f,e;if(t.canSeek!==!0)throw Error('Seeking disabled. Set "canSeek" to true.');return(f=null,typeof n=="number"?n>=0&&n<r.length&&(f=r[n]):typeof n=="string"?f=t.getStep(n):typeof n=="object"&&r.indexOf(n)!==-1&&(f=n),f==null)?EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Seek","Invalid parameters, could not find a step in the internal protected sequence to seek to.",!1):(e=i===EVUI.Modules.EventStream.EventStreamStatus.Working,i=EVUI.Modules.EventStream.EventStreamStatus.Seeking,o=r.indexOf(f),u=f,v=!1,y=null,d=[],e===!1&&s(function(){c(r,o)}),!0)};this.error=function(n,t){if(tt()===!0)return EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","Error","Chain is stopped, cannot trigger error.",!1);if(f=new EVUI.Modules.EventStream.EventStreamError("A manual error was thrown"+(typeof t=="string"&&t.length>0?": "+t:"."),n,EVUI.Modules.EventStream.EventStreamStage.ErrorCommand,u!=null?u.key:null),i===EVUI.Modules.EventStream.EventStreamStatus.Working)i=EVUI.Modules.EventStream.EventStreamStatus.Error;else if(i===EVUI.Modules.EventStream.EventStreamStatus.Paused){e();var o=l(u,r,!0,n);a(o);h(o)}};this.stopPropagation=function(){return u==null?!1:EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u.key)===!0?EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","StopPropagation","Cannot stop the propagation of an event with no key.",!1):(d.indexOf(u.key)===-1&&d.push(u.key),!0)};this.addStep=function(n){if(n==null)return null;var t=null;if(typeof n=="function")t=new EVUI.Modules.EventStream.EventStreamStep,t.key=EVUI.Modules.Core.Utils.makeGuid(),t.name="Step "+r.length+" ("+t.key+")",t.handler=n;else if(typeof n=="object")t=EVUI.Modules.Core.Utils.instanceOf(n,EVUI.Modules.EventStream.EventStreamStep)===!1?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.EventStream.EventStreamStep,n):n,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.key)===!0&&(t.key=EVUI.Modules.Core.Utils.makeGuid()),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.name)===!0&&(t.name="Step "+r.length+" ("+t.EventKey+")");else throw Error("Unrecognized input. Must be an object or function.");return r.push(t),this};this.addJob=function(n,t,i,r){var u=ut(n,t,i,r);return u.type=EVUI.Modules.EventStream.EventStreamStepType.Job,this.addStep(u)};this.addEvent=function(n,t,i,r){var u=ut(n,t,i,r);return u.type=EVUI.Modules.EventStream.EventStreamStepType.Event,this.addStep(u)};ut=function(n,i,r,u){var u=null,o=null,s=null,h=t.timeout,f=!1,e;if(typeof n=="function"?(u=n,f=!0):EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1&&(o=n),f===!1&&typeof i=="function"?(u=i,f=!0):EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!1&&(s=i),f===!1&&typeof r=="function"?(u=r,f=!0):typeof r=="number"&&(h=r),f===!1&&typeof u=="function"&&(f=!0),f===!1)throw Error("Function expected.");return e=new EVUI.Modules.EventStream.EventStreamStep,e.handler=u,e.key=o,e.name=s,e.timeout=h,e};this.getPromiseResolutionValue=function(){};var c=function(n,t){if(nt(u,n)!==!1){var i=n[t];if(i==null)return h(l(u,n,!0));t++;u=i;at(i)}},at=function(n){var u,i;if(n==null&&t.error(null,"Failed to handle step, no step present."),u=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.key)===!1&&d.indexOf(n.key)!==-1,typeof n.handler!="function"||u===!0){s(function(){c(r,r.indexOf(n)+1)});return}i=EVUI.Modules.EventStream.EventStreamStepType.Job;typeof n.type=="string"&&(i=EVUI.Modules.EventStream.EventStreamStepType.getStepType(n.type));i===EVUI.Modules.EventStream.EventStreamStepType.Job?vt(n):(i===EVUI.Modules.EventStream.EventStreamStepType.Event||i===EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent)&&yt(n)},vt=function(n){var o,v,i,c;ni(n);o=!1;v=function(t){o!==!0&&(o=!0,e(),s(function(){y=t;ot(t,n,r)}))};try{b=!0;i=new EVUI.Modules.EventStream.EventStreamJobArgs(t,v);i.resolvedValue=y==null?null:y.resolvedValue;i.key=n.key;i.name=n.name;t.context!=null?n.handler.call(t.context,i):n.handler(i)}catch(p){return b=!1,f=new EVUI.Modules.EventStream.EventStreamError("Job failed.",p,EVUI.Modules.EventStream.EventStreamStage.Job,n.key),e(),c=l(u,r,!0,f),a(c),h(c)}},yt=function(n){var e,o;if(rt=!0,e=dt(u,r),rt=!1,e instanceof ht)o=function(u){if(typeof t.processReturnedEventArgs=="function")try{var o=t.processReturnedEventArgs(e.args,u,n,t.jobState,t.eventState);if(EVUI.Modules.Core.Utils.isPromise(o)===!0)throw Error("processReturnedEventArgs cannot be an async function.");}catch(h){i=EVUI.Modules.EventStream.EventStreamStatus.Error;f=new EVUI.Modules.EventStream.EventStreamError("Error processing returned event args.",h,EVUI.Modules.EventStream.EventStreamStage.ProcessReturnedEventArgs,n.key)}nt(n,r)!==!1&&et(n,function(){var t=r.indexOf(n);t>=0&&t++;s(function(){c(r,t)},0)})},e.promise.catch(function(t){f=new EVUI.Modules.EventStream.EventStreamError("Error executing event handler.",t,EVUI.Modules.EventStream.EventStreamStage.Handler,n.key);i=EVUI.Modules.EventStream.EventStreamStatus.Error;o(t)}),e.promise.then(function(n){o(n)});else{if(nt(n,r)===!1)return;et(n,function(){var t=r.indexOf(n);t>=0&&t++;s(function(){c(r,t)},0)})}},et=function(n,i){var f,o,r,u,e,s;if(t.bubblingEvents==null||typeof t.bubblingEvents.getBubblingEvents!="function")return i();f=null;try{f=t.bubblingEvents.getBubblingEvents(n)}catch(h){return EVUI.Modules.Core.Utils.log(h),i()}if(f==null||(o=f.length,o===0))return i();for(r=new EVUI.Modules.EventStream.EventStreamConfig,r.context=t.context,r.canSeek=t.canSeek,r.endExecutionOnEventHandlerCrash=!0,r.eventState=t.eventState,r.processReturnedEventArgs=t.processReturnedEventArgs,r.skipInterval=t.skipInterval,r.timeout=typeof t.timeout=="number"?t.timeout:-1,r.onComplete=function(){i()},u=new EVUI.Modules.EventStream.EventStream(r),u.processInjectedEventArgs=function(n){var i=t.processInjectedEventArgs(n);return t.canSeek===!0&&i.seek!=null&&(i.seek=function(n,i){i===!0?(u.cancel(),t.seek(n)):u.seek(n)}),i},e=0;e<o;e++)(s=f[e],s!=null)&&u.addStep(pt(n,s));u.execute()},pt=function(n,t){var i=new EVUI.Modules.EventStream.EventStreamStep;return i.key=t.eventName,i.tieout=n.timeout,i.type=EVUI.Modules.EventStream.EventStreamStepType.Event,i.handler=function(n){if(typeof t.handler=="function")return t.handler(n)},i},ot=function(n,t,i){if(b=!1,e(),kt(n),nt(t,i)!==!1){var r=i.indexOf(t);r>=0&&r++;s(function(){c(i,r)},0)}},wt=function(n,t){var f,e,u,i,t,o;if(typeof n!="string")return null;for(f=n.toLowerCase(),e=r.length,u=0;u<e;u++)if(i=r[u],i.key.toLowerCase()===f)if(t!=null){if(t=EVUI.Modules.EventStream.EventStreamStepType.getStepType(t),o=EVUI.Modules.EventStream.EventStreamStepType.getStepType(i.Type),t==o)return i}else return i;return null},l=function(n,i,r,u){var f,e;if(typeof r=="boolean"&&r!==!1&&(r=!0),n==null&&(n=new EVUI.Modules.EventStream.EventStreamStep),f=new EVUI.Modules.EventStream.EventStreamEventArgs(t.eventState),f.currentStep=i.indexOf(n),f.key=n.key,f.stepType=n.type,f.totalSteps=i.length,f.status=t.getStatus(),f.error=u,bt(f,n),typeof t.processInjectedEventArgs=="function"&&n.type!==EVUI.Modules.EventStream.EventStreamStepType.Job)try{if(e=t.processInjectedEventArgs(f,t.jobState),EVUI.Modules.Core.Utils.isPromise(e)===!0)throw Error("processInjectedEventArgs cannot be an async function.");e!=null&&typeof e=="object"&&(f=e)}catch(o){return(f.error=new EVUI.Modules.EventStream.EventStreamError("ProcessInjectedEventArgs failed.",o,EVUI.Modules.EventStream.EventStreamStage.ProcessInjectedEventArgs,n.key),f.error.innerError=u,f==null)?null:r===!0?f:(a(f),h(f),null)}return f},bt=function(n,r){if(n!=null&&typeof n=="object"){try{n instanceof EVUI.Modules.EventStream.EventStreamEventArgs&&(n.cancel=function(){return t.cancel()},n.pause=function(){return t.pause()},n.resume=function(){return t.resume()},n.seek=function(n){return t.seek(n)},n.stopPropagation=function(){return t.stopPropagation()})}catch(u){return f=new EVUI.Modules.EventStream.EventStreamError("Failed to add reserved handlers.",u,EVUI.Modules.EventStream.EventStreamStage.AttachEvents,r.key),i=EVUI.Modules.EventStream.EventStreamStatus.Error,a(n),h(n),null}return n}},kt=function(n){if(n==null)return null;if(n.success===!1||n.canceled===!0)n.canceled===!0?i=EVUI.Modules.EventStream.EventStreamStatus.Canceled:n.success===!1&&(f=new EVUI.Modules.EventStream.EventStreamError(n.message==null?"Job Error.":n.message,n.error,EVUI.Modules.EventStream.EventStreamStage.Job,u!=null?u.key:null),n.innerError!=null&&(f.innerError=n.innerError),i=EVUI.Modules.EventStream.EventStreamStatus.Error);else if(n.seeking==!0)i=EVUI.Modules.EventStream.EventStreamStatus.Seeking;else return null},dt=function(n,r){var u=null,e,o,h;if(n==null||typeof n.handler!="function")return u;if(e=l(n,r),e==null)return null;o=!1;try{u=t.context!=null&&n.type!==EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent?n.handler.call(t.context,e):n.handler(e)}catch(s){o=!0;f=new EVUI.Modules.EventStream.EventStreamError("Error executing event handler.",s,EVUI.Modules.EventStream.EventStreamStage.Handler,n.key)}if(typeof t.processReturnedEventArgs=="function"&&EVUI.Modules.Core.Utils.isPromise(u)===!1)try{if(h=t.processReturnedEventArgs(e,o===!0?f.exception:u,n,t.jobState,t.eventState),EVUI.Modules.Core.Utils.isPromise(h)===!0)throw Error("processReturnedEventArgs cannot be an async function.");}catch(s){o=!0;f=new EVUI.Modules.EventStream.EventStreamError("Error processing returned event args.",s,EVUI.Modules.EventStream.EventStreamStage.ProcessReturnedEventArgs,n.key)}return o===!0&&(i=EVUI.Modules.EventStream.EventStreamStatus.Error),EVUI.Modules.Core.Utils.isPromise(u)===!0?new ht(u,e):u},h=function(n){if(e(),i!==EVUI.Modules.EventStream.EventStreamStatus.Seeking){if(i!==EVUI.Modules.EventStream.EventStreamStatus.Canceled&&i!==EVUI.Modules.EventStream.EventStreamStatus.Error&&(i=EVUI.Modules.EventStream.EventStreamStatus.Finished),typeof t.onComplete=="function")try{n.status=i;n.cancel=function(){throw Error("Invalid operation: A terminating EventStream cannot be canceled.");};var r=t.onComplete(n);if(EVUI.Modules.Core.Utils.isPromise(r)===!0)throw Error("onComplete cannot be an async function.");}catch(u){EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","finish","OnComplete crashed: "+u.stack)}i!==EVUI.Modules.EventStream.EventStreamStatus.Seeking&&(t.jobState=undefined,t.eventState=undefined,gt())}},gt=function(){var n,i,r;if(p===!0)if(p=!1,n=w,i=g,g=null,w=null,f!=null&&f.stage!==EVUI.Modules.EventStream.EventStreamStage.Handler&&t.endExecutionOnEventHandlerCrash!==!0)n(f);else try{if(r=typeof t.getPromiseResolutionValue=="function"?t.getPromiseResolutionValue():undefined,r!==undefined)return i(r);i(!0)}catch(u){n(new EVUI.Modules.EventStream.EventStreamError("Failed to get promise resolution value.",u))}},a=function(n,r){var u,e;if(r!==!1&&(i=EVUI.Modules.EventStream.EventStreamStatus.Error),typeof t.onError=="function")try{if(u=f,f==null&&n.error!=null&&(u=n.error),n.cancel=function(){throw Error("Invalid operation: A terminating EventStream cannot be canceled.");},n.status=i,u!=null&&EVUI.Modules.Core.Utils.log(u.getErrorMessage()),e=t.onError(n,u),EVUI.Modules.Core.Utils.isPromise(e)===!0)throw Error("onError cannot be an async function.");return e}catch(o){EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","fail","OnError crashed: "+o.stack)}else EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","fail","An error was encountered executing the chain. Hook into OnError for more details.",!1)},st=function(n){if(i=EVUI.Modules.EventStream.EventStreamStatus.Canceled,e(),typeof t.onCancel=="function")try{n.status=i;n.cancel=function(){throw Error("Invalid operation: A terminating EventStream cannot be canceled.");};var r=t.onCancel(n);if(EVUI.Modules.Core.Utils.isPromise(r)===!0)throw Error("onCancel cannot be an async function.");return r}catch(u){EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.EventStream.EventStream","cancel","OnCancel crashed: "+u.stack)}},tt=function(){return i===EVUI.Modules.EventStream.EventStreamStatus.Canceled?!0:i===EVUI.Modules.EventStream.EventStreamStatus.Error?!0:i===EVUI.Modules.EventStream.EventStreamStatus.Finished?!0:i===EVUI.Modules.EventStream.EventStreamStatus.NotStarted?!0:!1},nt=function(n,y){var p;return i===EVUI.Modules.EventStream.EventStreamStatus.Canceled?(e(),p=l(n,y,!0),st(p),h(p),!1):i===EVUI.Modules.EventStream.EventStreamStatus.Error?(e(),p=l(n,y,!0,f),f!=null&&f.stage===EVUI.Modules.EventStream.EventStreamStage.Handler&&t.endExecutionOnEventHandlerCrash!==!0)?(a(p,!0),i=EVUI.Modules.EventStream.EventStreamStatus.Working,!0):(a(p),h(p),!1):i===EVUI.Modules.EventStream.EventStreamStatus.Paused?(e(),o===-1&&(o=y.indexOf(n),v===!1&&o++),!1):i===EVUI.Modules.EventStream.EventStreamStatus.Seeking?(e(),s(function(){i=EVUI.Modules.EventStream.EventStreamStatus.Working;c(r,o)}),!1):i===EVUI.Modules.EventStream.EventStreamStatus.Working||i===EVUI.Modules.EventStream.EventStreamStatus.NotStarted?!0:i===EVUI.Modules.EventStream.EventStreamStatus.Finished?(e(),!1):(f=new EVUI.Modules.EventStream.EventStreamError("Unrecognized status: "+i,null,null,n.key),e(),p=l(u,r,!0,f),a(p),h(p),!1)},e=function(){k!==-1&&(clearTimeout(k),k=-1)},ni=function(n){e();var i=typeof t.timeout!="number"?-1:t.timeout;n!=null&&typeof n.timeout=="number"&&n.timeout>=0&&(i=n.timeout);i>=0&&(k=setTimeout(function(){k=-1;ti()},i))},ti=function(){f=new EVUI.Modules.EventStream.EventStreamError("Step timeout hit.",null,u.type===EVUI.Modules.EventStream.EventStreamStepType.Job?EVUI.Modules.EventStream.EventStreamStage.Job:EVUI.Modules.EventStream.EventStreamStage.Handler,u.key);i=EVUI.Modules.EventStream.EventStreamStatus.Error;nt(u,r)},s=function(n){it++;ft===!1||typeof t.skipInterval=="number"&&t.skipInterval>0&&it%t.skipInterval==0?typeof setImmediate=="function"?setImmediate(n):setTimeout(n):lt.then(n)},ii=function(n){n!=null&&(typeof n.canSeek=="boolean"&&(t.canSeek=n.canSeek),typeof n.endExecutionOnEventHandlerCrash=="boolean"&&(t.endExecutionOnEventHandlerCrash=n.endExecutionOnEventHandlerCrash),n.eventState!=null&&(t.eventState=n.eventState),n.jobState!=null&&(t.jobState=n.jobState),typeof n.skipInterval=="number"&&n.skipInterval>0&&(t.skipInterval=n.skipInterval),typeof n.timeout=="number"&&n.timeout>0&&(_timeout=n.timeout),EVUI.Modules.Core.Utils.instanceOf(n.bubblingEvents,EVUI.Modules.EventStream.BubblingEventManager)===!0&&(t.bubblingEvents=n.bubblingEvents),typeof n.onCancel=="function"&&(t.onCancel=n.onCancel),typeof n.onError=="function"&&(t.onError=n.onError),typeof n.onComplete=="function"&&(t.onComplete=n.onComplete),typeof n.processInjectedEventArgs=="function"&&(t.processInjectedEventArgs=n.processInjectedEventArgs),typeof n.processReturnedEventArgs=="function"&&(t.processReturnedEventArgs=n.processReturnedEventArgs),typeof n.getPromiseResolutionValue=="function"&&(t.getPromiseResolutionValue=n.getPromiseResolutionValue),n.context!=null&&(t.context=n.context))},ht=function(n,t){this.promise=n;this.args=t};ii(n)};EVUI.Modules.EventStream.EventStreamStep=function(n,t,i,r,u){this.name=typeof r=="string"?r:null;this.key=typeof i=="string"?i:null;this.timeout=typeof u=="number"&&u>0?Math.floor(u):-1;this.handler=typeof n=="function"?n:function(){};this.type=typeof t=="string"?t:EVUI.Modules.EventStream.EventStreamStepType.Job};EVUI.Modules.EventStream.EventStreamJobResult=function(){this.resolvedValue=null;this.success=!1;this.canceled=!1;this.seeking=!1;this.message=null;this.error=null;this.innerError=null};EVUI.Modules.EventStream.EventStreamEventArgs=function(n){this.name=null;this.key=null;this.stepType=null;this.currentStep=-1;this.totalSteps=-1;this.error=null;this.status=EVUI.Modules.EventStream.EventStreamStatus.NotStarted;this.cancel=function(){return!1};this.pause=function(){return!1};this.resume=function(){return!1};this.seek=function(){return!1};this.stopPropagation=function(){return!1};this.state=n!=null?n:{}};EVUI.Modules.EventStream.EventStreamJobArgs=function(n,t){if(n instanceof EVUI.Modules.EventStream.EventStream==!1)throw TypeError("eventStream must be a EVUI.Modules.EventStream.EventStream");if(typeof t!="function")throw TypeError("Callback must be a function.");var i=n,r=t;this.name=null;this.key=null;this.resolvedValue=null;this.eventStream=i;this.cancel=function(){var n=new EVUI.Modules.EventStream.EventStreamJobResult;return n.canceled=!0,r(n)};this.seek=function(n){i.seek(n);var t=new EVUI.Modules.EventStream.EventStreamJobResult;return t.success=!0,t.seeking=!0,r(t)};this.resolve=function(n){var t=new EVUI.Modules.EventStream.EventStreamJobResult;return t.success=!0,t.resolvedValue=n,r(t)};this.reject=function(n,t,i){typeof n!="string"&&(n=n!=null?n.toString():"Process manually ended with an unknown error.");n instanceof Error&&(t=n);var u=new EVUI.Modules.EventStream.EventStreamJobResult;return u.success=!1,u.message=n,t instanceof Error&&(u.error=t),i instanceof EVUI.Modules.EventStream.EventStreamError&&(u.innerError=i),r(u)};this.getState=function(){return i.jobState};this.setState=function(n){return i.jobState=n,n}};EVUI.Modules.EventStream.EventStreamError=function(n,t,i,r){this.message=n;this.exception=t instanceof Error?t:null;this.stage=i;this.key=r;this.innerError=null;this.getErrorMessage=function(){var n="Error:";return this.message!=null&&(n+=" "+this.message+" "),this.stage!=null&&(n+="Stage: "+i+". "),this.key!=null&&(n+='Step: "'+this.key+'".'),this.exception!=null&&(n+="\nException: "+this.exception.stack),this.innerError!=null&&(n+="\nInnerError: "+this.innerError.getErrorMessage()),n}};EVUI.Modules.EventStream.EventStreamConfig=function(){this.canSeek=!0;this.endExecutionOnEventHandlerCrash=!1;this.timeout=-1;this.jobState={};this.eventState={};this.skipInterval=250;this.onCancel=null;this.onError=null;this.onComplete=null;this.processInjectedEventArgs=null;this.processReturnedEventArgs=null;this.getPromiseResolutionValue=null;this.bubblingEvents=null;this.context=null};EVUI.Modules.EventStream.EventStreamEventListener=function(n,t,i,r){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw Error("event name must be a non-whitespace string.");if(typeof t!="function")throw Error("handler must be a function.");var f=EVUI.Modules.Core.Utils.makeGuid(),e=typeof i=="number"?i:0,s=n,o=t,u=typeof r=="boolean"?r:!1;this.eventName=null;Object.defineProperty(this,"eventName",{get:function(){return s},enumerable:!0,configurable:!1});this.handler=null;Object.defineProperty(this,"handler",{get:function(){return o},set:function(n){if(u===!0)throw Error("EventStreamEventListener is immutable and cannot be changed or removed.");if(n!=null&&typeof n!="function")throw Error("handler must be a function.");o=n},enumerable:!0,configurable:!1});this.priority=0;Object.defineProperty(this,"priority",{get:function(){return e},set:function(n){if(u===!0)throw Error("EventStreamEventListener is immutable and cannot be changed or removed.");if(typeof n!="number")throw Error("priority must be a number.");e=n},enumerable:!0,configurable:!1});this.handlerId=f;Object.defineProperty(this,"handlerId",{get:function(){return f},enumerable:!0,configurable:!1});this.immutable=!1;Object.defineProperty(this,"immutable",{get:function(){return u},enumerable:!0,configurable:!1})};EVUI.Modules.EventStream.EventStreamEventListenerOptions=function(){this.immutable=!1;this.once=!1;this.priority=null;this.isGlobal=!1};EVUI.Modules.EventStream.BubblingEventManager=function(n){var t={},r=n,i;this.addEventListener=function(n,u,f){var e=new i,l,o,s,a,h,c;if(EVUI.Modules.Core.Utils.instanceOf(n,EVUI.Modules.EventStream.EventStreamEventListener)===!0)e.listener=n,u!=null&&typeof u=="object"&&(f=u),f!=null&&typeof f=="object"?EVUI.Modules.Core.Utils.instanceOf(f,EVUI.Modules.EventStream.EventStreamEventListenerOptions)===!0?e.options=f:f=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.EventStream.EventStreamEventListenerOptions,f):e.options=new EVUI.Modules.EventStream.EventStreamEventListenerOptions,e.options.immutable=n.immutable;else{if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw Error("eventName must be a non-whitespace string.");if(typeof u!="function")throw Error("Function expected.");f=f==null||typeof f!="object"?new EVUI.Modules.EventStream.EventStreamEventListenerOptions:EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.EventStream.EventStreamEventListenerOptions,f);l=new EVUI.Modules.EventStream.EventStreamEventListener(n,u,f.priority,f.immutable);e.listener=l;e.options=f}for(r===!0&&(f.isGlobal=!0),o=t[e.listener.eventName],o==null&&(o=[],t[e.listener.eventName]=o),s=0,a=o.length,h=0;h<a;h++)c=o[h],c.ordinal>=s&&(s=c.ordinal+1);return e.ordinal=s,o.push(e),e.listener};this.getBubblingEvents=function(n){var r=t[n.key],u,s,f,e,o,i;if(r==null||r.length===0)return null;for(u=[],s=r.length,i=0;i<s;i++){if(f=r[i],n.type===EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent){if(f.options.isGlobal===!1)continue;u.push(f)}else{if(f.options.isGlobal===!0)continue;u.push(f)}f.options.once===!0&&(index!==-1&&r.splice(i,1),i--)}if(r.length===0&&delete t[n.key],e=u.length,e===0)return null;for(u.sort(function(n,t){return n.listener.priority===t.listener.priority?n.orindal-t.ordinal:t.listener.priority-n.listener.priority}),o=[],i=0;i<e;i++)o.push(u[i].listener);return o};this.removeEventListener=function(n,i){var e=t[n],f,o,c,r,u;if(e!=null){for(f=!1,o=e.length,r=0;r<o;r++)if(u=e[r],u.listener.handler===i&&u.listener.immutable===!1&&(f=!0,e.splice(r,1),r--,o--,o===0)){delete t[n];break}return f}for(c in t){var s=t[c],f=!1,h=s.length;for(r=0;r<h;r++)u=s[r],u.listener.immutable===!1&&(u.handlerId===n||u.listener.handler===i)&&(s.splice(r,1),h--,h===0&&delete t[n],f=!0)}return f};i=function(){this.listener=null;this.options=null;this.ordinal=0}};EVUI.Modules.EventStream.EventStreamStatus={NotStarted:0,Working:1,Paused:2,Finished:3,Canceled:4,Error:5,Seeking:6};Object.freeze(EVUI.Modules.EventStream.EventStreamStatus);EVUI.Modules.EventStream.EventStreamStage={Job:"job",Handler:"handler",ProcessInjectedEventArgs:"processInjectedEventArgs",ProcessReturnedEventArgs:"processReturnedEventArgs",ErrorCommand:"errorCommand"};Object.freeze(EVUI.Modules.EventStream.EventStreamStage);EVUI.Modules.EventStream.EventStreamStepType={Job:"job",Event:"event",GlobalEvent:"globalEvent",getStepType:function(n){if(typeof n!="string")return this.Job;var t=n.toLowerCase();return t===this.Job?this.Job:t===this.Event?this.Event:t===this.GlobalEvent.toLowerCase()?this.GlobalEvent:this.Job}};Object.freeze(EVUI.Modules.EventStream.EventStreamStepType);$evui.vow=function(n,t){var r=null,i;return typeof n=="function"&&(t=n),n!=null&&typeof n=="object"&&(r=n),i=new EVUI.Modules.EventStream.EventStream(r),typeof t=="function"&&i.addJob(t),i.execute(),i};$evui.eventStream=function(n){return new EVUI.Modules.EventStream.EventStream(n)};EVUI.Modules.HtmlLoader={};EVUI.Modules.HtmlLoader.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0}),Http:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.HtmlLoader.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.HtmlLoader.Dependencies);EVUI.Modules.HtmlLoader.Constants={};EVUI.Modules.HtmlLoader.Constants.Job_GetHtml="evui.htmlLoader.getHtml";EVUI.Modules.HtmlLoader.Constants.Job_InjectHtml="evui.htmlLoader.injectHtml";EVUI.Modules.HtmlLoader.Constants.Job_LoadChildren="evui.htmlLoader.loadChildren";EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID="evui-loader-placeholder-id";EVUI.Modules.HtmlLoader.Constants.Attr_ResourceUrl="evui-loader-placeholder-src";EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState="evui-loader-content-load-state";EVUI.Modules.HtmlLoader.Constants.Event_OnBeforePlaceholderLoad="evui.htmlLoader.onBeforeLoad";EVUI.Modules.HtmlLoader.Constants.Event_OnGetPlaceholderHtml="evui.htmlLoader.onGetPlaceholderHtml";EVUI.Modules.HtmlLoader.Constants.Event_OnPlaceholderInject="evui.htmlLoader.onInject";EVUI.Modules.HtmlLoader.Constants.Event_OnBeforeLoadPlaceholderChildren="evui.htmlLoader.onBeforeLoadChildren";EVUI.Modules.HtmlLoader.Constants.Event_OnPlaceholderLoaded="evui.htmlLoader.onPlaceholderLoaded";EVUI.Modules.HtmlLoader.Constants.Event_OnAllPlaceholdersLoaded="evui.hmlLoader.onAllPlaceholdersLoaded";EVUI.Modules.HtmlLoader.Constants.Fn_GetHtml_Callback=function(){};EVUI.Modules.HtmlLoader.Constants.Fn_GetPartials_Callback=function(){};EVUI.Modules.HtmlLoader.Constants.Fn_GetPlaceholder_Callback=function(){};EVUI.Modules.HtmlLoader.Constants.Fn_GetAllPlaceholders_Callback=function(){};Object.freeze(EVUI.Modules.HtmlLoader.Constants);EVUI.Modules.HtmlLoader.HtmlLoaderController=function(n){var t,i,r,u,e;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.HtmlLoader.Dependencies);t=this;i=n;this.loadHtml=function(n,t){var r,i;if(n==null)throw Error("htmlRequestArgsOrUrl cannot be null.");typeof t!="function"&&(t=function(){});typeof n=="string"&&(r=n,n=new EVUI.Modules.HtmlLoader.HtmlRequestArgs,n.url=r);i=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlRequestArgs,n);i.httpArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,i.httpArgs);i.httpArgs.responseType="text";i.httpArgs.method="GET";EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i.url)===!1&&(i.httpArgs.url=i.url);EVUI.Modules.Http.Http.executeRequestAsync(i.httpArgs).then(function(n){if(n.error!=null)return EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.HtmlLoaderController.Manager","GetHtml",n.error.getErrorMessage()),t(null);u(n.xmlHttpRequest,function(n){return t(n)})})};this.loadHtmlAsync=function(n){if(n==null)throw new Error("htmlRequestArgsOrUrl cannot be null.");return new Promise(function(i){t.loadHtml(n,function(n){i(n)})})};this.loadHtmlPartials=function(n,t){if(n==null)throw new Error("partialLoadArgsOrPartialRequests cannot be null.");r(n,t)};this.loadHtmlPartialsAsync=function(n){if(n==null)throw new Error("partialLoadArgsOrPartialRequests cannot be null.");return new Promise(function(t){r(n,function(n){t(n)})})};r=function(n,t){var e,s,h,r;typeof t!="function"&&(t=function(){});EVUI.Modules.Core.Utils.isArray(n)===!0&&(e=n,n=new EVUI.Modules.HtmlLoader.HtmlPartialLoadArgs,n.htmlPartialLoadRequests=e);var o=[],f=[],i=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlPartialLoadArgs,n);if(partialArgs.htmlPartialLoadRequests=i.htmlPartialLoadRequests.map(function(n){return EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlPartialLoadRequest,n)}),i.httpArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,i.httpArgs),i.htmlPartialLoadRequests.length===0)return callback([]);for(s=function(n){var r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,i.httpArgs);r.context=n;r.method="GET";r.responseType="text";r.url=r.context.url;o.push(r.context);EVUI.Modules.Http.Http.executeRequestAsync(r).then(function(i){u(i.xmlHttpRequest,function(i){return n.html=i,f.push(n),f.length===o.length?t(f):void 0})})},h=i.htmlPartialLoadRequests.length,r=0;r<h;r++)s(i.htmlPartialLoadRequests[r])};u=function(n,t){if(n==null||n.response==null||!(n.status>=200&&n.status<300||n.status===304))return t(null);try{switch(n.responseType){case"json":return t(JSON.stringify(n.response));case"document":return t(n.response.documentElement.outerHTML);case"blob":case"arraybuffer":var r=n.responseType==="blob"?n.response:new Blob([n.response]),i=new FileReader;i.onload=function(){return t(i.result)};i.readAsText(r);break;case"text":default:return t(n.response)}}catch(u){return EVUI.Modules.Core.Utils.debugReturn("EVUI.Modules.HtmlLoaderController.Manager","translateResponseToText",u.stack,null)}};this.loadPlaceholder=function(n,t){s(n,t)};this.loadPlaceholderAsync=function(n){return new Promise(function(t){s(n,function(n){t(n)})})};this.loadAllPlacehoders=function(n,t){o(n,t)};this.loadAllPlacehodersAsync=function(n){return new Promise(function(t){o(n,function(n){t(n)})})};var o=function(n,t){var h,r,i;typeof n=="string"?(h=n,n=new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,n.placeholderID=h):(n=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,n),n.httpArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,n.httpArgs));r=new EVUI.Modules.EventStream.EventStream;r.context=n;r.canSeek=!1;var u=[],o=[],s=null;s=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.placeholderID)===!1?new EVUI.Modules.Dom.DomHelper("["+EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID+"="+n.placeholderID+"]",null).elements:c(null,n.forceReload,n.ignoreOnDemand);i=new e;i.allChildPlaceholders=s;i.eventStream=r;i.loadResults=u;i.placeholderArgs=n;i.placeholderID="*";i.placeholderHtmlElement=document.documentElement;l(i,t);r.addJob(function(n){for(var t,c=s.length,r=0;r<c;r++){var e=s[r],l=EVUI.Modules.Core.Utils.getElementAttributes(e),h=l.getValue(EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID);EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(h)!==!0&&(t=f(h,i.placeholderArgs,i,function(t){return u.push(t),u.length===o.length?n.resolve():void 0}),t!=null)&&(o.push(e),i.childSessions.push(t),t.eventStream.execute())}return i.allChildPlaceholders=o,i.loadResults=u,o.length===0?n.cancel():void 0});a(i);r.execute()},s=function(n,t){var r,i;if(typeof n=="string"&&(r=n,n=new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,n.placeholderID=r),i=f(n.placeholderID,n,null,function(n){typeof t=="function"&&t(n)}),i==null&&typeof t=="function")return t(null);i.eventStream.execute()},h=function(n,t){var i=new EVUI.Modules.Dom.DomHelper("["+EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID+"="+n+"]",t);return i.elements.length>0?i.elements[0]:null},v=function(n){var i=[],u,t,r;if(EVUI.Modules.Core.Utils.isArray(n)===!1)return i;for(u=n.length,t=0;t<u;t++)r=n[t],EVUI.Modules.Core.Utils.isElement(r)===!0&&i.push(r);return i},y=function(n){var t=new EVUI.Modules.Dom.DomHelper("["+EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID+"]",n);return t.elements},c=function(n,t,i){for(var f=[],e=y(n),s=e.length,u=0;u<s;u++){var o=e[u],h=EVUI.Modules.Core.Utils.getElementAttributes(o),r=h.getValue(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState);if(r!=null){if(r=r.toLowerCase(),r===EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.Loaded&&t!==!0)continue;if(r===EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.OnDemand&&i!==!0)continue}f.push(o)}return f},f=function(n,t,i,r){var l,a,s,o,c,f,u;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw Error("placeholderID must be a non-whitespace string.");if(l=!1,i!=null)for(a=n.toLowerCase(),s=i;s!=null;){if(s.placeholderID.toLowerCase()===a){l=!0;break}s=s.parentSession}if(o=null,o=i!=null&&i.loadedFragment!=null?h(n,i.loadedFragment):h(n,t.contextElement),o==null)if(t!=null&&t.httpArgs!=null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t.httpArgs.url)===!1)c=document.createElement("div"),c.setAttribute(EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID,n),c.setAttribute(EVUI.Modules.HtmlLoader.Constants.Attr_ResourceUrl,t.httpArgs.url),o=c;else return null;return l===!0?(o.setAttribute(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState,EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.CircularReference),null):(f=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,t),f.httpArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,f.httpArgs),f.httpArgs.headers=f.httpArgs.headers.map(function(n){return EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestHeader,n)}),f.PlaceholderID=n,u=new e,u.parentSession=i,u.placeholderArgs=f,u.placeholderHtmlElement=o,u.placeholderID=n,u.eventStream=d(u,r),u)},l=function(n,t){n.eventStream.eventState=n.placeholderArgs.context;n.eventStream.processInjectedEventArgs=function(t){var i=new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadEventArgs(n.placeholderHtmlElement,n.placeholderArgs,n.placeholderID);return i.cancel=t.cancel,i.pause=t.pause,i.resume=t.resume,i.stopPropagation=t.stopPropagation,i.context=t.state,i.key=t.key+(t.stepType===EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent?".global":""),n.selectedChildPlaceholders!=null&&(i.childPlaceholders=n.selectedChildPlaceholders.slice()),n.loadResults!=null&&(i.loadedChildResults=n.loadResults.map(function(n){return EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadResult,n)})),n.placeholderHtmlElement!=null&&(i.placeholderElement=n.placeholderHtmlElement),n.loadedFragment!=null&&(i.placeholderContent=n.loadedFragment),i};n.eventStream.processReturnedEventArgs=function(t,i,r){r.key===EVUI.Modules.HtmlLoader.Constants.Event_OnBeforeLoadPlaceholderChildren&&(n.selectedChildPlaceholders=v(t.childPlaceholders))};n.eventStream.onComplete=function(){var i=new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadResult;return i.htmlPlaceholderLoadArgs=n.placeholderArgs,i.loadedChildResults=n.loadResults,i.placeholder=n.placeholderHtmlElement,i.placeholderID=n.placeholderID,i.loadedContent=n.injectedContent,typeof t=="function"?t(i):void 0};n.eventStream.onError=function(n,t){EVUI.Modules.Core.Utils.log(t.getErrorMessage())}},p=function(n){n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnBeforePlaceholderLoad,name:"onBeforePlaceholderLoad",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(t){if(typeof n.placeholderArgs.onBeforePlaceholderLoad=="function")return n.placeholderArgs.onBeforePlaceholderLoad(t)}});n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnBeforePlaceholderLoad,name:"onBeforePlaceholderLoad",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onBeforePlaceholderLoad=="function")return t.onBeforePlaceholderLoad(n)}})},w=function(n){n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnBeforeLoadPlaceholderChildren,name:"onBeforeLoadPlaceholderChildren",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(t){if(typeof n.placeholderArgs.onBeforeLoadPlaceholderChildren=="function")return n.placeholderArgs.onBeforeLoadPlaceholderChildren(t)}});n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnBeforeLoadPlaceholderChildren,name:"onBeforeLoadPlaceholderChildren",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onBeforeLoadPlaceholderChildren=="function")return t.onBeforeLoadPlaceholderChildren(n)}})},b=function(n){n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnPlaceholderInject,name:"onPlaceholderInject",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(t){if(typeof n.placeholderArgs.onPlaceholderInject=="function")return n.placeholderArgs.onPlaceholderInject(t)}});n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnPlaceholderInject,name:"onPlaceholderInject",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onPlaceholderInject=="function")return t.onPlaceholderInject(n)}})},k=function(n){n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnPlaceholderLoaded,name:"onPlaceholderLoaded",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(t){if(typeof n.placeholderArgs.onPlaceholderLoaded=="function")return n.placeholderArgs.onPlaceholderLoaded(t)}});n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnPlaceholderLoaded,name:"onPlaceholderLoaded",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onPlaceholderLoaded=="function")return t.onPlaceholderLoaded(n)}})},a=function(n){n.parentSession==null&&(n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnAllPlaceholdersLoaded,name:"onAllPlaceholdersLoaded",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(t){if(typeof n.placeholderArgs.onAllPlaceholdersLoaded=="function")return n.placeholderArgs.onAllPlaceholdersLoaded(t)}}),n.eventStream.addStep({key:EVUI.Modules.HtmlLoader.Constants.Event_OnAllPlaceholdersLoaded,name:"onAllPlaceholdersLoaded",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onAllPlaceholdersLoaded=="function")return t.onAllPlaceholdersLoaded(n)}}))},d=function(n,i){var r=new EVUI.Modules.EventStream.EventStream;return n.eventStream=r,n.eventStream.context=n.placeholderArgs,l(n,i),p(n),r.addStep({key:EVUI.Modules.HtmlLoader.Constants.Job_GetHtml,name:"GetHtml",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(i){var u=EVUI.Modules.Core.Utils.getElementAttributes(n.placeholderHtmlElement),f=u.getValue(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState),e,r;if(f!=null&&f.toLowerCase()===EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.Loaded&&n.placeholderArgs.forceReload===!1)return i.cancel();e=u.getValue(EVUI.Modules.HtmlLoader.Constants.Attr_ResourceUrl);r=new EVUI.Modules.HtmlLoader.HtmlRequestArgs;r.url=e;r.httpArgs=n.placeholderArgs.httpArgs;t.loadHtml(r,function(t){if(t!=null){var r=g(t);n.loadedFragment=r;n.placeholderArgs.recursive===!0?(n.allChildPlaceholders=c(r,n.placeholderArgs.forceReload,n.placeholderArgs.ignoreOnDemand),n.selectedChildPlaceholders=n.allChildPlaceholders.slice()):(n.allChildPlaceholders=[],n.selectedChildPlaceholders=[])}return i.resolve()})}}),w(n),r.addStep({key:EVUI.Modules.HtmlLoader.Constants.Job_LoadChildren,name:"LoadChildren",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(t){var e=n.selectedChildPlaceholders.length,i,r,u;if(e===0)return t.resolve();for(i=[],r=0;r<e;r++){var o=n.selectedChildPlaceholders[r],h=EVUI.Modules.Core.Utils.getElementAttributes(o),s=h.getValue(EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID);EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)!==!0&&(u=f(s,n.placeholderArgs,n,function(i){n.loadResults.push(i);n.loadResults.length===n.childSessions.length&&t.Resolve()}),u!=null)&&(n.childSessions.push(u),i.push(o),u.eventStream.execute())}return n.selectedChildPlaceholders=i,i.length===0?t.resolve():void 0}}),b(n),r.addStep({key:EVUI.Modules.HtmlLoader.Constants.Job_InjectHtml,name:"InjectHtml",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(t){var i,r;n.loadedFragment!=null?(i=new EVUI.Modules.Dom.DomHelper(n.placeholderHtmlElement),i.empty(),r=i.append(n.loadedFragment),n.injectedContent=r.elements,i.attr(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState,EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.Loaded)):n.placeholderHtmlElement.setAttribute(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState,EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.Failed);t.resolve()}}),k(n),a(n),r},g=function(n){var t=document.createElement("div"),i,r;for(t.innerHTML=n,i=document.createDocumentFragment();t.children.length>0;)r=t.children[0],i.appendChild(r);return i},nt=function(){(i==null||typeof i!="object")&&(i=new EVUI.Modules.HtmlLoader.HtmlLoaderControllerServices);(i.httpManager==null||typeof i.httpManager!="object")&&(i.httpManager=EVUI.Modules.Http.Http)};this.onBeforePlaceholderLoad=function(){};this.onPlaceholderInject=function(){};this.onBeforeLoadPlaceholderChildren=function(){};this.onPlaceholderLoaded=function(){};this.onAllPlaceholdersLoaded=function(){};e=function(){this.parentSession=null;this.placeholderArgs=null;this.eventStream=null;this.childSessions=[];this.loadResults=[];this.loadedFragment=null;this.injectedContent=null;this.placeholderHtmlElement=null;this.allChildPlaceholders=null;this.selectedChildPlaceholders=null;this.placeholderID=null};nt()};EVUI.Modules.HtmlLoader.HtmlRequestArgs=function(){this.url=null;this.httpArgs=new EVUI.Modules.Http.HttpRequestArgs};EVUI.Modules.HtmlLoader.HtmlPartialLoadRequest=function(n,t){this.url=n==null?null:n;this.html=null;this.key=t==null?null:t};EVUI.Modules.HtmlLoader.HtmlPartialLoadArgs=function(){var n=[];this.htmlPartialLoadRequests=null;Object.defineProperty(this,"htmlPartialLoadRequests",{get:function(){return n},set:function(t){if(EVUI.Modules.Core.Utils.isArray(t)===!1)throw new Error("HtmlPartialLoadRequests must be an array.");n=t},configurable:!1,enumerable:!0});this.httpArgs=new EVUI.Modules.Http.HttpRequestArgs};EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadEventArgs=function(n,t,i){if(EVUI.Modules.Core.Utils.isElement(n)===!1&&n instanceof DocumentFragment==!1)throw new Error("PlaceholderElement must be a valid DOM node.");if(t instanceof EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs==!1)throw new Error("PlaceholderLoadOptions must be an instance of EVUI.Modules.HtmlLoaderController.HtmlPlaceholderLoadArgs.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)===!0)throw new Error("PlaceholderID must be a valid, non-whitespace string.");var r=n,u=t,f=i;this.loadPlaceholderArgs=null;Object.defineProperty(this,"loadPlaceholderArgs",{get:function(){return u},enumerable:!0,configurable:!1});this.key=null;this.placeholderContent=null;this.childPlaceholders=null;this.loadedChildResults=null;this.context=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.placeholderElement=null;Object.defineProperty(this,"placeholderElement",{get:function(){return r},enumerable:!1,configurable:!1});this.placeholderID=null;Object.defineProperty(this,"placeholderID",{get:function(){return f},enumerable:!0,configurable:!1});this.contentLoadState=null;Object.defineProperty(this,"contentLoadState",{get:function(){return EVUI.Modules.Core.Utils.getElementAttributes(r).GetValue(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState)},enumerable:!0,configurable:!1});this.htmlPlaceholderLoadArgs=null;Object.defineProperty(this,"htmlPlaceholderLoadArgs",{get:function(){return u},enumerable:!0,configurable:!1})};EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs=function(){var n=null;this.placeholderID=null;this.recursive=!0;this.ignoreOnDemand=!1;this.forceReload=!1;this.httpArgs=new EVUI.Modules.Http.HttpRequestArgs;this.contextElement=null;Object.defineProperty(this,"contextElement",{get:function(){return n},set:function(t){if(t!=null&&EVUI.Modules.Core.Utils.isElement(t)===!1&&t instanceof Document==!1&&t instanceof DocumentFragment==!1)throw new Error("contextElement must be derived from Element.");n=t},configurable:!1,enumerable:!0});this.onBeforePlaceholderLoad=function(){};this.onBeforeLoadPlaceholderChildren=function(){};this.onPlaceholderInject=function(){};this.onPlaceholderLoaded=function(){};this.onAllPlaceholdersLoaded=function(){}};EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadResult=function(){this.placeholderID=null;this.placeholder=null;this.loadedContent=null;this.htmlPlaceholderLoadArgs=null;this.loadedChildResults=null};EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState={OnDemand:"ondemand",Loaded:"loaded",Failed:"failed",CircularReference:"circularreference"};Object.freeze(EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState);EVUI.Modules.HtmlLoader.HtmlLoaderControllerServices=function(){this.httpManager=null};EVUI.Modules.HtmlLoader.Manager=null,function(){var n=null;Object.defineProperty(EVUI.Modules.HtmlLoader,"Manager",{get:function(){return n==null&&(n=new EVUI.Modules.HtmlLoader.HtmlLoaderController),n},configurable:!1,enumerable:!0})}();delete $evui.htmlLoader;$evui.htmlLoader=null;Object.defineProperty($evui,"htmlLoader",{get:function(){return EVUI.Modules.HtmlLoader.Manager},enumerable:!0});$evui.loadHtml=function(n,t){return EVUI.Modules.HtmlLoader.Manager.loadHtml(n,t)};$evui.loadHtmlAsync=function(n){return EVUI.Modules.HtmlLoader.Manager.loadHtmlAsync(n)};$evui.loadHtmlPartials=function(n,t){return EVUI.Modules.HtmlLoader.Manager.loadAllPlacehoders(n,t)};$evui.loadHtmlPartialsAsync=function(n){return EVUI.Modules.HtmlLoader.Manager.loadHtmlPartialsAsync(n)};$evui.loadPlaceholder=function(n,t){return EVUI.Modules.HtmlLoader.Manager.loadPlaceholder(n,t)};$evui.loadPlaceholderAsync=function(n){return EVUI.Modules.HtmlLoader.Manager.loadPlaceholderAsync(n)};$evui.loadAllPlacehoders=function(n,t){return EVUI.Modules.HtmlLoader.Manager.loadAllPlacehoders(n,t)};$evui.loadAllPlacehodersAsync=function(n){return EVUI.Modules.HtmlLoader.Manager.loadAllPlacehodersAsync(n)};Object.freeze(EVUI.Modules.HtmlLoader);EVUI.Modules.Http={};EVUI.Modules.Http.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Http.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Http.Dependencies);EVUI.Modules.Http.Constants={};EVUI.Modules.Http.Constants.Fn_HttpCallback=function(){};EVUI.Modules.Http.Constants.Event_OnBeforeSend="evui.http.beforesend";EVUI.Modules.Http.Constants.Event_OnSuccess="evui.http.success";EVUI.Modules.Http.Constants.Event_OnError="evui.http.error";EVUI.Modules.Http.Constants.Event_OnComplete="evui.http.complete";EVUI.Modules.Http.Constants.Event_OnAllComplete="evui.http.complete.all";EVUI.Modules.Http.Constants.Job_OpenRequest="evui.http.open";EVUI.Modules.Http.Constants.Job_SendRequest="evui.http.send";EVUI.Modules.Http.Constants.Job_RequestComplete="evui.http.request.complete";EVUI.Modules.Http.Constants.Fn_Event_Handler=function(){};Object.freeze(EVUI.Modules.Http.Constants);EVUI.Modules.Http.HttpManager=function(){var f,o,n;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Http.Dependencies);var t=this,i=[],r=[],u=new EVUI.Modules.EventStream.BubblingEventManager;this.executeRequest=function(n,t){typeof t!="function"&&(t=function(){});var i=f(n),r=null;i.eventStream.getPromiseResolutionValue=function(){return r=e(i)};i.eventStream.executeAsync().then(function(n){return t(n)}).catch(function(){return t(r)})};this.executeRequestAsync=function(n){var t=f(n);return t.eventStream.getPromiseResolutionValue=function(){return e(t)},t.eventStream.executeAsync()};f=function(n){if(n==null)throw new Error("requestArgs cannot be null.");n=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,n);n.headers!=null&&(n.headers=n.headers.map(function(n){return EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestHeader,n)}));var t=s(n);return i.push(t),h(t),t};this.getAllActiveRequests=function(){for(var t=[],r=i.length,n=0;n<r;n++)t.push(new EVUI.Modules.Http.HttpRequestInstance(i[n]));return t};this.addEventListener=function(n,t,i){return u.addEventListener(n,t,i)};this.removeEventListener=function(n,t){return u.removeEventListener(n,t)};var s=function(t){var i=new o;return i.eventStream=new EVUI.Modules.EventStream.EventStream,i.eventStream.context=t,i.httpRequestArgs=t,i.requestID=EVUI.Modules.Core.Utils.makeGuid(),i.xmlHttpRequest=new XMLHttpRequest,i.requestStatus=n.NotStarted,i.eventStream.canSeek=!0,i.eventStream.endExecutionOnEventHandlerCrash=!1,i.eventStream.eventState=t.context==null?{}:t.context,i.eventStream.bubblingEvents=u,i.eventStream.onError=function(t,r){i.error=r;i.requestStatus=n.Exception;i.xmlHttpRequest.readyState!==XMLHttpRequest.DONE&&i.xmlHttpRequest.abort();i.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnComplete)},i.eventStream.processInjectedEventArgs=function(t){var f=i.httpRequestArgs,u,e,r;return f.context=i.eventStream.eventState,u=null,t.key===EVUI.Modules.Http.Constants.Event_OnComplete&&(u=i.xmlHttpRequest),t.key===EVUI.Modules.Http.Constants.Event_OnError&&(u=i.xmlHttpRequest),t.key===EVUI.Modules.Http.Constants.Event_OnSuccess&&(u=i.xmlHttpRequest),e=i.requestStatus===n.Exception||i.requestStatus===n.Failed||i.requestStatus===n.TimedOut?i.error:null,r=new EVUI.Modules.Http.HttpEventArgs(f,u,e,i.response),r.key=t.key,r.stopPropagation=function(){t.stopPropagation()},r.requestStatus=i.requestStatus,r.cancel=function(){i.xmlHttpRequest.status!==XMLHttpRequest.DONE&&(i.xmlHttpRequest.abort(),i.requestStatus=n.Canceled);t.key!==EVUI.Modules.Http.Constants.Event_OnComplete&&t.key!==EVUI.Modules.Http.Constants.Event_OnAllComplete&&i.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnComplete)},r.pause=function(){t.pause()},r.resume=function(){t.resume()},r},i.eventStream.processReturnedEventArgs=function(n){i.eventStream.eventState=n.context},i},h=function(i){var r=i.eventStream;r.addStep({key:EVUI.Modules.Http.Constants.Event_OnBeforeSend,name:"onBeforeSend",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof i.httpRequestArgs.onBeforeSend=="function")return i.httpRequestArgs.onBeforeSend(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnBeforeSend,name:"onBeforeSend",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onBeforeSend=="function")return t.onBeforeSend(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Job_OpenRequest,name:"openRequest",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(t){var u,r,s,e;i.requestStatus=n.Opened;u=i.xmlHttpRequest;r=i.httpRequestArgs;try{if(u.open(r.method,r.url,!0),r.withCredentials===!0&&(u.withCredentials=!0),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.contentType)===!1&&u.setRequestHeader("Content-Type",r.contentType),typeof r.timeout=="number"&&r.timeout>0&&(u.timeout=r.timeout),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r.headers)===!0)for(s=r.headers.length,e=0;e<s;e++){var h=new EVUI.Modules.Core.CaseInsensitiveObject(r.headers[e]),o=h.getValue("Key"),f=h.getValue("Value");(typeof o=="string"||typeof o=="number")&&(f==null||typeof f=="string"||typeof f=="number"||typeof f=="boolean")&&u.setRequestHeader(o.toString(),f.toString())}if(typeof r.responseType=="string")switch(r.responseType.toLowerCase()){case EVUI.Modules.Http.HttpResponseType.ArrayBuffer:u.responseType="arraybuffer";break;case EVUI.Modules.Http.HttpResponseType.Blob:u.responseType="blob";break;case EVUI.Modules.Http.HttpResponseType.HTML:case EVUI.Modules.Http.HttpResponseType.XML:case EVUI.Modules.Http.HttpResponseType.Document:u.responseType="document";break;case EVUI.Modules.Http.HttpResponseType.JSON:u.responseType="json";break;case EVUI.Modules.Http.HttpResponseType.Text:u.responseType="text";break;default:u.responseType=r.responseType}}catch(c){return i.error=new EVUI.Modules.EventStream.EventStreamError("Failed to construct XMLHttpRequest.",c,EVUI.Modules.EventStream.EventStreamStage.Job,EVUI.Modules.Http.Constants.Job_OpenRequest),i.requestStatus=n.Exception,t.EventStream.seek(EVUI.Modules.Http.Constants.Event_OnError),t.resolve()}t.resolve()}});r.addStep({key:EVUI.Modules.Http.Constants.Job_SendRequest,name:"sendRequest",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(t){try{var r=!1,u=!1,f=!1;i.xmlHttpRequest.addEventListener("load",function(){var u=i.xmlHttpRequest.status;r=!0;u>=200&&u<300||u===304?(i.response=i.xmlHttpRequest.response,t.resolve()):(i.response=i.xmlHttpRequest.response,i.error=new EVUI.Modules.EventStream.EventStreamError("HTTP Error: Server Returned "+i.xmlHttpRequest.status,null,EVUI.Modules.EventStream.EventStreamStage.Job,EVUI.Modules.Http.Constants.Job_SendRequest),i.requestStatus=n.Failed,t.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnError),t.resolve())},{once:!0});i.xmlHttpRequest.addEventListener("loadend",function(){r===!1&&u===!1&&f===!1&&(i.response=i.xmlHttpRequest.response,i.error=new EVUI.Modules.EventStream.EventStreamError("HTTP Error: An unknown error occurred.",null,EVUI.Modules.EventStream.EventStreamStage.Job,EVUI.Modules.Http.Constants.Job_SendRequest),i.requestStatus=n.Aborted,t.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnComplete),t.resolve())},{once:!0});i.xmlHttpRequest.addEventListener("timeout",function(){f=!0;i.response=i.xmlHttpRequest.response;i.error=new EVUI.Modules.EventStream.EventStreamError("HTTP Error: Request timed out after  "+i.xmlHttpRequest.timeout+" milliseconds.",null,EVUI.Modules.EventStream.EventStreamStage.Job,EVUI.Modules.Http.Constants.Job_SendRequest);i.requestStatus=n.TimedOut;t.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnError);t.resolve()},{once:!0});i.xmlHttpRequest.addEventListener("error",function(){u=!0;i.response=i.xmlHttpRequest.response;i.error=new EVUI.Modules.EventStream.EventStreamError("HTTP Error: An unknown error occurred.",null,EVUI.Modules.EventStream.EventStreamStage.Job,EVUI.Modules.Http.Constants.Job_SendRequest);i.requestStatus=n.Failed;t.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnError);t.resolve()},{once:!0});i.httpRequestArgs.body==null?i.xmlHttpRequest.send():i.xmlHttpRequest.send(i.httpRequestArgs.body)}catch(e){return i.error=new EVUI.Modules.EventStream.EventStreamError("Failed to send XMLHttpRequest.",e,EVUI.Modules.EventStream.EventStreamStage.Job,EVUI.Modules.Http.Constants.Job_SendRequest),i.requestStatus=n.Exception,t.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnError),t.resolve()}}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnSuccess,name:"onSuccess",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof i.httpRequestArgs.onSuccess=="function")return i.httpRequestArgs.onSuccess(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnSuccess,name:"onSuccess",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(t.onSuccess==="function")return t.onSuccess(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Job_RequestComplete,name:"requestComplete",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){i.eventStream.seek(EVUI.Modules.Http.Constants.Event_OnComplete);n.resolve()}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnError,name:"onError",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof i.httpRequestArgs.onError=="function")return i.httpRequestArgs.onError(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnError,name:"OnError",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onError=="function")return t.onError(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnComplete,name:"OnComplete",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof i.httpRequestArgs.onComplete=="function")return i.httpRequestArgs.onComplete(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnComplete,name:"OnComplete",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof t.onComplete=="function")return t.onComplete(n)}});r.addStep({key:EVUI.Modules.Http.Constants.Event_OnComplete,name:"onAllComplete",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(){return c(i)}})},e=function(n){var t=new EVUI.Modules.Http.CompletedHttpRequest(n.xmlHttpRequest);return t.error=n.error,t.httpRequestArgs=n.httpRequestArgs,t.requestID=n.requestID,t.xmlHttpRequest=n.xmlHttpRequest,t.response=n.response,t.statusCode=n.xmlHttpRequest.status,t.requestStatus=n.requestStatus,t},c=function(n){var s=i.indexOf(n),f,o,u,h;if(s>-1&&i.splice(s,1),f=r.push(n),i.length===0){for(o=[],u=0;u<f;u++)h=r[u],o.push(e(h)),r.splice(u,1),f--,u--;if(typeof t.onAllComplete=="function")return t.onAllComplete(o)}};this.onBeforeSend=function(){};this.onSuccess=function(){};this.onError=function(){};this.onComplete=function(){};this.onAllComplete=function(){};o=function(){this.requestID=null;this.eventStream=null;this.httpRequestArgs=null;this.xmlHttpRequest=null;this.requestStatus=n.NotStarted;this.error=null;this.response=null};n=EVUI.Modules.Http.HttpRequestStatus};EVUI.Modules.Http.HttpRequestArgs=function(){var n=null,t=null,i=[],e=null,r=!1,u=null,f=null;this.url=null;Object.defineProperty(this,"url",{get:function(){return n},set:function(t){if(t!=null&&typeof t!="string")throw new Error("url must be a string.");n=t},configurable:!1,enumerable:!0});this.method=null;Object.defineProperty(this,"method",{get:function(){return t},set:function(n){if(n!=null&&typeof n!="string")throw new Error("method must be a string.");t=n},configurable:!1,enumerable:!0});this.headers=null;Object.defineProperty(this,"headers",{get:function(){return i},set:function(n){if(n!=null&&EVUI.Modules.Core.Utils.isArray(n)===!1)throw new Error("headers must be an array.");i=n},enumerable:!0,configurable:!1});this.body=null;this.contentType=null;Object.defineProperty(this,"contentType",{get:function(){return e},set:function(n){if(n!=null&&typeof n!="string")throw new Error("contentType must be a string.");},enumerable:!0,configurable:!1});this.withCredentials=!1;Object.defineProperty(this,"withCredentials",{get:function(){return r},set:function(n){if(typeof n!="boolean")throw new Error("withCredentials must be a boolean.");r=n},enumerable:!0,configurable:!1});this.responseType=null;Object.defineProperty(this,"responseType",{get:function(){return u},set:function(n){if(n!=null&&typeof n!="string")throw new Error("responseType must be a string.");u=n},enumerable:!0,configurable:!1});this.timeout=null;Object.defineProperty(this,"timeout",{get:function(){return f},set:function(n){if(n!=null&&typeof n!="number")throw new Error("timeout must be a number.");f=n},configurable:!1});this.context=null;this.onBeforeSend=function(){};this.onSuccess=function(){};this.onError=function(){};this.onComplete=function(){}};EVUI.Modules.Http.HttpRequestHeader=function(n,t){if(n!=null&&typeof n!="string"&&typeof n!="number")throw new Error("HttpRequestHeader key must be a string or a number.");if(t!=null&&typeof t!="string"&&typeof t!="number"&&typeof n!="boolean")throw new Error("HttpRequestHeader value must be a string, boolean, or a number.");var i=n,r=t;this.key=null;Object.defineProperty("key",this,{get:function(){return i},set:function(t){if(t==null||typeof n!="string"&&typeof n!="number")throw new Error("HttpRequestHeader key must be a string or a number.");i=t},enumerable:!0,configurable:!1});this.value=null;Object.defineProperty("value",this,{get:function(){return r},set:function(t){if(t==null||typeof t!="string"&&typeof t!="number"&&typeof n!="boolean")throw new Error("HttpRequestHeader value must be a string, boolean, or a number.");r=t},enumerable:!0,configurable:!1})};EVUI.Modules.Http.HttpEventArgs=function(n,t,i,r){if(n instanceof EVUI.Modules.Http.HttpRequestArgs==!1)throw new Error("Request must be an instance of HttpRequestArgs");var f=n,u=t,e=i,o=r;this.request=null;Object.defineProperty(this,"request",{get:function(){return f},configurable:!1,enumerable:!0});this.xmlHttpRequest=null;Object.defineProperty(this,"xmlHttpRequest",{get:function(){return u},configurable:!1,enumerable:!0});this.error=null;Object.defineProperty(this,"error",{get:function(){return e},configurable:!1,enumerable:!0});this.response=null;Object.defineProperty(this,"response",{get:function(){return o},configurable:!1,enumerable:!0});this.statusCode=0;Object.defineProperty(this,"statusCode",{get:function(){return u==null?0:u.status},configurable:!1,enumerable:!0});this.success=!1;Object.defineProperty(this,"success",{get:function(){return u==null?!1:u.status>=200&&u.status<300||u.status===304},configurable:!1,enumerable:!0});this.requestStatus=EVUI.Modules.Http.HttpRequestStatus.NotStarted;this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.context={}};EVUI.Modules.Http.CompletedHttpRequest=function(n){var t=this,i=n;this.requestID=null;this.success=!1;Object.defineProperty(this,"success",{get:function(){return t.statusCode>=200&&t.statusCode<300||t.statusCode===304},configurable:!1,enumerable:!0});this.response=null;this.httpRequestArgs=null;this.xmlHttpRequest=null;Object.defineProperty(this,"xmlHttpRequest",{get:function(){return i},configurable:!1,enumerable:!0});this.error=null;this.requestStatus=EVUI.Modules.Http.HttpRequestStatus.NotStarted;this.statusCode=0};EVUI.Modules.Http.HttpRequestInstance=function(n){var t=n,i=EVUI.Utils.ShallowExtend(new EVUI.Modules.Http.HttpRequestArgs,n.HttpRequestArgs);this.requestID=null;Object.defineProperty(this,"requestID",{get:function(){return t.requestID},enumerable:!0});this.eventStreamStatus=EVUI.Resources.EventStreamStatus.NotStarted;Object.defineProperty(this,"eventStreamStatus",{get:function(){return t.eventStream.getStatus()},enumerable:!0});this.request=null;Object.defineProperty(this,"request",{get:function(){return i},enumerable:!0});this.xmlHttpRequest=null;Object.defineProperty(this,"xmlHttpRequest",{get:function(){return t.xmlHttpRequest},enumerable:!0});this.requestStatus=EVUI.Modules.Http.HttpRequestStatus.NotStarted;Object.defineProperty(this,"requestStatus",{get:function(){return t.requestStatus},enumerable:!0});this.error=null;Object.defineProperty(this,"error",{get:function(){return t.error},enumerable:!0});this.response=null;Object.defineProperty(this,"response",{get:function(){return t.response},enumerable:!0});this.forceResume=function(){return t.EventStream.getStatus()===EVUI.Resources.EventStreamStatus.Paused?t.eventStream.resume():!1}};EVUI.Modules.Http.HttpRequestStatus={NotStarted:0,Opened:1,Sent:2,Complete:3,Canceled:4,Failed:5,Exception:6,TimedOut:7,Aborted:8};Object.freeze(EVUI.Modules.Http.HttpRequestStatus);EVUI.Modules.Http.HttpResponseType={Unknown:"unknown",Blob:"blob",ArrayBuffer:"arraybuffer",XML:"xml",HTML:"html",Text:"text",JSON:"json",Document:"document"};Object.freeze(EVUI.Modules.Http.HttpResponseType);EVUI.Modules.Http.Http=null,function(){var t=EVUI.Modules.Http.HttpManager,n=null;Object.defineProperty(EVUI.Modules.Http,"Http",{get:function(){return n==null&&(n=new t),n},enumerable:!0,configurable:!1})}();delete $evui.httpEventStream;$evui.httpManager=null;Object.defineProperty($evui,"httpManager",{get:function(){return EVUI.Modules.Http.Http},enumerable:!0});$evui.http=function(n,t){EVUI.Modules.Http.Http.executeRequest(n,t)};$evui.httpAsync=function(n){return EVUI.Modules.Http.Http.executeRequestAsync(n)};EVUI.Modules.IFrames={};EVUI.Modules.IFrames.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0}),Dom:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.IFrames.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.IFrames.Dependencies);EVUI.Modules.IFrames.Constants={};EVUI.Modules.IFrames.Constants.Fn_IFrameSelector=function(){};EVUI.Modules.IFrames.Constants.Fn_AskCallback=function(){};EVUI.Modules.IFrames.Constants.Fn_IFrameEventHandler=function(){};EVUI.Modules.IFrames.Constants.PlaceholderIFrameContextID="evui.iframe.placeholder";EVUI.Modules.IFrames.Constants.Event_OnMessage="evui.iframes.onmessage";EVUI.Modules.IFrames.Constants.Event_OnHandler="evui.iframes.onhandler";EVUI.Modules.IFrames.Constants.Event_OnAsk="evui.iframes.onask";EVUI.Modules.IFrames.Constants.Event_OnSend="evui.iframes.onsend";Object.freeze(EVUI.Modules.IFrames.Constants);EVUI.Modules.IFrames.IFrameManager=function(){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.IFrames.Dependencies);var i=this,v="evui.iframe.message",n=null,y=!1,t=[],u=5e3,f=function(){this.iFrame=null;this.handle=null;this.messageSessions=[]},nt=function(){var n=this,t=null,i=null;this.windowType=EVUI.Modules.IFrames.WindowType.None;this.contextID=null;this.element=null;this.messageHandlers=[];this.origin=null;Object.defineProperty(this,"origin",{get:function(){return n.windowType===EVUI.Modules.IFrames.WindowType.Child&&(i==null||n.element!=null&&n.element.src!==t)&&(i=l(n.element.src),t=n.element.src),i},set:function(n){i=n}});this.url=null;Object.defineProperty(this,"url",{get:function(){return n.windowType===EVUI.Modules.IFrames.WindowType.Child&&n.element!=null&&n.element.src!==t&&(i=l(n.element.src),t=n.element.src),t},set:function(n){t=n}});this.onSend=function(){};this.onMessage=function(){};this.send=function(n,t,i,r){tt(this,n,t,i,r)};this.addMessageHandler=function(n,t){if(this.contextID===EVUI.Modules.IFrames.Constants.PlaceholderIFrameContextID)throw Error("Cannot add or remove message handlers to a placeholder IFrame entry.");it(this,n,t)};this.removeMessageHandler=function(n){if(this.contextID===EVUI.Modules.IFrames.Constants.PlaceholderIFrameContextID)throw Error("Cannot add or remove message handlers to a placeholder IFrame entry.");return rt(this,n)};this.ask=function(n,t,i,r){if(this.contextID===EVUI.Modules.IFrames.Constants.PlaceholderIFrameContextID)throw Error("Cannot ask from a placeholder IFrame entry.");p(this,n,t,i,r)};this.askAsync=function(n,t,i){if(this.contextID===EVUI.Modules.IFrames.Constants.PlaceholderIFrameContextID)throw Error("Cannot ask from a placeholder IFrame entry.");return ut(this,n,t,i)};this.remove=function(){return ft(this)}},e=function(){this.sessionID=null;this.messageWapper=null;this.entry=null;this.eventStream=null;this.askArgs=null;this.askCallback=null;this.askCallbackFired=!1},o=function(){this.metadata=null;this.data=null},s=function(){this.signature=v;this.sessionID=null;this.askSessionID=null;this.messageCode=null;this.senderName=null};this.parentWindow=null;Object.defineProperty(this,"parentWindow",{get:function(){return n==null?null:n.iFrame},enumerable:!0,configurable:!1});this.defaultAskTimeout=5e3;Object.defineProperty(this,"defaultAskTimeout",{get:function(){return u},set:function(n){if(typeof n!="number"||n<0)throw Error("defaultAskTimeout must be a positive number.");u=n},configurable:!1,enumerable:!0});this.getChild=function(n){var r,f,i,u;if(typeof n=="string")return(r=et(n),r==null)?null:r;if(typeof n=="function"){for(f=t.length,i=0;i<f;i++)if(u=t[i],n(u.iFrame)===!0)return u.iFrame;return null}throw Error("Invalid input, string or function expected.");};this.getChildren=function(n){var r,f,i,u;if(typeof n=="function"){for(r=[],f=t.length,i=0;i<f;i++)u=t[i],n(u.iFrame)===!0&&r.push(u.iFrame);return r}return t.map(function(n){return n.iFrame})};this.onMessage=function(){};this.onSend=function(){};this.addIFrame=function(u){var e=new EVUI.Modules.IFrames.IFrameAddRequest,v,y,a,k,o,p,s;if(r(u)===!0?(e.element=u,e.iframeType=EVUI.Modules.IFrames.WindowType.Child,e.url=u.src):e=EVUI.Modules.Core.Utils.shallowExtend(e,u),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(e.url)===!1&&n!=null)return n.handle.url==null&&(n.handle.url=e.url,n.handle.origin=l(e.url)),c(e,n.iFrame),n.iFrame;if(typeof e.element=="string"){var d=new EVUI.Modules.Dom.DomHelper(e.element),w=d.elements.filter(function(n){return r(n)}),b=w.length;if(b===0)throw Error("Invalid arguments - no url or valid iframe element selector provided, no way to establish cross-window communication.");for(v=[],o=0;o<b;o++)y=i.addIFrame(w[o]),y!=null&&v.push(y);return v}if(r(e.element)===!1)throw Error("Invalid arguments - no parent window or iframe element provided, no way to establish cross-window communication.");for(a=null,k=t.length,o=0;o<k;o++)if(p=t[o],p.handle.element===e.element){a=p;break}return a!=null?(c(e,a.iFrame),a.iFrame):(s=new f,s.handle=h(e,EVUI.Modules.IFrames.WindowType.Child),s.iFrame=new EVUI.Modules.IFrames.IFrame(s.handle),c(e,s.iFrame),t.push(s),s.iFrame)};var h=function(n,t){var i=new nt;return i.contextID=EVUI.Modules.Core.Utils.makeGuid(),i.element=n.element,i.url=r(n.element)===!0?n.element.src:null,i.windowType=t,i},tt=function(n,t,i,r,u){var c=g(n),h,f;c==null&&d(n.element);h=new EVUI.Modules.IFrames.SendMessageArgs;typeof i=="object"?h=EVUI.Modules.Core.Utils.shallowExtend(h,i):typeof i=="string"&&(h.messageCode=i);h.senderName=r;f=new e;f.sessionID=EVUI.Modules.Core.Utils.makeGuid();f.entry=c;f.messageWapper=new o;f.messageWapper.data=t;f.messageWapper.metadata=new s;f.messageWapper.metadata.askSessionID=u;f.messageWapper.metadata.messageCode=h.messageCode;f.messageWapper.metadata.sessionID=f.sessionID;f.messageWapper.metadata.senderName=h.senderName;w(f)},it=function(n,t,i){var r;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)throw Error("MessageCode must be a non-whitespace string.");if(typeof i!="function"&&i!=null)throw Error("Handler must be a function.");if(r=a(n,t),r!=null)throw Error('IFrame already has a message handler for "'+t+'".');r=new EVUI.Modules.IFrames.IFrameMessageListener(t,i);n.messageHandlers.push(r)},rt=function(n,t){var r=a(n,t),i;if(r==null)return!1;i=n.messageHandlers.indexOf(r);i!==-1&&n.messageHandlers.splice(i,1);!0},p=function(n,t,i,r,f){var l,c,h;if(typeof f!="function"&&(typeof i=="function"&&(f=i),typeof r=="function"&&(f=r)),typeof f!="function")throw Error("Ask operation must have a callback.");if(l=g(n),l==null)throw Error("Cannot ask from unregistered iframe.");c=new EVUI.Modules.IFrames.AskArgs;typeof i=="object"?c=EVUI.Modules.Core.Utils.shallowExtend(c,i):typeof i=="string"&&(c.messageCode=i);c.senderName=r;(typeof c.responseTimeout!="number"||c.responseTimeout<0)&&(c.responseTimeout=u);h=new e;h.sessionID=EVUI.Modules.Core.Utils.makeGuid();h.entry=l;h.askArgs=c;h.askCallback=f;h.messageWapper=new o;h.messageWapper.data=t;h.messageWapper.metadata=new s;h.messageWapper.metadata.askSessionID=EVUI.Modules.Core.Utils.makeGuid();h.messageWapper.metadata.messageCode=c.messageCode;h.messageWapper.metadata.sessionID=h.sessionID;h.messageWapper.metadata.senderName=c.senderName;w(h)},ut=function(n,t,i,r){return new Promise(function(u){p(n,t,i,r,function(n){u(n)})})},ft=function(n){for(var r,u=t.length,i=0;i<u;i++)if(r=t[i],r.handle===n)return t.splice(i,1),!0;return!1},c=function(n,t){typeof n.onMessage=="function"&&(t.onMessage=n.onMessage);typeof n.onSend=="function"&&(t.onSend=n.onSend)},et=function(n){for(var r,u=t.length,i=0;i<u;i++)if(r=t[i],r.contextID===n)return r;return null},l=function(n){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return null;try{var t=document.createElement("a");return t.href=n,t.origin}catch(i){return null}},ot=function(t){if(y!==!0){if(y=!0,parent!==window){var r=new EVUI.Modules.IFrames.IFrameAddRequest;r.element=parent;r.iframeType=EVUI.Modules.IFrames.WindowType.Parent;n=new f;n.handle=h(r,EVUI.Modules.IFrames.WindowType.Parent);n.iFrame=new EVUI.Modules.IFrames.IFrame(n.handle)}addEventListener("message",function(n){var f,r,u,e;if(n.origin!=null&&t.versionState!=="overwritten"&&(f=n.origin,ct(f)!==!1)&&n.data!=null&&n.data.metadata!=null&&n.data.metadata.signature===v){if(r=k(n.source),r==null){if(u=lt(n.source),u==null)return;if(EVUI.Modules.Core.Utils.isSettingTrue("autoAddIncomingIFrames")===!0){if(e=i.addIFrame(targetIframe),e==null)return;r=k(n.source)}r==null&&(r=d(u))}st(n,r)}})}},st=function(n,t){var u=new o,r,f,h;u.metadata=new s;u.metadata.sessionID=n.data.metadata.sessionID;u.metadata.messageCode=n.data.metadata.messageCode;u.metadata.askSessionID=n.data.metadata.askSessionID;u.data=n.data.data;r=new e;r.entry=t;r.sessionID=EVUI.Modules.Core.Utils.makeGuid();r.messageWapper=u;b(r,!0);f=r.eventStream;h=at(r.entry,r.messageWapper.metadata.askSessionID);h!=null&&h.askArgs!=null&&typeof h.askCallback=="function"&&r.askCallbackFired===!1?(h.askCallbackFired=!0,f.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.IFrames.Constants.Event_OnAsk,handler:function(n){return h.askCallback(n.message.data)}})):(f.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.IFrames.Constants.Event_OnMessage,handler:function(n){if(typeof t.handle.onMessage=="function")return t.handle.onMessage(n)}}),f.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.IFrames.Constants.Event_OnMessage,handler:function(n){if(typeof i.onMessage=="function")return i.onMessage(n)}}),f.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.IFrames.Constants.Event_OnHandler,handler:function(n){var t=a(r.entry.handle,r.messageWapper.metadata.messageCode);if(t!=null&&typeof t.handler=="function")return t.handler(n)}}));f.execute()},w=function(t){b(t);var r=t.eventStream;r.addStep({key:EVUI.Modules.IFrames.Constants.Event_OnSend,type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof t.entry.handle.onSend=="function")return t.entry.handle.onSend(n)}});r.addStep({key:EVUI.Modules.IFrames.Constants.Event_OnSend,type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof i.onSend=="function")return i.onSend(n)}});r.addStep({key:"evui.iframes.send",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(i){var r=null;if(t.entry===n){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.handle.origin)===!0)return i.reject("Parent window origin unset.");r=parent}else t.entry.handle.element.contentWindow!=null&&(r=t.entry.handle.element.contentWindow);if(r!=null)r.postMessage(t.messageWapper,t.entry.handle.origin);else return i.reject("Could not resolve message target.");i.resolve()}});t.askArgs!=null&&(t.entry.messageSessions.push(t),r.addStep({key:"evui.iframes.asktimeout",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){var i=function(i){var r=t.entry.messageSessions.indexOf(t);return r!==-1&&t.entry.messageSessions.splice(r,1),i instanceof Error?n.reject("Ask callback crashed.",i):n.resolve(i)};setTimeout(function(){if(t.askCallbackFired===!1){t.askCallbackFired=!0;try{var n=t.askCallback(undefined);EVUI.Modules.Core.Utils.isPromise(n)===!0?n.then(function(n){i(n)}).catch(function(n){i(n)}):i(n)}catch(r){i(r)}}else i()},t.askArgs.responseTimeout)}}));r.execute()},vt=function(){},yt=function(){},b=function(n,t){var i=new EVUI.Modules.EventStream.EventStream;i.context=n.entry.iFrame;i.processInjectedEventArgs=function(r){var f=ht(n.messageWapper,n.entry.handle.windowType),u=new EVUI.Modules.IFrames.IFrameEventArgs(n.entry.iFrame,f);return u.cancel=r.cancel,u.context=i.eventState,u.key=r.key,u.pause=r.pause,u.resume=r.resume,u.stopPropagation=r.stopPropagation,u.respond=function(t,i,r){EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.messageWapper.metadata.askSessionID)===!1?n.entry.handle.send(t,i,r,n.messageWapper.metadata.askSessionID):n.entry.handle.send(t,i,r)},t!==!0&&delete u.respond,u};i.processReturnedEventArgs=function(n){i.eventState=n.state};i.canSeek=!1;n.eventStream=i},ht=function(n,t){var i=new EVUI.Modules.IFrames.IFrameMessage;return i.messageSenderType=t,i.messageCode=n.metadata.messageCode,i.data=n.data,i},ct=function(i){var r,f,u;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)===!0)return!1;if((r=i.toLowerCase(),r===location.origin.toLowerCase())||n!=null&&n.handle.origin===r)return!0;for(f=t.length,u=0;u<f;u++)if(t[u].handle.origin===r)return!0;return!1},k=function(i){var f,r,u;if(n!=null&&parent!==window&&parent===i)return n;for(f=t.length,r=0;r<f;r++)if(u=t[r],u.handle.element.contentWindow===i)return u;return null},lt=function(n){for(var i,r=new EVUI.Modules.Dom.DomHelper("iframe"),u=null,f=r.elements.length,t=0;t<f;t++)if(i=r.elements[t],i.contentWindow===n){u=i;break}return u},d=function(n){var r=new EVUI.Modules.IFrames.IFrameAddRequest,t,u,i;return r.element=n,t=h(r,EVUI.Modules.IFrames.WindowType.Child),t.contextID=EVUI.Modules.IFrames.Constants.PlaceholderIFrameContextID,u=new EVUI.Modules.IFrames.IFrame(t),i=new f,i.handle=t,i.iFrame=u,i},r=function(n){return EVUI.Modules.Core.Utils.isElement(n)===!0&&n.tagName.toLowerCase()==="iframe"},pt=function(n){return n instanceof Window&&n===parent&&parent!==window},at=function(n,t){for(var r,u=n.messageSessions.length,i=0;i<u;i++)if(r=n.messageSessions[i],r.messageWapper.metadata.askSessionID===t)return r;return null},a=function(n,t){var u,i,r;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)return null;for(u=n.messageHandlers.length,i=0;i<u;i++)if(r=n.messageHandlers[i],r.messageCode===t)return r;return null},g=function(i){var f,r,u;if(i===n.handle)return n;for(f=t.length,r=0;r<f;r++)if(u=t[r],u.handle===i)return u;return null};ot(EVUI.Modules.IFrames)};EVUI.Modules.IFrames.IFrameMessage=function(){this.messageSenderType=EVUI.Modules.IFrames.WindowType.None;this.messageCode=null;this.data=null};EVUI.Modules.IFrames.WindowType={None:"none",Parent:"parent",Child:"child"};Object.freeze(EVUI.Modules.IFrames.WindowType);EVUI.Modules.IFrames.IFrame=function(n){if(n==null)throw Error("Invalid Arguments: Missing IFrameHandle.");if(n.element!==parent&&EVUI.Modules.Core.Utils.isElement(n.element)===!1&&n.element.tagName.toLowerCase()!=="iframe")throw Error("Invalid Arguments: Invalid IFrameHandle.");var t=n;this.windowType=EVUI.Modules.IFrames.WindowType.None;Object.defineProperty(this,"windowType",{get:function(){return t.windowType},configurable:!1,enumerable:!0});this.contextID=null;Object.defineProperty(this,"contextID",{get:function(){return t.contextID},configurable:!1,enumerable:!0});this.origin=null;Object.defineProperty(this,"origin",{get:function(){return t.origin},configurable:!1,enumerable:!0});this.element=null;Object.defineProperty(this,"element",{get:function(){return t.element},configurable:!1,enumerable:!0});this.url=null;Object.defineProperty(this,"url",{get:function(){return t.url},configurable:!1,enumerable:!0});this.onMessage=null;Object.defineProperty(this,"onMessage",{get:function(){return t.onMessage},set:function(n){t.onMessage=n},configurable:!1,enumerable:!0});this.onSend=null;Object.defineProperty(this,"onSend",{get:function(){return t.onSend},set:function(n){t.onSend=n},configurable:!1,enumerable:!0});this.send=function(n,i,r){t.send(n,i,r)};this.addMessageHandler=function(n,i){t.addMessageHandler(n,i)};this.removeMessageHandler=function(n){return t.removeMessageHandler(n)};this.getMessageHandler=function(n){for(var r,u=t.messageHandlers.length,i=0;i<u;i++)if(r=t.messageHandlers[i],r.messageCode===n)return r;return null};this.getMessageHandlers=function(){return t.messageHandlers.slice()};this.ask=function(n,i,r,u){t.ask(n,i,r,u)};this.askAsync=function(n,i,r){return t.askAsync(n,i,r)};this.remove=function(){return t.remove()}};EVUI.Modules.IFrames.IFrameEventArgs=function(n,t){var i=n,r=t;this.key=null;this.sendingIFrame=null;Object.defineProperty(this,"sendingIFrame",{get:function(){return i},enumerable:!0,configurable:!1});this.message=null;Object.defineProperty(this,"message",{get:function(){return r},enumerable:!0,configurable:!1});this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.respond=function(){};this.context={}};EVUI.Modules.IFrames.IFrameAddRequest=function(){this.element=null;this.onMessage=null;this.onSend=null};EVUI.Modules.IFrames.ParentWindowAddRequest=function(){this.url=null;this.onMessage=null;this.onSend=null};EVUI.Modules.IFrames.SendMessageArgs=function(){this.messageCode=null;this.senderName=null};EVUI.Modules.IFrames.AskArgs=function(){this.messageCode=null;this.senderName=null;this.responseTimeout=-1};EVUI.Modules.IFrames.IFrameMessageListener=function(n,t){var r=n,i=t;this.messageCode=null;Object.defineProperty(this,"messageCode",{get:function(){return r},configurable:!1,enumerable:!0});this.handler=null;Object.defineProperty(this,"handler",{get:function(){return i},set:function(n){if(n==null||typeof t=="function")i=n;else throw Error("Function expected.");},enumerable:!0,configurable:!1})};EVUI.Modules.IFrames.Manager=null,function(){var n=null;Object.defineProperty(EVUI.Modules.IFrames,"Manager",{get:function(){return n==null&&(n=new EVUI.Modules.IFrames.IFrameManager),n},configurable:!1,enumerable:!0})}();delete $evui.iframes;$evui.iframes=null;Object.defineProperty($evui,"iframes",{get:function(){return EVUI.Modules.IFrames.Manager},enumerable:!0});$evui.addIFrame=function(n){return EVUI.Modules.IFrames.Manager.addIFrame(n)};Object.freeze(EVUI.Modules.IFrames);EVUI.Modules.Modals={};EVUI.Modules.Modals.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),Panes:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Modals.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Modals.Dependencies);EVUI.Modules.Modals.Constants={};EVUI.Modules.Modals.Constants.Fn_ModalSelector=function(){return!0};EVUI.Modules.Modals.Constants.Fn_LoadCallback=function(){};EVUI.Modules.Modals.Constants.Fn_ModalOperationCallback=function(){};EVUI.Modules.Modals.Constants.CSS_Position="evui-position";EVUI.Modules.Modals.Constants.CSS_ClippedX="evui-clipped-x";EVUI.Modules.Modals.Constants.CSS_ClippedY="evui-clipped-y";EVUI.Modules.Modals.Constants.CSS_ScrollX="evui-scroll-x";EVUI.Modules.Modals.Constants.CSS_ScrollY="evui-scroll-y";EVUI.Modules.Modals.Constants.CSS_Transition_Show="evui-transition-show";EVUI.Modules.Modals.Constants.CSS_Transition_Hide="evui-transition-hide";EVUI.Modules.Modals.Constants.Attribute_ID="evui-m-id";EVUI.Modules.Modals.Constants.Attribute_Focus="evui-m-focus";EVUI.Modules.Modals.Constants.Attribute_Close="evui-m-close";EVUI.Modules.Modals.Constants.Attribute_SourceURL="evui-m-src";EVUI.Modules.Modals.Constants.Attribute_PlaceholderID="evui-m-placeholder-id";EVUI.Modules.Modals.Constants.Attribute_UnloadOnHide="evui-m-unload";EVUI.Modules.Modals.Constants.Attribute_Context="evui-m-cxt";EVUI.Modules.Modals.Constants.Attribute_Selector="evui-m-selector";EVUI.Modules.Modals.Constants.Attribute_Center="evui-m-center";EVUI.Modules.Modals.Constants.Attribute_Fullscreen="evui-m-fullscreen";EVUI.Modules.Modals.Constants.Attribute_Backdrop="evui-m-show-backdrop";EVUI.Modules.Modals.Constants.Default_ObjectName="Modal";EVUI.Modules.Modals.Constants.Default_ManagerName="ModalManager";EVUI.Modules.Modals.Constants.Default_CssPrefix="evui-m";EVUI.Modules.Modals.Constants.Default_EventNamePrefix="evui.m";EVUI.Modules.Modals.Constants.Default_AttributePrefix="evui-m";Object.freeze(EVUI.Modules.Modals.Constants);EVUI.Modules.Modals.ModalManager=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Modals.Dependencies);var r=this,i=null,t=null;this.addModal=function(n){if(n==null)throw Error(t.objectName+" cannot be null.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.id)===!0)throw Error(t.objectName+"must have an id that is a non-whitespace string.");var r=t.getPaneEntry(n.id);if(r!=null)throw Error("A "+t.objectName+' with an id of "'+n.id+'" already exists.');return i.addPane(e(n)),r=t.getPaneEntry(n.id),r.wrapper};this.removeModal=function(n){return i.removePane(n)};this.getModal=function(n,i){var r=null;return typeof n=="function"?(r=t.getPaneEntry(function(){return!0},!0).map(function(n){return n.wrapper}).filter(n),i!==!0&&r!=null)?r[0]:r:(r=t.getPaneEntry(n,i),r==null)?null:EVUI.Modules.Core.Utils.isArray(r)===!1?r.wrapper:r.map(function(n){return n.wrapper})};this.showModal=function(n,r,e){var s=f(n,!0),o=new EVUI.Modules.Panes.PaneShowArgs;o.showSettings=t.cloneShowSettings(s.pane.showSettings);o.loadArgs=new EVUI.Modules.Panes.PaneLoadArgs;o.loadArgs.loadSettings=t.cloneLoadSettings(s.pane.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalShowArgs(o),r,["type"]),r.showSettings=r.showSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalShowSettings(o.showSettings),r.showSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs!=null&&r.loadArgs.loadSettings!=null?(r.loadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadArgs(o.loadArgs),r.loadArgs,["type"]),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadSettings(o.loadArgs.loadSettings),r.loadArgs.loadSettings)):(r.loadArgs=new EVUI.Modules.Modals.ModalLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings,["type"]))):r=null;r==null&&(r=new EVUI.Modules.Modals.ModalShowArgs(o),r.showSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs=new EVUI.Modules.Modals.ModalLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.showPane(s.pane.id,o,e)};this.showModalAsync=function(n,t){return new Promise(function(i){r.showModal(n,t,function(n){i(n)})})};this.hideModal=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneHideArgs;o.unloadArgs=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalHideArgs(o),r,["type"]),r.unloadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalUnloadArgs(o.unloadArgs,r.unloadArgs))):r=null;r==null&&(r=new EVUI.Modules.Modals.ModalHideArgs(o),r.unloadArgs=new EVUI.Modules.Modals.ModalUnloadArgs(o.unloadArgs));t.currentActionArgs=u(r);i.hidePane(s.pane.id,o,e)};this.hideModalAsync=function(n,t){return new Promise(function(i){r.hideModal(n,t,function(n){i(n)})})};this.hideAllModals=function(n,t){var i;typeof t!="function"&&(t=function(){});var u=this.getModal(function(n){return n.isVisible}),r=u.length,f=0;if(r===0)return t(!0);for(i=0;i<r;i++)this.hideModal(u[i],n,function(){return f++,f===r?t(!0):void 0})};this.hideAllModalsAsync=function(n){return new Promise(function(t){r.hideAllModals(n,function(n){t(n)})})};this.loadModal=function(n,r,e){var s=f(n,!1),o=new EVUI.Modules.Panes.PaneLoadArgs;o.loadSettings=t.cloneLoadSettings(s.pane.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadArgs(o),r,["type"]),r.loadSettings=r.loadSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadSettings(o.loadSettings),r.loadSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadSettings(o.loadSettings),s.wrapper.loadSettings)):r=null;r==null&&(r=new EVUI.Modules.Modals.ModalLoadArgs(o),r.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalLoadSettings(o.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.loadPane(s.pane.id,o,e)};this.loadModalAsync=function(n,t){return new Promise(function(i){r.loadModal(n,t,function(n){i(n)})})};this.unloadModal=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r=r!=null&&typeof r=="object"?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Modals.ModalUnloadArgs(o),r):null;r==null&&(r=new EVUI.Modules.Modals.ModalUnloadArgs(o));t.currentActionArgs=u(r);i.unloadPane(s.pane.id,o,e)};this.unloadModalAsync=function(n,t){return new Promise(function(i){r.unloadModal(n,t,function(n){i(n)})})};var o=function(n){var t=n.pane.modal;return delete n.pane.modal,c(t,n.pane,n.exists)},s=function(n,t){var r,i;return n.foreignArgs==null&&(n.foreignArgs=h(n)),r=null,t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Hide?r=n.foreignArgs.hideArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Load?r=n.foreignArgs.loadArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Show?r=n.foreignArgs.showArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Unload&&(r=n.foreignArgs.unloadArgs),i=new EVUI.Modules.Modals.ModalEventArgs(n,r),i.cancel=t.cancel,i.key=t.key,i.pause=t.pause,i.resume=t.resume,i.stopPropagation=t.stopPropagation,i.context=t.context,i},u=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.type===EVUI.Modules.Modals.ModalArgumentType.Hide?(t.hideArgs=n,t.unloadArgs=n.unloadArgs):n.type===EVUI.Modules.Modals.ModalArgumentType.Show?(t.showArgs=n,t.loadArgs=n.loadArgs):n.type===EVUI.Modules.Modals.ModalArgumentType.Load?t.loadArgs=n:n.type===EVUI.Modules.Modals.ModalArgumentType.Unload&&(t.unloadArgs=n),t},h=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.hideArgs!=null&&(t.hideArgs=new EVUI.Modules.Modals.ModalHideArgs(n.hideArgs),t.hideArgs.unloadArgs=new EVUI.Modules.Modals.ModalUnloadArgs(n.hideArgs.unloadArgs)),n.showArgs!=null&&(t.showArgs=new EVUI.Modules.Modals.ModalShowArgs(n.showArgs),t.showArgs.showSettings=new EVUI.Modules.Modals.ModalShowSettings(n.showArgs.showSettings),t.showArgs.loadArgs=new EVUI.Modules.Modals.ModalLoadArgs(n.showArgs.loadArgs),t.showArgs.loadArgs.loadSettings=new EVUI.Modules.Modals.ModalLoadSettings(n.showArgs.loadArgs.loadSettings)),n.loadArgs!=null&&(t.loadArgs=new EVUI.Modules.Modals.ModalLoadArgs(n.loadArgs),t.loadArgs.loadSettings=new EVUI.Modules.Modals.ModalLoadSettings(n.loadArgs.loadSettings)),n.unloadArgs!=null&&(t.unloadArgs=new EVUI.Modules.Modals.ModalUnloadArgs(n.unloadArgs)),t},c=function(n,i,r){var u=null,e,f;return r===!0?(e=t.getPaneEntry(n.id),u=e.wrapper):u=new EVUI.Modules.Modals.Modal(i),f=EVUI.Modules.Core.Utils.shallowExtend({},n),delete f.id,r===!0&&n.element===i.element&&delete f.element,delete f.currentPosition,delete f.currentZIndex,delete f.isVisible,delete f.isInitialized,delete f.isLoaded,EVUI.Modules.Core.Utils.shallowExtend(u,f,["showSettings","loadSettings","autoCloseSettings"]),u.showSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Modals.ModalShowSettings(i.showSettings),u.showSettings,n.showSettings),u.loadSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Modals.ModalLoadSettings(i.loadSettings),u.loadSettings,n.loadSettings),u.autoCloseSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Modals.ModalAutoCloseSettings(i.autoCloseSettings),u.autoCloseSettings,n.autoCloseSettings),u},f=function(n,i){var r;if(n==null||typeof n!="string"&&typeof n!="object")throw Error("Invalid input: "+t.objectName+" or string id expected.");return n instanceof Event?t.getPaneEntryAmbiguously(n,i):(r={},typeof n=="string"?r=e({id:n}):(r.id=n.id,r.modal=n),t.getPaneEntryAmbiguously(r,i))},e=function(n){var i,r;return typeof n.id=="string"&&(i=t.getPaneEntry(n.id),i!=null&&i.pane!=null)?(r=EVUI.Modules.Core.Utils.shallowExtend({},i.pane),r.modal=n,r):{id:n.id,autoCloseSettings:{closeMode:EVUI.Modules.Panes.PaneCloseMode.Explicit,autoCloseKeys:["Escape","Enter"]},showSettings:{center:!0,backdropSettings:{showBackdrop:!0}},clipSettings:{clipMode:EVUI.Modules.Modals.ModalClipMode.Clip,clipBounds:document.documentElement},modal:n}},l=function(n,t){EVUI.Modules.Core.Utils.shallowExtend(n,e({id:n.id}));n.showSettings==null&&(n.showSettings={});n.showSettings.backdropSettings==null&&(n.showSettings.backdropSettings={});var f=EVUI.Modules.Core.Utils.getElementAttributes(t.currentTarget),i=f.getValue(EVUI.Modules.Modals.Constants.Attribute_Backdrop),r=f.getValue(EVUI.Modules.Modals.Constants.Attribute_Center),u=f.getValue(EVUI.Modules.Modals.Constants.Attribute_Fullscreen);return typeof i=="string"&&(i=i.toLowerCase(),i==="false"?n.showSettings.backdropSettings.showBackdrop=!1:i==="true"&&(n.showSettings.backdropSettings.showBackdrop=!0)),typeof u=="string"&&(u=u.toLowerCase(),u==="false"?n.showSettings.fullscreen=!1:u==="true"&&(n.showSettings.fullscreen=!0)),typeof r=="string"&&(r=r.toLowerCase(),r==="false"?n.showSettings.center=!1:r==="true"&&(n.showSettings.center=!0)),!0};t=new EVUI.Modules.Panes.PaneManagerSettings;t.attributePrefix=EVUI.Modules.Modals.Constants.Default_AttributePrefix;t.cssPrefix=EVUI.Modules.Modals.Constants.Default_CssPrefix;t.cssSheetName=EVUI.Modules.Styles.Constants.DefaultStyleSheetName;t.eventNamePrefix=EVUI.Modules.Modals.Constants.Default_EventNamePrefix;t.managerName=EVUI.Modules.Modals.Constants.Default_ManagerName;t.objectName=EVUI.Modules.Modals.Constants.Default_ObjectName;t.makeOrExtendObject=o;t.buildEventArgs=s;t.interpretBrowserEvent=l;(n==null||typeof n!="object")&&(n=new EVUI.Modules.Modals.ModalControllerServices);(n.paneManager==null||typeof n.paneManager!="object")&&(n.paneManager=EVUI.Modules.Panes.Manager);t.httpManager=n.httpManager;t.stylesheetManager=n.stylesheetManager;t.htmlLoader=n.htmlLoader;i=new n.paneManager.createNewPaneManager(t);this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnloaded",targetPath:"onUnloaded"})};EVUI.Modules.Modals.Modal=function(n){if(n==null)throw Error("Invalid input. Must wrap a Pane.");var t=n;this.id=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"id",targetPath:"id",settings:{set:!1}});this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.unloadOnHide=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadOnHide",targetPath:"unloadOnHide"});this.currentPosition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentPosition",targetPath:"currentPosition",settings:{set:!1}});this.currentZIndex=-1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentZIndex",targetPath:"currentZIndex",settings:{set:!1}});this.isVisible=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isVisible",targetPath:"isVisible",settings:{set:!1}});this.isLoaded=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isLoaded",targetPath:"isLoaded",settings:{set:!1}});this.isInitialized=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isInitialized",targetPath:"isInitialized",settings:{set:!1}});this.showSettings=null;this.loadSettings=null;this.autoCloseSettings=null;this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnloaded",targetPath:"onUnloaded"});this.getEventBindings=function(){return t.getEventBindings()};this.addEventBinding=function(n,i,r){return t.addEventBinding(n,i,r)}};EVUI.Modules.Modals.ModalShowSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowSettings:n;t.backdropSettings==null&&(t.backdropSettings=new EVUI.Modules.Panes.PaneBackdropSettings);t.clipSettings==null&&(t.clipSettings=new EVUI.Modules.Panes.PaneClipSettings);this.fullscreen=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"fullscreen",targetPath:"fullscreen"});this.center=!0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"center",targetPath:"center"});this.showBackdrop=!0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"showBackdrop",targetPath:"backdropSettings.showBackdrop"});this.backdropCSS=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"backdropCSS",targetPath:"backdropSettings.backdropCSS"});this.backdropShowTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"backdropShowTransition",targetPath:"backdropSettings.backdropShowTransition"});this.backdropHideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"backdropHideTransition",targetPath:"backdropSettings.backdropHideTransition"});this.backdropOpacity=.75;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"backdropOpacity",targetPath:"backdropSettings.backdropOpacity"});this.backdropColor="#000000";EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"backdropColor",targetPath:"backdropSettings.backdropColor"});this.showTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"showTransition",targetPath:"showTransition"});this.hideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"hideTransition",targetPath:"hideTransition"});this.clipBounds=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"clipBounds",targetPath:"clipSettings.clipBounds"});this.scrollXWhenClipped=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"scrollXWhenClipped",targetPath:"clipSettings.scrollXWhenClipped"});this.scrollYWhenClipped=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"scrollYWhenClipped",targetPath:"clipSettings.scrollYWhenClipped"});this.setExplicitDimensions=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"setExplicitDimensions",targetPath:"setExplicitDimensions"})};EVUI.Modules.Modals.ModalEventArgs=function(n,t){if(n==null||t==null)throw Error("Invalid arguments.");var i=n,r=t;this.modal=null;Object.defineProperty(this,"modal",{get:function(){return i.wrapper},configurable:!1,enumerable:!0});this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.calculatedPosition=null;Object.defineProperty(this,"calculatedPosition",{get:function(){return i.lastCalculatedPosition},configurable:!1,enumerable:!0});this.currentActionArgs=null;Object.defineProperty(this,"currentActionArgs",{get:function(){return r},configurable:!1,enumerable:!0});this.context={}};EVUI.Modules.Modals.ModalLoadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"type",targetPath:"type"}]);this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"context",targetPath:"context"}]);this.loadSettings=null;this.reload=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"reload",targetPath:"reload"}])};EVUI.Modules.Modals.ModalShowArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.showSettings=null;this.loadArgs=null;this.reInitialize=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"reInitialize",targetPath:"reInitialize"})};EVUI.Modules.Modals.ModalHideArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneHideArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.modalHideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"modalHideTransition",targetPath:"paneHideTransition"});this.unloadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadArgs",targetPath:"unloadArgs"})};EVUI.Modules.Modals.ModalUnloadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneUnloadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.remove=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"remove",targetPath:"remove"})};EVUI.Modules.Modals.ModalTransition=function(){this.css=null;this.keyframes=null;this.duration=0};EVUI.Modules.Modals.ModalLoadSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadSettings:n;this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.selector=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"selector",targetPath:"selector"});this.contextElement=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"contextElement",targetPath:"contextElement"});this.httpLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"httpLoadArgs",targetPath:"httpLoadArgs"});this.placeholderLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"placeholderLoadArgs",targetPath:"placeholderLoadArgs"})};EVUI.Modules.Modals.ModalAutoCloseSettings=function(){this.autoCloseKeys=[];this.autoCloseFilter=function(){return!0}};EVUI.Modules.Modals.ModalArgumentType={Show:"show",Hide:"hide",Load:"load",Unload:"unload",MoveResize:"moveResize"};Object.freeze(EVUI.Modules.Modals.ModalArgumentType);EVUI.Modules.Modals.ModalClipMode={Overflow:"overflow",Clip:"clip",Shift:"shift"};Object.freeze(EVUI.Modules.Modals.ModalClipMode);EVUI.Modules.Modals.ModalControllerServices=function(){this.httpManager=null;this.htmlLoader=null;this.stylesheetManager=null;this.panesManager=null};EVUI.Modules.Modals.Manager=null,function(){var t=EVUI.Modules.Modals.ModalManager,n=null;Object.defineProperty(EVUI.Modules.Modals,"Manager",{get:function(){return n==null&&(n=new t),n},enumerable:!0,configurable:!1})}();Object.freeze(EVUI.Modules.Modals);delete $evui.modals;$evui.modals=null;Object.defineProperty($evui,"modals",{get:function(){return EVUI.Modules.Modals.Manager},enumerable:!0});$evui.addModal=function(n){return EVUI.Modules.Modals.Manager.addModal(n)};$evui.showModal=function(n,t,i){return EVUI.Modules.Modals.Manager.showModal(n,t,i)};$evui.showModalAsync=function(n,t){return EVUI.Modules.Modals.Manager.showModalAsync(n,t)};$evui.hideModal=function(n,t,i){return EVUI.Modules.Modals.Manager.hideModal(n,t,i)};$evui.hideModalAsync=function(n,t){return EVUI.Modules.Modals.Manager.hideModalAsync(n,t)};EVUI.Modules.Observers={};EVUI.Modules.Observers.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Observers.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Observers.Dependencies);EVUI.Modules.Observers.ObjectObserver=function(n){var t;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Observers.Dependencies);t=null;this.getChanges=function(n){var i=e(n),r=i.changedProperties.slice();return t.reset(),r};this.getChildObserver=function(n,r){var f;if(t==null||t.root==null)return new EVUI.Modules.Observers.ObjectObserver;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return r===!0?EVUI.Modules.Observers.ObjectObserver(i(t.root)):null;var e=EVUI.Modules.Core.Utils.getValuePathSegments(n),o=e.length,u=t.root.propDic[e[0]];if(u==null)return null;for(f=1;f<o;f++)if(u=u.propDic[e[f]],u==null)return null;return r===!0&&(u=i(u,null)),new EVUI.Modules.Observers.ObjectObserver(u)};this.getObservedProperties=function(){return i(t.root,null)};var f=function(i){var f=new EVUI.Modules.Observers.ObservedProperty;f.hostObject=null;f.name=null;f.originalValue=n;f.propDic={};f.propList=[];t=new u;t.root=f;t.diffing=!1;t.setState=!0;t.parentStack.push(i);r(i,f,t)},e=function(n){return(t.diffing=!0,t.setState=n,t.root==null)?session:(t.parentStack.push(t.root.originalValue),r(t.root.originalValue,t.root,t),t)},i=function(n,t){var r=new EVUI.Modules.Observers.ObservedProperty,u,f,e;if(t==null){if(n.originalValue==null||typeof n.originalValue!="object")throw Error("Cannot observe a null reference or non-object.");r.originalValue=n.originalValue}else r.originalValue=n.originalValue,r.hostObject=n.hostObject,r.name=n.name,r.path=t.path==null?n.name:t.path+"."+n.name;if(n.propDic==null)return r;for(r.propList=[],r.propDic={},r.numProps=n.numProps,u=0;u<n.numProps;u++)f=n.propList[u],r.propList.push(f),e=n.propDic[f],r.propDic[f]=i(e,r);return r},r=function(n,t,i){var c,l,p,a,w,u,b,f,h,e,y,k;if(n!=null&&!(n instanceof Node)&&n!==window){if(c=[],l={},EVUI.Modules.Core.Utils.isArray(n)===!0)for(p=n.length,f=0;f<p;f++)u=f.toString(),l[u]=!0,c.push(u);else for(a=EVUI.Modules.Core.Utils.getProperties(n),w=a.length,f=0;f<w;f++)u=a[f],l[u]=!0,c.push(u);if(t.propDic!=null)for(f=0;f<t.numProps;f++)(u=t.propList[f],l[u]!==!0)&&c.push(u);for(b=c.length,f=0;f<b;f++){var u=c[f],v=!1,s=n[u],o=t.propDic[u];if(o==null&&(h=new EVUI.Modules.Observers.ObservedProperty,h.hostObject=n,h.name=u,h.path=t.path!=null?t.path+"."+u:u,h.originalValue=s,t.propDic==null&&(t.propDic={},t.propList=[]),i.setState===!0&&(t.propDic[u]=h,t.numProps=t.propList.push(u)),i.diffing===!0&&(e=new EVUI.Modules.Observers.ObservedChangedProperty,e.hostObject=h.hostObject,e.name=h.name,e.newValue=s,e.originalValue=undefined,e.path=h.path,e.type=EVUI.Modules.Observers.ObservedObjectChangeType.Added,i.changedProperties.push(e)),o=h,v=!0),i.diffing===!0&&v===!1&&s!==o.originalValue&&(e=new EVUI.Modules.Observers.ObservedChangedProperty,e.hostObject=o.hostObject,e.name=o.name,e.newValue=s,e.originalValue=o.originalValue,e.path=o.path,e.type=s===undefined?EVUI.Modules.Observers.ObservedObjectChangeType.Removed:EVUI.Modules.Observers.ObservedObjectChangeType.Changed,i.changedProperties.push(e)),i.setState===!0&&v===!1){if(s===undefined){delete t.propDic[u];y=t.propList.indexOf(u);y!==-1&&(t.propList.splice(y,1),t.numProps--);continue}else s!==o.originalValue&&(o.originalValue=s);o.hostObject!==n&&(o.hostObject=n)}if(s!=null&&typeof s=="object"){if(k=i.parentStack.indexOf(s),k!==-1)continue;i.parentStack.push(s);o.propDic==null&&(o.propDic={},o.propList=[]);r(s,o,i);i.parentStack.pop()}}}},u=function(){this.root=null;this.changedProperties=[];this.diffing=!1;this.setState=!1;this.parentStack=[];this.reset=function(){this.changedProperties.splice(0,this.changedProperties.length);this.diffing=!1;this.setState=!1;this.parentStack.splice(0,this.parentStack.length)}};if(n==null||typeof n!="object")throw Error("Cannot observe a null reference or non-object.");EVUI.Modules.Core.Utils.instanceOf(n,EVUI.Modules.Observers.ObservedProperty)===!0?(t=new u,t.root=n):f(n)};EVUI.Modules.Observers.ObservedObjectChangeType={None:"none",Added:"added",Removed:"removed",Changed:"changed"};Object.freeze(EVUI.Modules.Observers.ObservedObjectChangeType);EVUI.Modules.Observers.ObservedChangedProperty=function(){this.hostObject=null;this.name=null;this.originalValue=null;this.newValue=null;this.path=null;this.type=EVUI.Modules.Observers.ObservedObjectChangeType.None};EVUI.Modules.Observers.ObservedProperty=function(){this.hostObject=null;this.name=null;this.originalValue=null;this.path=null;this.propDic=null;this.propList=null;this.numProps=0};EVUI.Modules.Observers.ObservedProperty.prototype.getChild=function(n){var i;if(typeof n!="string")return null;var r=EVUI.Modules.Core.Utils.getValuePathSegments(n),u=r.length,t=this.propDic[r[0]];if(t==null)return null;for(i=1;i<u;i++)if(t=t.propDic[r[i]],t==null)return null;return t};EVUI.Modules.Observers.ObservedProperty.prototype.hasChanged=function(){return this.hostObject==null?!0:this.originalValue!==this.hostObject[this.name]};EVUI.Modules.Observers.ObservedProperty.prototype.haveChildrenChanged=function(n){var t,u,i,f;if(this.hostObject==null)return!0;if(this.numProps===0)return!1;var e=this.originalValue,r=EVUI.Modules.Core.Utils.getProperties(e),o=r.length;for(t=0;t<o;t++){if(u=r[t],i=this.propDic[u],i==null)return!0;if(n===!0){if(f=i.haveChildrenChanged(!0),f===!0)return!0}else if(i.hasChanged()===!0)return!0}return!1};EVUI.Modules.Observers.ObservedProperty.prototype.getCurrentValue=function(){return this.hostObject==null?undefined:this.hostObject[this.name]};EVUI.Modules.Observers.ArrayObserver=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Observers.Dependencies);var t=EVUI.Modules.Core.Utils.getHashCode(EVUI.Modules.Core.Utils.makeGuid()).toString(36),r={},u=null,i=[];this.getChanges=function(n){var t=f(u),r=h(i,t);return n===!0&&(i=t),r};var f=function(n){for(var r,t,u=[],f=n.length,i=0;i<f;i++)r=n[i],t=new a,t.index=i,t.value=r,t.key=c(r),u.push(t);return u},h=function(n,i){for(var f,lt,c,h,p,g,v,w,at,u,nt,a,tt,vt,b,et,ot,yt,st,k={},it={},ht={},rt=[],ut=[],d=[],y=[],ft=n.length,ct=i.length,r=0;r<ft;r++){if(u=n[r],u.key==null)if(Object.isExtensible(u.value)===!0)u.value[t]===undefined?(p=Math.random().toString(36),u.value[t]=p,u.key=p,rt.push(u)):u.key=u.value[t];else{f=o(u,ut);f==null&&(f=new s,f.value=u.value,ut.push(f));f.indexes[r]=u;f.items.push(u);f.numItems++;d.push(f);continue}f=k[u.key];f==null&&(f=new s,f.value=u.value,f.key=u.key,k[u.key]=f);f.items.push(u);f.indexes[r]=u;f.numItems++;d.push(f)}for(lt=ft>ct?ft:ct,r=0;r<lt;r++){if(c=i[r],h=null,c!=null&&(h=e(c.key,k),h==null&&(p=c.value[t],p!=null&&(h=e(p,k)),h==null&&(g=typeof c.value,(g==="object"||g==="function"||g==="symbol")&&(h=o(c,ut)))),h==null)){v=new EVUI.Modules.Observers.ArrayIndexChange;v.changeType=EVUI.Modules.Observers.ArrayChangeType.Added;v.newIndex=r;v.oldIndex=-1;v.value=c.value;y.push(v);it[r]=v;continue}if(h!=null){if(h.found=!0,w=l(h,c),w==null)continue;w.changeType===EVUI.Modules.Observers.ArrayChangeType.Added&&(it[r]=w);y.push(w)}}for(at=d.length,r=0;r<at;r++)if(u=d[r],u.found===!1)for(nt=0;nt<u.numItems;nt++)a=new EVUI.Modules.Observers.ArrayIndexChange,a.changeType=EVUI.Modules.Observers.ArrayChangeType.Removed,a.newIndex=-1,a.oldIndex=u.items[nt].index,a.value=u.value,y.push(a),ht[a.oldIndex]=a;for(tt=0,vt=y.length,r=0;r<vt;r++)(b=y[r],b.changeType===EVUI.Modules.Observers.ArrayChangeType.Moved)&&(et=it[r]!=null,ot=ht[r]!=null,et!==!0||ot!==!0)&&(et===!0&&tt++,ot===!0&&tt--,b.newIndex===b.oldIndex+tt&&(b.changeType=EVUI.Modules.Observers.ArrayChangeType.Shifted));for(yt=rt.length,r=0;r<yt;r++)st=rt[r],st.key=null,delete st.value[t];return y},e=function(n,t){return t==null?undefined:t[n]},o=function(n,t){for(var r,u=t.length,i=0;i<u;i++)if(r=t[i],r.value===n.value)return r;return null},c=function(n){var u=typeof n,t,i;return n===null?"null":n===undefined?"undefined":u==="object"||u==="symbol"||u==="function"?null:(n=n.toString(),t=u+"-"+n,t.length>43&&(i=r[t],i==null&&(i=EVUI.Modules.Core.Utils.getHashCode(t).toString(36),r[i]=t),t=i),t)},l=function(n,t){var i=new EVUI.Modules.Observers.ArrayIndexChange,r;if(i.newIndex=t.index,i.value=t.value,n.indexes[t.index]!=null){for(delete n.indexes[t.index],r=0;r<n.numItems;r++)n.items[r].index===t.index&&(n.items.splice(r,1),n.numItems--);return null}return n.numItems===0?(i.oldIndex=-1,i.changeType=EVUI.Modules.Observers.ArrayChangeType.Added,i):(i.oldIndex=n.items[0].index,i.changeType=EVUI.Modules.Observers.ArrayChangeType.Moved,n.items.splice(1,0),n.numItems--,delete n.indexes[i.oldIndex],i)},a=function(){this.index=-1;this.value=null;this.key=null},s=function(){this.value=null;this.key=null;this.indexes={};this.items=[];this.numItems=0;this.found=!1};if(EVUI.Modules.Core.Utils.isArray(n)===!1)throw Error("Array expected.");u=n;i=f(n)};EVUI.Modules.Observers.ArrayChangeType={None:"none",Added:"add",Removed:"remove",Moved:"move",Shifted:"shift"};Object.freeze(EVUI.Modules.Observers.ArrayChangeType);EVUI.Modules.Observers.ArrayIndexChange=function(){this.oldIndex=-1;this.newIndex=-1;this.value=null;this.changeType=EVUI.Modules.Observers.ArrayChangeType.None};$evui.observe=function(n){return new EVUI.Modules.Observers.ObjectObserver(n)};$evui.observeArray=function(n){return new EVUI.Modules.Observers.ArrayObserver(n)};EVUI.Modules.Panes={};EVUI.Modules.Panes.Constants={};EVUI.Modules.Panes.Constants.Fn_PaneSelector=function(){return!0};EVUI.Modules.Panes.Constants.Fn_PaneEntrySelector=function(){return!0};EVUI.Modules.Panes.Constants.Fn_LoadCallback=function(){};EVUI.Modules.Panes.Constants.Fn_PaneOperationCallback=function(){};EVUI.Modules.Panes.Constants.CSS_Position="evui-position";EVUI.Modules.Panes.Constants.CSS_ClippedX="evui-clipped-x";EVUI.Modules.Panes.Constants.CSS_ClippedY="evui-clipped-y";EVUI.Modules.Panes.Constants.CSS_ScrollX="evui-scroll-x";EVUI.Modules.Panes.Constants.CSS_ScrollY="evui-scroll-y";EVUI.Modules.Panes.Constants.CSS_Flipped="evui-flipped";EVUI.Modules.Panes.Constants.CSS_Moved="evui-moved";EVUI.Modules.Panes.Constants.CSS_Resized="evui-resized";EVUI.Modules.Panes.Constants.CSS_Backdrop="evui-backdrop";EVUI.Modules.Panes.Constants.CSS_Transition_Show="evui-transition-show";EVUI.Modules.Panes.Constants.CSS_Transition_Hide="evui-transition-hide";EVUI.Modules.Panes.Constants.CSS_Transition_Adjust="evui-transition-adjust";EVUI.Modules.Panes.Constants.Attribute_ID="evui-pane-id";EVUI.Modules.Panes.Constants.Attribute_Focus="evui-pane-focus";EVUI.Modules.Panes.Constants.Attribute_Close="evui-pane-close";EVUI.Modules.Panes.Constants.Attribute_Drag="evui-pane-drag-handle";EVUI.Modules.Panes.Constants.Attribute_SourceURL="evui-pane-src";EVUI.Modules.Panes.Constants.Attribute_PlaceholderID="evui-pane-placeholder-id";EVUI.Modules.Panes.Constants.Attribute_UnloadOnHide="evui-pane-unload";EVUI.Modules.Panes.Constants.Attribute_Context="evui-pane-cxt";EVUI.Modules.Panes.Constants.Attribute_Selector="evui-pane-selector";EVUI.Modules.Panes.Constants.Attribute_ShowSettings="evui-pane-show-settings";EVUI.Modules.Panes.Constants.Event_OnShow="evui.pane.onshow";EVUI.Modules.Panes.Constants.Event_OnHide="evui.pane.onhide";EVUI.Modules.Panes.Constants.Event_OnUnload="evui.pane.onunload";EVUI.Modules.Panes.Constants.Event_OnLoad="evui.pane.onload";EVUI.Modules.Panes.Constants.Event_OnShown="evui.pane.onshown";EVUI.Modules.Panes.Constants.Event_OnOnHidden="evui.pane.onhidden";EVUI.Modules.Panes.Constants.Event_OnLoaded="evui.pane.onloaded";EVUI.Modules.Panes.Constants.Event_OnUnloaded="evui.pane.onunloaded";EVUI.Modules.Panes.Constants.Event_OnInitialize="evui.pane.oninit";EVUI.Modules.Panes.Constants.Event_OnPosition="evui.pane.onposition";EVUI.Modules.Panes.Constants.Job_OnComplete="evui.pane.oncomplete";EVUI.Modules.Panes.Constants.Default_ObjectName="Pane";EVUI.Modules.Panes.Constants.Default_ManagerName="PaneManager";EVUI.Modules.Panes.Constants.Default_CssPrefix="evui-pane";EVUI.Modules.Panes.Constants.Default_EventNamePrefix="evui.pane";EVUI.Modules.Panes.Constants.Default_AttributePrefix="evui-pane";EVUI.Modules.Panes.Constants.GlobalZIndex=null,function(){var n=null;Object.defineProperty(EVUI.Modules.Panes.Constants,"GlobalZIndex",{get:function(){return n},set:function(t){typeof t=="number"&&(n=t<0?0:t)},configurable:!1,enumerable:!0})}();Object.freeze(EVUI.Modules.Panes.Constants);EVUI.Modules.Panes.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0}),Styles:Object.freeze({version:"1.0",required:!0}),Dom:Object.freeze({version:"1.0",required:!0}),Observers:Object.freeze({version:"1.0",required:!0}),HtmlLoader:Object.freeze({version:"1.0",required:!1}),Http:Object.freeze({version:"1.0",required:!1})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Panes.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Panes.Dependencies);EVUI.Modules.Panes.PaneManager=function(n){var k;if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Panes.Dependencies);EVUI.Modules.Panes.Constants.GlobalZIndex==null&&(k=EVUI.Modules.Core.Utils.getSetting("defaultMinimumZIndex"),typeof k!="number"&&(k=100),EVUI.Modules.Panes.Constants.GlobalZIndex=k);var i=this,ki=0,o=[],t=n,di=typeof n=="function"?n:EVUI.Modules.Panes.PaneManager,gi=function(){this.pane=null;this.wrapper=null;this.paneCSSName=null;this.eventStream=null;this.paneStateFlags=EVUI.Modules.Panes.PaneStateFlags.None;this.paneAction=EVUI.Modules.Panes.PaneAction.None;this.paneActionSequence=[];this.eventBindings=[];this.manager=null;this.setSecret=EVUI.Modules.Core.Utils.makeGuid();this.callbackStack=[];this.lastCalculatedPosition=null;this.lastShowSettings=null;this.lastLoadSettings=null;this.lastResizeArgs=null;this.transitionTimeoutID=-1;this.transitionSelector=null;this.transitionCallback=null},gf=function(){this.element=null;this.paneID=null;this.setSecret=null},nr=function(){this.link=null;this.canSetElement=vt},tr=function(){this.lowerPaneID=null;this.paneID=null;this.publicEntry=null;this.link=null},ir=function(){this.opSessions=[];this.action=EVUI.Modules.Panes.PaneAction.None},rr=function(){this.exists=!1;this.entry=null;this.pane=null},d=function(){this.sessionID=EVUI.Modules.Core.Utils.makeGuid();this.entry=null;this.action=null;this.currentAction=null;this.callback=null;this.showArgs=null;this.loadArgs=null;this.hideArgs=null;this.unloadArgs=null;this.cancel=!1;this.continue=!1;this.canceled=!1;this.continuedTo=null;this.callbackOrdinal=ki++;this.foreignActionArgs=null;this.makeArgsPackage=function(n){var i=new EVUI.Modules.Panes.PaneArgsPackage(n);return i.foreignArgs=this.foreignActionArgs,i.foreignArgs==null&&t.managerName!==EVUI.Modules.Panes.Constants.Default_ManagerName&&EVUI.Modules.Core.Utils.wrapProperties(i,this,{sourcePath:"foreignActionArgs",targetPath:"foreignActionArgs"}),i.hideArgs=this.hideArgs,i.loadArgs=this.loadArgs,i.showArgs=this.showArgs,i.unloadArgs=this.unloadArgs,i.action=this.action,i.currentAction=this.currentAction,i.context=n,i.pane=this.entry.link.pane,i.wrapper=this.entry.link.wrapper,i.lastCalculatedPosition=this.entry.link.lastCalculatedPosition,i}},r={None:"none",Initialize:"init",Load:"load",Show:"show",Hide:"hide",Unload:"unload",Position:"position",CancelCurrent:"cancel",Continue:"continue",Queue:"queue"},ur=function(){var a=this,v=function(n,t){this.objectName=n;this.zIndex=t},y=EVUI.Modules.Core.Utils.makeGuid(),n=null,u=null,o=-1,s=null,r=null,i=EVUI.Modules.Styles.Constants.DefaultStyleSheetName,f=[];this.showBackdrop=function(n,t,i,u){if(typeof u!="function"&&(u=function(){}),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0||typeof t!="number")return u(!1);this.cancelTransition();var e=h(n);e==null?f.push(new v(n,t)):e.zIndex=t;r=n;w(i,t);c(i.backdropShowTransition,EVUI.Modules.Panes.Constants.CSS_Transition_Show,function(n){u(n)})};this.setBackdropZIndex=function(){var n=h(r),u=p(n);u!=null&&(t.stylesheetManager.removeRules(i,e(n.objectName)),t.stylesheetManager.setRules(i,e(r),{zIndex:u.zIndex}))};this.hideBackdrop=function(n,t,i){if(typeof i!="function"&&(i=function(){}),t==null)return i(!1);this.cancelTransition();r=n;c(t.backdropHideTransition,EVUI.Modules.Panes.Constants.CSS_Transition_Hide,function(t){var u=h(n),r=f.indexOf(u);r!==-1&&f.splice(r,1);b();i(t)})};this.cancelTransition=function(){if(o!==-1)try{typeof s=="function"&&s()}catch(n){EVUI.Modules.Core.Utils.log(n.stack)}finally{clearTimeout(o);s=null;o=-1}};var h=function(n){for(var i,r=f.length,t=0;t<r;t++)if(i=f[t],i.objectName===n)return i;return null},p=function(n){for(var t,r,u=null,e=Number.MAX_VALUE,o=f.length,i=0;i<o;i++)(t=f[i],t!==n)&&(r=n.zIndex-t.zIndex,r<e&&(u=t,e=r));return u},w=function(n,f){var h,o,s;if(n==null||n.showBackdrop===!1)return!1;(t.stylesheetManager.ensureSheet(i,{lock:!0}),l(),h={position:"fixed",top:"0px",left:"0px",height:"100vh",width:"100vw",backgroundColor:typeof n.backdropColor=="string"?n.backdropColor:"#000000",opacity:typeof n.backdropOpacity=="number"?n.backdropOpacity:.75,zIndex:f},t.stylesheetManager.setRules(i,e(r),h),u.addClass([EVUI.Modules.Panes.Constants.CSS_Backdrop,r]),n.backdropCSS!=null)&&(o=e(r),typeof n.backdropCSS=="string"?(s=n.backdropCSS.match(/[\;\:]/g),s!=null&&s.length>0?t.stylesheetManager.setRules(i,o,n.backdropCSS):u.addClass(n.backdropCSS)):t.stylesheetManager.setRules(i,o,n.backdropCSS))},b=function(){var u,f,o;for(t.stylesheetManager.ensureSheet(i,{lock:!0}),l(),u={position:"absolute",top:"0px",left:"0px",height:"0px",width:"0px"};n.classList.length>0;)f=n.classList[0],n.classList.remove(f);n.classList.add(EVUI.Modules.Panes.Constants.CSS_Backdrop);o=e(r);t.stylesheetManager.removeRules(i,[o,EVUI.Modules.Panes.Constants.CSS_Backdrop]);t.stylesheetManager.setRules(i,EVUI.Modules.Panes.Constants.CSS_Backdrop,u)},c=function(n,f,h){var c,l;if(typeof h!="function"&&(h=function(){}),n==null)return h(!1);c=e(r)+"."+f;n.keyframes!=null&&t.stylesheetManager.setRules(i,n.keyframes);typeof n.css=="string"?(l=n.css.match(/[\;\:]/g),l!=null&&l.length>0?(t.stylesheetManager.setRules(i,c,n.css),u.addClass([f,r])):(f=n.css,u.addClass([n.css,r]))):(t.stylesheetManager.setRules(i,c,n.css),u.addClass([f,r]));s=function(){u.removeClass([f]);t.stylesheetManager.removeRules(i,c);h(!0)};o=setTimeout(function(){a.cancelTransition()},n.duration)},e=function(n){return"."+n+"."+EVUI.Modules.Panes.Constants.CSS_Backdrop},l=function(){n==null&&(n=document.createElement("div"),n.classList.add(EVUI.Modules.Panes.Constants.CSS_Backdrop),n.id=y,u=new EVUI.Modules.Dom.DomHelper(n));n.isConnected===!1&&(n.parentElement!=null&&n.remove(),document.body.appendChild(n))}};this.addPane=function(n){if(n==null)throw Error(t.objectName+" cannot be null.");var i=yt(n,!0);if(i.exists===!0)throw Error("A "+t.objectName+' with an id of "'+i.pane.id+'" already exists.');return i.entry.publicEntry.pane};this.removePane=function(n){var t,i,r;return n==null?!1:(t=null,typeof n=="string"&&(t=n),t=n.id,typeof t!="string")?!1:(i=c(t),i!=null&&(r=o.indexOf(i),r!==-1&&o.splice(r,1)),!0)};this.getPane=function(n,t){var u,f,e,i,r;if(typeof n=="string")return u=c(n),u!=null?u.publicEntry.pane:null;if(typeof n=="function"){for(f=[],e=o.length,i=0;i<e;i++)if(r=o[i],n(r.publicEntry.pane)===!0)if(t===!0)f.push(r.publicEntry.pane);else return r.publicEntry.pane;return f}return null};this.showPane=function(n,t,i){var u=y(n,!0),r;typeof t=="function"?(i=paneShowSettings,t=null):t!=null&&typeof t=="object"?(t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneShowArgs,t,["type"]),t.showSettings!=null?t.showSettings instanceof EVUI.Modules.Panes.PaneShowSettings==!1&&(t.showSettings=a(t.showSettings)):t.showSettings=a(u.link.pane.showSettings),t.loadArgs!=null&&t.loadArgs.loadSettings!=null?t.loadArgs.loadSettings instanceof EVUI.Modules.Panes.PaneLoadSettings==!1&&(t.loadArgs.loadSettings=p(t.loadArgs.loadSettings)):(t.loadArgs=new EVUI.Modules.Panes.PaneLoadArgs,t.loadArgs.loadSettings=p(u.link.pane.loadSettings))):t=null;t==null&&(t=new EVUI.Modules.Panes.PaneShowArgs,t.showSettings=a(u.link.pane.showSettings),t.loadArgs=new EVUI.Modules.Panes.PaneLoadArgs,t.loadArgs.loadSettings=p(u.link.pane.loadSettings));r=new d;r.entry=u;r.action=EVUI.Modules.Panes.PaneAction.Show;r.currentAction=EVUI.Modules.Panes.PaneAction.Show;r.callback=typeof i=="function"?i:function(){};r.showArgs=t;r.loadArgs=t.loadArgs;g(r)};this.showPaneAsync=function(n,t){return new Promise(function(r){i.showPane(n,t,function(n){r(n)})})};this.hidePane=function(n,t,i){var u=y(n,!1),r;typeof t=="function"?(i=t,t=null):t!=null&&typeof t=="object"?(t instanceof EVUI.Modules.Panes.PaneHideArgs==!1&&(t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneHideArgs,t,["type"])),t.unloadArgs instanceof EVUI.Modules.Panes.PaneUnloadArgs==!1&&(t.unloadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneUnloadArgs,t.unloadArgs))):t=null;t==null&&(t=new EVUI.Modules.Panes.PaneHideArgs,t.unloadArgs=new EVUI.Modules.Panes.PaneUnloadArgs);r=new d;r.entry=u;r.action=EVUI.Modules.Panes.PaneAction.Hide;r.currentAction=EVUI.Modules.Panes.PaneAction.Hide;r.callback=typeof i=="function"?i:function(){};r.hideArgs=t;r.unloadArgs=t.unloadArgs;g(r)};this.hidePaneAsync=function(n,t){return new Promise(function(r){i.hidePane(n,t,function(n){r(n)})})};this.hideAllPanes=function(n,t){var i;typeof t!="function"&&(t=function(){});var u=this.getPane(function(n){return n.isVisible}),r=u.length,f=0;if(r===0)return t(!0);for(i=0;i<r;i++)this.hidePane(u[i],n,function(){return f++,f===r?t(!0):void 0})};this.hideAllPanesAsync=function(n){return new Promise(function(t){i.hideAllPanes(n,function(n){t(n)})})};this.loadPane=function(n,t,i){var u=y(n,!0),r;typeof t=="function"?(i=t,t=null):t!=null&&typeof t=="object"?(t instanceof EVUI.Modules.Panes.PaneLoadArgs==!1&&(t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneLoadArgs,t,["type"])),t.loadSettings!=null&&t.loadSettings instanceof EVUI.Modules.Panes.PaneLoadSettings==!1&&(t.loadSettings=p(t.loadSettings))):t=null;t==null&&(t=new EVUI.Modules.Panes.PaneLoadArgs,t.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneLoadSettings,u.link.pane.loadSettings));r=new d;r.entry=u;r.action=EVUI.Modules.Panes.PaneAction.Load;r.currentAction=EVUI.Modules.Panes.PaneAction.Load;r.callback=typeof i=="function"?i:function(){};r.loadArgs=t;g(r)};this.loadPaneAsync=function(n,t){return new Promise(function(r){i.loadPane(n,t,function(n){r(n)})})};this.unloadPane=function(n,t,i){var u=y(n,!1),r;typeof t=="function"?(i=t,t=null):t!=null&&typeof t=="object"?unloadPaneArgs instanceof EVUI.Modules.Panes.PaneUnloadArgs==!1&&(t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneUnloadArgs,t,["type"])):t=null;t==null&&(t=new EVUI.Modules.Panes.PaneUnloadArgs);r=new d;r.entry=u;r.action=EVUI.Modules.Panes.PaneAction.Unload;r.currentAction=EVUI.Modules.Panes.PaneAction.Unload;r.callback=typeof i=="function"?i:function(){};r.unloadArgs=t;g(r)};this.unloadPaneAsync=function(n,t){return new Promise(function(r){i.unloadPane(n,t,function(n){r(n)})})};this.createNewPaneManager=function(n){return n==null&&(n=new EVUI.Modules.Panes.PaneManagerSettings),df(n),new di(n)};this.onLoad=function(){};this.onLoaded=function(){};this.onInitialize=function(){};this.onShow=function(){};this.onPosition=function(){};this.onShown=function(){};this.onHide=function(){};this.onHidden=function(){};this.onUnload=function(){};this.onUnloaded=function(){};var y=function(n,r){var u,f,e;if(n==null||typeof n!="string"&&typeof n!="object")throw Error("Invalid input: "+t.objectName+" or string id expected.");if(n instanceof Event&&(n=fr(n)),u=n,typeof n=="object"&&(u=n.id),typeof u!="string")throw Error("Invalid input: "+t.objectName+" missing id.");if(f=c(u),f==null){if(typeof n=="string"||r!==!0)throw Error("No "+t.objectName+' with an id of "'+u+'" exists.');if(e=i.addPane(n),e==null)throw Error("Failed to add "+t.objectName+' with an id of "'+n+'".');f=c(u)}else typeof n=="object"&&yt(n,r);return f},fr=function(n){var i={},r=EVUI.Modules.Core.Utils.getElementAttributes(n.currentTarget),e=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_ID)),o,s,h,c,l,a,u;return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(e)===!0&&(e=er(n,r)),i.id=e,o=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_SourceURL)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(o)===!1&&(i.loadSettings==null&&(i.loadSettings={}),i.loadSettings.httpLoadArgs={},i.loadSettings.httpLoadArgs.url=o,i.loadSettings.httpLoadArgs.method="GET"),s=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_PlaceholderID)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)===!1&&(i.loadSettings==null&&(i.loadSettings={}),i.loadSettings.placeholderLoadArgs=new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,i.loadSettings.placeholderLoadArgs.placeholderID=s),h=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_Context)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(h)===!1&&(i.context=h),c=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_Selector)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(c)===!1&&(i.loadSettings==null&&(i.loadSettings={}),i.loadSettings.selector=c),l=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_UnloadOnHide)),l==="true"&&(i.unloadOnHide=!0),l==="false"&&(i.unloadOnHide=!1),t.interpretBrowserEvent(i,n)===!1&&(a=r.getValue(f(EVUI.Modules.Panes.Constants.Attribute_ShowSettings)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(a)===!1&&(u=or(a),u.relativePosition!=null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u.relativePosition.relativeElement)===!0&&(u.relativePosition.relativeElement=n.currentTarget),u!=null&&(i.showSettings=u))),i},er=function(n,t){var h=f(EVUI.Modules.Panes.Constants.Attribute_SourceURL),c=f(EVUI.Modules.Panes.Constants.Attribute_PlaceholderID),l=f(EVUI.Modules.Panes.Constants.Attribute_Selector),y=f(EVUI.Modules.Panes.Constants.Attribute_ID),r=[],u=null,e=null,p=t.getValue(h),w=t.getValue(c),a=t.getValue(l),b,o,g;EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(p)===!1?(r=document.querySelectorAll("[ "+h+" ]"),e=h,u=p):EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(w)===!1?(r=document.querySelectorAll("[ "+c+" ]"),e=c,u=w):EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(a)===!1&&(b=document.querySelectorAll(a),b.length==1&&(r=document.querySelectorAll("[ "+l+" ]"),e=l,u=a));var k=[n.currentTarget],u=EVUI.Modules.Core.Utils.stringNormalize(u),i=null,nt=r.length;for(o=0;o<nt;o++){var v=r[o],d=v.getAttribute(e),s=v.getAttribute(y);if((i==null||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)!==!1||s===i)&&typeof d=="string"&&EVUI.Modules.Core.Utils.stringNormalize(d)===u){if(i==null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)===!1){i=s;continue}k.push(v)}}return i==null&&(i=EVUI.Modules.Core.Utils.makeGuid()),g=new EVUI.Modules.Dom.DomHelper(k),g.attr(y,i),i},f=function(n){var i=n.toLowerCase();return EVUI.Modules.Core.Utils.stringStartsWith(EVUI.Modules.Panes.Constants.Default_AttributePrefix,i)===!0?t.attributePrefix+n.substring(EVUI.Modules.Panes.Constants.Default_AttributePrefix.length):n},or=function(n){var s=sr(n),o,r,u,i,t,f,h,c,l,e;if(s==null)return null;for(o={},r=[],EVUI.Modules.Core.Utils.stringEndsWith(";",n)===!1&&(n+=";"),u=0,i=0;i<n.length;){if(t=n.indexOf(";",i),t===-1)break;if(hr(s,t)===!0){i=t+1;continue}if(f=n.indexOf(":",u),f===-1)break;h=n.substring(u,f);c=n.substring(f+1,t);r.push({name:h.trim(),value:c.trim()});i=t+1;u=t+1}for(l=r.length,e=0;e<l;e++)cr(o,r[e]);return o},sr=function(n){for(var e=n.indexOf('"')===-1?"'":'"',f=[],u=0,r=-1,i;u<n.length;){if(i=n.indexOf(e,u),i===-1)break;if(i>0&&n[i-1]==="\\"){u=i+1;continue}r===-1?r=i:(f.push({start:r,end:i}),r=-1);u=i+1}return r!==-1?EVUI.Modules.Core.Utils.debugReturn(t.managerName,"getQuoteSpans","Invalid settings string, unclosed quote starting at position "+r,null):f},hr=function(n,t){for(var r,u=n.length,i=0;i<u;i++)if(r=n[i],t>r.start&&t<r.end)return!0;return!1},cr=function(n,i){for(var u,o,h,f=i.name.split("."),s=f.length,r=n,e=0;e<s-1;e++)u=f[e],r[u]==null&&(r[u]={}),r=r[u];o=i.value.replace(/'|\\'/g,'"');try{h=JSON.parse(o);r[f[s-1]]=h}catch(c){EVUI.Modules.Core.Utils.debugReturn(t.managerName,"assignSetting",'Could not parse setting value "'+o+'" from JSON: '+c.message)}},c=function(n){var r,t,i;for(n=n.toLocaleLowerCase(),r=o.length,t=0;t<r;t++)if(i=o[t],i.lowerPaneID===n)return i;return null},vt=function(n){var t=c(n.paneID);if(t==null)throw Error('Failed to set element for pane "'+n.paneID+'":  No PaneEntry found for Pane with ID of "'+n.paneID+'".');if(EVUI.Modules.Core.Utils.hasFlag(t.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded))throw Error('Failed to set element for pane "'+n.paneID+'": Pane has been loaded. Unload it before attempting to set element.');if(n.element!=null&&EVUI.Modules.Core.Utils.isElement(n.element)!==!0)throw Error('Failed to set element for pane "'+n.paneID+'": The provided value is invalid. Value must be an object derived from Element.');return t.link.setSecret!==n.setSecret&&Error('Failed to set element for pane "'+n.paneID+'": Permission denied, tokens do not match.'),t.link.setSecret},lr=function(n){var i=new RegExp(/\s+/g),r=t.cssPrefix+(EVUI.Modules.Core.Utils.stringEndsWith(t.cssPrefix.trim(),"-")?"":"-")+n;return r.replace(i,"")},yt=function(n,r){var s,y,b,h,f;if(n==null)return null;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.id)===!0)throw Error("Pane must have an id that is a non-whitespace string.");var e=new rr,l=n.id,w=null,u=null,v=c(l);if(v!=null){if(e.exists=!0,e.entry=v,e.pane=v.link.pane,w=v.link.eventStream,u=v.link.pane,n===u)return e}else s=new gi,s.eventStream=new EVUI.Modules.EventStream.EventStream,w=s.eventStream,s.manager=i,s.paneCSSName=lr(l),y=new nr,y.canSetElement=vt,y.link=s,u=new EVUI.Modules.Panes.Pane(l,y),s.pane=u,b=new EVUI.Modules.Panes.PaneEntry(s),h=new tr,h.publicEntry=b,h.link=s,h.paneID=l,h.lowerPaneID=l.toLocaleLowerCase(),e.pane=u,e.exists=!1,e.entry=h,r===!0&&o.push(h);return f=EVUI.Modules.Core.Utils.shallowExtend({},n),delete f.id,n.element===e.entry.link.pane.element&&delete f.element,delete f.currentPosition,delete f.currentZIndex,delete f.isVisible,delete f.isLoaded,delete f.isInitialized,EVUI.Modules.Core.Utils.shallowExtend(u,f,["showSettings","loadSettings","resizeMoveSettings","autoCloseSettings","recalcSettings"]),u.showSettings=a(u.showSettings,f.showSettings),u.loadSettings=p(u.loadSettings,f.loadSettings),u.resizeMoveSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneResizeMoveSettings,u.resizeMoveSettings,f.resizeMoveSettings),u.autoCloseSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneAutoCloseSettings,u.autoCloseSettings,f.autoCloseSettings),u.autoCloseSettings.autoCloseKeys=u.autoCloseSettings.autoCloseKeys.slice(),u.reclacSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneRecalcSettings,u.reclacSettings,f.reclacSettings),EVUI.Modules.Core.Utils.isArray(f.autoHideKeys)===!0&&(u.autoHideKeys=f.autoHideKeys.slice()),typeof t.makeOrExtendObject=="function"&&(e.entry.link.wrapper=t.makeOrExtendObject(e)),e},a=function(n,t){if(n==null)return new EVUI.Modules.Panes.PaneShowSettings;var i=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneShowSettings,n,t);return t==null&&(t={}),i.anchors!=null&&(i.anchors=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneAnchors,n.anchors,t.anchors)),i.absolutePosition!=null&&(i.absolutePosition=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneAbsolutePosition,n.absolutePosition,t.absolutePosition)),i.documentFlow!=null&&(i.documentFlow=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneDocumentFlow,n.documentFlow,t.documentFlow)),i.hideTransition!=null&&(i.hideTransition=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneTransition,n.hideTransition,t.hideTransition)),i.showTransition!=null&&(i.showTransition=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneTransition,n.showTransition,t.showTransition)),i.relativePosition!=null&&(i.relativePosition=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneRelativePosition,n.relativePosition,t.relativePosition)),i.clipSettings!=null&&(i.clipSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneClipSettings,n.clipSettings,t.clipSettings)),i.backdropSettings!=null&&(i.backdropSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneBackdropSettings,n.backdropSettings,t.backdropSettings)),i},p=function(n,t){if(n==null)return new EVUI.Modules.Panes.PaneLoadSettings;var i=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Panes.PaneLoadSettings,n,t);return t==null&&(t={}),(n.httpLoadArgs!=null||t.httpLoadArgs!=null)&&(EVUI.Modules.Core.Utils.require("Http",EVUI.Modules.Panes.Dependencies.Http.version,"Cannot use httpLoadArgs."),i.httpLoadArgs=pt(n.httpLoadArgs,t.httpLoadArgs)),(n.placeholderLoadArgs!=null||t.placeholderLoadArgs!=null)&&(EVUI.Modules.Core.Utils.require("HtmlLoader",EVUI.Modules.Panes.Dependencies.HtmlLoader.version,"Cannot use placeholderLoadArgs."),i.placeholderLoadArgs=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,n.placeholderLoadArgs,t.placeholderLoadArgs),i.placeholderLoadArgs.httpArgs=pt(n.placeholderLoadArgs==null?null:n.placeholderLoadArgs.httpArgs,t.placeholderLoadArgs==null?null:n.placeholderLoadArgs.httpArgs)),i},pt=function(n,t){var i=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.Http.HttpRequestArgs,n,t);return i.headers=i.headers==null?[]:i.headers.map(function(n){return EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestHeader,n)}),i},ar=function(n){var t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneShowSettings,n);return n.absolutePosition!=null&&(t.absolutePosition=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneAbsolutePosition,n.absolutePosition)),n.anchors!=null&&(t.anchors=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneAnchors,n.anchors)),n.documentFlow!=null&&(t.documentFlow=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneDocumentFlow,n.documentFlow)),n.hideTransition!=null&&(t.hideTransition=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneTransition,n.hideTransition)),n.showTransition!=null&&(t.showTransition=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneTransition,n.showTransition)),n.relativePosition!=null&&(t.relativePosition=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneRelativePosition,n.relativePosition)),n.clipSettings!=null&&(t.clipSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneClipSettings,n.clipSettings)),n.backdropSettings!=null&&(t.backdropSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneBackdropSettings,n.backdropSettings)),t},vr=function(n){var t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PaneLoadSettings,n);return n.httpLoadArgs!=null&&(EVUI.Modules.Core.Utils.require("Http",EVUI.Modules.Panes.Dependencies.HtmlLoader.version,"Cannot use httpLoadArgs."),t.httpLoadArgs=wt(n.httpLoadArgs)),n.placeholderLoadArgs!=null&&(EVUI.Modules.Core.Utils.require("HtmlLoaderController",EVUI.Modules.Panes.Dependencies.HtmlLoader.version,"Cannot use placeholderLoadArgs."),t.placeholderLoadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadArgs,n.placeholderLoadArgs),t.placeholderLoadArgs.httpArgs=wt(t.placeholderLoadArgs.httpArgs)),t},wt=function(n){var t=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestArgs,n);return t.headers=n.headers==null?[]:n.headers.map(function(n){return EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Http.HttpRequestHeader,n)}),t},bt=function(n,t){var u,f,e,i,r;if(typeof n=="string")return u=c(n),u!=null?u.publicEntry:null;if(typeof n=="function"){for(f=[],e=o.length,i=0;i<e;i++)if(r=o[i],n(r.publicEntry)===!0)if(t===!0)f.push(r.publicEntry);else return r.publicEntry;return f}return null},g=function(n){var u,i,f;if(n.foreignActionArgs=t.currentActionArgs,t.currentActionArgs=null,u=s(n.entry.link,n.action),u==null&&(u=new ir,u.action=n.action,n.entry.link.callbackStack.push(u)),u.opSessions.indexOf(n)===-1&&u.opSessions.push(n),i=eu(n),i=fu(i,n),i==null||i.length===0)return w(n.entry.link,n.action,!0);i[0]!==r.Queue&&(n.cancel=i[0]===r.CancelCurrent,n.continue=i[0]===r.Continue,f=br(i,n),n.cancel===!0?yr(f,i,n):n.continue===!0?pr(f,i,n):wr(f,i,n))},yr=function(n,i,r){kt(r.entry.link,r.entry.link.paneAction);try{r.entry.link.transitionTimeoutID!==-1&&typeof r.entry.link.transitionCallback=="function"&&(r.entry.link.transitionCallback(),r.entry.link.transitionTimeoutID=-1,r.entry.link.transitionCallback=null,r.entry.link.transitionSelector=null);t.backdropManager.cancelTransition()}catch(f){EVUI.Modules.Core.Utils.log(f.stack)}if(r.entry.link.eventStream.isWorking()===!0&&r.entry.link.eventStream.getStatus()!==EVUI.Modules.EventStream.EventStreamStatus.Seeking)r.entry.link.eventStream.cancel(),r.entry.link.paneActionSequence=i,r.entry.link.paneAction=r.action,r.entry.link.eventStream.onComplete=function(){r.entry.link.eventStream=n;n.execute()};else{var u=r.entry.link.eventStream.getCurrentStep();u!=null&&u.key!=="pane.oncomplete"&&r.entry.link.eventStream.seek("pane.oncomplete");w(r.entry.link,r.entry.link.paneAction,!1,function(){r.entry.link.paneActionSequence=i;r.entry.link.paneAction=r.action;r.entry.link.eventStream.isWorking()===!1?setTimeout(function(){var t=s(r.entry.link,r.action);t!=null&&t.opSessions.filter(function(n){return n===r&&n.canceled===!0}).length===0&&(r.entry.link.eventStream=n,n.execute())}):r.entry.link.eventStream.onComplete=function(){r.entry.link.eventStream=n;n.execute()}})}},pr=function(n,i,r){var f=r.entry.link.paneAction,u=s(r.entry.link,f),e,o;u!=null&&u.opSessions.length>0&&(u.opSessions[u.opSessions.length-1].continuedTo=r);e=r.entry.link.eventStream.getStep(t.eventNamePrefix+".oncomplete");e.handler=function(n){n.resolve()};o=n.getStep(t.eventNamePrefix+".oncomplete");o.handler=function(n){w(r.entry.link,r.action,!0,function(){w(r.entry.link,f,!0,function(){n.resolve()})})};r.entry.link.eventStream.onComplete=function(){var t=s(r.entry.link,r.action);t!=null&&t.opSessions.filter(function(n){return n===r&&n.canceled===!0}).length===0&&(r.entry.link.eventStream=n,n.execute())}},wr=function(n,t,i){i.entry.link.eventStream=n;i.entry.link.paneActionSequence=t;i.entry.link.paneAction=i.action;setTimeout(function(){var t=s(i.entry.link,i.action);t!=null&&t.opSessions.filter(function(n){return n===i&&n.canceled===!0}).length===0&&n.execute()})},kt=function(n,t){var u=s(n,t),f,i,r;if(u!=null)for(f=u.opSessions.length,i=0;i<f;i++)r=u.opSessions[i],r.canceled=!0,r.continuedTo!=null&&kt(n,r.continuedTo.action)},br=function(n,t){var i=new EVUI.Modules.EventStream.EventStream,e,f,u;for(i.context=t.entry.link.wrapper,i.context==null&&(i.context=t.entry.link.pane),kr(i,t),e=n.length,f=0;f<e;f++)u=n[f],u===r.Initialize?nu(i,t):u===r.Load?gr(i,t):u===r.Show?tu(i,t):u===r.Position?dt(i,t):u===r.Hide?iu(i,t):u===r.Unload&&uu(i,t);return ru(i,t),i},kr=function(n,i){n.canSeek=!0;n.endExecutionOnEventHandlerCrash=!1;var r=null;n.processInjectedEventArgs=function(n){var u,f;return(r=dr(i),u=new EVUI.Modules.Panes.PaneEventArgs(i.entry,r),u.cancel=n.cancel,u.key=n.key,u.pause=n.pause,u.resume=n.resume,u.stopPropagation=n.stopPropagation,u.context=r.context,f=t.buildEventArgs(i.makeArgsPackage(r.context),u),f!=null)?f:u};n.processReturnedEventArgs=function(n){r.context=n.context;t.processReturnedEventArgs(i.makeArgsPackage(r.context),n)};n.onCancel=function(){n.seek(t.eventNamePrefix+".oncomplete")};n.onError=function(){n.seek(t.eventNamePrefix+".oncomplete")}},dr=function(n){var t=null;return n.currentAction===EVUI.Modules.Panes.PaneAction.Show?t=n.showArgs:n.currentAction===EVUI.Modules.Panes.PaneAction.Hide?t=n.hideArgs:n.currentAction===EVUI.Modules.Panes.PaneAction.Load&&(t=n.loadArgs,n.loadArgs.context==null&&n.showArgs!=null&&(n.loadArgs.context=n.showArgs.context)),n.currentAction===EVUI.Modules.Panes.PaneAction.Unload&&(t=n.unloadArgs,n.unloadArgs.context==null&&n.hideArgs!=null&&(n.unloadArgs.context=n.hideArgs.context)),t},gr=function(n,r){var u=!1;n.addStep({name:"preload",key:t.eventNamePrefix+".preload",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){r.currentAction=EVUI.Modules.Panes.PaneAction.Load;r.entry.link.pane.element!=null&&r.entry.link.pane.element.isConnected===!0&&(r.entry.link.paneStateFlags|=EVUI.Modules.Panes.PaneStateFlags.Loaded,u=!0);n.resolve()}});n.addStep({name:"onLoad",key:t.eventNamePrefix+".onload",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)!==!0)return typeof r.entry.link.pane.onLoad=="function"?r.entry.link.pane.onLoad.call(this,n):void 0}});n.addStep({name:"onLoad",key:t.eventNamePrefix+".onload",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)!==!0)return typeof i.onLoad=="function"?i.onLoad.call(t.manager,n):void 0}});n.addStep({name:"load",key:t.eventNamePrefix+".load",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){if(EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!0&&r.loadArgs.reload===!1)return n.resolve();if(r.entry.link.pane.element!=null)return r.entry.link.paneStateFlags|=EVUI.Modules.Panes.PaneStateFlags.Loaded,n.resolve();r.loadArgs.reload===!0&&(r.entry.link.paneStateFlags=EVUI.Modules.Core.Utils.removeFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded),bi(r.entry));vf(r.entry,r.loadArgs.loadSettings,function(i){i===!0?(r.entry.link.pane.element!=null&&r.entry.link.pane.element.isConnected===!1&&b(r.entry),r.entry.link.paneStateFlags|=EVUI.Modules.Panes.PaneStateFlags.Loaded,r.entry.link.lastLoadSettings=r.loadArgs.loadSettings,n.resolve()):n.reject("Failed to load "+t.objectName+" root element.")})}});n.addStep({name:"onLoaded",key:t.eventNamePrefix+".onloaded",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(u!==!0)return typeof r.entry.link.pane.onLoaded=="function"?r.entry.link.pane.onLoaded.call(this,n):void 0}});n.addStep({name:"onLoaded",key:t.eventNamePrefix+".onloaded",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(u!==!0)return typeof i.onLoaded=="function"?i.onLoaded.call(t.manager,n):void 0}})},nu=function(n,r){n.addStep({name:"onInitialize",key:t.eventNamePrefix+".oninit",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(r.currentAction=EVUI.Modules.Panes.PaneAction.Show,EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Initialized)!==!0)return typeof r.entry.link.pane.onInitialize=="function"?r.entry.link.pane.onInitialize.call(this,n):void 0}});n.addStep({name:"onInitialize",key:t.eventNamePrefix+".oninit",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Initialized)!==!0)return typeof i.onInitialize=="function"?i.onInitialize.call(t.manager,n):void 0}});n.addStep({name:"initialize",key:t.eventNamePrefix+".load",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){r.entry.link.paneStateFlags|=EVUI.Modules.Panes.PaneStateFlags.Initialized;n.resolve()}})},tu=function(n,r){n.addStep({name:"onShow",key:t.eventNamePrefix+".onshow",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){return r.currentAction=EVUI.Modules.Panes.PaneAction.Show,typeof r.entry.link.pane.onShow=="function"?r.entry.link.pane.onShow.call(this,n):void 0}});n.addStep({name:"onShow",key:t.eventNamePrefix+".onshow",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof i.onShow=="function")return i.onShow.call(t.manager,n)}});dt(n,r);n.addStep({name:"onShown",key:t.eventNamePrefix+".onshown",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof r.entry.link.pane.onShown=="function")return r.entry.link.pane.onShown.call(this,n)}});n.addStep({name:"onShown",key:t.eventNamePrefix+".onshown",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof i.onShown=="function")return i.onShown.call(t.manager,n)}})},iu=function(n,r){var u=!1;n.addStep({name:"onHide",key:t.eventNamePrefix+".onHide",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(r.currentAction=EVUI.Modules.Panes.PaneAction.Hide,EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!1){u=!0;return}if(typeof r.entry.link.pane.onHide=="function")return r.entry.link.pane.onHide.call(this,n)}});n.addStep({name:"onHide",key:t.eventNamePrefix+".onHide",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)!==!1)return typeof i.onHide=="function"?i.onHide.call(t.manager,n):void 0}});n.addStep({name:"hide",key:t.eventNamePrefix+"hide",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){if(EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!1)return n.resolve();var t=!1,i=!1,u=function(){t!==!1&&i!==!1&&(r.entry.link.paneStateFlags=EVUI.Modules.Core.Utils.removeFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible),r.entry.link.paneStateFlags=EVUI.Modules.Core.Utils.removeFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Positioned),n.resolve())};wf(r.entry,r.entry.link.lastShowSettings,r.hideArgs.paneHideTransition,function(){t=!0;u()});bf(r.entry,function(){i=!0;u()})}});n.addStep({name:"ohHidden",key:t.eventNamePrefix+".onhidden",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(u!==!0)return typeof r.entry.link.pane.onHidden=="function"?r.entry.link.pane.onHidden.call(this,n):void 0}});n.addStep({name:"ohHidden",key:t.eventNamePrefix+".onhidden",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(u!==!0)return typeof i.onShown=="function"?i.onShown.call(t.manager,n):void 0}})},dt=function(n,r){var u=null,f=null;n.addStep({name:"initialPosition",key:t.eventNamePrefix+".initialposition",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){r.action=EVUI.Modules.Panes.PaneAction.Show;var t=ni(r.entry,r.showArgs.showSettings);r.entry.link.lastCalculatedPosition=t;u=new EVUI.Modules.Observers.ObjectObserver(t);f=new EVUI.Modules.Observers.ObjectObserver(r.showArgs);n.resolve()}});n.addStep({name:"onPosition",key:t.eventNamePrefix+".onposition",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(typeof r.entry.link.pane.onPosition=="function")return r.entry.link.pane.onPosition.call(this,n)}});n.addStep({name:"onPosition",key:t.eventNamePrefix+".onposition",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(typeof i.onPosition=="function")return i.onPosition.call(t.manager,n)}});n.addStep({name:"finalPosition",key:t.eventNamePrefix+".finalposition",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){var s=u.getChanges(),h=f.getChanges().filter(function(n){return n.path.indexOf("showSettings")!==-1}),o=!1,e=!1,i=function(){o!==!1&&e!==!1&&(r.entry.link.paneStateFlags|=EVUI.Modules.Panes.PaneStateFlags.Positioned,r.entry.link.paneStateFlags|=EVUI.Modules.Panes.PaneStateFlags.Visible,r.entry.link.lastShowSettings=r.showArgs.showSettings,n.resolve())};r.showArgs.showSettings.backdropSettings!=null&&r.showArgs.showSettings.backdropSettings.showBackdrop===!0?(EVUI.Modules.Panes.Constants.GlobalZIndex++,r.entry.link.lastCalculatedPosition.zIndex=EVUI.Modules.Panes.Constants.GlobalZIndex,t.backdropManager.showBackdrop(r.entry.link.paneCSSName,r.entry.link.lastCalculatedPosition.zIndex-1,r.showArgs.showSettings.backdropSettings,function(){o=!0;i()})):(o=!0,i());s.length===0&&h.length===0?ut(r.entry,r.showArgs.showSettings,r.entry.link.lastCalculatedPosition,function(){e=!0;i()}):s.length>0?ut(r.entry,r.showArgs.showSettings,r.entry.link.lastCalculatedPosition,function(){e=!0;i()}):ut(r.entry,r.showArgs.showSettings,null,function(){e=!0;i()})}})},ru=function(n,r){n.addStep({name:"OnComplete",key:t.eventNamePrefix+".oncomplete",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){var t=!0;r.action===EVUI.Modules.Panes.PaneAction.Hide&&EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!0&&(t=!1);r.action===EVUI.Modules.Panes.PaneAction.Load&&EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!1&&(t=!1);r.action===EVUI.Modules.Panes.PaneAction.Show&&EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!1&&(t=!1);r.action===EVUI.Modules.Panes.PaneAction.Unload&&EVUI.Modules.Core.Utils.hasFlag(r.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!0&&(t=!1);w(r.entry.link,r.action,t,function(){r.unloadArgs!=null&&r.unloadArgs.remove===!0&&i.removePane(r.entry.paneID);r.entry.link.paneAction=EVUI.Modules.Panes.PaneAction.None;r.entry.link.lastCalculatedPosition=null;n.resolve()})}})},uu=function(n,u){var f=!1;n.addStep({name:"onUnload",key:t.eventNamePrefix+".onunload",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){var t=u.action;if(u.currentAction=EVUI.Modules.Panes.PaneAction.Unload,EVUI.Modules.Core.Utils.hasFlag(u.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!1){f=!0;return}if(u.entry.link.pane.unloadOnHide===!1&&t===r.Hide){f=!0;return}if(typeof u.entry.link.pane.onUnload=="function")return u.entry.link.pane.onUnload.call(this,n)}});n.addStep({name:"onUnload",key:t.eventNamePrefix+".onunload",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(f!==!0&&EVUI.Modules.Core.Utils.hasFlag(u.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)!==!1)return typeof i.onUnload=="function"?i.onUnload.call(t.manager,n):void 0}});n.addStep({name:"unload",key:t.eventNamePrefix+".unload",type:EVUI.Modules.EventStream.EventStreamStepType.Job,handler:function(n){if(f===!0)return n.resolve();try{u.entry.link.paneStateFlags=EVUI.Modules.Core.Utils.removeFlag(u.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded);bi(u.entry,u.entry.link.lastShowSettings)}catch(t){u.entry.link.paneStateFlags=EVUI.Modules.Core.Utils.addFlag(u.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)}u.entry.link.paneStateFlags=EVUI.Modules.Core.Utils.removeFlag(u.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Initialized);n.resolve()}});n.addStep({name:"onUnloaded",key:t.eventNamePrefix+".onunloaded",type:EVUI.Modules.EventStream.EventStreamStepType.Event,handler:function(n){if(f!==!0)return typeof u.entry.link.pane.onUnloaded=="function"?u.entry.link.pane.onUnloaded.call(this,n):void 0}});n.addStep({name:"onUnloaded",key:t.eventNamePrefix+".onUnloaded",type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,handler:function(n){if(f!==!0)return typeof i.onUnloaded=="function"?i.onUnloaded.call(t.manager,n):void 0}})},fu=function(n,t){var u=t.action,i=t.entry.link.paneAction;if(u===EVUI.Modules.Panes.PaneAction.Load){if(t.loadArgs.reload===!0)return n;if(i===EVUI.Modules.Panes.PaneAction.Show)return[r.Continue];if(i===EVUI.Modules.Panes.PaneAction.Load)return[r.Queue];if(i===EVUI.Modules.Panes.PaneAction.Hide||i===EVUI.Modules.Panes.PaneAction.Unload||i===EVUI.Modules.Panes.PaneAction.None)return n;throw Error('Invalid action: "'+i);}else return u===EVUI.Modules.Panes.PaneAction.Show?i===EVUI.Modules.Panes.PaneAction.Load?n:i===u?[r.Queue]:n:i===u?[r.Queue]:n},eu=function(n){var t=[];return n.action===EVUI.Modules.Panes.PaneAction.Show?t=ou(n):n.action===EVUI.Modules.Panes.PaneAction.Load?t=gt(n):n.action===EVUI.Modules.Panes.PaneAction.Hide?t=su(n):n.action===EVUI.Modules.Panes.PaneAction.Unload&&(t=hu(n)),t},ou=function(n){var t=gt(n),i=t.indexOf(r.CancelCurrent)!==-1;return i===!1&&(n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Hide||n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Unload)&&t.push(r.CancelCurrent),(EVUI.Modules.Core.Utils.hasFlag(n.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Initialized)===!1||n.showArgs.reInitialize===!0)&&t.push(r.Initialize),t.push(r.Show),t},gt=function(n){var t=[];if(EVUI.Modules.Core.Utils.hasFlag(n.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!0){if(n.loadArgs.reload===!0)return n.entry.link.paneAction!==EVUI.Modules.Panes.PaneAction.None&&t.push(r.CancelCurrent),t.push(r.Load),t}else n.entry.link.paneAction!==EVUI.Modules.Panes.PaneAction.None&&n.entry.link.paneAction!==EVUI.Modules.Panes.PaneAction.Load&&t.push(r.CancelCurrent),n.entry.link.paneAction!==EVUI.Modules.Panes.PaneAction.Load&&t.push(r.Load);return t},su=function(n){var t=[];return((n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Load||n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Show||n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Unload)&&t.push(r.CancelCurrent),n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Hide)?t:(t.push(r.Hide),EVUI.Modules.Core.Utils.hasFlag(n.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!0&&t.push(r.Unload),t)},hu=function(n){var t=[];return(n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Load||n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Show||n.entry.link.paneAction===EVUI.Modules.Panes.PaneAction.Hide)&&t.push(r.CancelCurrent),EVUI.Modules.Core.Utils.hasFlag(n.entry.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!0&&t.push(r.Unload),t},s=function(n,t){for(var r,u=n.callbackStack.length,i=0;i<u;i++)if(r=n.callbackStack[i],r.action===t)return r;return null},w=function(n,t,i,r){var c,o,y,h,u,e,l;if(typeof r!="function"&&(r=function(){}),c=s(n,t),c==null)return r(!1);h=n.callbackStack.indexOf(c);h!==-1&&n.callbackStack.splice(h,1);var p=[],f=[],a=c.opSessions.length,v=!1;for(u=0;u<a;u++)e=c.opSessions[u],e.continuedTo!=null&&(o=s(n,e.continuedTo.action),o!=null&&v===!1&&(v=!0,y=o.opSessions.filter(function(n){return n.canceled}),y.length===o.opSessions.length?(h=n.callbackStack.indexOf(o),h!==-1&&n.callbackStack.splice(h,1)):o.opSessions=o.opSessions.filter(function(n){return n.canceled===!1}),f=f.concat(y))),f.push(e);for(a=f.length,v===!0&&(f=f.sort(function(n,t){return n.callbackOrdinal-t.callbackOrdinal})),u=0;u<a;u++)e=f[u],typeof e.callback=="function"&&p.push(e.callback);l=new EVUI.Modules.Core.AsyncSequenceExecutionArgs;l.functions=p;l.parameter=i;l.forceCompletion=!0;EVUI.Modules.Core.AsyncSequenceExecutor.execute(l,function(n){n!=null&&n.length>0&&EVUI.Modules.Core.Utils.log(n);r(!0)})},ut=function(n,i,r,u){t.stylesheetManager.ensureSheet(t.cssSheetName,{lock:!0});r!=null&&(r instanceof EVUI.Modules.Panes.PanePosition||typeof r.top=="number"&&r.left==="number"&&typeof r.mode=="string")&&(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PanePosition(r.mode),r,["mode"]));i=i!=null?a(i):n.link.pane.showSettings;cu(n,i,r,u)},cu=function(n,t,i,r){if(typeof r!="function"&&(r=function(){}),i==null&&(n.link.lastShowSettings=t,i=ni(n,t)),n.link.lastCalculatedPosition=i,ti(n),et(n),i==null)return b(n),r(!1);lu(n,t,i);au(n,t,i,!1,function(n){r(n)})},ni=function(n,t){if(n==null||n.link.pane.element==null||EVUI.Modules.Core.Utils.hasFlag(n.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)===!1)return null;var u=et(n),f=new EVUI.Modules.Dom.DomHelper(n.link.pane.element),i=null,r=hi(t);return r!==EVUI.Modules.Panes.PanePositionMode.DocumentFlow&&EVUI.Modules.Core.Utils.hasFlag(n.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!1?(pu(n),i=fi(n,t,r),b(n)):i=fi(n,t,r),f.addClass(u),i},lu=function(n,i,r){var e=l(n,EVUI.Modules.Panes.Constants.CSS_Position),s=r.classNames.reverse(),u,f,o;r.mode===EVUI.Modules.Panes.PanePositionMode.AbsolutePosition||r.mode===EVUI.Modules.Panes.PanePositionMode.Anchored||r.mode===EVUI.Modules.Panes.PanePositionMode.RelativePosition||r.mode===EVUI.Modules.Panes.PanePositionMode.Centered||r.mode===EVUI.Modules.Panes.PanePositionMode.None?(u={},u.display="inline-block",u.position="absolute",u.top=r.top+"px",u.left=r.left+"px",f=ft(n,i,r),f.setHeight===!0&&(u.height=r.bottom-r.top+"px"),f.setWidth===!0&&(u.width=r.right-r.left+"px"),u.zIndex=r.zIndex.toString(),t.stylesheetManager.setRules(t.cssSheetName,e,u)):r.mode===EVUI.Modules.Panes.PanePositionMode.Fullscreen?(u={},u.display="inline-block",u.position="fixed",u.top="0px",u.left="0px",u.height="100vh",u.width="100vw",u.margin="0px",f=ft(n,i,r),f.setHeight===!0&&(u.top=r.top+"px",u.height=r.bottom-r.top+"px"),f.setWidth===!0&&(u.left=r.left+"px",u.width=r.right-r.left+"px"),t.stylesheetManager.setRules(t.cssSheetName,e,u)):r.mode===EVUI.Modules.Panes.PanePositionMode.PositionClass&&(u=null,f=ft(n,i,r),f.setHeight===!0&&(u={},u.top=r.top+"px",u.position="absolute",u.height=r.bottom-r.top+"px"),f.setWidth===!0&&(u==null&&(u={}),u.left=r.left+"px",u.position="absolute",u.width=r.right-r.left+"px"),(f.setHeight===!0||f.setWidth===!0)&&t.stylesheetManager.setRules(t.cssSheetName,e,u));o=new EVUI.Modules.Dom.DomHelper(n.link.pane.element);o.addClass(s)},ft=function(n,t,i){var r={setHeight:!1,setWidth:!1};return t.setExplicitDimensions===!0?(r.setHeight=!0,r.setWidth=!0,r):(i.classNames.indexOf(EVUI.Modules.Panes.Constants.CSS_ClippedX)!==-1&&(r.setWidth=!0),i.classNames.indexOf(EVUI.Modules.Panes.Constants.CSS_ClippedY)!==-1&&(r.setHeight=!0),i.mode===EVUI.Modules.Panes.PanePositionMode.Anchored&&(t.anchors.alignX===EVUI.Modules.Panes.AnchorAlignment.Elastic&&(r.setWidth=!0),t.anchors.alignY===EVUI.Modules.Panes.AnchorAlignment.Elastic&&(r.setHeight=!0),t.anchors.left!=null&&t.anchors.right!=null&&(r.setWidth=!0),t.anchors.top!=null&&t.anchors.bottom!=null&&(r.setHeight=!0)),r)},ti=function(n){for(var r,u=ii(),f=u.length,i=0;i<f;i++)(r=l(n,u[i]),r!=null)&&t.stylesheetManager.removeRules(t.cssSheetName,r)},et=function(n){for(var t,r=ii(),e=r.length,u=[],f=new EVUI.Modules.Dom.DomHelper(n.link.pane.element),i=0;i<e;i++)t=r[i],f.hasClass(t)===!0&&(u.push(t),f.removeClass(t));return u},l=function(n,t){var i,r;if(t==null||n==null)return null;EVUI.Modules.Core.Utils.isArray(t)===!1&&(t=[t]);var u=!1,f="."+n.link.paneCSSName,e=t.length;for(i=0;i<e;i++)(r=t[i],typeof r=="string")&&(f+="."+r.trim(),u=!0);return u===!1?null:f},ii=function(){var n=[EVUI.Modules.Panes.Constants.CSS_Position,EVUI.Modules.Panes.Constants.CSS_ScrollX,EVUI.Modules.Panes.Constants.CSS_ScrollY,EVUI.Modules.Panes.Constants.CSS_ClippedX,EVUI.Modules.Panes.Constants.CSS_ClippedY,EVUI.Modules.Panes.Constants.CSS_Flipped,EVUI.Modules.Panes.Constants.CSS_Transition_Show,EVUI.Modules.Panes.Constants.CSS_Transition_Hide,EVUI.Modules.Panes.Constants.CSS_Transition_Adjust,EVUI.Modules.Panes.Constants.CSS_Resized,EVUI.Modules.Panes.Constants.CSS_Moved],i=t.getAdditionalClassNames();return EVUI.Modules.Core.Utils.isArray(i)===!0?n.concat(i):n},au=function(n,t,i,r,u){var f,e,o;typeof u!="function"&&(u=function(){});i.mode===EVUI.Modules.Panes.PanePositionMode.DocumentFlow?vu(n,t,i):yu(n);f=null;e=null;r===!0?(t.reclacSettings!=null&&t.reclacSettings.recalcTransition!=null&&(e=t.reclacSettings.recalcTransition),f=EVUI.Modules.Panes.Constants.CSS_Transition_Adjust):(t.showTransition!=null&&(e=t.showTransition),f=EVUI.Modules.Panes.Constants.CSS_Transition_Show);o=new EVUI.Modules.Dom.DomHelper(n.link.pane.element);ff(n);at(n,e,f,o,function(n){n===!1&&o.show();u(!0)})},vu=function(n,t){var i=n.link.pane.element,r=new EVUI.Modules.Dom.DomHelper(t.documentFlow.relativeElement);t.documentFlow.mode!==EVUI.Modules.Panes.PaneDocumentFlowMode.Current&&(t.documentFlow.mode===EVUI.Modules.Panes.PaneDocumentFlowMode.After?i.previousSibling!==r.elements[0]&&(i.remove(),r.insertAfter(i)):t.documentFlow.mode===EVUI.Modules.Panes.PaneDocumentFlowMode.Append?i.parentNode!==r.elements[0]&&(i.remove(),r.append(i)):t.documentFlow.mode===EVUI.Modules.Panes.PaneDocumentFlowMode.Before?i.nextSibling!==r.elements[0]&&(i.remove(),r.insertAfter(i)):t.documentFlow.mode===EVUI.Modules.Panes.PaneDocumentFlowMode.Prepend?i.parentNode!==r.elements[0]&&(i.remove(),r.prepend(i)):i.parentNode!==r.elements[0]&&(i.remove(),r.append(i)))},yu=function(n){ri();n.link.pane.element!=null&&n.link.pane.element.parentNode!==t.placementDiv&&(n.link.pane.element.remove(),t.placementDiv.appendChild(n.link.pane.element))},pu=function(n){ui();n.link.pane.element!=null&&n.link.pane.element.parentNode!==t.measureDiv&&(n.link.pane.element.remove(),t.measureDiv.appendChild(n.link.pane.element))},b=function(n){nt();n.link.pane.element!=null&&(n.link.pane.element.remove(),t.loadDiv.appendChild(n.link.pane.element))},ri=function(){t.placementDiv==null?(t.placementDiv=document.createElement("div"),document.body.appendChild(t.placementDiv)):t.placementDiv.isConnected==!1&&(t.placementDiv.parentElement!=null&&t.placementDiv.remove(),document.body.appendChild(t.measureDiv));t.placementDiv.style.height="0px";t.placementDiv.style.width="0px";t.placementDiv.style.overflow="visible";t.placementDiv.style.display="block"},nt=function(){t.loadDiv==null?(t.loadDiv=document.createElement("div"),document.body.appendChild(t.loadDiv)):t.loadDiv.isConnected==!1&&(t.loadDiv.parentElement!=null&&t.loadDiv.remove(),document.body.appendChild(t.loadDiv));t.loadDiv.style.display="none"},ui=function(){t.measureDiv==null?(t.measureDiv=document.createElement("div"),document.body.appendChild(t.measureDiv)):t.measureDiv.isConnected==!1&&(t.measureDiv.parentElement!=null&&t.measureDiv.remove(),document.body.appendChild(t.measureDiv));t.measureDiv.style.height="0px";t.measureDiv.style.width="0px";t.measureDiv.style.overflow="hidden";t.measureDiv.style.display="inline-block"},fi=function(n,t,i){if(n.link.pane.element==null)throw Error("Cannot calculate position of a Pane without an element.");if(n.link.pane.element.isConnected===!1)throw Error("Cannot calculate position of a Pane that is not yet part of the DOM.");t=a(t);var r=new EVUI.Modules.Panes.PanePosition(i),u=new EVUI.Modules.Dom.DomHelper(n.link.pane.element);if(i===EVUI.Modules.Panes.PanePositionMode.AbsolutePosition)r=bu(n,u,t.absolutePosition);else if(i===EVUI.Modules.Panes.PanePositionMode.Anchored)r=ku(n,u,t.anchors);else if(i===EVUI.Modules.Panes.PanePositionMode.RelativePosition)r=ot(n,u,t.relativePosition);else if(i===EVUI.Modules.Panes.PanePositionMode.Fullscreen)r=gu();else if(i===EVUI.Modules.Panes.PanePositionMode.PositionClass)r=nf(t,u);else if(i===EVUI.Modules.Panes.PanePositionMode.Centered)r=tf(u);else if(i===EVUI.Modules.Panes.PanePositionMode.DocumentFlow)return r;return(r=li(n,r,t.clipSettings,t),r==null)?null:(r.classNames.push(EVUI.Modules.Panes.Constants.CSS_Position),r.classNames.push(n.link.paneCSSName),r.zIndex=wu(),EVUI.Modules.Panes.Constants.GlobalZIndex=r.zIndex,r)},wu=function(){for(var r,i,n=EVUI.Modules.Panes.Constants.GlobalZIndex,u=o.length,t=0;t<u;t++)r=o[t],i=r.link.pane.currentZIndex,i>n&&(n=i);return n+1},bu=function(n,t,i){var u=t.offset(),r=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.AbsolutePosition);return r.left=i.left,r.top=i.top,r.bottom=u.bottom-u.top+r.top,r.right=u.right-u.left+r.left,r},ku=function(n,t,i){var r=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.Anchored),l=t.offset(),c=l.bottom-l.top,h=l.right-l.left,a=ei(i.alignX,"x"),v=ei(i.alignY,"y"),u=null,e,s,o,f,d,w,b,k,y,p;i.top!=null&&(f=new EVUI.Modules.Dom.DomHelper(i.top),f.elements.length>0&&(f.elements[0].isConnected===!0||f.elements[0]===window)&&(u=f.offset(),(f.elements[0]===window||f.elements[0]===document)&&(u.bottom=u.top)));e=null;i.bottom!=null&&(f=new EVUI.Modules.Dom.DomHelper(i.bottom),f.elements.length>0&&(f.elements[0].isConnected===!0||f.elements[0]===window)&&(e=f.offset(),(f.elements[0]===window||f.elements[0]===document)&&(u.top=u.bottom)));s=null;i.left!=null&&(f=new EVUI.Modules.Dom.DomHelper(i.left),f.elements.length>0&&(f.elements[0].isConnected===!0||f.elements[0]===window)&&(s=f.offset(),(f.elements[0]===window||f.elements[0]===document)&&(u.right=u.left)));o=null;i.right!=null&&(f=new EVUI.Modules.Dom.DomHelper(i.right),f.elements.length>0&&(f.elements[0].isConnected===!0||f.elements[0]===window)&&(o=f.offset(),(f.elements[0]===window||f.elements[0]===document)&&(u.left=u.right)));u!=null&&e!=null&&u.top>e.top&&(d=e,e=u,u=d);o!=null&&s!=null&&s.left>o.left&&(d=o,o=s,s=d);w=0;u!=null&&(w|=1);e!=null&&(w|=2);s!=null&&(w|=4);o!=null&&(w|=8);switch(w){case 0:r.top=0;r.left=0;r.right=h;r.bottom=c;break;case 1:r.top=u.bottom;r.bottom=u.bottom+c;b=tt(u,l,h,a);r.left=b.left;r.right=b.right;break;case 2:r.bottom=e.top;r.top=e.top-c;b=tt(e,l,h,a);r.left=b.left;r.right=b.right;break;case 3:if(r.bottom=e.top,r.top=u.bottom,y=tt(u,l,h,a),p=tt(e,l,h,a),a===EVUI.Modules.Panes.AnchorAlignment.Left)r.left=Math.min(y.left,p.left),r.right=r.left+h;else if(a===EVUI.Modules.Panes.AnchorAlignment.Right)r.right=Math.max(y.right,p.right),r.left=r.right-h;else if(a===EVUI.Modules.Panes.AnchorAlignment.Center){var g=Math.min(y.left,p.left),nt=Math.max(y.right,p.right),rt=nt-g,ut=g+rt/2;r.left=ut-h/2;r.right=r.left+h}else a===EVUI.Modules.Panes.AnchorAlignment.None?(r.left=l.left,r.right=l.right):(r.left=Math.min(y.left,p.left),r.right=Math.max(y.right,p.right));break;case 4:r.left=s.right;r.right=r.left+h;k=it(s,l,c,v);r.top=k.top;r.bottom=k.bottom;break;case 5:r.top=u.bottom;r.bottom=v===EVUI.Modules.Panes.AnchorAlignment.Elastic?s.bottom:r.top+c;r.left=s.right;r.right=a===EVUI.Modules.Panes.AnchorAlignment.Elastic?u.right:r.right+h;break;case 6:r.top=v===EVUI.Modules.Panes.AnchorAlignment.Elastic?s.top:e.top-c;r.bottom=s.bottom;r.left=s.right;r.right=a===EVUI.Modules.Panes.AnchorAlignment.Elastic?e.right:r.right+h;break;case 7:r.top=u.bottom;r.left=s.right;r.bottom=e.top;r.right=a===EVUI.Modules.Panes.AnchorAlignment.Elastic?Math.max(u.right,e.right):r.left+h;break;case 8:r.right=o.left;r.left=r.right-h;k=it(o,l,c,v);r.top=k.top;r.bottom=k.bottom;break;case 9:r.right=o.left;r.left=a===EVUI.Modules.Panes.AnchorAlignment.Elastic?u.left:r.right-h;r.top=u.bottom;r.bottom=v===EVUI.Modules.Panes.AnchorAlignment.Elastic?o.bottom:r.top+c;break;case 10:r.right=o.left;r.left=a===EVUI.Modules.Panes.AnchorAlignment.Elastic?e.left:o.left-h;r.top=e.top-c;r.bottom=v===EVUI.Modules.Panes.AnchorAlignment.Elastic?r.top-c:o.bottom;break;case 11:r.top=u.bottom;r.right=o.left;r.bottom=e.top;r.left=a===EVUI.Modules.Panes.AnchorAlignment.Elastic?Math.min(u.left,e.left):o.left-h;break;case 12:if(r.left=s.right,r.right=o.left,y=it(s,l,h,v),p=it(o,l,h,v),v===EVUI.Modules.Panes.AnchorAlignment.Top)r.top=Math.min(y.top,p.top),r.bottom=r.top+c;else if(v===EVUI.Modules.Panes.AnchorAlignment.Bottom)r.top=Math.min(y.bottom,p.bottom)-c,r.bottom=r.top-c;else if(v===EVUI.Modules.Panes.AnchorAlignment.Center){var g=Math.min(y.top,p.top),nt=Math.max(y.bottom,p.bottom),rt=nt-g,ut=g+rt/2;r.top=ut-c/2;r.bottom=r.bottom+c}else v===EVUI.Modules.Panes.AnchorAlignment.None?(r.top=l.top,r.bottom=l.bottom):(r.top=Math.min(y.top,p.top),r.bottom=Math.max(y.bottom,p.bottom));break;case 13:r.top=u.bottom;r.bottom=v===EVUI.Modules.Panes.AnchorAlignment.Elastic?Math.max(s.bottom,o.bottom):r.top+c;r.left=s.right;r.right=o.left;break;case 14:r.top=v===EVUI.Modules.Panes.AnchorAlignment.Elastic?Math.min(s.top,o.top):e.top-c;r.bottom=e.top;r.left=s.right;r.right=o.left;break;case 15:r.top=u.bottom;r.bottom=e.top;r.left=s.right;r.right=o.left}return r},ei=function(n,t){if(typeof n!="string")return t==="x"?EVUI.Modules.Panes.AnchorAlignment.Left:EVUI.Modules.Panes.AnchorAlignment.Top;n=n.toLowerCase();switch(n){case EVUI.Modules.Panes.AnchorAlignment.Bottom:case EVUI.Modules.Panes.AnchorAlignment.Top:return t==="x"?EVUI.Modules.Panes.AnchorAlignment.Left:n;case EVUI.Modules.Panes.AnchorAlignment.Left:case EVUI.Modules.Panes.AnchorAlignment.Right:return t==="y"?EVUI.Modules.Panes.AnchorAlignment.Top:n;case EVUI.Modules.Panes.AnchorAlignment.Center:case EVUI.Modules.Panes.AnchorAlignment.Elastic:case EVUI.Modules.Panes.AnchorAlignment.None:return n;default:return t==="x"?EVUI.Modules.Panes.AnchorAlignment.Left:EVUI.Modules.Panes.AnchorAlignment.Top}},tt=function(n,t,i,r){var u=new EVUI.Modules.Dom.ElementBounds,f;return r===EVUI.Modules.Panes.AnchorAlignment.Left?(u.left=n.left,u.right=n.left+i):r===EVUI.Modules.Panes.AnchorAlignment.Right?(u.left=n.right-i,u.right=n.right):r===EVUI.Modules.Panes.AnchorAlignment.Center?(f=n.left+(n.right-n.left)/2,u.left=f-i/2,u.right=u.left+i):r===EVUI.Modules.Panes.AnchorAlignment.None?(u.left=t.left,u.right=t.right):(u.left=n.left,u.right=n.right),u},it=function(n,t,i,r){var u=new EVUI.Modules.Dom.ElementBounds,f;return r===EVUI.Modules.Panes.AnchorAlignment.Top?(u.top=n.top,u.bottom=n.top-i):r===EVUI.Modules.Panes.AnchorAlignment.Bottom?(u.top=n.bottom-i,u.bottom=n.bottom):r===EVUI.Modules.Panes.AnchorAlignment.Center?(f=n.bottom-(n.bottom-n.top)/2,u.top=f-i/2,u.bottom=u.top+i):r===EVUI.Modules.Panes.AnchorAlignment.None?(u.top=t.top,u.bottom=t.bottom):(u.top=n.top,u.bottom=n.bottom),u},ot=function(n,t,i){var u=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.RelativePosition),f=t.offset(),h=f.right-f.left,c=f.bottom-f.top,r=null,e;if(i.relativeElement!=null){if(e=new EVUI.Modules.Dom.DomHelper(i.relativeElement),e.elements.length===0||e.elements[0].isConnected===!1)return null;r=e.offset()}else r=new EVUI.Modules.Dom.ElementBounds,r.left=i.x,r.top=i.y,r.right=i.x,r.bottom=i.y;var l=si(i),o=l.xOrientation,s=l.yOrientation;return o===EVUI.Modules.Panes.RelativePositionOrientation.Right?(u.left=r.right,u.right=r.right+h):o===EVUI.Modules.Panes.RelativePositionOrientation.Left&&(u.left=r.left-h,u.right=r.left),s===EVUI.Modules.Panes.RelativePositionOrientation.Bottom?(u.top=r.bottom,u.bottom=r.bottom+c):s===EVUI.Modules.Panes.RelativePositionOrientation.Top&&(u.top=r.top-c,u.bottom=r.top),du(r,u,i,o,s)},du=function(n,t,i,r,u){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i.alignment)===!0)return t;var f=n.bottom-n.top,e=n.right-n.left;switch(i.alignment.toLowerCase()){case EVUI.Modules.Panes.RelativePositionAlignment.Bottom:u===EVUI.Modules.Panes.RelativePositionOrientation.Top&&(t.top+=f,t.bottom+=f);break;case EVUI.Modules.Panes.RelativePositionAlignment.YCenter:u===EVUI.Modules.Panes.RelativePositionOrientation.Bottom?(t.top-=f/2,t.bottom-=f/2):u===EVUI.Modules.Panes.RelativePositionOrientation.Top&&(t.top+=f/2,t.bottom+=f/2);break;case EVUI.Modules.Panes.RelativePositionAlignment.Top:u===EVUI.Modules.Panes.RelativePositionOrientation.Bottom&&(t.top-=f,t.bottom-=f);break;case EVUI.Modules.Panes.RelativePositionAlignment.Left:r===EVUI.Modules.Panes.RelativePositionAlignment.Right&&(t.left-=e,t.right-=e);break;case EVUI.Modules.Panes.RelativePositionAlignment.XCenter:r===EVUI.Modules.Panes.RelativePositionAlignment.Right?(t.left-=e/2,t.right-=e/2):r===EVUI.Modules.Panes.RelativePositionOrientation.Left&&(t.left+=e/2,t.right+=e/2);break;case EVUI.Modules.Panes.RelativePositionAlignment.Right:r===EVUI.Modules.Panes.RelativePositionOrientation.Left&&(t.left+=e,t.right+=e)}return t},oi=function(n){if(n==null)return null;var n=n.toLowerCase();switch(n){case EVUI.Modules.Panes.RelativePositionOrientation.Bottom:case EVUI.Modules.Panes.RelativePositionOrientation.Top:return"y";case EVUI.Modules.Panes.RelativePositionOrientation.Left:case EVUI.Modules.Panes.RelativePositionOrientation.Right:return"x"}return null},si=function(n){var t=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.orientation)==!1?n.orientation.toLowerCase().trim().split(/\s+/):["right","bottom"],r=oi(t[0])==="x"?t[0]:t[1],i;return r==null&&(r=EVUI.Modules.Panes.RelativePositionOrientation.Right),i=oi(t[1])==="y"?t[1]:t[0],i==null&&(i=EVUI.Modules.Panes.RelativePositionOrientation.Bottom),{xOrientation:r,yOrientation:i}},gu=function(){var n=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.Fullscreen),t=new EVUI.Modules.Dom.DomHelper(window),i=t.outerWidth(),r=t.outerHeight();return n.top=window.scrollY,n.left=window.scrollX,n.bottom=n.top+r,n.right=n.left+i,n},nf=function(n,t){var u=ci(n.positionClass),f=u.concat([EVUI.Modules.Panes.Constants.CSS_Position,entry.link.paneCSSName]),i=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.PositionClass),r;return t.addClass(f),r=t.offset(),i.bottom=r.bottom,i.left=r.left,i.right=r.right,i.top=r.top,i.classNames=u,t.removeClass(f),i},tf=function(n){var u=new EVUI.Modules.Dom.DomHelper(window),o=u.outerWidth(),s=u.outerHeight(),i=n.offset(),h=i.right-i.left,c=i.bottom-i.top,r=h/2,l=c/2,f=o/2,e=s/2,t=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.Centered);return t.left=f-r,t.right=f+r,t.top=e-l,t.bottom=e+r,t},hi=function(n){return n==null?EVUI.Modules.Panes.PanePositionMode.None:n.positionClass!=null&&(typeof n.positionClass=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.positionClass)===!1||EVUI.Modules.Core.Utils.isArray(n.positionClass)===!0&&n.positionClass.filter(function(n){return typeof n=="string"}).length>0)?EVUI.Modules.Panes.PanePositionMode.PositionClass:n.absolutePosition!=null&&(n.absolutePosition.left!==0||n.absolutePosition.top!==0)?EVUI.Modules.Panes.PanePositionMode.AbsolutePosition:n.relativePosition!=null&&(n.relativePosition.relativeElement!=null&&n.relativePosition.relativeElement.isConnected===!0||n.relativePosition.x!==0||n.relativePosition.y!==0)?EVUI.Modules.Panes.PanePositionMode.RelativePosition:n.anchors!=null&&(n.anchors.bottom!=null&&(n.anchors.bottom.isConnected===!0||n.anchors.bottom===window)||n.anchors.left!=null&&(n.anchors.left.isConnected===!0||n.anchors.left===window)||n.anchors.right!=null&&(n.anchors.right.isConnected===!0||n.anchors.right===window)||n.anchors.top!=null&&(n.anchors.top.isConnected===!0||n.anchors.top===window))?EVUI.Modules.Panes.PanePositionMode.Anchored:n.documentFlow!=null&&n.documentFlow.relativeElement!=null?EVUI.Modules.Panes.PanePositionMode.DocumentFlow:n.fullscreen===!0?EVUI.Modules.Panes.PanePositionMode.Fullscreen:n.center===!0?EVUI.Modules.Panes.PanePositionMode.Centered:EVUI.Modules.Panes.PanePositionMode.None},ci=function(n){var t=[],r,i;if(EVUI.Modules.Core.Utils.isArray(n)===!0)for(r=n.length,i=0;i<r;i++)t=t.concat(ci(n[i]));else typeof n=="string"&&(t=n.split(/\s+/));return t},li=function(n,t,i,r,u){var e,f;return(u==null&&(u=[]),u.push(i),e=new EVUI.Modules.Dom.DomHelper(window),i==null&&(i=new EVUI.Modules.Panes.PaneClipSettings),f=ct(i),(i.fallbackClipSettings==null||u.indexOf(i.fallbackClipSettings)!==-1)&&(i.fallbackClipSettings=new EVUI.Modules.Panes.PaneClipSettings,i.fallbackClipSettings.clipBounds=null,i.fallbackClipSettings.mode=EVUI.Modules.Panes.PaneClipMode.Clip,i.fallbackClipSettings.scrollXWhenClipped=!0,i.fallbackClipSettings.scrollYWhenClipped=!0),i.mode=rf(i.mode),i.mode===EVUI.Modules.Panes.PaneClipMode.Clip)?st(t)===!0?null:ht(n,t,f,i):i.mode===EVUI.Modules.Panes.PaneClipMode.Shift?st(f)===!0?null:ai(n,t,f,i,r,u):i.mode===EVUI.Modules.Panes.PaneClipMode.Overflow?t:void 0},st=function(n,t){return t==null&&(t=new EVUI.Modules.Dom.DomHelper(window).offset()),h(n.left,n.top,t)===!1&&h(n.right,n.top,t)===!1&&h(n.left,n.bottom,t)===!1&&h(n.right,n.bottom,t)===!1},h=function(n,t,i){return n<i.left||n>i.right?!1:t<i.top||t>i.bottom?!1:!0},ht=function(n,i,r,f){var h=i.right-i.left,c=i.bottom-i.top,e=!1,o,s,a,v;return u(i,r,"left")===!0&&(i.left=r.left,e=!0),u(i,r,"right")===!0&&(i.right=r.right,e=!0),u(i,r,"top")===!0&&(i.top=r.top,e=!0),u(i,r,"bottom")===!0&&(i.bottom=r.bottom,e=!0),e===!0&&(o=i.right-i.left,s=i.bottom-i.top,o!==h&&(i.classNames.push(EVUI.Modules.Panes.Constants.CSS_ClippedX),f.scrollXWhenClipped===!0&&o<h&&(i.classNames.push(EVUI.Modules.Panes.Constants.CSS_ScrollX),a=l(n,EVUI.Modules.Panes.Constants.CSS_ClippedX),t.stylesheetManager.setRules(t.cssSheetName,a,{overflowX:"scroll"}))),s!==c&&(i.classNames.push(EVUI.Modules.Panes.Constants.CSS_ClippedY),f.scrollYWhenClipped===!0&&(s<c&&i.classNames.push(EVUI.Modules.Panes.Constants.CSS_ScrollY),v=l(n,EVUI.Modules.Panes.Constants.CSS_ClippedY),t.stylesheetManager.setRules(t.cssSheetName,v,{overflowY:"scroll"})))),i},ai=function(n,t,i,r,f,e){var h=!1,c=!1,o=0,l=t.mode===EVUI.Modules.Panes.PanePositionMode.RelativePosition,s=EVUI.Modules.Core.Utils.shallowExtend({},t),a;return(delete s.mode,s.classNames=t.classNames.slice(),s=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.Panes.PanePosition(t.mode),s),u(t,i,"left")===!0&&(o=i.left-t.left,t.left+=o,t.right+=o,h=!0,l===!0&&rt(t,i)===!0))?v(n,s,i,r,f,e):u(t,i,"right")===!0&&h===!1&&(o=t.right-i.right,t.right-=o,t.left-=o,h=!0,l===!0&&rt(t,i)===!0)?v(n,s,i,r,f,e):u(t,i,"top")===!0&&(o=i.top-t.top,t.top+=o,t.bottom+=o,c=!0,l===!0&&rt(t,i)===!0)?v(n,s,i,r,f,e):u(t,i,"bottom")===!0&&c===!1&&(o=t.bottom-i.bottom,t.bottom-=o,t.top-=o,c=!0,l===!0&&rt(t,i)===!0)?v(n,s,i,r,f,e):t.mode===EVUI.Modules.Panes.PanePositionMode.Fullscreen&&(h===!0||c===!0)?(a=new EVUI.Modules.Dom.DomHelper(window).offset(),ht(n,t,a,r.fallbackClipSettings)):t},e={None:0,FlippedX:1,FlippedY:2,ReAligned:4},v=function(n,t,i,r,f,o,s){var tt,it;s==null&&(s=0);var p=!1,w=!1,rt=si(f.relativePosition),b=null,k=null,d=rt.xOrientation,g=rt.yOrientation,nt=!1,h=null;if(f.relativePosition.relativeElement!=null){if(tt=new EVUI.Modules.Dom.DomHelper(f.relativePosition.relativeElement),tt.elements.length===0||tt.elements[0].isConnected===!1)return null;h=tt.offset()}else h=new EVUI.Modules.Dom.ElementBounds,h.top=f.relativePosition.y,h.left=f.relativePosition.x,h.right=f.relativePosition.y,h.bottom=f.relativePosition.x;if(st(h))return null;if(u(t,i,"right")===!0&&(EVUI.Modules.Core.Utils.hasFlag(s,e.FlippedX)===!0?nt=!0:(d===EVUI.Modules.Panes.RelativePositionOrientation.Left?(b=EVUI.Modules.Panes.RelativePositionOrientation.Right,p=!0):d===EVUI.Modules.Panes.RelativePositionOrientation.Right&&(b=EVUI.Modules.Panes.RelativePositionOrientation.Left,p=!0),s|=e.FlippedX)),u(t,i,"left")===!0&&(EVUI.Modules.Core.Utils.hasFlag(s,e.FlippedX)===!0?nt=!0:(d===EVUI.Modules.Panes.RelativePositionOrientation.Right?(b=EVUI.Modules.Panes.RelativePositionOrientation.Left,p=!0):d===EVUI.Modules.Panes.RelativePositionOrientation.Left&&(b=EVUI.Modules.Panes.RelativePositionOrientation.Right,p=!0),s|=e.FlippedX)),u(t,i,"top")===!0&&(EVUI.Modules.Core.Utils.hasFlag(s,e.FlippedY)===!0?nt=!0:(g===EVUI.Modules.Panes.RelativePositionOrientation.Bottom?(k=EVUI.Modules.Panes.RelativePositionOrientation.Top,w=!0):g===EVUI.Modules.Panes.RelativePositionOrientation.Top&&(k=EVUI.Modules.Panes.RelativePositionOrientation.Bottom,w=!0),s|=e.FlippedY)),u(t,i,"bottom")===!0&&(EVUI.Modules.Core.Utils.hasFlag(s,e.FlippedY)===!0?nt=!0:(g===EVUI.Modules.Panes.RelativePositionOrientation.Top?(k=EVUI.Modules.Panes.RelativePositionOrientation.Bottom,w=!0):g===EVUI.Modules.Panes.RelativePositionOrientation.Bottom&&(k=EVUI.Modules.Panes.RelativePositionOrientation.Top,w=!0),s|=e.FlippedY)),p===!0||w===!0)return(it=p===!0?b:d,it+=" "+(w===!0?k:g),f.relativePosition.orientation=it,t=ot(n,new EVUI.Modules.Dom.DomHelper(n.link.pane.element),f.relativePosition,i),t==null)?null:v(n,t,i,r,f,o,s);if(EVUI.Modules.Core.Utils.hasFlag(s,e.ReAligned)===!0)return t.classNames.push(EVUI.Modules.Panes.Constants.CSS_Flipped),t;if(nt===!0){var c=h.top-i.top,l=i.bottom-h.bottom,a=h.left-i.left,y=i.right-h.right,ut=t.right-t.left,ft=t.bottom-t.top,et=c<ft&&l<ft&&a<ut&&y<ut;if(c>a&&c>y||l>a&&l>y)l>=c?(f.relativePosition.orientation=EVUI.Modules.Panes.RelativePositionOrientation.Bottom+" "+(a>=y?EVUI.Modules.Panes.RelativePositionOrientation.Left:EVUI.Modules.Panes.RelativePositionAlignment.Right),f.relativePosition.alignment=a>=y?EVUI.Modules.Panes.RelativePositionAlignment.Rignt:EVUI.Modules.Panes.RelativePositionAlignment.Left):(f.relativePosition.orientation=EVUI.Modules.Panes.RelativePositionOrientation.Top+" "+(a>=y?EVUI.Modules.Panes.RelativePositionOrientation.Left:EVUI.Modules.Panes.RelativePositionAlignment.Right),f.relativePosition.alignment=a>=y?EVUI.Modules.Panes.RelativePositionAlignment.Right:EVUI.Modules.Panes.RelativePositionAlignment.Left);else if(a>c&&a>l||y>c&&y>l)a>=y?(f.relativePosition.orientation=(c>=l?EVUI.Modules.Panes.RelativePositionOrientation.Top:EVUI.Modules.Panes.RelativePositionAlignment.Bottom)+" "+EVUI.Modules.Panes.RelativePositionOrientation.Left,f.relativePosition.alignment=c>=l?EVUI.Modules.Panes.RelativePositionAlignment.Bottom:EVUI.Modules.Panes.RelativePositionAlignment.Top):(f.relativePosition.orientation=(c>=l?EVUI.Modules.Panes.RelativePositionOrientation.Top:EVUI.Modules.Panes.RelativePositionAlignment.Bottom)+" "+EVUI.Modules.Panes.RelativePositionOrientation.Right,f.relativePosition.alignment=c>=l?EVUI.Modules.Panes.RelativePositionAlignment.Bottom:EVUI.Modules.Panes.RelativePositionAlignment.Top);else return li(n,t,r.fallbackClipSettings,f,o);return(s|=e.ReAligned,t=ot(n,new EVUI.Modules.Dom.DomHelper(n.link.pane.element),f.relativePosition,i),t==null)?null:(t=v(n,t,i,r,f,o,s),ht(n,t,i,r))}return EVUI.Modules.Core.Utils.hasFlag(s,e.FlippedX)===!0||EVUI.Modules.Core.Utils.hasFlag(s,e.FlippedY)===!0?(t.classNames.push(EVUI.Modules.Panes.Constants.CSS_Flipped),t):t},rt=function(n,t){return h(n.left,n.top,t)===!0?!0:h(n.left,n.bottom,t)===!0?!0:h(n.right,n.top,t)===!0?!0:h(n.right,n.bottom,t)===!0?!0:!1},rf=function(n){if(typeof n!="string")return EVUI.Modules.Panes.PaneClipMode.Shift;n=n.toLowerCase();switch(n){case EVUI.Modules.Panes.PaneClipMode.Clip:case EVUI.Modules.Panes.PaneClipMode.Overflow:case EVUI.Modules.Panes.PaneClipMode.Shift:return n;default:return EVUI.Modules.Panes.PaneClipMode.Shift}},u=function(n,t,i){if(i==="top"){if(n.top<t.top)return!0}else if(i==="bottom"){if(n.bottom>t.bottom)return!0}else if(i==="left"){if(n.left<t.left)return!0}else if(i==="right"&&n.right>t.right)return!0;return!1},ct=function(n){if(n==null)return null;var i=new EVUI.Modules.Dom.DomHelper(window),t=new EVUI.Modules.Dom.ElementBounds;return n.clipBounds==null?(t.left=window.scrollX,t.right=scrollX+i.outerWidth(),t.top=window.scrollY,t.bottom=window.scrollY+i.outerHeight()):EVUI.Modules.Core.Utils.isElement(n.clipBounds)===!0||typeof n.clipBounds=="string"?t=new EVUI.Modules.Dom.DomHelper(n.clipBounds).offset():(t.left=typeof n.clipBounds.left!="number"?window.scrollX:n.clipBounds.left,t.right=typeof n.clipBounds.right!="number"?window.scrollY:n.clipBounds.right,t.bottom=typeof n.clipBounds.bottom!="number"?window.scrollY+i.outerHeight():n.clipBounds.bottom,t.top=typeof n.clipBounds.top!="number"?scrollX+i.outerWidth():n.clipBounds.top),t},vi=function(n,i,r,f,e,o,s){var y,w,p,b,k,a,nt,tt,it,rt,v;if(e===!0){if(s!=null&&(y=uf(n,i,s),y!=null)){if(y.left===i.left&&y.top===i.top)return;i.left=y.left;i.top=y.top}w=l(n,EVUI.Modules.Panes.Constants.CSS_Moved);t.stylesheetManager.removeRules(t.cssSheetName,w);v={position:"absolute",top:i.top+"px",left:i.left+"px"};t.stylesheetManager.setRules(t.cssSheetName,w,v);r.addClass(EVUI.Modules.Panes.Constants.CSS_Moved);n.link.lastResizeArgs=i}if(f===!0){var d=l(n,EVUI.Modules.Panes.Constants.CSS_Resized),g=getComputedStyle(n.link.pane.element),h=g.minWidth,c=g.minHeight;h!=null&&(h=parseFloat(h.replace("px","")),isNaN(h)===!0&&(h=null));c!=null&&(c=parseFloat(c.replace("px","")),isNaN(c)===!0&&(c=null));p=n.link.pane.resizeMoveSettings.dragHanldeMargin*2.5;(h==null||h<p)&&(h=p);(c==null||c<p)&&(c=p);b=!1;k=!1;s!=null&&(a=new EVUI.Modules.Panes.PanePosition,a.bottom=i.top+i.height,a.left=i.left,a.right=i.left+i.width,a.top=i.top,u(a,s,"left")===!0&&(i.left=s.left,i.width=a.right-s.left),u(a,s,"right")===!0&&(i.width=s.right-a.left),u(a,s,"top")===!0&&(i.top=s.top,i.height=a.bottom-s.top),u(a,s,"bottom")===!0&&(i.height=s.bottom-a.top));(c>i.height||h>i.width)&&n.link.lastResizeArgs!=null&&(c>i.height&&(i.height=c,i.top=o!=null?o.originalBounds.top:n.link.lastResizeArgs.top,k=!0),h>i.width&&(i.width=h,i.left=o!=null?o.originalBounds.left:n.link.lastResizeArgs.left,b=!0));o!=null&&n.link.lastResizeArgs!=null&&(o.growX==="left"&&(nt=i.left+i.width,tt=n.link.lastResizeArgs.left+n.link.lastResizeArgs.width,nt!=tt&&(i.left=o.originalBounds.left,i.width=o.originalBounds.right-o.originalBounds.left,b===!0&&(i.width=h,i.left=o.originalBounds.right-h))),o.growY==="top"&&(it=i.top+i.height,rt=n.link.lastResizeArgs.top+n.link.lastResizeArgs.height,it!=rt&&(i.top=o.originalBounds.top,i.height=o.originalBounds.top-o.originalBounds.bottom,k===!0&&(i.height=c,i.top=o.originalBounds.bottom-c))));t.stylesheetManager.removeRules(t.cssSheetName,d);v={};v.position="absolute";v.height=i.height+"px";v.width=i.width+"px";v.top=i.top+"px";v.left=i.left+"px";t.stylesheetManager.setRules(t.cssSheetName,d,v);r.addClass(EVUI.Modules.Panes.Constants.CSS_Resized);n.link.lastResizeArgs=i}return e===!1&&f===!1?!1:(at(n,i.resizeTransition,EVUI.Modules.Panes.Constants.CSS_Transition_Adjust,r),!0)},uf=function(n,t,i){var r=new EVUI.Modules.Panes.PanePosition(EVUI.Modules.Panes.PanePositionMode.AbsolutePosition),u;return(r.top=t.top,r.left=t.left,r.bottom=t.top+t.height,r.right=t.left+t.width,u=new EVUI.Modules.Observers.ObjectObserver(r),ai(n,r,i),u.getChanges().length>0)?r:null},yi=function(n){for(var i=n.link.eventBindings.length,t=0;t<i;t++)n.link.eventBindings[t].detach();n.link.eventBindings=[]},ff=function(n){n.link.pane.element!=null&&(yi(n),ef(n),sf(n),hf(n),cf(n),lf(n),t.hookUpEventHandlers(n.publicEntry))},ef=function(n){var t,r;if(n.link.pane.element!=null){var u=f(EVUI.Modules.Panes.Constants.Attribute_Close),e=new EVUI.Modules.Dom.DomHelper("["+u+"]",n.link.pane.element),o=e.elements.length;for(t=0;t<o;t++)r=new EVUI.Modules.Panes.PaneEventBinding(u,"click",e.elements[t],function(t){var u=new EVUI.Modules.Panes.PaneAutoTriggerContext;(u.triggerType=EVUI.Modules.Panes.PaneAutoCloseTriggerType.Explicit,u.browserEvent=t,u.eventBinding=r,u.target=n.link.wrapper==null?n.link.pane:n.link.wrapper,typeof n.link.pane.autoCloseSettings.autoCloseFilter!="function"||n.link.pane.autoCloseSettings.autoCloseFilter(u)!==!1)&&(i.hidePane(n.paneID,{context:u}),t.stopPropagation())}),r.attach(),n.link.eventBindings.push(r)}},sf=function(n){var t;n.link.pane.element!=null&&n.link.pane.autoCloseSettings!=null&&(n.link.pane.autoCloseSettings.closeMode===EVUI.Modules.Panes.PaneCloseMode.Click?(t=new EVUI.Modules.Panes.PaneEventBinding(EVUI.Modules.Panes.PaneCloseMode.Click,"click contextmenu",document,function(r){var u=new EVUI.Modules.Panes.PaneAutoTriggerContext;u.triggerType=EVUI.Modules.Panes.PaneAutoCloseTriggerType.Click;u.browserEvent=r;u.eventBinding=t;u.target=n.link.wrapper==null?n.link.pane:n.link.wrapper;t.detach();lt(u,n,function(r){r===!0?i.hidePane(n.paneID,{context:u},function(){EVUI.Modules.Core.Utils.hasFlag(n.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!0&&t.attach()}):t.attach()})}),t.attach(),n.link.eventBindings.push(t)):n.link.pane.autoCloseSettings.closeMode===EVUI.Modules.Panes.PaneCloseMode.ExteriorClick&&(t=new EVUI.Modules.Panes.PaneEventBinding(EVUI.Modules.Panes.PaneCloseMode.ExteriorClick,"click contextmenu",document,function(r){var u=new EVUI.Modules.Panes.PaneAutoTriggerContext;(u.triggerType=EVUI.Modules.Panes.PaneAutoCloseTriggerType.ExteriorClick,u.browserEvent=r,u.eventBinding=t,u.target=n.link.wrapper==null?n.link.pane:n.link.wrapper,(typeof n.link.pane.autoCloseSettings.autoCloseFilter!="function"||n.link.pane.autoCloseSettings.autoCloseFilter(u)!==!0)&&EVUI.Modules.Core.Utils.containsElement(r.target,n.link.pane.element)!==!0&&r.target!==n.link.pane.element)&&(t.detach(),lt(u,n,function(r){r===!0?i.hidePane(n.paneID,{context:u},function(){EVUI.Modules.Core.Utils.hasFlag(n.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!0&&t.attach()}):t.attach()}))}),t.attach(),n.link.eventBindings.push(t)))},hf=function(n){if(n.link.pane.element!=null&&n.link.pane.autoCloseSettings!=null&&n.link.pane.autoCloseSettings.autoCloseKeys!=null&&EVUI.Modules.Core.Utils.isArray(n.link.pane.autoCloseSettings.autoCloseKeys)!==!1){var t=new EVUI.Modules.Panes.PaneEventBinding("autoCloseKey","keydown",document,function(r){if(n.link.pane.autoCloseSettings.autoCloseKeys!=null&&EVUI.Modules.Core.Utils.isArray(n.link.pane.autoCloseSettings.autoCloseKeys)!==!1&&n.link.pane.autoCloseSettings.autoCloseKeys.indexOf(r.key)!==-1){var u=new EVUI.Modules.Panes.PaneAutoTriggerContext;u.triggerType=EVUI.Modules.Panes.PaneAutoCloseTriggerType.KeyDown;u.browserEvent=r;u.eventBinding=t;u.target=n.link.wrapper==null?n.link.pane:n.link.wrapper;t.detach();lt(u,n,function(r){r===!0?i.hidePane(n.paneID,{context:u},function(){EVUI.Modules.Core.Utils.hasFlag(n.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)===!0&&t.attach()}):t.attach()})}});t.attach();n.link.eventBindings.push(t)}},lt=function(n,t,i){if(typeof t.link.pane.autoCloseSettings.autoCloseFilter!="function")return i(!0);var r=t.link.pane.autoCloseSettings.autoCloseFilter(n);EVUI.Modules.Core.Utils.isPromise(r)===!0?r.then(function(n){i(n)}).catch(function(n){EVUI.Modules.Core.Utils.log(n.stack);i(!1)}):i(r)},cf=function(n){var e,i,s,o;if(n.link.pane.element!=null&&(n.link.pane.resizeMoveSettings==null||n.link.pane.resizeMoveSettings.canDragMove===!0)){var r=f(EVUI.Modules.Panes.Constants.Attribute_Drag),h=new EVUI.Modules.Dom.DomHelper(n.link.pane.element),u=new EVUI.Modules.Dom.DomHelper("["+r+"]",n.link.pane.element).elements.slice();if(n.link.pane.element.matches("["+r+"]")===!0&&u.unshift(n.link.pane.element),e=u.length,e!==0)for(i=0;i<e;i++)s=u[i],o=new EVUI.Modules.Panes.PaneEventBinding(r,"mousedown",s,function(i){var r,u;if(t.stylesheetManager.ensureSheet(t.cssSheetName,{lock:!0}),r=n.link.pane.currentPosition,pi(n,r,i)==null){n.link.lastResizeArgs=null;var f=i.clientX,e=i.clientY,o=n.link.lastShowSettings.clipSettings!=null&&n.link.lastShowSettings.clipSettings.mode===EVUI.Modules.Panes.PaneClipMode.Shift?ct(n.link.lastShowSettings.clipSettings):null;i.preventDefault();i.stopPropagation();u=function(t){t.preventDefault();t.stopPropagation();var u=t.clientX-f,s=t.clientY-e,i=new EVUI.Modules.Panes.PaneResizeMoveArgs;i.height=r.bottom-r.top;i.width=r.right-r.left;i.top=r.top+s;i.left=r.left+u;i.resizeTransition=n.link.pane.showSettings.reclacSettings!=null?n.link.pane.showSettings.reclacSettings.recalcTransition:null;vi(n,i,h,!1,!0,null,o)};document.addEventListener("mousemove",u);document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",u)},{once:!0})}}),o.attach(),n.link.eventBindings.push(o)}},lf=function(n){if(n.link.pane.element!=null){var r=new EVUI.Modules.Dom.DomHelper(n.link.pane.element),i=new EVUI.Modules.Panes.PaneEventBinding("dragResize","mousedown",n.link.pane.element,function(i){var u,e,o,s,f;(t.stylesheetManager.ensureSheet(t.cssSheetName,{locked:!0}),startPos=n.link.pane.currentPosition,u=pi(n,startPos,i),u!=null)&&(e=i.clientX,o=i.clientY,n.link.lastResizeArgs=null,s=n.link.lastShowSettings.clipSettings!=null&&n.link.lastShowSettings.clipSettings.mode===EVUI.Modules.Panes.PaneClipMode.Shift?ct(n.link.lastShowSettings.clipSettings):null,i.preventDefault(),i.stopPropagation(),f=function(t){t.preventDefault();t.stopPropagation();var f=t.clientX-e,h=t.clientY-o,i=new EVUI.Modules.Panes.PaneResizeMoveArgs;i.height=startPos.bottom-startPos.top;i.width=startPos.right-startPos.left;i.top=startPos.top;i.left=startPos.left;i.resizeTransition=n.link.pane.showSettings.reclacSettings!=null?n.link.pane.showSettings.reclacSettings.recalcTransition:null;u.growX==="right"?i.width+=f:u.growX==="left"&&(i.width-=f,i.left+=f);u.growY==="bottom"?i.height+=h:u.growY==="top"&&(i.height-=h,i.top+=h);vi(n,i,r,!0,!1,u,s)},document.addEventListener("mousemove",f),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",f)},{once:!0}))});i.attach();n.link.eventBindings.push(i)}},pi=function(n,t,i){var f,e,c,l,a,v,o;if(n.link.pane.resizeMoveSettings==null||n.link.pane.resizeMoveSettings.canResizeBottom===!1&&n.link.pane.resizeMoveSettings.canResizeLeft===!1&&n.link.pane.resizeMoveSettings.canResizeRight===!1&&n.link.pane.resizeMoveSettings.canResizeTop===!1)return null;var r=i.clientX,s=i.clientY,h=n.link.pane.resizeMoveSettings.dragHanldeMargin,u=new EVUI.Modules.Dom.ElementBounds;return(u.bottom=t.bottom-h,u.left=t.left+h,u.right=t.right-h,u.top=t.top+h,f=null,e=null,r>=t.left&&r<=u.left&&n.link.pane.resizeMoveSettings.canResizeLeft===!0&&(f="left"),r>=u.right&&r<=t.right&&n.link.pane.resizeMoveSettings.canResizeRight===!0&&(c=r-t.left,l=t.right-r,f!=null?l<c&&(f="right"):f="right"),s>=t.top&&s<=u.top&&n.link.pane.resizeMoveSettings.canResizeTop===!0&&(e="top"),s>=u.bottom&&s<=t.bottom&&n.link.pane.resizeMoveSettings.canResizeBottom===!0&&(a=r-t.left,v=t.right-r,e!=null?v<a&&(e="bottom"):e="bottom"),f==null&&e==null)?null:(o=new af,o.growX=f,o.growY=e,o.originalBounds=t,o)},af=function(){this.growX=null;this.growY=null;this.originalBounds=null},at=function(n,i,r,u,f){if(typeof f!="function"&&(f=function(){}),n==null||u==null)return f(!1);if(i!=null&&i.css!=null){if(i.keyframes!=null&&t.stylesheetManager.setRules(t.cssSheetName,i.keyframes),typeof i.css=="string"){var e=i.css.match(/[\:\;]/g);e==null&&e.length===0&&(r=i.css,u.addClass(r))}else t.stylesheetManager.setRules(t.cssSheetName,l(n,r),i.css),u.addClass(r);n.link.transitionTimeoutID!==-1&&(u.removeClass(n.link.transitionSelector),clearTimeout(n.link.transitionTimeoutID),typeof n.link.transitionCallback=="function"&&(n.link.transitionCallback(),n.link.transitionCallback=null));n.link.transitionCallback=function(){n.link.transitionCallback=null;n.link.transitionTimeoutID=-1;n.link.transitionSelector=null;u.removeClass(r);f(!0)};n.link.transitionSelector=r;n.link.transitionTimeoutID=setTimeout(function(){typeof n.link.transitionCallback=="function"&&n.link.transitionCallback()},i.duration)}else n.link.transitionTimeoutID!==-1&&(u.removeClass(n.link.transitionSelector),clearTimeout(n.link.transitionTimeoutID),typeof n.link.transitionCallback=="function"&&(n.link.transitionCallback(),n.link.transitionCallback=null),n.link.transitionSelector=null,n.link.transitionTimeoutID=-1),f(!1)},vf=function(n,i,r){var u,f;if(typeof r!="function"&&(r=function(){}),n==null||i==null)return r(!1);if(u=wi(i),u===EVUI.Modules.Panes.PaneLoadMode.None)throw Error("No load mode detected, cannot load root element of "+t.objectName+".");return u===EVUI.Modules.Panes.PaneLoadMode.ExistingElement?(n.link.pane.element=i.element,r(!0)):u===EVUI.Modules.Panes.PaneLoadMode.CSSSelector?(f=new EVUI.Modules.Dom.DomHelper(i.selector,i.contextElement),f.elements.length===0)?r(!1):(n.link.pane.element=f.elements[0],r(!0)):u===EVUI.Modules.Panes.PaneLoadMode.HTTP?yf(n,i,r):u===EVUI.Modules.Panes.PaneLoadMode.Placeholder?pf(n,i,r):void 0},wi=function(n){return n.element!=null?EVUI.Modules.Panes.PaneLoadMode.ExistingElement:EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.selector)===!1?EVUI.Modules.Panes.PaneLoadMode.CSSSelector:n.httpLoadArgs!=null?EVUI.Modules.Panes.PaneLoadMode.HTTP:n.placeholderLoadArgs!=null?EVUI.Modules.Panes.PaneLoadMode.Placeholder:EVUI.Modules.Panes.PaneLoadMode.None},yf=function(n,i,r){var u=new EVUI.Modules.HtmlLoader.HtmlRequestArgs;u.httpArgs=i.httpLoadArgs;t.htmlLoader.loadHtml(u,function(i){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)===!0)return EVUI.Modules.Core.Utils.debugReturn(t.managerName,"getElementViaHttp","No HTML was returned from the server, or an error occurred in loading the HTML from the server."),r(!1);var u=new EVUI.Modules.Dom.DomHelper(i);return u.elements.length===0?(EVUI.Modules.Core.Utils.debugReturn(t.managerName,"getElementViaHttp","Could not parse returned HTML into an HTML element."),r(!1)):u.elements.length>1?(EVUI.Modules.Core.Utils.debugReturn(t.managerName,"getElementViaHttp","Too many elements returned from server, must be exactly one element."),r(!1)):(n.link.pane.element=u.elements[0],r(!0))})},pf=function(n,i,r){t.htmlLoader.loadPlaceholder(i.placeholderLoadArgs,function(i){if(i.loadedContent==null||i.loadedContent.length===0)return EVUI.Modules.Core.Utils.debugReturn(t.managerName,"getElementViaPlaceholder","Failed to inject placeholder element."),r(!1);if(i.loadedContent.length>1)return EVUI.Modules.Core.Utils.debugReturn(t.managerName,"getElementViaPlaceholder","Too many elements returned from server, must be exactly one element."),r(!1);n.link.pane.element=i.loadedContent[0];r(!0)})},bi=function(n){var t,i;return n==null?!1:(t=wi(n.link.lastLoadSettings),t===EVUI.Modules.Panes.PaneLoadMode.CSSSelector||t===EVUI.Modules.Panes.PaneLoadMode.ExistingElement||t==EVUI.Modules.Panes.PaneLoadMode.None?(nt(),b(n),n.link.pane.element=null):t===EVUI.Modules.Panes.PaneLoadMode.HTTP?(n.link.pane.element.remove(),n.link.pane.element=null):t===EVUI.Modules.Panes.PaneLoadMode.Placeholder&&(i=new EVUI.Modules.Dom.DomHelper("["+EVUI.Modules.HtmlLoader.Constants.Attr_PlaceholderID+"="+n.link.lastLoadSettings.placeholderLoadArgs.placeholderID+"]"),i.attr(EVUI.Modules.HtmlLoader.Constants.Attr_ContentLoadState,EVUI.Modules.HtmlLoader.HtmlPlaceholderLoadState.OnDemand),i.empty(),n.link.pane.element=null),!0)},wf=function(n,t,i,r){var u=new EVUI.Modules.Dom.DomHelper(n.link.pane.element);at(n,i,EVUI.Modules.Panes.Constants.CSS_Transition_Hide,u,function(){yi(n);et(n);ti(n);u.removeClass(n.link.transitionSelector);var i=hi(t);i===EVUI.Modules.Panes.PanePositionMode.DocumentFlow?u.hide():(nt(),b(n));r()})},bf=function(n,i){var f,e;typeof i!="function"&&(i=function(){});var o=!1,u=!1,r=bt(function(t){return t.pane!=n.link.pane&&t.pane.showSettings!=null&&t.pane.showSettings.backdropSettings!=null&&t.pane.showSettings.backdropSettings.showBackdrop===!0},!0);r!=null&&r.length>0&&(f=r.filter(function(n){return n.currentPaneAction===EVUI.Modules.Panes.PaneAction.Show||n.currentPaneAction===EVUI.Modules.Panes.PaneAction.Load},!0),e=r.filter(function(n){return EVUI.Modules.Core.Utils.hasFlag(n.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)},!0),o=f!=null&&f.length>0,u=e!=null&&e.length>0);o===!1&&u===!1?t.backdropManager.hideBackdrop(n.link.paneCSSName,n.link.lastShowSettings.backdropSettings,function(n){i(n)}):u===!0?(t.backdropManager.setBackdropZIndex(),i(!0)):i(!0)},kf=function(){t=t==null||typeof t!="object"?new EVUI.Modules.Panes.PaneManagerSettings:EVUI.Modules.Core.Utils.shallowExtend(t,new EVUI.Modules.Panes.PaneManagerSettings,function(n,t,i){return i[n]==null||typeof i[n]=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i[n])});t.getPaneEntry=bt;t.getPaneEntryAmbiguously=function(n,t){var i=y(n,t);if(i!=null)return i.publicEntry};t.cloneLoadSettings=vr;t.cloneShowSettings=ar;t.backdropManager==null&&(t.backdropManager=new ur);(t.stylesheetManager==null||typeof t.stylesheetManager!="object")&&(t.stylesheetManager=EVUI.Modules.Styles.Manager);(t.httpManager==null||typeof t.httpManager!="object")&&Object.defineProperty(t,"httpManager",{get:function(){return EVUI.Modules.Http.Http},configurable:!1,enumerable:!0});(t.htmlLoader==null||typeof t.htmlLoader!="object")&&Object.defineProperty(t,"htmlLoader",{get:function(){return EVUI.Modules.HtmlLoader.Manager},configurable:!1,enumerable:!0});t.manager==null&&(t.manager=i)},df=function(n){nt();ui();ri();n.backdropManager=t.backdropManager;n.loadDiv=t.loadDiv;n.measureDiv=t.measureDiv;n.placementDiv=t.placementDiv};kf();t.stylesheetManager.ensureSheet(t.cssSheetName,{lock:!0})};EVUI.Modules.Panes.PaneManagerSettings=function(){this.objectName=EVUI.Modules.Panes.Constants.Default_ObjectName;this.managerName=EVUI.Modules.Panes.Constants.Default_ManagerName;this.cssPrefix=EVUI.Modules.Panes.Constants.Default_CssPrefix;this.cssSheetName=EVUI.Modules.Styles.Constants.DefaultStyleSheetName;this.eventNamePrefix=EVUI.Modules.Panes.Constants.Default_EventNamePrefix;this.attributePrefix=EVUI.Modules.Panes.Constants.Default_AttributePrefix;this.placementDiv=null;this.loadDiv=null;this.measureDiv=null;this.backdropManager=null;this.httpManager=null;this.htmlLoader=null;this.stylesheetManager=null;this.manager=null;this.buildEventArgs=function(n,t){return t};this.processReturnedEventArgs=function(){};this.currentActionArgs=null;this.makeOrExtendObject=function(n){return n.pane};this.getAdditionalClassNames=function(){return[]};this.getPaneEntry=function(){};this.getPaneEntryAmbiguously=function(){};this.interpretBrowserEvent=function(){return!1};this.cloneLoadSettings=function(n){return n};this.cloneShowSettings=function(n){return n};this.hookUpEventHandlers=function(){}};EVUI.Modules.Panes.Pane=function(n,t){if(typeof n!="string")throw Error("Invalid input. Id must be a string.");var f=n,i=t,r=null,u=null;this.id=null;Object.defineProperty(this,"id",{get:function(){return n},configurable:!1,enumerable:!0});this.element=null;Object.defineProperty(this,"element",{get:function(){return r},set:function(n){typeof n=="string"&&(n=new EVUI.Modules.Dom.DomHelper(n));var t={element:EVUI.Modules.Core.Utils.getValidElement(n),paneID:f,setSecret:i.link.setSecret};if(typeof i==null||typeof i.canSetElement!="function")throw Error("Failed to set element.");if(i.canSetElement(t)===i.link.setSecret)r=t.element,u=r==null?null:new EVUI.Modules.Dom.DomHelper(r);else throw Error("Failed to set element: The provided value is invalid or the Pane is in an unstable state.");},configurable:!1,enumerable:!0});this.loadSettings=new EVUI.Modules.Panes.PaneLoadSettings;this.showSettings=new EVUI.Modules.Panes.PaneShowSettings;this.reclacSettings=new EVUI.Modules.Panes.PaneRecalcSettings;this.resizeMoveSettings=new EVUI.Modules.Panes.PaneResizeMoveSettings;this.autoCloseSettings=new EVUI.Modules.Panes.PaneAutoCloseSettings;this.unloadOnHide=!1;this.currentPosition=null;Object.defineProperty(this,"currentPosition",{get:function(){return u!=null?u.offset():null},configurable:!1,enumerable:!0});this.currentZIndex=-1;Object.defineProperty(this,"currentZIndex",{get:function(){if(r==null)return-1;var n=parseInt(getComputedStyle(r).zIndex);return isNaN(n)===!0?-1:n},configurable:!1,enumerable:!0});this.isVisible=!1;Object.defineProperty(this,"isVisible",{get:function(){return EVUI.Modules.Core.Utils.hasFlag(t.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Visible)},configurable:!1,enumerable:!0});this.isLoaded=!1;Object.defineProperty(this,"isLoaded",{get:function(){return EVUI.Modules.Core.Utils.hasFlag(t.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Loaded)},configurable:!1,enumerable:!0});this.isInitialized=!1;Object.defineProperty(this,"isInitialized",{get:function(){return EVUI.Modules.Core.Utils.hasFlag(t.link.paneStateFlags,EVUI.Modules.Panes.PaneStateFlags.Initialized)},configurable:!1,enumerable:!0});this.context=null;this.onLoad=function(){};this.onLoaded=function(){};this.onInitialize=function(){};this.onShow=function(){};this.onPosition=function(){};this.onShown=function(){};this.onHide=function(){};this.onHidden=function(){};this.onUnload=function(){};this.onUnloaded=function(){};this.getEventBindings=function(){return Object.freeze(i.link.eventBindings.slice())};this.addEventBinding=function(n,r,u){var f=EVUI.Modules.Core.Utils.getValidElement(n),e;if(f==null)throw Error("Invalid input. Target element must be an object derived from an Element.");if(EVUI.Modules.Core.Utils.containsElement(f,i.link.pane.element)===!1)throw Error("element is not present or the provided element is not a child of the root element.");if(typeof u!="function")throw Error("Invalid input. Handler must be a function.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!0)throw Error("Invalid input. Event must be a non-whitespace string.");e=new EVUI.Modules.Panes.PaneEventBinding(null,r,f,u);e.attach();t.link.eventBindings.push(e)}};EVUI.Modules.Panes.PaneAutoCloseSettings=function(){this.closeMode=EVUI.Modules.Panes.PaneCloseMode.Explicit;this.autoCloseKeys=[];this.autoCloseFilter=function(){return!0}};EVUI.Modules.Panes.PaneCloseMode={Click:"globalClick",ExteriorClick:"exteriorClick",Explicit:"explicit"};Object.freeze(EVUI.Modules.Panes.PaneCloseMode);EVUI.Modules.Panes.PaneLoadSettings=function(){var n=null,t=null;this.element=null;Object.defineProperty(this,"element",{get:function(){return n},set:function(t){if(t!=null){var i=EVUI.Modules.Core.Utils.getValidElement(t);if(i==null)throw Error("Invalid input for PaneLoadSettings.element. Must be an object derived from Element.");n=t}else n=null},configurable:!1,enumerable:!0});this.selector=null;this.contextElement=null;Object.defineProperty(this,"contextElement",{get:function(){return t},set:function(n){if(n!=null){var i=EVUI.Modules.Core.Utils.getValidElement(n);if(i==null)throw Error("Invalid input for PaneLoadSettings.element. Must be an object derived from Element.");t=n}else t=null},configurable:!1,enumerable:!0});this.httpLoadArgs=null;this.placeholderLoadArgs=null};EVUI.Modules.Panes.PaneLoadMode={None:"none",ExistingElement:"existing",CSSSelector:"css",HTTP:"http",Placeholder:"placeholder"};Object.freeze(EVUI.Modules.Panes.PaneLoadMode);EVUI.Modules.Panes.PaneShowSettings=function(){this.positionClass=null;this.absolutePosition=null;this.relativePosition=null;this.anchors=null;this.documentFlow=null;this.clipSettings=null;this.fullscreen=!1;this.center=!1;this.showTransition=null;this.hideTransition=null;this.setExplicitDimensions=!1;this.backdropSettings=null};EVUI.Modules.Panes.PaneDocumentFlow=function(){var n=null;this.relativeElement=null;Object.defineProperty(this,"relativeElement",{get:function(){return n},set:function(t){if(t!=null)if(typeof t=="string")n=t;else{var i=EVUI.Modules.Core.Utils.getValidElement(t);if(i==null)throw Error("Invalid input for PaneDocumentFlow.element. Must be a string or an object derived from an Element..");n=i}else n=null},configurable:!1,enumerable:!0});this.mode=EVUI.Modules.Panes.PaneDocumentFlowMode.Append};EVUI.Modules.Panes.PaneClipSettings=function(){var n=null;this.mode=EVUI.Modules.Panes.PaneClipMode.Overflow;this.clipBounds=null;Object.defineProperty(this,"clipBounds",{get:function(){return n},set:function(t){if(t!=null)if(typeof t.top=="number"&&typeof t.bottom=="number"&&typeof t.left=="number"&&typeof t.right=="number")n=t;else if(typeof t=="string")n=t;else{var i=EVUI.Modules.Core.Utils.getValidElement(t);if(i==null)throw Error("Invalid input for PaneDocumentFlow.element. Must be a string, ElementBounds, or an object derived from an Element..");n=i}else n=null},configurable:!1,enumerable:!0});this.scrollXWhenClipped=!1;this.scrollYWhenClipped=!1};EVUI.Modules.Panes.PaneClipMode={Overflow:"overflow",Clip:"clip",Shift:"shift"};Object.freeze(EVUI.Modules.Panes.PaneClipMode);EVUI.Modules.Panes.PaneDocumentFlowMode={Current:"current",Append:"append",Prepend:"prepend",Before:"before",After:"after"};Object.freeze(EVUI.Modules.Panes.PaneDocumentFlowMode);EVUI.Modules.Panes.PaneAbsolutePosition=function(n){var t=n,i=0,r=0;this.top=0;Object.defineProperty(this,"top",{get:function(){if(t!=null){var r=new EVUI.Modules.Dom.DomHelper(n.link.pane.element).offset();return r!=null?r.top:-1}return i},set:function(n){if(t==null){if(typeof n!="number")throw Error("Must be a number.");i=n}}});this.left=0;Object.defineProperty(this,"left",{get:function(){if(t!=null){var i=new EVUI.Modules.Dom.DomHelper(n.link.pane.element).offset();return i!=null?i.left:-1}return r},set:function(n){if(t==null){if(typeof n!="number")throw Error("Must be a number.");r=n}}})};EVUI.Modules.Panes.PaneRelativePosition=function(){var n=null;this.x=0;this.y=0;this.orientation=EVUI.Modules.Panes.RelativePositionOrientation.Bottom+" "+EVUI.Modules.Panes.RelativePositionOrientation.Right;this.alignment=EVUI.Modules.Panes.RelativePositionAlignment.None;this.relativeElement=null;Object.defineProperty(this,"relativeElement",{get:function(){return n},set:function(t){if(t!=null)if(typeof t=="string")n=t;else{var i=EVUI.Modules.Core.Utils.getValidElement(t);if(i==null)throw Error("Invalid input for RelativePosition.relativeElement. Must be a string or an object derived from an Element.");n=i}else n=null},configurable:!1,enumerable:!0})};EVUI.Modules.Panes.PaneRecalcSettings=function(){this.paneResizeResponse=EVUI.Modules.Panes.PaneResizeResponseMode.None;this.poll=!1;this.pollInterval=150;this.recalcTransition=null};EVUI.Modules.Panes.PaneResizeResponseMode={None:"none",RealTime:"realtime",OnComplete:"oncomplete"};Object.freeze(EVUI.Modules.Panes.PaneResizeResponseMode);EVUI.Modules.Panes.RelativePositionOrientation={Left:"left",Right:"right",Top:"top",Bottom:"bottom"};Object.freeze(EVUI.Modules.Panes.RelativePositionOrientation);EVUI.Modules.Panes.RelativePositionAlignment={None:"none",Left:"left",Right:"right",XCenter:"xcenter",YCenter:"ycenter",Top:"top",Bottom:"bottom"};Object.freeze(EVUI.Modules.Panes.RelativePositionAlignment);EVUI.Modules.Panes.PaneAnchors=function(){var n=null,t=null,i=null,r=null;this.top=null;Object.defineProperty(this,"top",{get:function(){return n},set:function(t){if(t!=null)if(typeof t=="string")n=t;else if(t===document||t===window)n=t;else{var i=EVUI.Modules.Core.Utils.getValidElement(t);if(i==null)throw Error("Invalid input for PaneAnchors.top. Must be a string or an object derived from an Element.");n=i}else n=null},configurable:!1,enumerable:!0});this.left=null;Object.defineProperty(this,"left",{get:function(){return t},set:function(n){if(n!=null)if(typeof n=="string")t=n;else if(n===document||n===window)t=n;else{var i=EVUI.Modules.Core.Utils.getValidElement(n);if(i==null)throw Error("Invalid input for PaneAnchors.left. Must be a string or an object derived from an Element.");t=i}else t=null},configurable:!1,enumerable:!0});this.bottom=null;Object.defineProperty(this,"bottom",{get:function(){return i},set:function(n){if(n!=null)if(typeof n=="string")i=n;else if(n===document||n===window)i=n;else{var t=EVUI.Modules.Core.Utils.getValidElement(n);if(t==null)throw Error("Invalid input for PaneAnchors.bottom. Must be a string or an object derived from an Element.");i=t}else i=null},configurable:!1,enumerable:!0});this.right=null;Object.defineProperty(this,"right",{get:function(){return r},set:function(n){if(n!=null)if(typeof n=="string")r=n;else if(n===document||n===window)r=n;else{var t=EVUI.Modules.Core.Utils.getValidElement(n);if(t==null)throw Error("Invalid input for PaneAnchors.right. Must be a string or an object derived from an Element.");r=t}else r=null},configurable:!1,enumerable:!0});this.alignX=EVUI.Modules.Panes.AnchorAlignment.Elastic;this.alignY=EVUI.Modules.Panes.AnchorAlignment.Elastic};EVUI.Modules.Panes.AnchorAlignment={None:"none",Elastic:"elastic",Left:"left",Right:"right",Center:"center",Top:"top",Bottom:"bottom"};Object.freeze(EVUI.Modules.Panes.AnchorAlignment);EVUI.Modules.Panes.PaneEntry=function(n){var t,i,r;if(n==null||typeof n!="object")throw Error("A PaneEntry cannot exist without a link to its parent PaneManager.");t=n;i=n.eventBindings.slice();this.pane=null;Object.defineProperty(this,"pane",{get:function(){return t.pane},configurable:!1,enumerable:!0});this.wrapper=null;Object.defineProperty(this,"wrapper",{get:function(){return t.wrapper},configurable:!1,enumerable:!0});this.eventStream=null;Object.defineProperty(this,"eventStream",{get:function(){return t.eventStream},configurable:!1,enumerable:!0});this.paneStateFlags=EVUI.Modules.Panes.PaneStateFlags.None;Object.defineProperty(this,"paneStateFlags",{get:function(){return t.paneStateFlags},configurable:!1,enumerable:!0});this.currentPaneAction=EVUI.Modules.Panes.PaneAction.None;Object.defineProperty(this,"currentPaneAction",{get:function(){return t.paneAction},configurable:!1,enumerable:!0});this.eventBindings=[];Object.defineProperty(this,"eventBindings",{get:function(){return r()===!1&&(i=t.eventBindings.slice(),Object.freeze(i)),i},configurable:!1,enumerable:!0});this.paneCSSName=null;Object.defineProperty(this,"paneCSSName",{get:function(){return t.paneCSSName},configurable:!1,enumerable:!0});this.lastCalculatedPosition=null;Object.defineProperty(this,"lastCalcualtedPosition",{get:function(){return t.lastCalculatedPosition},configurable:!1,enumerable:!0});r=function(){var r,n;if(i.length!==t.eventBindings.length)return!1;for(r=i.length,n=0;n<r;n++)if(i[n]!==t.eventBindings[n])return!1;return!0}};EVUI.Modules.Panes.PaneEventBinding=function(n,t,i,r){var h=n,f=t,e=r,o=i,u=null,s=i!=null?new EVUI.Modules.Dom.DomHelper(o):null;this.attribute=null;Object.defineProperty(this,"attribute",{get:function(){return h},configurable:!1,enumerable:!0});this.event=null;Object.defineProperty(this,"event",{get:function(){return f},configurable:!1,enumerable:!0});this.handler=null;Object.defineProperty(this,"handler",{get:function(){return e},configurable:!1,enumerable:!0});this.element=null;Object.defineProperty(this,"element",{get:function(){return o},configurable:!1,enumerable:!0});this.active=!0;Object.defineProperty(this,"active",{get:function(){return u},configurable:!1,enumerable:!0});this.detach=function(){u!==!1&&(s.off(f,e),u=!1)};this.attach=function(){if(u!==!0){s.on(f,e);u=!0}}};EVUI.Modules.Panes.PaneAutoTriggerContext=function(){this.triggerType=EVUI.Modules.Panes.PaneAutoCloseTriggerType.None;this.eventBinding=null;this.browserEvent=null;this.target=null};EVUI.Modules.Panes.PaneAutoCloseTriggerType={None:"none",Click:"globalClick",ExteriorClick:"exteriorClick",KeyDown:"keydown",Explicit:"explicit"};Object.freeze(EVUI.Modules.Panes.PaneAutoCloseTriggerType);EVUI.Modules.Panes.PaneTransition=function(){this.css=null;this.keyframes=null;this.duration=0};EVUI.Modules.Panes.PaneResizeMoveSettings=function(){this.canDragMove=!1;this.canResizeTop=!1;this.canResizeBottom=!1;this.canResizeLeft=!1;this.canResizeRight=!1;this.dragHanldeMargin=15;this.restoreDefaultOnHide=!0};EVUI.Modules.Panes.PaneBackdropSettings=function(){this.showBackdrop=!1;this.backdropCSS=null;this.backdropShowTransition=null;this.backdropHideTransition=null;this.backdropOpacity=.75;this.backdropColor="#000000"};EVUI.Modules.Panes.PaneEventArgs=function(n,t){if(n==null||t==null)throw Error("Invalid arguments.");var i=n,r=t;this.pane=null;Object.defineProperty(this,"pane",{get:function(){return i.link.pane},configurable:!1,enumerable:!0});this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.calculatedPosition=null;Object.defineProperty(this,"calculatedPosition",{get:function(){return i.link.lastCalculatedPosition},configurable:!1,enumerable:!0});this.currentActionArgs=null;Object.defineProperty(this,"currentActionArgs",{get:function(){return r},configurable:!1,enumerable:!0});this.context={}};EVUI.Modules.Panes.PaneStateFlags={None:0,Initialized:1,Loaded:2,Visible:4,Positioned:8};Object.freeze(EVUI.Modules.Panes.PaneStateFlags);EVUI.Modules.Panes.PaneAction={None:"none",Show:"show",Hide:"hide",Load:"load",Unload:"unload"};Object.freeze(EVUI.Modules.Panes.PaneAction);EVUI.Modules.Panes.PanePosition=function(n){var t=n;this.mode=EVUI.Modules.Panes.PanePositionMode.None;Object.defineProperty(this,"mode",{get:function(){return t},configurable:!1,enumerable:!0});this.classNames=[];this.top=0;this.left=0;this.bottom=0;this.right=0;this.zIndex=0};EVUI.Modules.Panes.PanePositionMode={None:"none",PositionClass:"css",AbsolutePosition:"absolute",RelativePosition:"relative",Anchored:"anchor",DocumentFlow:"docflow",Fullscreen:"fullscreen",Centered:"centered"};Object.freeze(EVUI.Modules.Panes.PanePositionMode);EVUI.Modules.Panes.Manager=null,function(){var t=EVUI.Modules.Panes.PaneManager,n=null;Object.defineProperty(EVUI.Modules.Panes,"Manager",{get:function(){return n==null&&(n=new t(t)),n},enumerable:!0,configurable:!1})}();EVUI.Modules.Panes.PaneShowArgs=function(){this.type=null;Object.defineProperty(this,"type",{get:function(){return EVUI.Modules.Panes.PaneArgumentType.Show},configurable:!1,enumerable:!1});this.context=null;this.loadArgs=null;this.showSettings=null;this.reInitialize=!1};EVUI.Modules.Panes.PaneLoadArgs=function(){this.type=null;Object.defineProperty(this,"type",{get:function(){return EVUI.Modules.Panes.PaneArgumentType.Show},configurable:!1,enumerable:!1});this.context=null;this.loadSettings=null;this.reload=!1};EVUI.Modules.Panes.PaneHideArgs=function(){this.type=null;Object.defineProperty(this,"type",{get:function(){return EVUI.Modules.Panes.PaneArgumentType.Hide},configurable:!1,enumerable:!1});this.context=null;this.paneHideTransition=null;this.unloadArgs=null};EVUI.Modules.Panes.PaneUnloadArgs=function(){this.type=null;Object.defineProperty(this,"type",{get:function(){return EVUI.Modules.Panes.PaneArgumentType.Unload},configurable:!1,enumerable:!1});this.context=null;this.remove=!1};EVUI.Modules.Panes.PaneResizeMoveArgs=function(){this.type=null;Object.defineProperty(this,"type",{get:function(){return EVUI.Modules.Panes.PaneArgumentType.MoveResize},configurable:!1,enumerable:!1});this.height=-1;this.width=-1;this.top=-1;this.left=-1;this.resizeTransition=null};EVUI.Modules.Panes.PaneArgsPackage=function(n){this.action=null;this.currentAction=null;this.pane=null;this.wrapper=null;this.showArgs=null;this.loadArgs=null;this.hideArgs=null;this.unloadArgs=null;this.foreignArgs=null;this.context=n;this.lastCalculatedPosition=null};EVUI.Modules.Panes.PaneArgumentType={Show:"show",Hide:"hide",Load:"load",Unload:"unload",MoveResize:"moveResize"};Object.freeze(EVUI.Modules.Panes.PaneArgumentType);EVUI.Modules.Panes.PaneManagerServices=function(){this.httpManager=null;this.htmlLoader=null;this.stylesheetManager=null};$evui.panes=null;Object.defineProperty($evui,"panes",{get:function(){return EVUI.Modules.Panes.Manager},enumerable:!0});Object.freeze(EVUI.Modules.Panes);$evui.addPane=function(n){return EVUI.Modules.Panes.Manager.addPane(n)};$evui.showPane=function(n,t,i){return EVUI.Modules.Panes.Manager.showPane(n,t,i)};$evui.showPaneAsync=function(n,t){return EVUI.Modules.Panes.Manager.showPaneAsync(n,t)};$evui.hidePane=function(n,t,i){return EVUI.Modules.Panes.Manager.hidePane(n,t,i)};$evui.hidePaneAsync=function(n,t){return EVUI.Modules.Panes.Manager.hidePaneAsync(n,t)};EVUI.Modules.PopIns={};EVUI.Modules.PopIns.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),Panes:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.PopIns.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.PopIns.Dependencies);EVUI.Modules.PopIns.Constants={};EVUI.Modules.PopIns.Constants.Fn_PopInSelector=function(){return!0};EVUI.Modules.PopIns.Constants.Fn_LoadCallback=function(){};EVUI.Modules.PopIns.Constants.Fn_PopInOperationCallback=function(){};EVUI.Modules.PopIns.Constants.CSS_Position="evui-position";EVUI.Modules.PopIns.Constants.CSS_ClippedX="evui-clipped-x";EVUI.Modules.PopIns.Constants.CSS_ClippedY="evui-clipped-y";EVUI.Modules.PopIns.Constants.CSS_ScrollX="evui-scroll-x";EVUI.Modules.PopIns.Constants.CSS_ScrollY="evui-scroll-y";EVUI.Modules.PopIns.Constants.CSS_Flipped="evui-flipped";EVUI.Modules.PopIns.Constants.CSS_Moved="evui-moved";EVUI.Modules.PopIns.Constants.CSS_Resized="evui-resized";EVUI.Modules.PopIns.Constants.CSS_Transition_Show="evui-transition-show";EVUI.Modules.PopIns.Constants.CSS_Transition_Hide="evui-transition-hide";EVUI.Modules.PopIns.Constants.Attribute_ID="evui-pop-id";EVUI.Modules.PopIns.Constants.Attribute_Focus="evui-pop-focus";EVUI.Modules.PopIns.Constants.Attribute_Close="evui-pop-close";EVUI.Modules.PopIns.Constants.Attribute_SourceURL="evui-pop-src";EVUI.Modules.PopIns.Constants.Attribute_PlaceholderID="evui-pop-placeholder-id";EVUI.Modules.PopIns.Constants.Attribute_UnloadOnHide="evui-pop-unload";EVUI.Modules.PopIns.Constants.Attribute_Context="evui-pop-cxt";EVUI.Modules.PopIns.Constants.Attribute_Selector="evui-pop-selector";EVUI.Modules.PopIns.Constants.Attribute_ResizeHandles="evui-pop-resize-handles";EVUI.Modules.PopIns.Constants.Attribute_ResizeHandleWidth="evui-pop-resize-handle-width";EVUI.Modules.PopIns.Constants.Attribute_LeftAnchor="evui-pop-anchor-left";EVUI.Modules.PopIns.Constants.Attribute_RightLeftAnchor="evui-pop-anchor-right";EVUI.Modules.PopIns.Constants.Attribute_TopAnchor="evui-pop-anchor-top";EVUI.Modules.PopIns.Constants.Attribute_BottomAnchor="evui-pop-anchor-bottom";EVUI.Modules.PopIns.Constants.Default_ObjectName="PopIn";EVUI.Modules.PopIns.Constants.Default_ManagerName="PopInManager";EVUI.Modules.PopIns.Constants.Default_CssPrefix="evui-pop";EVUI.Modules.PopIns.Constants.Default_EventNamePrefix="evui.pop";EVUI.Modules.PopIns.Constants.Default_AttributePrefix="evui-pop";Object.freeze(EVUI.Modules.PopIns.Constants);EVUI.Modules.PopIns.PopInManager=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.PopIns.Dependencies);var r=this,i=null,t=null;this.addPopIn=function(n){if(n==null)throw Error(t.objectName+" cannot be null.");if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.id)===!0)throw Error(t.objectName+"must have an id that is a non-whitespace string.");var r=t.getPaneEntry(n.id);if(r!=null)throw Error("A "+t.objectName+' with an id of "'+n.id+'" already exists.');return i.addPane(e(n)),r=t.getPaneEntry(n.id),r.wrapper};this.removePopIn=function(n){return i.removePane(n)};this.getPopIn=function(n,i){var r=null;return typeof n=="function"?(r=t.getPaneEntry(function(){return!0},!0).map(function(n){return n.wrapper}).filter(n),i!==!0&&r!=null)?r[0]:r:(r=t.getPaneEntry(n,i),r==null)?null:EVUI.Modules.Core.Utils.isArray(r)===!1?r.wrapper:r.map(function(n){return n.wrapper})};this.showPopIn=function(n,r,e){var s=f(n,!0),o=new EVUI.Modules.Panes.PaneShowArgs;o.showSettings=t.cloneShowSettings(s.window.showSettings);o.loadArgs=new EVUI.Modules.Panes.PaneLoadArgs;o.loadArgs.loadSettings=t.cloneLoadSettings(s.window.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInShowArgs(o),r,["type"]),r.showSettings=r.showSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInShowSettings(o.showSettings),r.showSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs!=null&&r.loadArgs.loadSettings!=null?(r.loadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadArgs(o.loadArgs),r.loadArgs,["type"]),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadSettings(o.loadArgs.loadSettings),r.loadArgs.loadSettings)):(r.loadArgs=new EVUI.Modules.PopIns.PopInLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings,["type"]))):r=null;r==null&&(r=new EVUI.Modules.PopIns.PopInShowArgs(o),r.showSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInShowSettings(o.showSettings),s.wrapper.showSettings),r.loadArgs=new EVUI.Modules.PopIns.PopInLoadArgs(o.loadArgs),r.loadArgs.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadSettings(o.loadArgs.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.showPane(s.window.id,o,e)};this.showPopInAsync=function(n,t){return new Promise(function(i){r.showPopIn(n,t,function(n){i(n)})})};this.hidePopIn=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneHideArgs;o.unloadArgs=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInHideArgs(o),r,["type"]),r.unloadArgs=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInUnloadArgs(o.unloadArgs,r.unloadArgs))):r=null;r==null&&(r=new EVUI.Modules.PopIns.PopInHideArgs(o),r.unloadArgs=new EVUI.Modules.PopInUnloadArgs(o.unloadArgs));t.currentActionArgs=u(r);i.hidePane(s.window.id,o,e)};this.hidePopInAsync=function(n,t){return new Promise(function(i){r.hidePopIn(n,t,function(n){i(n)})})};this.hideAllPopIns=function(n,t){var i;typeof t!="function"&&(t=function(){});var u=this.getPopIn(function(n){return n.isVisible}),r=u.length,f=0;if(r===0)return t(!0);for(i=0;i<r;i++)this.hidePopIn(u[i],n,function(){return f++,f===r?t(!0):void 0})};this.hideAllPopInsAsync=function(n){return new Promise(function(t){r.hideAllPopIns(n,function(n){t(n)})})};this.loadPopIn=function(n,r,e){var s=f(n,!1),o=new EVUI.Modules.Panes.PaneLoadArgs;o.loadSettings=t.cloneLoadSettings(s.window.loadSettings);typeof r=="function"?(e=r,r=null):r!=null&&typeof r=="object"?(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadArgs(o),r,["type"]),r.loadSettings=r.loadSettings!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadSettings(o.loadSettings),r.loadSettings):EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadSettings(o.loadSettings),s.wrapper.loadSettings)):r=null;r==null&&(r=new EVUI.Modules.PopIns.PopInLoadArgs(o),r.loadSettings=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInLoadSettings(o.loadSettings),s.wrapper.loadSettings));t.currentActionArgs=u(r);i.loadPane(s.window.id,o,e)};this.loadPopInAsync=function(n,t){return new Promise(function(i){r.loadPopIn(n,t,function(n){i(n)})})};this.unloadPopIn=function(n,r,e){var s=f(n),o=new EVUI.Modules.Panes.PaneUnloadArgs;typeof r=="function"?(e=r,r=null):r=r!=null&&typeof r=="object"?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.PopIns.PopInUnloadArgs(o),r):null;r==null&&(r=new EVUI.Modules.PopIns.PopInUnloadArgs(o));t.currentActionArgs=u(r);i.unloadPane(s.window.id,o,e)};this.unloadPopInAsync=function(n,t){return new Promise(function(i){r.unloadPopIn(n,t,function(n){i(n)})})};var o=function(n){var t=n.window.popIn;return delete n.window.popIn,c(t,n.window,n.exists)},s=function(n,t){var r,i;return n.foreignArgs==null&&(n.foreignArgs=h(n)),r=null,t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Hide?r=n.foreignArgs.hideArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Load?r=n.foreignArgs.loadArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Show?r=n.foreignArgs.showArgs:t.currentActionArgs.type===EVUI.Modules.Panes.PaneArgumentType.Unload&&(r=n.foreignArgs.unloadArgs),i=new EVUI.Modules.PopIns.PopInEventArgs(n,r),i.cancel=t.cancel,i.key=t.key,i.pause=t.pause,i.resume=t.resume,i.stopPropagation=t.stopPropagation,i.context=t.context,i},u=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.type===EVUI.Modules.PopIns.PopInArgumentType.Hide?(t.hideArgs=n,t.unloadArgs=n.unloadArgs):n.type===EVUI.Modules.PopIns.PopInArgumentType.Show?(t.showArgs=n,t.loadArgs=n.loadArgs):n.type===EVUI.Modules.PopIns.PopInArgumentType.Load?t.loadArgs=n:n.type===EVUI.Modules.PopIns.PopInArgumentType.Unload&&(t.unloadArgs=n),t},h=function(n){var t=new EVUI.Modules.Panes.PaneArgsPackage;return n.hideArgs!=null&&(t.hideArgs=new EVUI.Modules.PopIns.PopInHideArgs(n.hideArgs),t.hideArgs.unloadArgs=new EVUI.Modules.PopIns.PopInUnloadArgs(n.hideArgs.unloadArgs)),n.showArgs!=null&&(t.showArgs=new EVUI.Modules.PopIns.PopInShowArgs(n.showArgs),t.showArgs.showSettings=new EVUI.Modules.PopIns.PopInShowSettings(n.showArgs.showSettings),t.showArgs.loadArgs=new EVUI.Modules.PopIns.PopInLoadArgs(n.showArgs.loadArgs),t.showArgs.loadArgs.loadSettings=new EVUI.Modules.PopIns.PopInLoadSettings(n.showArgs.loadArgs.loadSettings)),n.loadArgs!=null&&(t.loadArgs=new EVUI.Modules.PopIns.PopInLoadArgs(n.loadArgs),t.loadArgs.loadSettings=new EVUI.Modules.PopIns.PopInLoadSettings(n.loadArgs.loadSettings)),n.unloadArgs!=null&&(t.unloadArgs=new EVUI.Modules.PopIns.PopInUnloadArgs(n.unloadArgs)),t},c=function(n,i,r){var u=null,e,f;return r===!0?(e=t.getPaneEntry(n.id),u=e.wrapper):u=new EVUI.Modules.PopIns.PopIn(i),f=EVUI.Modules.Core.Utils.shallowExtend({},n),delete f.id,r===!0&&n.element===i.element&&delete f.element,delete f.currentPosition,delete f.currentZIndex,delete f.isVisible,delete f.isInitialized,delete f.isLoaded,EVUI.Modules.Core.Utils.shallowExtend(u,f,["showSettings","loadSettings","autoCloseSettings","resizeMoveSettings"]),u.showSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.PopIns.PopInShowSettings(i.showSettings),u.showSettings,n.showSettings),u.loadSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.PopIns.PopInLoadSettings(i.loadSettings),u.loadSettings,n.loadSettings),u.autoCloseSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.PopIns.PopInAutoCloseSettings(i.autoCloseSettings),u.autoCloseSettings,n.autoCloseSettings),u.resizeMoveSettings=EVUI.Modules.Core.Utils.makeOrExtendObject(new EVUI.Modules.PopIns.PopInResizeMoveSettings(i.resizeMoveSettings),u.resizeMoveSettings,n.resizeMoveSettings),u},f=function(n,i){var r;if(n==null||typeof n!="string"&&typeof n!="object")throw Error("Invalid input: "+t.objectName+" or string id expected.");return n instanceof Event?t.getPaneEntryAmbiguously(n,i):(r={},typeof n=="string"?r=e({id:n}):(r.id=n.id,r.popIn=n),t.getPaneEntryAmbiguously(r,i))},e=function(n){var i,r;return typeof n.id=="string"&&(i=t.getPaneEntry(n.id),i!=null&&i.window!=null)?(r=EVUI.Modules.Core.Utils.shallowExtend({},i.window),r.popIn=n,r):{id:n.id,autoCloseSettings:{closeMode:EVUI.Modules.Panes.PaneCloseMode.Explicit},clipSettings:{clipMode:EVUI.Modules.PopIns.PopInClipMode.Overflow},popIn:n}},l=function(n,t){EVUI.Modules.Core.Utils.shallowExtend(n,e({id:n.id}));n.showSettings==null&&(n.showSettings={});n.resizeMoveSettings==null&&(n.resizeMoveSettings={});var i=EVUI.Modules.Core.Utils.getElementAttributes(t.currentTarget),o=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_Center),s=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_Fullscreen),h=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_Drag),r=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_ResizeHandles),u=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_ResizeHandleWidth),c=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_Top),f=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_Left),l=i.getValue(EVUI.Modules.PopIns.Constants.Attribute_Classes);return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(s)===!1&&(s=s.toLowerCase(),s==="false"?n.showSettings.fullscreen=!1:s==="true"&&(n.showSettings.fullscreen=!0)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(o)===!1&&(o=o.toLowerCase(),o==="false"?n.showSettings.center=!1:o==="true"&&(n.showSettings.center=!0)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f)===!1&&(n.showSettings.absolutePosition==null&&(n.showSettings.absolutePosition={}),f=parseFloat(f,f.toLowerCase().replace("px","")),isNaN(f)===!1&&(n.showSettings.absolutePosition.left=f)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(c)===!1&&(n.showSettings.absolutePosition==null&&(n.showSettings.absolutePosition={}),c=parseFloat(c,c.toLowerCase().replace("px","")),isNaN(f)===!1&&(n.showSettings.absolutePosition.top=c)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(l)===!1&&(n.showSettings.positionClass=l),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(h)===!1&&(h=h.toLowerCase(),h==="true"?n.resizeMoveSettings.canDragMove=!0:h==="false"&&(n.resizeMoveSettings.canDragMove=!1)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!1&&(r=r.toLowerCase(),n.resizeMoveSettings.canResizeLeft=!1,n.resizeMoveSettings.canResizeRight=!1,n.resizeMoveSettings.canResizeTop=!1,n.resizeMoveSettings.canResizeBottom=!1,r.indexOf("left")!==-1&&(n.resizeMoveSettings.canResizeLeft=!0),r.indexOf("right")!==-1&&(n.resizeMoveSettings.canResizeRight=!0),r.indexOf("top")!==-1&&(n.resizeMoveSettings.canResizeTop=!0),r.indexOf("bottom")!==-1&&(n.resizeMoveSettings.canResizeBottom=!0)),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(u)===!1&&(u=parseFloat(u,u.toLowerCase().replace("px","")),isNaN(u)===!1&&u>=0&&(n.resizeMoveSettings.resizeHadleWidth=u)),!0},a=function(n){v(n)},v=function(n){n.window.addEventBinding(n.window.element,"mousedown",function(){var i=n.window.currentZIndex,r;i>=EVUI.Modules.Panes.Constants.GlobalZIndex||(EVUI.Modules.Panes.Constants.GlobalZIndex++,i=EVUI.Modules.Panes.Constants.GlobalZIndex,r="."+n.windowCSSName+"."+EVUI.Modules.PopIns.Constants.CSS_Position,EVUI.Modules.Styles.Manager.ensureSheet(t.cssSheetName,{lock:!0}),EVUI.Modules.Styles.Manager.setRules(t.cssSheetName,r,{zIndex:i}))})};t=new EVUI.Modules.Panes.PaneManagerSettings;t.attributePrefix=EVUI.Modules.PopIns.Constants.Default_AttributePrefix;t.cssPrefix=EVUI.Modules.PopIns.Constants.Default_CssPrefix;t.cssSheetName=EVUI.Modules.Styles.Constants.DefaultStyleSheetName;t.eventNamePrefix=EVUI.Modules.PopIns.Constants.Default_EventNamePrefix;t.managerName=EVUI.Modules.PopIns.Constants.Default_ManagerName;t.objectName=EVUI.Modules.PopIns.Constants.Default_ObjectName;t.makeOrExtendObject=o;t.buildEventArgs=s;t.interpretBrowserEvent=l;t.hookUpEventHandlers=a;(n==null||typeof n!="object")&&(n=new EVUI.Modules.PopIns.PopInControllerServices);(n.paneManager==null||typeof n.paneManager!="object")&&(n.paneManager=EVUI.Modules.Panes.Manager);t.httpManager=n.httpManager;t.stylesheetManager=n.stylesheetManager;t.htmlLoader=n.htmlLoader;i=new n.paneManager.createNewPaneManager(t);this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,i,{sourcePath:"onUnloaded",targetPath:"onUnloaded"})};EVUI.Modules.PopIns.PopIn=function(n){if(n==null)throw Error("Invalid input. Must wrap a Pane.");var t=n;this.id=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"id",targetPath:"id",settings:{set:!1}});this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.unloadOnHide=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadOnHide",targetPath:"unloadOnHide"});this.currentPosition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentPosition",targetPath:"currentPosition",settings:{set:!1}});this.currentZIndex=-1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"currentZIndex",targetPath:"currentZIndex",settings:{set:!1}});this.isVisible=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isVisible",targetPath:"isVisible",settings:{set:!1}});this.isLoaded=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isLoaded",targetPath:"isLoaded",settings:{set:!1}});this.isInitialized=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"isInitialized",targetPath:"isInitialized",settings:{set:!1}});this.showSettings=null;this.loadSettings=null;this.autoCloseSettings=null;this.resizeMoveSettings=null;this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.onLoad=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoad",targetPath:"onLoad"});this.onLoaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onLoaded",targetPath:"onLoaded"});this.onInitialize=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onInitialize",targetPath:"onInitialize"});this.onShow=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShow",targetPath:"onShow"});this.onPosition=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onPosition",targetPath:"onPosition"});this.onShown=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onShown",targetPath:"onShown"});this.onHide=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHide",targetPath:"onHide"});this.onHidden=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onHidden",targetPath:"onHidden"});this.onUnload=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnload",targetPath:"onUnload"});this.onUnloaded=function(){};EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"onUnloaded",targetPath:"onUnloaded"});this.getEventBindings=function(){return t.getEventBindings()};this.addEventBinding=function(n,i,r){return t.addEventBinding(n,i,r)}};EVUI.Modules.PopIns.PopInShowSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowSettings:n;t.clipSettings==null&&(t.clipSettings=new EVUI.Modules.Panes.PaneClipSettings);t.anchors==null&&(t.anchors=new EVUI.Modules.Panes.PaneAnchors);this.topAnchor=null;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"topAnchor",targetPath:"top"});this.leftAnchor=null;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"leftAnchor",targetPath:"left"});this.bottomAnchor=null;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"bottomAnchor",targetPath:"bottom"});this.rightAnchor=null;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"rightAnchor",targetPath:"right"});this.anchorAlignX=EVUI.Modules.PopIns.PopInAnchorAlignment.Elastic;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"anchorAlignX",targetPath:"alignX"});this.anchorAlignY=EVUI.Modules.PopIns.PopInAnchorAlignment.Elastic;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"anchorAlignY",targetPath:"alignY"});this.showTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t.anchors,{sourcePath:"showTransition",targetPath:"showTransition"});this.hideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"hideTransition",targetPath:"hideTransition"});this.clipBounds=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"clipBounds",targetPath:"clipSettings.clipBounds"});this.clipMode=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"clipMode",targetPath:"clipSettings.clipMode"});this.setExplicitDimensions=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"setExplicitDimensions",targetPath:"setExplicitDimensions"})};EVUI.Modules.PopIns.PopInEventArgs=function(n,t){if(n==null||t==null)throw Error("Invalid arguments.");var i=n,r=t;this.popIn=null;Object.defineProperty(this,"popIn",{get:function(){return i.wrapper},configurable:!1,enumerable:!0});this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.calculatedPosition=null;Object.defineProperty(this,"calculatedPosition",{get:function(){return i.lastCalculatedPosition},configurable:!1,enumerable:!0});this.currentActionArgs=null;Object.defineProperty(this,"currentActionArgs",{get:function(){return r},configurable:!1,enumerable:!0});this.context={}};EVUI.Modules.PopIns.PopInLoadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"type",targetPath:"type"}]);this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"context",targetPath:"context"}]);this.loadSettings=null;this.reload=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,[{sourcePath:"reload",targetPath:"reload"}])};EVUI.Modules.PopIns.PopInShowArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneShowArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.showSettings=null;this.loadArgs=null;this.reInitialize=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"reInitialize",targetPath:"reInitialize"})};EVUI.Modules.PopIns.PopInHideArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneHideArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.popInHideTransition=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"popInHideTransition",targetPath:"windowHideTransition"});this.unloadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"unloadArgs",targetPath:"unloadArgs"})};EVUI.Modules.PopIns.PopInUnloadArgs=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneUnloadArgs:n;this.type=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"type",targetPath:"type",settings:{set:!1}});this.context=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"context",targetPath:"context"});this.remove=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"remove",targetPath:"remove"})};EVUI.Modules.PopIns.PopInTransition=function(){this.css=null;this.keyframes=null;this.duration=0};EVUI.Modules.PopIns.PopInLoadSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneLoadSettings:n;this.element=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"element",targetPath:"element"});this.selector=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"selector",targetPath:"selector"});this.contextElement=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"contextElement",targetPath:"contextElement"});this.httpLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"httpLoadArgs",targetPath:"httpLoadArgs"});this.placeholderLoadArgs=null;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"placeholderLoadArgs",targetPath:"placeholderLoadArgs"})};EVUI.Modules.PopIns.PopInResizeMoveSettings=function(n){var t=n==null||typeof n!="object"?new EVUI.Modules.Panes.PaneResizeMoveSettings:n;this.canResizeTop=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeTop",targetPath:"canResizeTop"});this.canResizeBottom=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeBottom",targetPath:"canResizeBottom"});this.canResizeLeft=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeLeft",targetPath:"canResizeLeft"});this.canResizeRight=!1;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"canResizeRight",targetPath:"canResizeRight"});this.dragHanldeMargin=15;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"dragHanldeMargin",targetPath:"dragHanldeMargin"});this.restoreDefaultOnHide=!0;EVUI.Modules.Core.Utils.wrapProperties(this,t,{sourcePath:"restoreDefaultOnHide",targetPath:"restoreDefaultOnHide"})};EVUI.Modules.PopIns.PopInAnchorAlignment={None:"none",Elastic:"elastic",Left:"left",Right:"right",Center:"center",Top:"top",Bottom:"bottom"};Object.freeze(EVUI.Modules.PopIns.PopInAnchorAlignment);EVUI.Modules.PopIns.PopInArgumentType={Show:"show",Hide:"hide",Load:"load",Unload:"unload",MoveResize:"moveResize"};Object.freeze(EVUI.Modules.PopIns.PopInArgumentType);EVUI.Modules.PopIns.PopInClipMode={Overflow:"overflow",Clip:"clip",Shift:"shift"};Object.freeze(EVUI.Modules.PopIns.PopInClipMode);EVUI.Modules.PopIns.PopInControllerServices=function(){this.httpManager=null;this.htmlLoader=null;this.stylesheetManager=null;this.panesManager=null};EVUI.Modules.PopIns.Manager=null,function(){var t=EVUI.Modules.PopIns.PopInManager,n=null;Object.defineProperty(EVUI.Modules.PopIns,"Manager",{get:function(){return n==null&&(n=new t),n},enumerable:!0,configurable:!1})}();Object.freeze(EVUI.Modules.PopIns);delete $evui.popIns;$evui.popIns=null;Object.defineProperty($evui,"popIns",{get:function(){return EVUI.Modules.PopIns.Manager},enumerable:!0});$evui.addPopIn=function(n){return EVUI.Modules.PopIns.Manager.addPopIn(n)};$evui.showPopIn=function(n,t,i){return EVUI.Modules.PopIns.Manager.showPopIn(n,t,i)};$evui.showPopInAsync=function(n,t){return EVUI.Modules.PopIns.Manager.showPopInAsync(n,t)};$evui.hidePopIn=function(n,t,i){return EVUI.Modules.PopIns.Manager.hidePopIn(n,t,i)};$evui.hidePopInAsync=function(n,t){return EVUI.Modules.PopIns.Manager.hidePopInAsync(n,t)};EVUI.Modules.Styles={};EVUI.Modules.Styles.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.Styles.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.Styles.Dependencies);EVUI.Modules.Styles.Constants={};EVUI.Modules.Styles.Constants.DefaultStyleSheetName="evui-style-default";EVUI.Modules.Styles.StyleSheetManager=function(){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Styles.Dependencies);var n=new EVUI.Modules.Styles.StyleParser,a=["@keyframes"],u=[];this.addStyleSheet=function(n,r){var o,f;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");if(o=i(n),o===!0)throw Error('A stylesheet with the name "'+n+" already exists.");var h=r instanceof CSSStyleSheet,e=p(r,!0),c=null;if(c=h===!1?nt().sheet:r,f=new it,f.lock=r.lock===!0?!0:!1,f.name=n,f.styleSheet=c,u.push(f),h===!1){if(e==null)return!0;s(f,e.slice())}else f.rules=e,g(f);return t(f.rules)};this.removeStyleSheet=function(n){var t,r;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");return(t=i(n),t==null||t.lock===!0)?!1:(r=u.indexOf(t),r!==-1&&u.splice(r,1),t.styleSheet.ownerNode!=null&&t.styleSheet.ownerNode.remove(),!0)};this.setRules=function(n,u,e){var o,v,w,l,a,b,k,tt,it,ut;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");if(o=null,typeof e=="string"||e!=null&&typeof e=="object"){if(typeof u!="string"&&EVUI.Modules.Core.Utils.isArray(u)===!1)throw Error("Invalid input. Selector missing for provided rules string or an array of strings.");o=new EVUI.Modules.Styles.StyleSheetRule;o.selector=u;o.rules=e}else o=u;if(v=i(n),v==null){this.addStyleSheet(n,o);return}var rt=p(o),ft=rt.length,g=[],nt=[];for(w=0;w<ft;w++)l=rt[w],a=r(v,l.selector),a!=null?(b={},k=null,a.selectors.filter(function(n){return d(n)}).length>0?(b=l.rules,k=[l]):(b[a.selector]=f(l.rules,a.rules),k=c(b)),tt=h(v,a),tt===-1?g.push(l):(it=y(k,tt,v,a),it!=null&&(nt=nt.concat(it)))):g.push(l);return ut=s(v,g),t(nt.concat(ut))};this.removeRules=function(n,u){var f,s,y,o,c,l;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");if(f=i(n),f==null)return!1;var a=e(u),p=a.length,v=[];for(s=0;s<p;s++)y=a[s],o=r(f,y),o!=null&&(c=h(f,o),c!==-1&&(f.styleSheet.deleteRule(c),l=f.rules.indexOf(o),l!==-1&&f.rules.splice(l,1),v.push(o)));return t(v)};this.getRules=function(n,u){var f,o,l,s;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");if(f=i(n),f==null)return null;if(typeof u=="string"||EVUI.Modules.Core.Utils.isArray(u)){var h=e(u),a=h.length,c=[];for(o=0;o<a;o++)l=h[o],s=r(f,l),s!=null&&c.push(s);return t(c)}return t(f.rules)};this.ensureSheet=function(n,t){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");var r=i(n);return r==null?this.addStyleSheet(n,t):(g(r),this.getRules(n))};this.sync=function(n,r){var u,f;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("Sheet name cannot be null or whitespace.");if(typeof r!="string"||(u=i(n),u==null))return!1;if(r===EVUI.Modules.Styles.SyncMode.FromSheet){if(u.lock===!0)throw Error("Cannot sync the contents of a locked sheet with those of the DOM.");return u.rules=w(u),t(u.rules)}while(u.styleSheet.cssRules.length>0)u.styleSheet.deleteRule(0);return f=u.rules,u.rules=[],f=s(u,f),t(f)};var t=function(n){var r,f,t,u,i;if(n==null)return null;for(r=[],f=n.length,t=0;t<f;t++)u=n[t],i=new EVUI.Modules.Styles.StyleSheetRule,i.selector=u.selector,i.rules=o(u.rules),r.push(i);return r},e=function(t){var r=[],s,o,h,u,c,l,f,i;if(typeof t!="string"){if(EVUI.Modules.Core.Utils.isArray(t)===!0){for(f=t.length,i=0;i<f;i++)s=e(t[i]),s!=null&&(r=r.concat(s));return r}}else if(o=v(t),o===-1)r.push(t);else{for(h="",u=null,t=n.getNormalizedSelctor(t),c=new RegExp(/\s/),l=new RegExp(/[\>\\~\+]|\|{2}/g),t=t.replace(/\s[\>\\~\+\.]\s|\s\|{2}\s/g,function(n){return n.trim()}),o=v(t),i=o;i>0;i--)if(c.test(t[i])===!0){if(i>0&&l.test(t[i-1])===!0){i>1&&t[i-2]==="\\"&&i--;continue}h=t.substring(0,i);u=t.substr(i);break}for(u==null&&(u=t),r=u.split(","),f=r.length,i=0;i<f;i++)r[i]=n.getNormalizedSelctor(h+r[i])}return r},v=function(n){for(var t=n.indexOf(","),i=t>0&&n[t-1]==="\\";i===!0;){if(t=n.indexOf(",",t+1),t===-1)break;i=t>0&&n[t-1]==="\\"}return t},y=function(n,t,i,u){var o,c;if(n==null||n.length===0)return[];var h=[],a=!1,v=0,p=n.length;for(o=0;o<p;o++){var e=n[o],s=l(e),f=u!=null?u:r(i,e.selector),y=!1;if(f==null||f.cssRuleText!==s||f.cssRule==null||f.cssRule.parentStyleSheet==null)try{a===!1&&(i.styleSheet.deleteRule(t),a=!0);c=i.styleSheet.insertRule(s,t+v);y=!0;v++}catch(w){EVUI.Modules.Core.Utils.log('Failed to update rule "'+s+'" : '+w.message);continue}f==null?(e.cssRule=i.styleSheet.cssRules[c],i.rules.push(e),h.push(e)):y===!0&&(f.cssRule=i.styleSheet.cssRules[c],f.selectors=e.selectors,f.selectorsSplit=e.selectorsSplit,f.rules=e.rules,f.cssRuleText=s,h.push(f))}return h},r=function(n,t){var u,i,r;if(n==null||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)return null;for(u=n.rules.length,i=0;i<u;i++)if(r=n.rules[i],r.selector===t)return r;return null},h=function(n,t){var r,i;if(n==null||t==null)return-1;if(t.cssRule!=null)for(r=n.styleSheet.cssRules.length,i=0;i<r;i++)if(n.styleSheet.cssRules[i]===t.cssRule)return i;return-1},p=function(n,t){if(n instanceof CSSStyleSheet&&t===!0)return w(n);var i=b(n),r=ut(i);return c(r)},w=function(t){var i=new it,o,a,s,w,b,u,p,e,d,ft,g;for(i.styleSheet=t,i.rules=[],o={},u=0;u<t.cssRules.length;){var nt=[],tt=t.cssRules[u],et=n.parse(tt.cssText),rt=c(et),ot=rt.length;for(a=0;a<ot;a++)s=rt[a],s.cssRule=tt,e=r(i,s.selector),e!=null?(o[e.selector]==null&&(o[e.selector]=[e]),o[e.selector].push(s),u++):nt.push(s);w=y(nt,u,i);u+=w==null?0:w.length}for(b in o){var ut={},k=o[b],st=k.length,v=-1;for(u=0;u<st;u++)f(k[u].rules,ut),p=h(i,k[u]),p!==-1&&(v===-1&&(v=p),i.styleSheet.deleteRule(p));if(e=r(i,b),v!==-1){e.rules=ut;d=l(e);try{ft=i.styleSheet.insertRule(d,v);e.cssRule=i.styleSheet.cssRules[ft]}catch(ht){EVUI.Modules.Core.Utils.log('Failed to add rule "'+d+'":'+ht.message);g=i.rules.indexOf(e);g!==-1&&i.rules.splice(g,1)}}}return i.rules},b=function(t){var r,l,c,i,h;if(t==null)return null;if(r=[],typeof t=="string")r.push(n.parse(t));else if(typeof t=="object")if(EVUI.Modules.Core.Utils.isArray(t)===!0)for(c=t.length,i=0;i<c;i++)(l=b(t[i]),l!=null)&&(r=r.concat(l));else if(t instanceof CSSStyleSheet)for(c=t.cssRules.length,i=0;i<c;i++)r.push(n.parse(t.cssRules[i].cssText));else if((typeof t.selector=="string"||EVUI.Modules.Core.Utils.isArray(t.selector)===!0)&&t.rules!=null){var a=e(t.selector),u=null,s={},v=a.length;for(i=0;i<v;i++){if(h=a[i],u==null&&typeof t.rules=="string")u=n.parse(t.rules),s[h]=u;else if(typeof t.rules=="object")if(EVUI.Modules.Core.Utils.isArray(t.rules))throw Error("A rule object with a selector cannot have an array as its set of rules.");else s[h]!=null?f(o(u!=null?u:t.rules),s[h]):s[h]=o(u!=null?u:t.rules);r.push(s)}}return r},f=function(n,t,i){var u,r,e;i==null&&(i=[n]);for(u in n)if(r=n[u],e=t[u],r!=null&&typeof r=="object"){if(e==null)t[u]=r;else if(typeof e=="object"){if(i.indexOf(r)!==-1)continue;i.push(r);f(r,e,i.slice());i=[]}}else typeof r!="string"?typeof r=="number"?t[u]=r.toString():r===null&&delete t[u]:r.toLowerCase()==="null"?delete t[u]:t[u]=r;return t},o=function(n,t,i){var u,r;if(n==null)return t;t==null&&(t={});i==null&&(i=[n]);for(u in n)(r=n[u],r!=null)&&(typeof r=="object"?(i.indexOf(r)!==-1&&(t[u]=n),i.push(n),t[u]=o(r,EVUI.Modules.Core.Utils.isArray(r)?[]:{},i),i=[]):t[u]=r);return t},ut=function(n){for(var i={},r=n.length,t=0;t<r;t++)f(n[t],i);return i},c=function(n){var t=[],r,i;for(r in n)i=k(n,r),i!=null&&(t=t.concat(i));return t},s=function(n,t){for(var i,r,e,f=[],u=0;u<t.length;u++){i=t[u];r=l(i);try{e=n.styleSheet.insertRule(r,n.styleSheet.cssRules.length);i.cssRule=n.styleSheet.cssRules[e];i.cssRuleText=r;n.rules.push(i);f.push(i)}catch(o){EVUI.Modules.Core.Utils.log('Failed to add rule "'+r+'":'+o.message)}}return f},k=function(n,t,i,r){var f,e,o,s,u,h;if(r==null&&(r=[]),r.push(t),f=n[t],e=[],i=i==null?t:i+" "+t,d(t)===!0)return u=new rt,u.rules=f,u.selector=i,u.selectors=r,[u];for(o in f)if(s=f[o],s!=null){if(typeof s!="object")return u=new rt,u.rules=f,u.selector=i,u.selectors=r,[u];h=k(f,o,i,r.slice());h!=null&&(e=e.concat(h))}return e},d=function(n){for(var i=a.length,t=0;t<i;t++)if(EVUI.Modules.Core.Utils.stringStartsWith(a[t],n)===!0)return!0;return!1},g=function(n){if(n.styleSheet.ownerNode==null){var t=ft(n);n.styleSheet=t}else n.styleSheet.ownerNode.isConnected===!1&&document.head.appendChild(syleSheet.ownerNode),n.disabled===!0&&(n.disabled=!1)},ft=function(n){var t=nt(),i=n.rules;n.rules=[];s(n,i);n.styleSheet=t.sheet},nt=function(){var n=document.createElement("style");return document.head.appendChild(n),n},i=function(n){for(var i,r=u.length,f=n.toLowerCase(),t=0;t<r;t++)if(i=u[t],i.name.toLowerCase()===f)return i;return null},l=function(t){var i,e;if(t==null)return"";var r="",f="",u=t.selectors.length;for(u===1&&t.selectorsSplit===!1&&(t.selectors=n.breakUpSelector(t.selector),u=t.selectors.length,t.selectorsSplit=!0),i=0;i<u;i++)i>0?(r=r+" { "+t.selectors[i],f+="}"):r=t.selectors[i];return e=tt(t.rules),r+e+f},tt=function(n){var u="{",f=new RegExp(/(?!^)[A-Z]/g),i,r,t;for(i in n)r=i.replace(f,function(n){return"-"+n.toLowerCase()}).toLowerCase(),t=n[i],u+=t!=null&&typeof t=="object"?r+" "+tt(t):r+":"+t+"; ";return u+"}"},it=function(){this.name=null;this.styleSheet=null;this.lock=!1;this.rules=[]},rt=function(){this.selector=null;this.rules=null;this.selectors=[];this.cssRule=null;this.cssRuleText=null;this.selectorsSplit=!1};this.addStyleSheet(EVUI.Modules.Styles.Constants.DefaultStyleSheetName,{lock:!0})};EVUI.Modules.Styles.StyleSheetRule=function(){this.selector=null;this.rules=null};EVUI.Modules.Styles.StyleParser=function(){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.Styles.Dependencies);var o=new RegExp(/(?!^)(\-)([A-Z])/ig),s=new RegExp(/\{/g),h=new RegExp(/\}/g),c=new RegExp(/[#\.\[\]]/g),t=new RegExp(/\s+/g),l=new RegExp(/[\>\\~\+]|\|{2}/g);this.parse=function(t){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)return null;var u=new v;return(u.rawCSS=a(t),u.openMatches=n(s,u.rawCSS,!0),u.closeMatches=n(h,u.rawCSS,!0),u.openMatches.length===0&&u.closeMatches.length===0)?r(u.rawCSS):i(u,{})};this.breakUpSelector=function(i){var a=n(t,i),h;if(a.length===0)return[i];for(var c=n(new RegExp(/\@/g),i,!0),v=n(new RegExp(/\)/g),i,!0),e=0,o=0,l=0,r=[];e<i.length;){var u=c[o],f=c[o+1],s=v[l];if(u==null&&f==null&&s==null)return r.length>0?(r.push(i.substring(e)),r):[i];if(u!=null&&f!=null)h=i.substring(u.index,f.index),r.push(h),o++,e=f.index+f.length;else{if(s!=null)h=i.substring(u.index,s.index+1),r.push(h),l++,e=s.index+2;else return r.push(i.substring(u.index)),r;o++}}return r};this.getNormalizedSelctor=function(n){return u(n)};var a=function(n){for(var u="",t=0,e=n.length,f=!1,i,r;t<e;){if(i=n.indexOf("/*",t),r=n.indexOf("*/",t),i===-1||r===-1)break;f=!0;u+=n.substring(t,i);t=r+2}return f===!0?u+n.substring(t):n},n=function(n,t,i){var s,u;if(typeof t!="string"||n==null)return null;for(var f=[],o=t.matchAll(n),r=o.next();r.done===!1;)s=r.value.index>0?t[r.value.index-1]:"",i===!0&&s!=="\\"?(u=new e(r.value.index,r.value[0],r.value[0].length),f.push(u)):i!==!0&&(u=new e(r.value.index,r.value[0],r.value[0].length),f.push(u)),r=o.next();return f},i=function(n,t){for(var p=n.rawCSS.length,l,v,c,f,s,h;n.index<p;){var e=n.openMatches[n.openIndex],y=n.openMatches[n.openIndex+1],o=n.closeMatches[n.closeIndex];if(e==null)break;if(o==null)break;if(e.index>n.index)if(y!=null&&y.index<o.index)for(c=n.rawCSS.substring(n.index!=0?n.index+1:0,e.index).trim(),n.openIndex++,n.index=e.index,l=c.split(","),v=l.length,f=0;f<v;f++)s=u(l[f]),h=t[s],t[s]=h!=null?i(n,h):i(n,{});else if(n.index===o.index){n.closeIndex++;n.index++;break}else{if(c=n.rawCSS.substring(n.index!=0?n.index+1:0,e.index).trim(),c.length>0){var l=c.split(","),v=l.length,a=r(n.rawCSS.substring(e.index+1,o.index));for(f=0;f<v;f++)s=u(l[f]),f>0&&(a=EVUI.Modules.Core.Utils.shallowExtend({},a)),h=t[s],t[s]=h!=null?EVUI.Modules.Core.Utils.shallowExtend(h,a):a;n.index=o.index+1}else return r(n.rawCSS.substring(e.index+1,o.index));n.openIndex++;n.closeIndex++}else break}return t},r=function(n){for(var t,i,r,s,f={},e=n.split(";"),h=e.length,u=0;u<h;u++)(t=e[u],i=t.indexOf(":"),i!==-1)&&(r=t.substring(0,i).toLowerCase().trim(),s=t.substring(i+1).trim(),r=r.replace(o,function(n){return n[1].toUpperCase()}),f[r]=s);return f},u=function(i){var u,s,h,e,y;if(typeof i!="string")return null;i=i.replace(/\)|\(/g,function(n){return n===")"?") ":" ("}).replace(/\,|\s\,|\,\s/g,", ");var r="",c=i.trim().split(t),p=c.length;for(u=0;u<p;u++){var o=c[u],a=n(l,o,!0),v=a.length;if(v===0)r=f(o,u===0,r);else{for(s=0,h=0;h<v;h++)e=a[h],y=o.substring(s,e.index),s=e.index+e.length,r=f(y,u===0,r),r=r+" "+e.match;r=f(o.substring(s),!1,r)}}return r.replace(t," ")},f=function(t,i,r){var e=n(c,t,!0),o=e.length,f,u;return o>0?(f=e[0],u=t.substring(0,f.index).toLocaleLowerCase(),r=r+(i===!0?u:" "+u)+t.substring(f.index)):(u=t.toLocaleLowerCase(),r=r+(i===!0?u:" "+u)),r},v=function(){this.index=0;this.rawCSS=null;this.openMatches=null;this.closeMatches=null;this.openIndex=0;this.closeIndex=0},e=function(n,t,i){this.index=typeof n!="number"?0:n;this.match=typeof t!="string"?null:t;this.length=typeof i!="number"?0:i}};EVUI.Modules.Styles.CSSOptions=function(){this.sheetName=null;this.selector=null;this.rules=null;this.remove=!1};EVUI.Modules.Styles.SyncMode={FromSheet:"fromSheet",ToSheet:"toSheet"};Object.freeze(EVUI.Modules.Styles.SyncMode);EVUI.Modules.Styles.Manager=null,function(){var n=null,t=EVUI.Modules.Styles.StyleSheetManager;Object.defineProperty(EVUI.Modules.Styles,"Manager",{get:function(){return n==null&&(n=new t),n},enumerable:!0,configurable:!1})}();delete $evui.styles;$evui.styles=null;Object.defineProperty($evui,"styles",{get:function(){return EVUI.Modules.Styles.Manager},enumerable:!0});$evui.css=function(n){var u,f;if(n==null)return null;if(typeof n=="string")return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0?void 0:EVUI.Modules.Styles.Manager.setRules(EVUI.Modules.Styles.Constants.DefaultStyleSheetName,n);if(typeof n=="object"){var i=EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.sheetName)===!0?EVUI.Modules.Styles.Constants.DefaultStyleSheetName:n.sheetName,r=EVUI.Modules.Core.Utils.isArray(n.selector)===!0||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.selector)===!1?n.selector:null,t=n.rules!=null&&(typeof n.rules=="object"||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n.rules)===!1)?n.rules:null,e=typeof n.remove!="boolean"?!1:n.remove;return e===!0?r!=null?EVUI.Modules.Styles.Manager.removeRules(i,r):(u=EVUI.Modules.Styles.Manager.getRules(i),f=EVUI.Modules.Styles.Manager.removeStyleSheet(i),f===!0)?u:null:r==null?t!=null?EVUI.Modules.Styles.Manager.setRules(i,t):EVUI.Modules.Styles.Manager.getRules(i):t!=null?t instanceof CSSStyleSheet?EVUI.Modules.Styles.Manager.setRules(i,t):EVUI.Modules.Core.Utils.isArray(t)===!0&&t.length>0&&t[0].selector!=null?EVUI.Modules.Styles.Manager.setRules(i,t):EVUI.Modules.Styles.Manager.setRules(i,r,t):EVUI.Modules.Styles.Manager.getRules(i,r)}};Object.freeze(EVUI.Modules.Styles.Constants);Object.freeze(EVUI.Modules.Styles);EVUI.Modules.TreeView={};EVUI.Modules.TreeView.Dependencies={Core:Object.freeze({version:"1.0",required:!0}),Binding:Object.freeze({version:"1.0",required:!0}),Styles:Object.freeze({version:"1.0",required:!0}),EventStream:Object.freeze({version:"1.0",required:!0}),Dom:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.TreeView.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.TreeView.Dependencies);EVUI.Modules.TreeView.Constants={};EVUI.Modules.TreeView.Constants.Attr_ExpandOn="evui-tree-node-expand-on";EVUI.Modules.TreeView.Constants.Attr_CollapseOn="evui-tree-node-collapse-on";EVUI.Modules.TreeView.Constants.Attr_ToggleOn="evui-tree-node-toggle-on";EVUI.Modules.TreeView.Constants.Attr_Depth="evui-tree-node-depth";EVUI.Modules.TreeView.Constants.Attr_NodeId="evui-tree-node-id";EVUI.Modules.TreeView.Constants.Attr_Ordinal="evui-tree-node-ordinal";EVUI.Modules.TreeView.Constants.Attr_TreeId="evui-tree-id";EVUI.Modules.TreeView.Constants.CSS_NodeInterior="evui-tree-node-interior";EVUI.Modules.TreeView.Constants.CSS_ChildNodeList="evui-tree-node-children";EVUI.Modules.TreeView.Constants.CSS_TreeViewNode="evui-tree-node";EVUI.Modules.TreeView.Constants.CSS_TreeViewRootNode="evui-tree-root-node";EVUI.Modules.TreeView.Constants.CSS_TreeView="evui-tree";EVUI.Modules.TreeView.Constants.CSS_TreeViewRoot="evui-tree-root";EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Hidden="evui-tree-node-children-hidden";EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Visible="evui-tree-node-children-visible";EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Expanding="evui-tree-node-children-expanding";EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Collapsing="evui-tree-node-children-collapsing";EVUI.Modules.TreeView.Constants.Event_OnBuild="evui.treenode.build";EVUI.Modules.TreeView.Constants.Event_OnBuildChildren="evui.treenode.build.children";EVUI.Modules.TreeView.Constants.Event_OnChildrenBuilt="evui.treenode.built.children";EVUI.Modules.TreeView.Constants.Event_OnBuilt="evui.treenode.built";EVUI.Modules.TreeView.Constants.Event_OnExpand="evui.treenode.expand";EVUI.Modules.TreeView.Constants.Event_OnExpanded="evui.treenode.expanded";EVUI.Modules.TreeView.Constants.Event_OnCollapse="evui.treenode.collapse";EVUI.Modules.TreeView.Constants.Event_OnCollapsed="evui.treenode.collapsed";EVUI.Modules.TreeView.Constants.Fn_TreeViewEventHandler=function(){};EVUI.Modules.TreeView.Constants.Fn_TreeViewSelector=function(){};EVUI.Modules.TreeView.Constants.Fn_TreeViewNodeSelector=function(){};EVUI.Modules.TreeView.Constants.Fn_ChildListGetter=function(){};Object.freeze(EVUI.Modules.TreeView.Constants);EVUI.Modules.TreeView.TreeViewController=function(n){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.TreeView.Dependencies);var u=[],bt=0,kt=0,o=["element","id","parentNode","childNodes","depth","index","treeView"],dt=["id","nodes","rootListElement","rootNode","element",],it=["onExpand","onExpanded","onCollapse","onCollaposed","onBuild","onBuilt","onBuildChildren","onChildrenBuilt"],rt=!1,r=n;this.addTreeView=function(n,t){var e=typeof n,r,f,i;if(n==null||e!=="string"&&e!=="object")throw Error("Invalid parameters, string or object expected.");if(r=typeof n=="string"?n:n.id,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(r)===!0)throw Error("TreeView id must be a string.");if(f=p(r),f!=null)throw Error('A TreeView with an id of "'+f+'" already exists.');return i=gt(n,t),i!=null&&u.push(i),i.treeView};this.getTreeView=function(n,t){var f=[],e,o,i,r;if(typeof n=="string"){if(e=p(n),e!=null)return e.treeView}else{if(typeof n=="function"){for(f=t===!0?[]:null,o=u.length,i=0;i<o;i++)if(r=u[i],n(r.treeView)===!0)if(t===!0)f.push(r.treeView);else return r.treeView;return f}return null}};this.removeTreeView=function(n,t){var i=p(n),r;return i==null?!1:(t===!0&&vt(i),r=u.indexOf(i),r!==-1&&u.splice(r,1),!0)};var p=function(n){var r,f,t,i;if(typeof n!="string")return null;for(r=u.length,f=n.toLowerCase(),t=0;t<r;t++)if(i=u[t],i.treeViewId.toLowerCase()===f)return i;return null},gt=function(n,t){var r;if(n==null&&t==null)return null;var u=null,i=new EVUI.Modules.TreeView.AddTreeViewArgs,h=new EVUI.Modules.TreeView.AddTreeViewNodeArgs,f=!1,s=!1;return typeof n=="string"?(u=n,i.id=u,i.element=e()):(f=!0,u=n.id,EVUI.Modules.Core.Utils.shallowExtend(i,n,["nodes","rootNode"].concat(o)),i.element=e(n.element),n.rootNode!=null&&typeof n.rootNode=="object"&&(s=!0,EVUI.Modules.Core.Utils.shallowExtend(h,n.rootNode,o))),t==null&&(t=new EVUI.Modules.TreeView.AddTreeViewNodeArgs),f===!1?(EVUI.Modules.Core.Utils.shallowExtend(i,t,it.concat(o)),i.element=e(t.element)):s===!1&&(EVUI.Modules.Core.Utils.shallowExtend(t,i,it.concat(o)),i.element=e(i.element)),r=new hr,r.element=i.element,r.treeViewId=u,r.treeView=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.TreeView.TreeView(r),i,dt),r.rootNode=y(t,r),r.className=fr(r.treeViewId),r},s=function(n,i,r,u,e){typeof r=="function"?(e=r,r=null):typeof u=="function"?(e=u,u=null):typeof e!="function"&&(e=function(){});var o=null;if(typeof r=="number"){if(o=yt(i,r),o==null)throw Error("No node with an id of "+r+" exists in TreeView "+i.treeViewId);}else if(r!=null&&typeof r=="object")if(typeof r.nodeId=="number"){if(EVUI.Modules.Core.Utils.instanceOf(r,pt)===!0)o=r;else if(o=yt(i,r.id),o==null)throw Error("No node with an id of "+r.id+" exists in TreeView "+i.treeViewId);}else u==null&&(u=r,o=i.rootNode);else o=i.rootNode;if(n===t.Build)l(o,u,e);else if(n===t.Collapse)c(o,u,e);else if(n===t.Expand)h(o,u,e);else if(n===t.Toggle)a(o,u,e);else if(n===t.Dispose)f(o);else throw Error("Invalid action.");},ni=function(n,i,r,u){s(t.Build,n,i,r,u)},ti=function(n,i,r,u){s(t.Expand,n,i,r,u)},ii=function(n,i,r,u){s(t.Collapse,n,i,r,u)},ri=function(n,i){i==n?vt(n):s(t.Dispose,n,i)},ui=function(n,i,r,u){s(t.Toggle,n,i,r,u)},l=function(n,i,r){var u,f;typeof i=="function"&&(r=i,i=null);typeof r!="function"&&(r=function(){});i=ut(n,i);u=new tt;u.action=t.Build;u.buildArgs=i;u.callback=r;u.nodeEntry=n;u.context=i.context==null?{}:i.context;f=new nt;f.callback=r;f.operationSession=u;u.callback=f;v(n,u)},h=function(n,i,r){var u,f;typeof i=="function"&&(r=i,i=null);typeof r!="function"&&(r=function(){});i==null&&(i=new EVUI.Modules.TreeView.ExpandCollapseTreeViewNodeArgs);i.buildArgs=ut(n,i.buildArgs);u=new tt;u.action=t.Expand;u.expandCollapseArgs=i;u.buildArgs=i.buildArgs;u.callback=r;u.nodeEntry=n;u.context=i.context!=null?i.context:i.buildArgs.context!=null?i.buildArgs.context:{};f=new nt;f.callback=r;f.operationSession=u;u.callback=f;v(n,u)},c=function(n,i,r){var u,f;typeof i=="function"&&(r=i,i=null);typeof r!="function"&&(r=function(){});i==null&&(i=new EVUI.Modules.TreeView.ExpandCollapseTreeViewNodeArgs);u=new tt;u.action=t.Collapse;u.expandCollapseArgs=i;u.callback=r;u.nodeEntry=n;u.context=i.context!=null?i.context:i.buildArgs!=null&&i.buildArgs.context!=null?i.buildArgs.context:{};f=new nt;f.callback=r;f.operationSession=u;u.callback=f;v(n,u)},a=function(n,i,r){if(n.operation!=null){if(n.operation.action===t.Expand)return c(n,i,r);if(n.operation.action===t.Collapse)return h(n,i,r)}return n.expanded===!0?c(n,i,r):h(n,i,r)},ut=function(n,t){return t==null&&(t=new EVUI.Modules.TreeView.BuildTreeViewNodeArgs),t.bindingTemplate==null&&(t.bindingTemplate=n.bindingTemplate),t.buildMode==null&&(t.buildMode=EVUI.Modules.TreeView.TreeViewNodeBuildMode.Update),t.childListName==null&&(t.childListName=n.childListName),t.options==null&&(t.options=n.options),t.optionsMode==null&&(t.optionsMode=n.optionsMode),t.source==null&&(t.source=n.source),t},v=function(n,t){if(t!=null){var i=rr(n,t);if(i!=null){if(i.cancelCurrent===!0)return ei(n,t);if(i.continueAfter===!0)return oi(n,t);if(i.skip===!0)return si(n,t);fi(t,i)}}},fi=function(n,i){n.nodeEntry.previousCompletedNodeState=n.nodeEntry.nodeState;n.action===t.Build?n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Building:n.action===t.Expand?n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Expanding:n.action===t.Collapse&&(n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Collapsing);ci(n,i);n.nodeEntry.operation=n;n.eventStream.execute()},ei=function(n,t){n.operation.canceled=!0;for(var i=n.operation.continuation;i!=null;)i.callbackStack.indexOf(i.callback)===-1&&i.callbackStack.push(i.callback),t.callbackStack=t.callbackStack.concat(i.callbackStack),i=i.continuation;n.operation.continuation=t;t.isContinuation=!0;n.operation.eventStream==null||n.operation.eventStream.isWorking()===!1?w(n.operation):(n.operation.eventStream.cancel(),b(n))},oi=function(n,t){var i=hi(n);i==null?n.operation.continuation=t:i.continuation=t;t.isContinuation=!0},si=function(n,t){n.operation==null?w(t):n.operation.callbackStack.push(t.callback)},hi=function(n){var t,i;if(n.operation==null)return null;for(t=n.operation;t!=null;){if(i=t.continuation,i==null)break;t=i}return t},w=function(n,t){var r,f,i,u;if(typeof t!="function"&&(t=function(){}),n.nodeEntry.operation=null,n.callbackStack.push(n.callback),n.continuation!=null)return n.canceled===!0&&b(n.nodeEntry),n.continuation.callbackStack=n.continuation.callbackStack.concat(n.callbackStack),v(n.nodeEntry,n.continuation),t();for(n.callbackStack.sort(function(n,t){return n.operationSession.operationId-t.operationSession.operationId}),r=[],f=n.callbackStack.length,i=0;i<f;i++)r.push(n.callbackStack[i].callback);u=new EVUI.Modules.Core.AsyncSequenceExecutionArgs;u.functions=r;EVUI.Modules.Core.AsyncSequenceExecutor.execute(u,function(){n.canceled===!0&&b(n.nodeEntry);t()})},b=function(n){n.previousCompletedNodeState!==EVUI.Modules.TreeView.TreeViewNodeState.None&&(n.nodeState=n.previousCompletedNodeState,n.previousCompletedNodeState=EVUI.Modules.TreeView.TreeViewNodeState.None)},ci=function(n,i){var f,r,u;for(n.eventStream=new EVUI.Modules.EventStream.EventStream,n.eventStream.context=n.nodeEntry.node,n.eventStream.onCancel=function(){n.canceled=!0;n.eventStream.seek("finishOperation")},n.eventStream.onError=function(){n.canceled=!0;n.eventStream.seek("finishOperation")},n.eventStream.processInjectedEventArgs=function(t){var i=new EVUI.Modules.TreeView.TreeViewEventArgs(n.nodeEntry);return i.cancel=function(){return t.cancel()},i.key=t.key,i.pause=function(){return t.pause()},i.resume=function(){return t.resume()},i.stopPropagation=function(){return t.stopPropagation()},i.context=n.context,i},n.eventStream.processReturnedEventArgs=function(t){n.context=t.context},f=i.actions.length,r=0;r<f;r++)u=i.actions[r],u===t.Build?ft(n):u===t.Collapse?bi(n):u===t.Expand&&vi(n);li(n)},ft=function(n){n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnBuild,handler:function(t){if(i(n)!==!1&&(n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Building,typeof n.nodeEntry.node.onBuild=="function"))return n.nodeEntry.node.onBuild(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnBuild,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onBuild=="function")return n.nodeEntry.treeViewEntry.treeView.onBuild(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Job,key:"buildNode",handler:function(t){if(i(n)===!1)return t.resolve();n.nodeEntry===n.nodeEntry.treeViewEntry.rootNode?ai(n,function(){k(n)==!0&&g(n.nodeEntry);t.resolve()}):et(n,function(){k(n)===!0&&g(n.nodeEntry);t.resolve()})}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnBuildChildren,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.node.onBuildChildren=="function")return n.nodeEntry.node.onBuildChildren(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnBuildChildren,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onBuildChildren=="function")return n.nodeEntry.treeViewEntry.treeView.onBuildChildren(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Job,key:"buildChildren",handler:function(r){var f,e,u;if(i(n)===!1)return r.resolve();f=!1;e=k(n);n.nodeEntry.options.noTopNode===!0&&n.nodeEntry.parentNodeEntry==null&&(f=!0);u=EVUI.Modules.TreeView.TreeViewNodeState.Collapsed;n.action===t.Expand&&f===!0&&(u=EVUI.Modules.TreeView.TreeViewNodeState.Expanded);n.nodeEntry.expanded===!0&&(u=EVUI.Modules.TreeView.TreeViewNodeState.Expanded);e===!0?di(n.nodeEntry,function(){f===!0?ot(n,function(){n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Expanded;r.resolve()}):(n.nodeEntry.nodeState=u,r.resolve())}):(n.nodeEntry.nodeState=u,r.resolve())}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnChildrenBuilt,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.node.onChildrenBuilt=="function")return n.nodeEntry.node.onChildrenBuilt(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnChildrenBuilt,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onChildrenBuilt=="function")return n.nodeEntry.treeViewEntry.treeView.onChildrenBuilt(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnBuilt,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.node.onBuilt=="function")return n.nodeEntry.node.onBuilt(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnBuilt,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onBuilt=="function")return n.nodeEntry.treeViewEntry.treeView.onBuilt(t)}})},li=function(n){n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Job,key:"finishOperation",handler:function(t){pi(n,function(){t.resolve()})}})},k=function(n){var i=!1,r,u;return n.buildArgs.recursive===!0?i=!0:n.action===t.Expand?(n.nodeEntry.options.expandMode===EVUI.Modules.TreeView.TreeViewNodeBuildMode.Rebuild&&(i=!0),n.nodeEntry.options.expandMode===EVUI.Modules.TreeView.TreeViewNodeBuildMode.Update&&(i=!0)):n.nodeEntry.options.noTopNode===!0&&n.nodeEntry.parentNodeEntry==null?i=!0:n.nodeEntry.options.lazy!==!0&&(r=n.nodeEntry.parentNodeEntry,r==null?i=!0:(u=r.operation,u!=null&&u.action===t.Expand&&(i=!0))),i},et=function(n,t){nr(n.nodeEntry,function(n){t(n)})},ai=function(n,t){n.nodeEntry.treeViewEntry.element=e(n.nodeEntry.treeViewEntry.element);n.nodeEntry.treeViewEntry.rootListNode==null&&(n.nodeEntry.treeViewEntry.rootListNode=lt(n.nodeEntry,!1),n.nodeEntry.treeViewEntry.rootListNode.classList.remove(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList),n.nodeEntry.treeViewEntry.rootListNode.classList.add(EVUI.Modules.TreeView.Constants.CSS_TreeView),n.nodeEntry.treeViewEntry.rootListNode.classList.add(EVUI.Modules.TreeView.Constants.CSS_TreeViewRoot),n.nodeEntry.treeViewEntry.rootListNode.classList.add(n.nodeEntry.treeViewEntry.className),n.nodeEntry.treeViewEntry.rootListNode.classList.add(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList),n.nodeEntry.treeViewEntry.element.appendChild(n.nodeEntry.treeViewEntry.rootListNode));n.nodeEntry.rootElement==null&&(n.nodeEntry.rootElement=document.createElement("li"),n.nodeEntry.rootElement.classList.add(EVUI.Modules.TreeView.Constants.CSS_TreeViewNode),n.nodeEntry.rootElement.classList.add(EVUI.Modules.TreeView.Constants.CSS_TreeViewRootNode),n.nodeEntry.rootElement.setAttribute(EVUI.Modules.TreeView.Constants.Attr_NodeId,n.nodeEntry.nodeId.toString()),n.nodeEntry.rootElement.setAttribute(EVUI.Modules.TreeView.Constants.Attr_Depth,"0"),n.nodeEntry.rootElement.setAttribute(EVUI.Modules.TreeView.Constants.Attr_Ordinal,"0"),n.nodeEntry.bindingElement=document.createElement("div"),n.nodeEntry.bindingElement.classList.add(EVUI.Modules.TreeView.Constants.CSS_NodeInterior),n.nodeEntry.rootElement.append(n.nodeEntry.bindingElement),n.nodeEntry.treeViewEntry.rootListNode.append(n.nodeEntry.rootElement),n.nodeEntry.options.noTopNode===!0&&(n.nodeEntry.treeViewEntry.rootListNode.prepend(n.nodeEntry.rootElement),n.nodeEntry.rootElement.remove()));n.nodeEntry.options.noTopNode===!0&&n.nodeEntry.listElement==null&&(n.nodeEntry.listElement=n.nodeEntry.treeViewEntry.rootListNode);n.nodeEntry.treeViewEntry.treeState=EVUI.Modules.TreeView.TreeViewState.Ready;et(n,function(n){t(n)})},vi=function(n){n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnExpand,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.node.onExpand=="function")return n.nodeEntry.node.onExpand(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnExpand,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onExpand=="function")return n.nodeEntry.treeViewEntry.treeView.onExpand(t)}});ft(n);n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Job,key:"expandNode",handler:function(t){if(i(n)===!1)return t.resolve();ot(n,function(){n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Expanded;t.resolve()})}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnExpanded,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.node.onExpanded=="function")return n.nodeEntry.node.onExpanded(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnExpanded,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onExpanded=="function")return n.nodeEntry.treeViewEntry.treeView.onExpanded(t)}})},ot=function(n,t){var i,r;if(n.nodeEntry.listElement==null)return t(!0);i=new EVUI.Modules.Dom.DomHelper(n.nodeEntry.listElement);i.removeClass(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Hidden);i.addClass(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Visible);n.nodeEntry.expanded=!0;r=n.expandCollapseArgs==null?null:n.expandCollapseArgs.transition;r==null&&(r=n.nodeEntry.options.expandTransition);st(n.nodeEntry,r,EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Expanding,i,function(){t(!0)})},yi=function(n,t){var i,r;if(n.nodeEntry.listElement==null)return t(!0);i=new EVUI.Modules.Dom.DomHelper(n.nodeEntry.listElement);i.removeClass(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Visible);i.addClass(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Hidden);n.nodeEntry.expanded=!1;r=n.expandCollapseArgs.transition;r==null&&(r=n.nodeEntry.options.collapseTransition);st(n.nodeEntry,r,EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Collapsing,i,function(){t(!0)})},st=function(n,t,i,u,f){var e,o;if(typeof f!="function"&&(f=function(){}),n==null||u==null)return f(!1);t!=null&&t.css!=null?(t.keyframes!=null&&r.stylesheetManager.setRules(EVUI.Modules.Styles.Constants.DefaultStyleSheetName,t.keyframes),typeof t.css=="string"?(e=t.css.match(/[\:\;]/g),e==null&&e.length===0&&(i=t.css,u.addClass(i))):(o="."+n.treeViewEntry.className+"."+(n.expanded===!0?EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Expanding:EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Collapsing),r.stylesheetManager.setRules(EVUI.Modules.Styles.Constants.DefaultStyleSheetName,o,t.css),u.addClass(i)),n.transitionTimeoutID!==-1&&(u.removeClass(n.transitionSelector),clearTimeout(n.transitionTimeoutID),typeof n.transitionCallback=="function"&&(n.transitionCallback(),n.transitionCallback=null)),n.transitionCallback=function(){n.transitionCallback=null;n.transitionTimeoutID=-1;n.transitionSelector=null;u.removeClass(i);f(!0)},n.transitionSelector=i,n.transitionTimeoutID=setTimeout(function(){typeof n.transitionCallback=="function"&&n.transitionCallback()},t.duration)):(n.transitionTimeoutID!==-1&&(u.removeClass(n.transitionSelector),clearTimeout(n.transitionTimeoutID),typeof n.transitionCallback=="function"&&(n.transitionCallback(),n.transitionCallback=null),n.transitionSelector=null,n.transitionTimeoutID=-1),f(!1))},pi=function(n,t){w(n,function(){t()})},wi=function(){rt!==!0&&(rt=!0,r.stylesheetManager.setRules(EVUI.Modules.Styles.Constants.DefaultStyleSheetName,"."+EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Hidden,{height:"0px",overflow:"hidden"}),r.stylesheetManager.setRules(EVUI.Modules.Styles.Constants.DefaultStyleSheetName,"."+EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Visible,{height:null}))},bi=function(n){n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnCollapse,handler:function(t){if(i(n)!==!1&&(n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Collapsing,typeof n.nodeEntry.node.onCollapse=="function"))return n.nodeEntry.node.onCollapse(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnCollapse,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onCollapse=="function")return n.nodeEntry.treeViewEntry.treeView.onCollapse(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Job,key:"expandNode",handler:function(t){if(i(n)===!1)return t.resolve();yi(n,function(){n.nodeEntry.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Collapsed;t.resolve()})}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.Event,key:EVUI.Modules.TreeView.Constants.Event_OnCollapseed,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.node.onCollapseed=="function")return n.nodeEntry.node.onCollapseed(t)}});n.eventStream.addStep({type:EVUI.Modules.EventStream.EventStreamStepType.GlobalEvent,key:EVUI.Modules.TreeView.Constants.Event_OnCollapseed,handler:function(t){if(i(n)!==!1&&typeof n.nodeEntry.treeViewEntry.treeView.onCollapseed=="function")return n.nodeEntry.treeViewEntry.treeView.onCollapseed(t)}})},i=function(n){return n.canceled===!0?!1:n.nodeEntry.nodeState===EVUI.Modules.TreeView.TreeViewNodeState.Disposed?!1:!0},ki=function(n){if(n.childListName==null)return null;var t=typeof n.childListName;if(t==="string"||t==="symbol")return n.source!=null?EVUI.Modules.Core.Utils.getValue(n.childListName,n.source):null;if(t==="function")try{return n.childListName(n.source)}catch(i){return EVUI.Modules.Core.Utils.log("Failed to get child list: "),EVUI.Modules.Core.Utils.log(i),null}else return null},di=function(n,t){var f=g(n),e=f.length,u,i;if(at(n),e===0){n.listElement!=null&&(n.listElement.remove(),n.listElement=null);return}n.listElement==null&&(n.listElement=lt(n,!0),n.rootElement.append(n.listElement));u=EVUI.Modules.Core.Utils.toDictionary(n.childNodeEntries,function(n){return n.nodeId});i=new sr;i.childNodes=u;i.parentNodeEntry=n;n.childListBinding!=null||n.childListBinding!=null&&n.options.expandMode!==EVUI.Modules.TreeView.TreeViewNodeBuildMode.Rebuild?(i.reBinding=!0,n.childListBinding.update({bindingContext:i,bindingSource:n.childListStubs},function(){for(var r=n.childNodeEntries.length,u=0,f=function(){u++;u===r&&t(!0)},i=0;i<r;i++)l(n.childNodeEntries[i],null,function(){f()})})):r.bindingController.bind({element:n.listElement,source:n.childListStubs,htmlContent:"<li "+gi()+' ><div class="'+EVUI.Modules.TreeView.Constants.CSS_NodeInterior+'"><\/div><\/li>',insertionMode:EVUI.Modules.Binding.BindingInsertionMode.Append,bindingContext:i,onBind:function(t){EVUI.Modules.Core.Utils.isArray(t.binding.source)===!0&&(n.childListBinding=t.binding)},onBound:function(n){n.pause();tr(n.context,n.binding,function(){n.resume()})}},function(){t(!0)})},gi=function(){var n=EVUI.Modules.TreeView.Constants.Attr_NodeId+'="{{nodeId}}" ';return n+=EVUI.Modules.TreeView.Constants.Attr_Depth+'="{{depth}}" ',n+(EVUI.Modules.TreeView.Constants.Attr_Ordinal+'="{{ordinal}}" ')},nr=function(n,i){if(n.operation!=null&&n.operation.action===t.Expand&&n.binding!=null&&n.options.expandMode===EVUI.Modules.TreeView.TreeViewNodeBuildMode.Manual)return i(!0);ct(n);n.binding!=null&&n.options.expandMode!==EVUI.Modules.TreeView.TreeViewNodeBuildMode.Rebuild?(n.bindingTemplate!=null&&(typeof n.bindingTemplate=="string"||n.binding.templateName!==n.bindingTemplate.templateName||n.bindingTemplateChanged===!0)&&n.binding.applyBindingTemplate(n.bindingTemplate),n.binding.update(n.source,function(t){return t.bindingCompletionState===EVUI.Modules.Binding.BindingCompletionState.Success||t.bindingCompletionState===EVUI.Modules.Binding.BindingCompletionState.Queued?(ht(n),n.childListBinding!=null&&EVUI.Modules.Core.Utils.isOrphanedNode(n.childListBinding.element)===!0&&n.rootElement.append(n.childListBinding.element),i(!0)):i(!1)})):(n.bindingTemplate.insertionMode=EVUI.Modules.Binding.BindingInsertionMode.Append,r.bindingController.bind(n.bindingTemplate,{bindingSource:n.source,bindingTarget:n.bindingElement},function(t){return n.binding=t,t.bindingCompletionState===EVUI.Modules.Binding.BindingCompletionState.Success||t.bindingCompletionState===EVUI.Modules.Binding.BindingCompletionState.Queued?(ht(n),n.childListBinding!=null&&EVUI.Modules.Core.Utils.isOrphanedNode(n.childListBinding.element)===!0&&n.rootElement.append(n.childListBinding.element),i(!0)):i(!1)}))},ht=function(n){var i,t;if(n!=null&&n.binding!=null){var r=d(n,EVUI.Modules.TreeView.Constants.Attr_ExpandOn),u=d(n,EVUI.Modules.TreeView.Constants.Attr_CollapseOn),f=d(n,EVUI.Modules.TreeView.Constants.Attr_ToggleOn);r===0&&u===0&&f===0&&n.options.autoToggle===!0&&(i=function(){a(n)},n.binding.element.addEventListener("click",i),t=new wt,t.element=n.binding.element,t.eventName="click",t.handler=i,n.eventBindings.push(t))}},d=function(n,t){var u,e,i,y,o,s,r,f;if(t!==EVUI.Modules.TreeView.Constants.Attr_CollapseOn&&t!==EVUI.Modules.TreeView.Constants.Attr_ExpandOn&&t!==EVUI.Modules.TreeView.Constants.Attr_ToggleOn||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0)return 0;var l=new EVUI.Modules.Dom.DomHelper(n.bindingElement,"["+t+"]"),v=0,p=l.elements.length;for(u=0;u<p;u++)if(e=l.elements[u],i=e.getAttribute(t),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i)!==!0)for(i=i.trim().split(/\s+/),y=i.length,o=0;o<y;o++)s=i[u],r=null,t===EVUI.Modules.TreeView.Constants.Attr_CollapseOn?r=function(){c(n)}:t===EVUI.Modules.TreeView.Constants.Attr_ExpandOn?r=function(){h(n)}:t===EVUI.Modules.TreeView.Constants.Attr_ToggleOn&&(r=function(){a(n)}),e.addEventListener(s,r),f=new wt,f.element=e,f.eventName=s,f.handler=r,v=n.eventBindings.push(f);return v},ct=function(n){for(var t,r=n.eventBindings.length,i=0;i<r;i++)t=n.eventBindings[i],t.element.removeEventListener(t.eventName,t.handler);n.eventBindings.splice(0,r)},tr=function(n,t,i){var o,s,h,r,c,e,a,u;if(EVUI.Modules.Core.Utils.isArray(t.source)===!0){if(o=n.nodesToDispose.length,o===0)return i();for(u=0;u<o;u++)s=n.nodesToDispose[u],f(s);return h=n.parentNodeEntry.binding.onBound,n.parentNodeEntry.binding.onBound=null,at(n.parentNodeEntry),n.parentUpdateOnly=!0,n.parentNodeEntry.binding.update(function(){n.parentNodeEntry.binding.onBound=h;i()})}if(r=n.childNodes[t.source.nodeId],r==null)return i();if(n.reBinding==!1)r.rootElement=t.getBoundContent()[0],r.bindingElement=r.rootElement.firstChild,l(r,null,function(t){t===!0&&n.nodesToDispose.push(r);i()});else{for(c=t.getBoundContent(),r.rootElement=c[0],r.bindingElement=r.rootElement.firstChild,r.binding.element=r.bindingElement,e=r.binding.getBoundContent(),a=e!=null?e.length:0,u=0;u<a;u++)r.binding.element.append(e[u]);i()}},lt=function(n,t){var i=null;return i=n.options.listElementType===EVUI.Modules.TreeView.TreeViewListElementType.Ordered?document.createElement("ol"):n.options.listElementType===EVUI.Modules.TreeView.TreeViewListElementType.Unordered?document.createElement("ul"):document.createElement("ul"),i.classList.add(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList),t===!0&&i.classList.add(EVUI.Modules.TreeView.Constants.CSS_ChildNodeList_Hidden),i},g=function(n){var t=ki(n),r=t!=null&&EVUI.Modules.Core.Utils.isArray(t)===!0,o=r===!0?t.length:0,u,i,s,e;if(n.childList==null&&r===!0)n.childList=t,n.childListObserver=new EVUI.Modules.Observers.ArrayObserver(t),n.childListChanged=!0,n.treeViewEntry.nodesChanged=!0;else{if(n.childList!=null&&(r===!1||o===0)){while(n.childNodeEntries.length>0)f(n.childNodeEntries[0]);return n.childList=null,n.childListObserver=null,n.childListChanged=!0,n.treeViewEntry.nodesChanged=!0,n.childNodeEntries}if(n.childList!=null)return ir(n,t)}for(u=EVUI.Modules.Core.Utils.shallowExtend({},n.node,["options"]),i=0;i<o;i++)s=t[i],u.source=s,e=y(u,n.treeViewEntry,n),n.childNodeEntries.push(e),n.treeViewEntry.nodes.push(e);return n.childListChanged=!0,n.treeViewEntry.nodesChanged=!0,n.childNodeEntries},at=function(n){var r,u,i,t;if(n!=null&&(r=n.childNodeEntries.length,r!==0))for(n.childListStubs.splice(0,n.childListStubs.length),u=ur(n),n.depth=u,i=0;i<r;i++)t=n.childNodeEntries[i],t.depth=u+1,t.bindingStub.depth=t.depth,t.bindingStub.nodeId=t.nodeId,t.bindingStub.ordinal=i,n.childListStubs.push(t.bindingStub)},ir=function(n,t){var h=t==null?0:t.length,c=n.childList.length,v=c>h?c:h,u=[],r,w,s,a,b,i;if(t===n.childList)u=n.childListObserver.getChanges(!0);else{for(i=0;i<v;i++)n.childList[i]=t[i];u=n.childListObserver.getChanges();n.childList=t;n.childListObserver=new EVUI.Modules.Observers.ArrayObserver(t);n.childListChanged=!0;n.treeViewEntry.nodesChanged=!0}var e=null,p=u.length,o=[],l=[];for((p>0||c!=h)&&(n.childListChanged=!0,n.treeViewEntry.nodesChanged=!0),i=0;i<p;i++)if(r=u[i],r.changeType===EVUI.Modules.Observers.ArrayChangeType.Added)e==null&&(e=EVUI.Modules.Core.Utils.shallowExtend({},n.node,["options"])),e.source=r.value,w=y(e,n.treeViewEntry,n),o[r.newIndex]=w;else if(r.changeType===EVUI.Modules.Observers.ArrayChangeType.Moved||r.changeType===EVUI.Modules.Observers.ArrayChangeType.Shifted)s=n.childNodeEntries[r.oldIndex],o[r.newIndex]=s;else if(r.changeType===EVUI.Modules.Observers.ArrayChangeType.Removed)l.push(n.childNodeEntries[r.oldIndex]);else{if(newIndex<0)continue;s=n.childNodeEntries[r.oldIndex];o[r.newIndex]=s}for(i=0;i<v;i++)a=o[i],a!=null&&(n.childNodeEntries[i]=a);for(b=l.length,i=0;i<b;i++)f(l[i]);return n.childNodeEntries},f=function(n){var r,u,o,t,i,e;if(n!=null){for(ct(n),n.binding!=null&&n.binding.dispose(),n.rootElement!=null&&n.rootElement.remove(),r=n.childNodeEntries.length,u=!1;r>0;)u=!0,r--,o=n.childNodeEntries[x],f(o);t=n.parentNodeEntry;t!=null?(i=t.childNodeEntries.indexOf(n),i!==-1&&t.childNodeEntries.splice(i,1),i=t.childListStubs.indexOf(n.bindingStub),i!==-1&&t.childListStubs.splice(i,1),t.childListChanged=!0,t.treeViewEntry.nodesChanged=!0):n.treeViewEntry.rootNode=y(n.node,n.treeViewEntry,null);e=n.treeViewEntry.nodes.indexOf(n);e!==-1&&(n.treeViewEntry.nodes.splice(e,1),n.treeViewEntry.nodesChanged=!0);u===!0&&(n.childListBinding!=null&&n.childListBinding.dispose(),n.childList=null,n.childListName=null,n.childListObserver=null,n.childListStubs=[],n.childNodeEntries=[],n.childListBinding=null,nodeEntry.childListChanged=!0,nodeEntry.treeViewEntry.nodesChanged=!0);n.binding=null;n.bindingElement=null;n.bindingStub=null;n.bindingTemplate=null;n.continuations=null;n.listElement=null;n.node=null;n.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.Disposed;n.options=null;n.operation=null;n.source=null;n.treeViewEntry=null;n.childListChanged=!0;n.optionsChanged=!0;n.bindingTemplateChanged=!0}},vt=function(n){n.rootNode!=null&&f(n.rootNode);n.element=null;n.rootListNode!=null&&(n.rootListNode.remove(),n.rootListNode=null);n.nodes.splice(0,n.nodes.length);n.nodesChanged=!0;n.treeState=EVUI.Modules.TreeView.TreeViewState.Disposed},yt=function(n,t){for(var r,u=n.nodes.length,i=0;i<u;i++)if(r=n.nodes[i],r.nodeId===t)return r;return null},y=function(n,t,i){var u=new pt,r,f,l,h,s,a,e,c;if(u.treeViewEntry=t,u.bindingTemplate=n.bindingTemplate,u.childListName=n.childListName,u.node=new EVUI.Modules.TreeView.TreeViewNode(u),u.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.None,u.parentNodeEntry=i,u.source=n.source,r=n.options,f=n.optionsMode,EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f)===!0&&(i!=null&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(i.node.optionsMode)===!1&&(f=i.node.optionsMode),EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(f)===!0&&(f=EVUI.Modules.TreeView.TreeViewOptionsShareMode.TreeShared)),f===EVUI.Modules.TreeView.TreeViewOptionsShareMode.Cloned)r==null?r=i!=null&&i.options!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.TreeView.TreeViewOptions,i.options):EVUI.Modules.TreeView.TreeViewOptions():EVUI.Modules.Core.Utils.instanceOf(r,EVUI.Modules.TreeView.TreeViewOptions)===!1&&(r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.TreeView.TreeViewOptions,r));else if(f===EVUI.Modules.TreeView.TreeViewOptionsShareMode.TreeShared){if(i==null&&t.rootNode==null)r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.TreeView.TreeViewOptions,r);else for(l=t.nodes.length,e=0;e<l;e++)if(h=t.nodes[e],h.optionsChanged===!1){r=h.options;break}}else if(f===EVUI.Modules.TreeView.TreeViewOptionsShareMode.PeerNodeShared){if(s=null,i!=null)for(a=i.childNodeEntries.length,e=0;e<a;e++)if(c=i.childNodeEntries[e],c.optionsChanged===!1){s=c;break}r=s!=null?EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.TreeView.TreeViewOptions,s.options):new EVUI.Modules.TreeView.TreeViewOptions}else r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.TreeView.TreeViewOptions,r);return r==null&&(r=new EVUI.Modules.TreeView.TreeViewOptions),u.options=r,EVUI.Modules.Core.Utils.shallowExtend(u.node,n,o.concat(["source","options"])),u},e=function(n){if(EVUI.Modules.Core.Utils.isElement(n)===!0||n!=null&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return n;if(typeof n=="string"){var t=new EVUI.Modules.Dom.DomHelper(n);if(t.elements.length>0)return t.elements[0]}return EVUI.Modules.Core.Utils.isDomHelper(n)===!0&&n.elements.length>0?n.elements[0]:document.createDocumentFragment()},rr=function(n,i){var r=new or,u;return r.primaryAction=i.action,u=i.nodeEntry.nodeState,u===EVUI.Modules.TreeView.TreeViewNodeState.None?r.actions.push(i.action):u===EVUI.Modules.TreeView.TreeViewNodeState.Building?i.action===t.Expand?(r.continueAfter=!0,r.actions.push(t.Expand)):i.action==t.Build?(r.cancelCurrent=!0,r.actions.push(t.Build)):(r.continueAfter=!0,r.actions.push(i.action)):u===EVUI.Modules.TreeView.TreeViewNodeState.Collapsed?i.action===t.Expand?r.actions.push(t.Expand):i.action===t.Collapse?r.skip=!0:r.actions.push(i.action):u===EVUI.Modules.TreeView.TreeViewNodeState.Collapsing?i.action===t.Expand?(r.cancelCurrent=!0,r.actions.push(t.Expand)):i.action===t.Collapse?r.skip=!0:i.action===t.Build?(r.continueAfter=!0,r.actions.push(t.Build)):r.actions.push(i.action):u===EVUI.Modules.TreeView.TreeViewNodeState.Expanded?i.action===t.Expand?(r.skip=!0,r.actions.push(t.Expand)):i.action===t.Collapse?r.actions.push(t.Collapse):r.actions.push(i.action):u===EVUI.Modules.TreeView.TreeViewNodeState.Expanding&&(i.action===t.Expand||i.action===t.Build?(r.continueAfter=!0,r.actions.push(t.Build)):i.action===t.Collapse?(r.cancelCurrent=!0,r.actions.push(t.Collapse)):r.actions.push(i.action)),r},ur=function(n){for(var i=0,t=n.parentNodeEntry;t!=null;)i++,t=t.parentNodeEntry;return i},fr=function(n){var i;if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)return null;var r=new RegExp(/\s+/g),u=n.trim().replace(r,function(n){return n!=""&&n.trim()===""?"-":""}),t="evui-tree-"+u;for(i in EVUI.Modules.TreeView.Constants)if(EVUI.Modules.TreeView.Constants[i]===t)throw Error(t+" is a reserved TreeView Constant.");return t},er=function(){(r==null||typeof r!="object")&&(r=new EVUI.Modules.TreeView.TreeViewControllerServices);(r.bindingController==null||typeof r.bindingController!="object")&&(r.bindingController=EVUI.Modules.Binding.Binder);(r.stylesheetManager==null||typeof r.stylesheetManager!="object")&&(r.stylesheetManager=EVUI.Modules.Styles.Manager)},or=function(){this.primaryAction=t.None;this.cancelCurrent=!1;this.skip=!1;this.continueAfter=!1;this.actions=[]},sr=function(){this.childNodes={};this.nodesToDispose=[];this.parentNodeEntry=null;this.reBinding=!1},hr=function(){this.treeView=null;this.treeViewId=null;this.rootNode=null;this.nodes=[];this.element=null;this.nodesChanged=!1;this.treeState=EVUI.Modules.TreeView.TreeViewState.None;this.className=null;this.rootListNode=null;this.build=ni;this.expand=ti;this.collapse=ii;this.dispose=ri;this.toggle=ui;this.getValidElement=e},pt=function(){this.options=new EVUI.Modules.TreeView.TreeViewOptions;this.node=null;this.nodeId=bt++;this.treeViewEntry=null;this.depth=0;this.bindingTemplate=null;this.childListName=null;this.parentNodeEntry=null;this.childNodeEntries=[];this.binding=null;this.rootElement=null;this.bindingElement=null;this.listElement=null;this.childList=null;this.childListObserver=null;this.childListBinding=null;this.childListStubs=[];this.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.None;this.previousCompletedNodeState=EVUI.Modules.TreeView.TreeViewNodeState.None;this.operation=null;this.source=null;this.bindingStub=new cr;this.continuations=[];this.eventBindings=[];this.transitionCallback=null;this.transitionTimeoutID=-1;this.transitionSelector=null;this.bindingTemplateChanged=!1;this.childListChanged=!1;this.optionsChanged=!1;this.expanded=!1;this.expandNode=h;this.collapseNode=c;this.toggleNode=a;this.buildNode=l;this.dispose=f},cr=function(){this.nodeId=-1;this.depth=-1;this.ordinal=-1},nt=function(){this.operationSession=null;this.callback=null},t={None:"none",Expand:"expand",Collapse:"collapse",Build:"build",Toggle:"toggle",Dispose:"dispose"},tt=function(){this.operationId=kt++;this.isContinuation=!1;this.callback=null;this.action=t.None;this.nodeEntry=null;this.eventStream=null;this.buildArgs=null;this.expandCollapseArgs=null;this.canceled=!1;this.continuation=null;this.callbackStack=[];this.context={}},wt=function(){this.handler=null;this.element=null;this.eventName=null};er();wi()};EVUI.Modules.TreeView.TreeView=function(n){if(n==null)throw Error("Object expected.");var i=this,t=n;this.id=null;Object.defineProperty(this,"id",{get:function(){return t.treeViewId},configurable:!1,enumerable:!0});this.element=null;Object.defineProperty(this,"element",{get:function(){return t.element},set:function(n){if(n==null){t.element=null;return}t.element=t.getValidElement(n)},configurable:!1,enumerable:!0});this.rootListElement=null;Object.defineProperty(this,"rootListElement",{get:function(){return t.rootListElement},configurable:!1,enumerable:!0});this.rootNode=null;Object.defineProperty(this,"rootNode",{get:function(){return t.rootNode!=null?t.rootNode.node:null},configurable:!1,enumerable:!0});this.getNodes=function(){var r=[],u=t.nodes.length,n;for(r.push(i.rootNode),n=0;n<u;n++)r.push(t.nodes[n].node);return r};this.expandNode=function(n,i,r){t.expand(t,n,i,r)};this.collapseNode=function(n,i,r){t.collapse(t,n,i,r)};this.buildNode=function(n,i,r){t.build(t,n,i,r)};this.toggleNode=function(n,i,r){t.toggle(t,n,i,r)};this.expandNodeAsync=function(n,t){return new Promise(function(r){i.expandNode(n,t,function(){r()})})};this.collapseNodeAsync=function(n,t){return new Promise(function(r){i.collapseNode(n,t,function(){r()})})};this.buildNodeAsync=function(n,t){return new Promise(function(r){i.buildNode(n,t,function(){r()})})};this.toggleNodeAsync=function(n,t){return new Promise(function(r){i.toggleNode(n,t,function(){r()})})};this.disposeNode=function(t){n.dispose(n,t)};this.build=function(t,i){n.build(n,n.rootNode,t,i)};this.buildAsync=function(n){return new Promise(function(t){return i.build(n,function(){t()})})};this.dispose=function(){n.dispose(n,null)};this.onExpand=null;this.onExpanded=null;this.onBuild=null;this.onBuildChildren=null;this.onChildrenBuilt=null;this.onBuilt=null;this.onCollapse=null;this.onCollapsed=null};EVUI.Modules.TreeView.TreeView.prototype.expandAll=function(n,t){var i,e;typeof n=="function"&&(t=n,n=null);typeof t!="function"&&(t=function(){});var r=0,u=this.getNodes(),f=u.length;for(i=0;i<f;i++)e=u[i],e.expand(n,function(){r++;r===f&&t()})};EVUI.Modules.TreeView.TreeView.prototype.expandAllAsync=function(n){return new Promise(function(t){this.expandAll(n,function(){t()})})};EVUI.Modules.TreeView.TreeView.prototype.collapseAll=function(n,t){var i,e;typeof n=="function"&&(t=n,n=null);typeof t!="function"&&(t=function(){});var r=0,u=this.getNodes(),f=u.length;for(i=0;i<f;i++)e=u[i],e.collapse(n,function(){r++;r===f&&t()})};EVUI.Modules.TreeView.TreeView.prototype.collapseAllAsync=function(n){return new Promise(function(t){this.collapseAll(n,function(){t()})})};EVUI.Modules.TreeView.TreeView.prototype.getNode=function(n,t){for(var r,e,i=null,f=this.getNodes(),o=typeof n=="function",s=f.length,u=0;u<s;u++)if(r=f[u],o===!0){if(e=n(r),e===!0)if(t===!0)i==null&&(i=[]),i.push(r);else{i=r;break}}else if(r.id===n)if(t===!0)i==null&&(i=[]),i.push(r);else{i=r;break}return i};EVUI.Modules.TreeView.TreeViewNode=function(n){if(n==null)throw Error("Object expected.");var t=n,i=this;this.id=null;Object.defineProperty(this,"id",{get:function(){return t.nodeId},enumerable:!0,configurable:!1});this.element=null;Object.defineProperty(this,"element",{get:function(){return t.rootElement},enumerable:!0,configurable:!1});this.source=null;Object.defineProperty(this,"source",{get:function(){return t.source},set:function(n){if(n!=null&&typeof n!="object")throw Error("source must be an object.");t.source=n},enumerable:!0,configurable:!1});this.bindingTemplate=null;Object.defineProperty(this,"bindingTemplate",{get:function(){return t.bindingTemplate},set:function(n){t.bindingTemplate=n},configurable:!1,enumerable:!0});this.childListName=null;this.parentNode=null;Object.defineProperty(this,"parentNode",{get:function(){return t.parentNode==null?null:t.parentNode.node},configurable:!1,enumerable:!0});this.treeView=null;Object.defineProperty(this,"treeView",{get:function(){return t.treeViewEntry.treeView},configurable:!1,enumerable:!0});this.depth=0;Object.defineProperty(this,"depth",{get:function(){return t.depth},configurable:!1,enumerable:!0});this.options=null;Object.defineProperty(this,"options",{get:function(){return t.options},set:function(n){if(n==null||typeof n!="object")throw Error("options must be an object.");t.options=EVUI.Modules.Core.Utils.instanceOf(n,EVUI.Modules.TreeView.TreeViewOptions)===!1?EVUI.Modules.Core.Utils.shallowExtend(n,new EVUI.Modules.TreeView.TreeViewOptions):n;t.optionsChanged=!0},configurable:!1,enumerable:!0});this.optionsMode=EVUI.Modules.TreeView.TreeViewOptionsShareMode.TreeShared;this.nodeState=EVUI.Modules.TreeView.TreeViewNodeState.None;Object.defineProperty(this,"nodeState",{get:function(){return t.nodeState},configurable:!1,enumerable:!0});this.expanded=!1;Object.defineProperty(this,"expanded",{get:function(){return t.expanded},configurable:!1,enumerable:!0});this.isVisible=!1;Object.defineProperty(this,"isVisible",{get:function(){if(t.rootElement==null)return!1;var n=t.parentNodeEntry;if(n==null)return t.options.noTopNode===!0?!1:!0;while(n!=null){if(n.expanded===!1)return!1;n=n.parentNodeEntry}return!0},configurable:!1,enumerable:!0});this.getChildNodes=function(){for(var i=[],r=t.childNodeEntries.length,n=0;n<r;n++)i.push(t.childNodeEntries[n].node);return i};this.expand=function(n,i){return t.expandNode(t,n,i)};this.expandAsync=function(n){return new Promise(function(t){return i.expand(n,function(){t()})})};this.collapse=function(n,i){return t.collapseNode(t,n,i)};this.collapseAsync=function(n){return new Promise(function(t){i.collapse(n,function(){t()})})};this.build=function(n,i){return t.buildNode(t,n,i)};this.buildAsync=function(n){return new Promise(function(t){i.build(n,function(){t()})})};this.onExpand=null;this.onExpanded=null;this.onBuild=null;this.onBuildChildren=null;this.onChildrenBuilt=null;this.onBuilt=null;this.onCollapse=null;this.onCollapsed=null};EVUI.Modules.TreeView.TreeViewOptions=function(){this.listElementType=EVUI.Modules.TreeView.TreeViewListElementType.Unordered;this.bindingType=EVUI.Modules.TreeView.TreeViewListBindingType.ListBound;this.expandTransition=null;this.collapseTransition=null;this.lazy=!0;this.expandMode=EVUI.Modules.TreeView.TreeViewNodeBuildMode.Update;this.noTopNode=!1;this.autoToggle=!0};EVUI.Modules.TreeView.AddTreeViewArgs=function(){this.id=null;this.element=null;this.bindingTemplate=null;this.source=null;this.childListName=null;this.options=null;this.optionsMode=EVUI.Modules.TreeView.TreeViewOptionsShareMode.TreeShared;this.onExpand=null;this.onExpanded=null;this.onBuild=null;this.onBuildChildren=null;this.onChildrenBuilt=null;this.onBuilt=null;this.onCollapse=null;this.onCollapsed=null};EVUI.Modules.TreeView.AddTreeViewNodeArgs=function(){this.bindingTemplate=null;this.source=null;this.childListName=null;this.options=null;this.optionsMode=EVUI.Modules.TreeView.TreeViewOptionsShareMode.TreeShared;this.onExpand=null;this.onExpanded=null;this.onBuild=null;this.onBuildChildren=null;this.onChildrenBuilt=null;this.onBuilt=null;this.onCollapse=null;this.onCollapsed=null};EVUI.Modules.TreeView.BuildTreeViewNodeArgs=function(){this.bindingTemplate=null;this.source=null;this.childListName=null;this.buildMode=EVUI.Modules.TreeView.TreeViewNodeBuildMode.Update;this.options=null;this.optionsMode=EVUI.Modules.TreeView.TreeViewOptionsShareMode.TreeShared;this.recursive=!1;this.context={}};EVUI.Modules.TreeView.ExpandCollapseTreeViewNodeArgs=function(){this.recursive=!1;this.transition=null;this.buildArgs=null;this.context={}};EVUI.Modules.TreeView.TreeViewNodeTransition=function(){this.css=null;this.keyframes=null;this.duration=0};EVUI.Modules.TreeView.TreeViewEventArgs=function(n){var t=n;this.treeView=null;Object.defineProperty(this,"treeView",{get:function(){return t.treeViewEntry.treeView},configurable:!1,enumerable:!0});this.node=null;Object.defineProperty(this,"node",{get:function(){return t.node},configurable:!1,enumerable:!0});this.key=null;this.pause=function(){};this.resume=function(){};this.cancel=function(){};this.stopPropagation=function(){};this.context={}};EVUI.Modules.TreeView.TreeViewControllerServices=function(){this.bindingController=null;this.stylesheetManager=null};EVUI.Modules.TreeView.TreeViewListElementType={Unordered:"ul",Ordered:"ol"};Object.freeze(EVUI.Modules.TreeView.TreeViewListElementType);EVUI.Modules.TreeView.TreeViewListBindingType={ListBound:"bound"};Object.freeze(EVUI.Modules.TreeView.TreeViewListBindingType);EVUI.Modules.TreeView.TreeViewNodeBuildMode={Manual:"manual",Rebuild:"rebuild",Update:"update"};Object.freeze(EVUI.Modules.TreeView.TreeViewNodeBuildMode);EVUI.Modules.TreeView.TreeViewOptionsShareMode={TreeShared:"tree",PeerNodeShared:"peers",Cloned:"cloned"};Object.freeze(EVUI.Modules.TreeView.TreeViewOptionsShareMode);EVUI.Modules.TreeView.TreeViewNodeState={None:"none",Collapsed:"collapsed",Collapsing:"collapsing",Expanded:"expanded",Expanding:"expanding",Building:"building",Disposed:"disposed"};Object.freeze(EVUI.Modules.TreeView.TreeViewNodeState);EVUI.Modules.TreeView.TreeViewState={None:"none",Ready:"ready",Disposed:"disposed"};Object.freeze(EVUI.Modules.TreeView.TreeViewState);EVUI.Modules.TreeView.Manager=null,function(){var n=null,t=EVUI.Modules.TreeView.TreeViewController;Object.defineProperty(EVUI.Modules.TreeView,"Manager",{get:function(){return n==null&&(n=new t),n},configurable:!1,enumerable:!0})}();delete $evui.treeViews;$evui.treeViews=null;Object.defineProperty($evui,"treeViews",{get:function(){return EVUI.Modules.TreeView.Manager}});$evui.addTreeView=function(n,t){return EVUI.Modules.TreeView.Manager.addTreeView(n,t)};$evui.getTreeView=function(n,t){return EVUI.Modules.TreeView.Manager.getTreeView(n,t)};$evui.removeTreeView=function(n,t){return EVUI.Modules.TreeView.Manager.removeTreeView(n,t)};EVUI.Modules.UIHandler={};EVUI.Modules.UIHandler.Dependencies={Core:Object.freeze({version:"1.0",required:!0})},function(){var n=!1;Object.defineProperty(EVUI.Modules.UIHandler.Dependencies,"checked",{get:function(){return n},set:function(t){typeof t=="boolean"&&(n=t)},configurable:!1,enumberable:!0})}();Object.freeze(EVUI.Modules.UIHandler.Dependencies);EVUI.Modules.UIHandler.Constants={};EVUI.Modules.UIHandler.Constants.Fn_Handle=function(){};Object.freeze(EVUI.Modules.UIHandler.Constants);EVUI.Modules.UIHandler.UIHandlerManager=function(){if(EVUI.Modules.Core==null)throw Error("Dependency missing: EVUI.Modules.Core is required.");EVUI.Modules.Core.Utils.requireAll(EVUI.Modules.UIHandler.Dependencies);var t=this,n={};this.addHandler=function(t,i){var r=null,u;if(t==null)throw Error("Invalid input, object or string expected.");if(typeof t=="object")r=EVUI.Modules.Core.Utils.shallowExtend(new EVUI.Modules.UIHandler.UIHandle(t.key,t.handle),t,["key","handle"]);else if(typeof t=="string"&&EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!1)r=new EVUI.Modules.UIHandler.UIHandle(t,i);else throw Error("Invalid input, object or string expected.");if(u=this.getHandler(r.key),u!=null)throw Error('A UIHandle with the name "'+r.key+'" already exists.');n[r.key]=r};this.removeHandler=function(t){var i,r;return EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(t)===!0?!1:(i=this.getHandler(t),i==null)?!1:(r=n.indexOf(i),r!==-1&&n.splice(r,1),!0)};this.onHandle=function(){};this.handle=function(n,i,r){var c=null,o=null,u=null,f,s,e;if(typeof n!="string"||EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw Error("Invalid input, no handler name provided.");if(o=n,i!=null?i instanceof Event?(c=i,r!=null&&(u=r)):u=i:r!=null&&(u=r),f=this.getHandler(o),f==null)throw Error('No handler present for event "'+n+'"');s=!1;e=new EVUI.Modules.UIHandler.UIHandlerEventArgs(o,c);e.data=u;e.cancel=function(){s=!0};var l=function(n){if(typeof t.onHandle=="function")return t.onHandle(n)},a=function(n){if(typeof f.handler=="function"&&s===!1)return f.handler(n)},h=new EVUI.Modules.Core.AsyncSequenceExecutionArgs;h.functions=[l,a];h.parameter=e;EVUI.Modules.Core.AsyncSequenceExecutor.execute(h,function(n){if(n instanceof Error)throw n;})};this.getHandler=function(t){return n[t]}};EVUI.Modules.UIHandler.UIHandle=function(n,t){if(EVUI.Modules.Core.Utils.stringIsNullOrWhitespace(n)===!0)throw new Error("key must be a valid string with at least one non-whitespace character.");if(t!=null&&typeof t!="function")throw new Error("handler must be a function.");var i=n,r=typeof t=="function"?t:null;this.key=null;Object.defineProperty(this,"key",{get:function(){return i},configurable:!1,enumerable:!0});this.handler=null;Object.defineProperty(this,"handler",{get:function(){return r},set:function(n){if(n!=null&&typeof n!="function")throw Error("handler must be a function.");},configurable:!1,enumerable:!0})};EVUI.Modules.UIHandler.UIHandlerEventArgs=function(n,t){var f=n,i=t,r=null,u=null;this.key=null;Object.defineProperty(this,"key",{get:function(){return f},configurable:!1,enumerable:!0});this.eventArgs=null;Object.defineProperty(this,"eventArgs",{get:function(){return i},configurable:!1,enumerable:!0});this.data=null;this.currentTargetAttributes=null;Object.defineProperty(this,"currentTargetAttributes",{get:function(){return r==null&&i.currentTarget!=null&&(r=EVUI.Modules.Core.Utils.getElementAttributes(i.currentTarget)),r},enumerable:!0,configurable:!1});this.targetAttributes=null;Object.defineProperty(this,"targetAttributes",{get:function(){return u==null&&i.target!=null&&(u=EVUI.Modules.Core.Utils.getElementAttributes(i.target)),u},enumerable:!0,configurable:!1});this.cancel=function(){}};EVUI.Modules.UIHandler.Manager=null,function(){var t=EVUI.Modules.UIHandler.UIHandlerManager,n=null;Object.defineProperty(EVUI.Modules.UIHandler,"Manager",{get:function(){return n==null&&(n=new t),n},configurable:!1,enumberable:!0})}();delete $evui.uiHandler;$evui.uiHandler=null;Object.defineProperty($evui,"uiHandler",{get:function(){return EVUI.Modules.UIHandler.Manager},enumerable:!0});$evui.handle=function(n,t,i){return EVUI.Modules.UIHandler.Manager.handle(n,t,i)};$evui.addUIHandler=function(n,t){return EVUI.Modules.UIHandler.Manager.addHandler(n,t)};$evui.removeUIHandler=function(n){return EVUI.Modules.UIHandler.Manager.removeHandler(n)};Object.freeze(EVUI.Modules.UIHandler)